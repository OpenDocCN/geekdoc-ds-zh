# 注意

# 注意

通知机制基本上允许在设置器中注入代码。

本地模型，还是一个全局模型？

视图应能够查询或通知控制器执行动作（将要、应该、已经）：委托

比较 OSX 绑定与 MVVM？相同的东西？FIXME：与苹果的关系，在那里视图被替换为子控制器？

所有层内通信只能通过控制器-控制器连接路由。这种连接是双向的。

遵循 GUI 嵌套的分层组成。模型可以是相同的。实践中，上述方案可以通过假定给定的层次结构与相同的模型交谈来简化。在 J2EE 中，这种方法也被称为组合视图。[11] [一个具有真实小部件的层次结构示例的图片]

保持网络简单且紧密。

通知的顺序可能对程序状态产生意想不到的影响。

保持你的视图能够处理缺失的模型或无效的数据。

-

FIXME: 可插拔的视图被过载为一个术语。详细信息。

自然地向更具声明性的风格演变

将你的模型定义为具有原子操作，小心处理不受控制的通知。

如果一个通知是另一个通知的子集，会出现双重通知问题。例如，contentChanged/lineMetaChanged 和 contentChanged/lineAdded。如何处理双重通知？在信号中传递一个“事件 id”，这样客户端就会意识到它是传递了两条消息的相同变化。

FIXME: MVC 通知总是被认为是同步的。它们直接调用方法并等待它们返回。

典型的应用程序启动情况，会创建一个通信网络。事件循环接管，在主线程中。每当有事件发生时，事件循环都会分发该事件。这反过来触发了遵循静态网络和动态网络的变化，通过直接调用或间接（通知）调用。在整个级联过程中，应用程序都会冻结，直到控制返回到事件循环。

区分通知（使用观察者模式进行同步调用的）和事件（通过事件循环分派的）之间的区别。

使用[GLOSSARY.html]信号，您可能需要调整您的模型发出的信号以满足您的视图的特定需求。一个粗粒度的信号，强制视图进行大量刷新，可能更好地分割成一个针对实际影响视图的模型区域的单独信号。在实践中，模型通信模式可能需要根据视图的实现细节进行调整，以确保响应性。

例如，如果您有一个显示文档中行数的视图，订阅 contentChanged 信号可能需要在每次插入字符时重新计算行数。提供一个 lineNumberChanged 信号可能是有意义的，这样行号显示仅在模型实际更改总行数时更新。

一些工具包和库允许您动态定义网络。其他允许您静态定义网络。网络无法更改。

如何处理空值。

### 实际示例：监控文件内容

代表文件内容的模型无法触发任何通知，如果来自外部源的更改在文件中进行。 ^(1) 模型可以被实现为控制器偶尔请求（例如使用定时器）来验证是否发生了更改。当发现这样的更改时，控制器可以采取行动更新视图。或者，模型可以向监听视图执行通知，就像在活动模型中一样。

+   或者通过拥有一个使用次要线程来监视文件中的更改，并在发现这些更改时发出通知的活动模型来处理。

除非适当的实现处理。

^(1) 在[](GLOSSARY.html)这个[](GLOSSARY.html)讨论中，我们[](GLOSSARY.html)忽略了[](GLOSSARY.html)在[](GLOSSARY.html)阅读[](GLOSSARY.html)一个可能[](GLOSSARY.html)不完整的文件时获得一致状态的问题。
