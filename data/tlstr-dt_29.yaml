- en: 15  Causality from observational data
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 15  从观察数据中推断因果关系
- en: 原文：[https://tellingstorieswithdata.com/14-causality_from_obs.html](https://tellingstorieswithdata.com/14-causality_from_obs.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://tellingstorieswithdata.com/14-causality_from_obs.html](https://tellingstorieswithdata.com/14-causality_from_obs.html)
- en: '[Applications](./14-causality_from_obs.html)'
  id: totrans-2
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[应用](./14-causality_from_obs.html)'
- en: '[15  Causality from observational data](./14-causality_from_obs.html)'
  id: totrans-3
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[15  从观察数据中推断因果关系](./14-causality_from_obs.html)'
- en: '**Prerequisites**'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '**先决条件**'
- en: Read *Causal design patterns for data analysts*, ([Riederer 2021](99-references.html#ref-riedererdesignpatterns))
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读关于数据分析师的因果设计模式的 *Causal design patterns for data analysts*，([Riederer 2021](99-references.html#ref-riedererdesignpatterns))
- en: This blog post provides an overview of different approaches for making causal
    claims from observational data.
  id: totrans-6
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这篇博客文章概述了从观察数据中做出因果推断的不同方法。
- en: Read *BNT162b2 mRNA Covid-19 Vaccine in a Nationwide Mass Vaccination Setting*,
    ([Dagan et al. 2021](99-references.html#ref-dagan2021bnt162b2))
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读关于在全民大规模疫苗接种环境中使用 *BNT162b2 mRNA Covid-19 Vaccine* 的研究，([Dagan et al. 2021](99-references.html#ref-dagan2021bnt162b2))
- en: This paper compares causal conclusions drawn from observational data with those
    of a randomized trial.
  id: totrans-8
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这篇论文比较了从观察数据中得出的因果结论与随机试验中的结论。
- en: 'Read *The Effect: An Introduction to Research Design and Causality*, ([Huntington-Klein
    2021](99-references.html#ref-theeffect))'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '阅读关于研究设计和因果关系的入门书籍 *The Effect: An Introduction to Research Design and Causality*，([Huntington-Klein
    2021](99-references.html#ref-theeffect))'
- en: Focus on Chapters 18 “Difference-in-Differences”, 19 “Instrumental Variables”,
    and 20 “Regression Discontinuity”, which provide an overview of three key approaches
    for making causal claims from observational data.
  id: totrans-10
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重点关注第18章“双重差分”，第19章“工具变量”和第20章“回归不连续性”，这些章节提供了从观察数据中做出因果推断的三个关键方法的概述。
- en: Read *Understanding regression discontinuity designs as observational studies*,
    ([Sekhon and Titiunik 2017](99-references.html#ref-sekhon2017understanding))
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读关于将回归不连续性设计视为观察研究的 *Understanding regression discontinuity designs as observational
    studies*，([Sekhon and Titiunik 2017](99-references.html#ref-sekhon2017understanding))
- en: Discusses some concerns with the use of regression discontinuity.
  id: totrans-12
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 讨论了使用回归不连续性的一些担忧。
- en: '**Key concepts and skills**'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念和技能**'
- en: Running an experiment is not always possible, but we can use various approaches
    to nonetheless be able to speak to causality to some extent.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 进行实验并不总是可能的，但我们可以使用各种方法，从而在一定程度上探讨因果关系。
- en: We need to be careful of common paradoxes including Simpson’s paradox and Berkson’s
    paradox, and be aware of both the potential and pitfalls of matching.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们需要小心常见的悖论，包括辛普森悖论和伯克森悖论，并意识到匹配的潜在优势和陷阱。
- en: We can use difference-in-differences when we have data on both treated and untreated
    units at both time periods. Regression discontinuity is useful when a group is
    either treated or not, but the two groups are very similar apart from the treatment.
    And instrumental variables is an approach used to estimate causality indirectly
    through another variable.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当我们拥有两个时期内处理组和未处理组的数据时，我们可以使用双重差分。当一组要么被处理要么未被处理，但除了处理之外两组非常相似时，回归不连续性是有用的。工具变量是一种通过另一个变量间接估计因果关系的途径。
- en: In general, these approaches need to be used with humility and concern for weaknesses
    and assumptions, both those that we can test and those that we cannot.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通常，这些方法需要我们谦逊地使用，并关注弱点及假设，包括我们可以测试的和那些我们不能测试的。
- en: '**Software and packages**'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '**软件和包**'
- en: Base R ([R Core Team 2024](99-references.html#ref-citeR))
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Base R ([R Core Team 2024](99-references.html#ref-citeR))
- en: '`broom` ([Robinson, Hayes, and Couch 2022](99-references.html#ref-broom))'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`broom` ([Robinson, Hayes, and Couch 2022](99-references.html#ref-broom))'
- en: '`broom.mixed` ([Bolker and Robinson 2022](99-references.html#ref-mixedbroom))'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`broom.mixed` ([Bolker and Robinson 2022](99-references.html#ref-mixedbroom))'
- en: '`estimatr` ([Blair et al. 2021](99-references.html#ref-estimatr))'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`estimatr` ([Blair et al. 2021](99-references.html#ref-estimatr))'
- en: '`haven` ([Wickham, Miller, and Smith 2023](99-references.html#ref-citehaven))'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`haven` ([Wickham, Miller, and Smith 2023](99-references.html#ref-citehaven))'
- en: '`MatchIt` ([Ho et al. 2011](99-references.html#ref-MatchIt))'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`MatchIt` ([Ho et al. 2011](99-references.html#ref-MatchIt))'
- en: '`modelsummary` ([Arel-Bundock 2022](99-references.html#ref-citemodelsummary))'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`modelsummary` ([Arel-Bundock 2022](99-references.html#ref-citemodelsummary))'
- en: '`palmerpenguins` ([Horst, Presmanes Hill, and Gorman 2020](99-references.html#ref-palmerpenguins))'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`palmerpenguins` ([Horst, Presmanes Hill, and Gorman 2020](99-references.html#ref-palmerpenguins))'
- en: '`rdrobust` ([Calonico et al. 2021](99-references.html#ref-rdrobust))'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rdrobust` ([Calonico et al. 2021](99-references.html#ref-rdrobust))'
- en: '`rstanarm` ([Goodrich et al. 2023](99-references.html#ref-citerstanarm))'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rstanarm` ([Goodrich et al. 2023](99-references.html#ref-citerstanarm))'
- en: '`scales` ([Wickham and Seidel 2022](99-references.html#ref-scales))'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`scales` ([Wickham and Seidel 2022](99-references.html#ref-scales))'
- en: '`tidyverse` ([Wickham et al. 2019](99-references.html#ref-tidyverse))'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tidyverse` ([Wickham et al. 2019](99-references.html#ref-tidyverse))'
- en: '`tinytable` ([Arel-Bundock 2024](99-references.html#ref-tinytable))'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tinytable` ([Arel-Bundock 2024](99-references.html#ref-tinytable))'
- en: '[PRE0]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '*## 15.1 Introduction'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '*## 15.1 简介'
- en: Life is grand when we can conduct experiments to be able to speak to causality.
    But there are circumstances in which we cannot run an experiment, yet nonetheless
    want to be able to make causal claims. And data from outside experiments have
    value that experiments do not have. In this chapter we discuss the circumstances
    and methods that allow us to speak to causality using observational data. We use
    relatively simple methods, in sophisticated ways, drawing from statistics, but
    also a variety of social sciences, including economics and political science,
    as well as epidemiology.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们能够进行实验来探讨因果关系时，生活是伟大的。但有些情况下，我们无法进行实验，然而我们仍然希望能够做出因果推断。外部实验的数据具有实验所不具备的价值。在本章中，我们讨论了允许我们使用观察数据来探讨因果关系的情境和方法。我们使用相对简单的方法，以复杂的方式，从统计学中汲取，同时也借鉴了包括经济学、政治学以及流行病学在内的多种社会科学。
- en: For instance, Dagan et al. ([2021](99-references.html#ref-dagan2021bnt162b2))
    use observational data to confirm the effectiveness of the Pfizer-BioNTech vaccine.
    They discuss how one concern with using observational data in this way is confounding,
    which is where we are concerned that there is some variable that affects both
    the predictor and outcome variables and can lead to spurious relationships. Dagan
    et al. ([2021](99-references.html#ref-dagan2021bnt162b2)) adjust for this by first
    making a list of potential confounders, such as age, sex, geographic location,
    and healthcare usage and then adjusting for each of them, by matching one-to-one
    between people that were vaccinated and those that were not. The experimental
    data guided the use of observational data, and the larger size of the latter enabled
    a focus on specific age-groups and extent of disease.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，Dagan等人（[2021](99-references.html#ref-dagan2021bnt162b2)）使用观察数据来证实辉瑞-生物科技疫苗的有效性。他们讨论了使用观察数据时可能存在的一个问题是混杂，即我们担心存在某些变量同时影响预测变量和结果变量，并可能导致虚假的关系。Dagan等人（[2021](99-references.html#ref-dagan2021bnt162b2)）通过首先列出潜在的混杂因素，如年龄、性别、地理位置和医疗使用情况，然后通过匹配接种疫苗和未接种疫苗的人进行一对一调整来解决这个问题。实验数据指导了观察数据的使用，而后者更大的规模使得可以专注于特定的年龄组和疾病程度。
- en: 'This chapter is about using observational data in sophisticated ways. How we
    can nonetheless be comfortable making causal statements, even when we cannot run
    A/B tests or RCTs. Indeed, in what circumstances may we prefer to not run those
    or to run observational-based approaches in addition to them. We cover three of
    the major methods: difference-in-differences, regression discontinuity, and instrumental
    variables.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 本章是关于以复杂方式使用观察数据的。我们如何在无法进行A/B测试或随机对照试验的情况下仍然感到舒适地做出因果陈述。实际上，在什么情况下我们可能更愿意不进行这些测试，或者除了它们之外还进行基于观察的方法。我们涵盖了三种主要方法：双重差分法、回归间断法和工具变量法。
- en: 15.2 Two common paradoxes
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 15.2 两种常见的悖论
- en: 'There are two situations where data can trick us that are so common that we
    will explicitly go through them. These are:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 有两种情况，数据可能会欺骗我们，它们如此普遍，以至于我们将明确地讨论它们。这些是：
- en: Simpson’s paradox, and
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 辛普森悖论，
- en: Berkson’s paradox.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 伯克森悖论。
- en: 15.2.1 Simpson’s paradox
  id: totrans-41
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 15.2.1 辛普森悖论
- en: Simpson’s paradox occurs when we estimate some relationship for subsets of our
    data, but a different relationship when we consider the entire dataset ([Simpson
    1951](99-references.html#ref-simpson1951interpretation)). It is a particular case
    of the ecological fallacy, which is when we try to make claims about individuals,
    based on their group. For instance, it may be that there is a positive relationship
    between undergraduate grades and performance in graduate school in two departments
    when considering each department individually. But if undergraduate grades tended
    to be higher in one department than another while graduate school performance
    tended to be opposite, we may find a negative relationship between undergraduate
    grades and performance in graduate school. We can simulate some data to show this
    more clearly ([Figure 15.1](#fig-simpsonsparadox)).
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们估计数据子集的一些关系时，但当我们考虑整个数据集时却出现不同的关系时，就发生了Simpson悖论([Simpson 1951](99-references.html#ref-simpson1951interpretation))。它是生态谬误的一个特例，即当我们试图根据他们的群体对个体做出断言时。例如，当单独考虑每个部门时，两个部门之间本科成绩和研究生表现之间可能存在正相关关系。但如果本科成绩在一个部门中普遍高于另一个部门，而研究生表现则相反，我们可能会发现本科成绩和研究生表现之间存在负相关关系。我们可以通过模拟一些数据来更清楚地展示这一点([图15.1](#fig-simpsonsparadox)))。
- en: '[PRE1]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '*[PRE2]*  *[PRE3]'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE2]*  *[PRE3]'
- en: '*![](../Images/d54a1978d5b766d99381a0fcd385d3a4.png)'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '*![图片](../Images/d54a1978d5b766d99381a0fcd385d3a4.png)'
- en: 'Figure 15.1: Illustration of simulated data that shows Simpson’s paradox*  *Simpson’s
    paradox is often illustrated using real-world data from University of California,
    Berkeley, on graduate admissions ([Bickel, Hammel, and O’Connell 1975](99-references.html#ref-bickel1975sex)).
    This paper was mentioned in [Chapter 4](04-writing_research.html) as having one
    of the greatest sub-titles ever published. Hernán, Clayton, and Keiding ([2011](99-references.html#ref-Hernn2011))
    create DAGs that further illuminate the relationship and the cause of the paradox.'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.1：展示模拟数据的Simpson悖论*  *Simpson悖论通常使用加州大学伯克利分校的真实世界数据来展示，这些数据是关于研究生录取的([Bickel,
    Hammel, and O’Connell 1975](99-references.html#ref-bickel1975sex))。这篇论文在[第4章](04-writing_research.html)中被提及，拥有史上最伟大的副标题之一。Hernán,
    Clayton, 和 Keiding ([2011](99-references.html#ref-Hernn2011)) 创建了DAGs，进一步阐明了悖论的关系和原因。
- en: More recently, as mentioned in its documentation, the “penguins” dataset from
    `palmerpenguins` provides an example of Simpson’s paradox, using real-world data
    on the relationship between body mass and bill depth in different species of penguins
    ([Figure 15.2](#fig-simpsonsparadoxinpenguins)). The overall negative trend occurs
    because Gentoo penguins tend to be heavier but with shorter bills compared to
    Adelie and Chinstrap penguins.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 最近，正如其文档中提到的，“penguins”数据集来自`palmerpenguins`，它提供了一个Simpson悖论的例子，使用真实世界数据展示了不同企鹅物种之间身体质量和喙深度的关系([图15.2](#fig-simpsonsparadoxinpenguins))。整体呈现的负趋势是因为Gentoo企鹅通常比Adelie和Chinstrap企鹅重，但喙较短。
- en: '[PRE4]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '*![](../Images/6f4f2f58ba1b5bf62ed1877339955eb4.png)'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '*![图片](../Images/6f4f2f58ba1b5bf62ed1877339955eb4.png)'
- en: 'Figure 15.2: Illustration of Simpson’s paradox in a dataset of penguin bill
    depth compared with their body mass***  ***### 15.2.2 Berkson’s paradox'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.2：展示企鹅喙深度数据集与身体质量关系的Simpson悖论***  ***### 15.2.2 Berkson悖论
- en: Berkson’s paradox occurs when we estimate some relationship based on the dataset
    that we have, but because the dataset is so selected, the relationship is different
    in a more general dataset ([Berkson 1946](99-references.html#ref-citeberkson)).
    For instance, if we have a dataset of professional cyclists then we might find
    there is no relationship between their VO2 max and their chance of winning a bike
    race ([Coyle et al. 1988](99-references.html#ref-vomaxpaper); [Podlogar, Leo,
    and Spragg 2022](99-references.html#ref-anothernicevomaxpaper)). But if we had
    a dataset of the general population then we might find a relationship between
    these two variables. The professional dataset has just been so selected that the
    relationship disappears; one cannot become a professional cyclist unless one has
    a good enough VO2 max, but among professional cyclists everyone has a good enough
    VO2 max. Again, we can simulate some data to show this more clearly ([Figure 15.3](#fig-berksonsparadox)).
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们基于我们所拥有的数据集估计某种关系时，伯克森悖论就会发生，因为数据集的选取方式使得这种关系在更一般的数据集中有所不同 ([Berkson 1946](99-references.html#ref-citeberkson)).
    例如，如果我们有一个职业自行车手的数据库，我们可能会发现他们的最大摄氧量（VO2 max）和赢得自行车比赛的机会之间没有关系 ([Coyle et al.
    1988](99-references.html#ref-vomaxpaper); [Podlogar, Leo, and Spragg 2022](99-references.html#ref-anothernicevomaxpaper)).
    但如果我们有一个普通人群的数据库，我们可能会发现这两个变量之间存在关系。专业数据库的选取方式使得这种关系消失了；一个人如果不能有足够的最大摄氧量，就不能成为职业自行车手，但在职业自行车手中，每个人都有足够的最大摄氧量。再次，我们可以模拟一些数据来更清楚地展示这一点
    ([图15.3](#fig-berksonsparadox))。
- en: '[PRE5]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '*[PRE6]'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE6]*'
- en: '*![](../Images/94dfef3b9700904fd16ea3577bf25aef.png)'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '*![图片](../Images/94dfef3b9700904fd16ea3577bf25aef.png)*'
- en: 'Figure 15.3: Illustration of simulated data that shows Berkson’s paradox*****  ***##
    15.3 Difference-in-differences'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.3：模拟数据的示意图，展示了伯克森悖论*****  ***## 15.3 差分-差分法
- en: The ideal situation of being able to conduct an experiment is rarely possible.
    Can we reasonably expect that Netflix would allow us to change prices? And even
    if they did once, would they let us do it again, and again, and again? Further,
    rarely can we explicitly create treatment and control groups. Finally, experiments
    can be expensive or unethical. Instead, we need to make do with what we have.
    Rather than our counterfactual coming to us through randomization, and hence us
    knowing that the two are the same but for the treatment, we try to identify groups
    that were similar but for the treatment, and hence any differences can be attributed
    to the treatment.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 能够进行实验的理想情况很少可能实现。我们能否合理地期望Netflix会允许我们改变价格？即使他们曾经这样做过，他们是否还会让我们再次这样做，一次又一次？此外，我们很少能够明确地创建处理组和对照组。最后，实验可能既昂贵又不道德。因此，我们需要尽力而为。而不是通过随机化，我们的反事实通过随机化来到我们面前，因此我们知道这两者除了处理之外是相同的，我们试图识别那些除了处理之外相似但不同的群体，因此任何差异都可以归因于处理。
- en: With observational data, sometimes there are differences between our two groups
    before we treat. Provided those pre-treatment differences satisfy assumptions
    that essentially amount to the differences being both consistent, and that we
    expect that consistency to continue in the absence of the treatment—the “parallel
    trends” assumption—then we can look to any difference in the differences as the
    effect of the treatment. One of the aspects of difference-in-differences analysis
    is that we can do it using relatively straight forward methods, for instance Tang
    ([2015](99-references.html#ref-Tang2015)). Linear regression with a binary variable
    is enough to get started and do a convincing job.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在观察性数据中，有时在我们进行干预之前，我们的两组之间存在差异。只要这些干预前的差异满足基本假设，即这些差异是一致的，并且我们预计在没有干预的情况下这种一致性会持续存在——“平行趋势”假设——那么我们可以将任何差分中的差异视为干预的效果。差分-差分分析的一个方面是，我们可以使用相对简单的方法来进行，例如Tang
    ([2015](99-references.html#ref-Tang2015))。使用二元变量的线性回归就足以开始并做好令人信服的工作。
- en: Consider wanting to know the effect of a new tennis racket on serve speed. One
    way to test this would be to measure the difference between, say, Roger Federer’s
    serve speed without the tennis racket and the serve speed of an enthusiastic amateur,
    let us call them Ville, with the tennis racket. Yes, we would find a difference,
    but would we know how much to attribute to the tennis racket? Another way would
    be to consider the difference between Ville’s serve speed without the new tennis
    racket and Ville’s serve speed with the new tennis racket. But what if serves
    were just getting faster naturally over time? Instead, we combine the two approaches
    to look at the difference in the differences.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 想要知道新网球拍对发球速度的影响。一种测试方法可以是测量没有网球拍时罗杰·费德勒的发球速度和有网球拍的业余爱好者维尔（让我们称他们为维尔）的发球速度之间的差异。是的，我们会找到一个差异，但我们能知道有多少可以归因于网球拍吗？另一种方法是考虑维尔没有新网球拍时的发球速度和维尔有新网球拍时的发球速度之间的差异。但如果是发球速度随着时间的推移自然变快呢？相反，我们将两种方法结合起来，看看差异的差异。
- en: 'We begin by measuring Federer’s serve speed and compare it to Ville’s serve
    speed, both without the new racket. We then measure Federer’s serve speed again,
    and measure Ville’s serve speed with the new racket. That difference in the differences
    would then be the estimate of the effect of the new racket. There are a few key
    questions we must ask to see if this analysis is appropriate:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先测量费德勒的发球速度，并将其与维尔的发球速度进行比较，两者都没有使用新球拍。然后我们再次测量费德勒的发球速度，并测量维尔使用新球拍的发球速度。这种差异的差异将是新球拍效应的估计。我们必须问几个关键问题，以确定这种分析是否适当：
- en: Is there something else that may have affected only Ville, and not Federer that
    could affect Ville’s serve speed?
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 是否还有其他可能只影响维尔，而不影响费德勒的因素，这些因素可能会影响维尔的发球速度？
- en: Is it likely that Federer and Ville have the same trajectory of serve speed
    improvement? This is the “parallel trends” assumption, and it dominates many discussions
    of difference-in-differences analysis.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 费德勒和维尔是否具有相同的发球速度改进轨迹？这是“平行趋势”假设，它在许多双重差分分析讨论中占主导地位。
- en: Finally, is it likely that the variance of our serve speeds of Federer and Ville
    are the same?
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，费德勒和维尔的发球速度的方差是否相同？
- en: Despite these requirements, difference-in-differences is a powerful approach
    because we do not need the treatment and control group to be the same before the
    treatment. We just need to have a good idea of how they differed.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管有这些要求，但双重差分法是一种强大的方法，因为我们不需要在治疗之前治疗组和对照组是相同的。我们只需要有一个很好的想法，了解它们是如何不同的。
- en: '15.3.1 Simulated example: tennis serve speed'
  id: totrans-64
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 15.3.1 模拟示例：网球发球速度
- en: To be more specific about the situation, we simulate data. We will simulate
    a situation in which there is initially a difference of one between the serve
    speeds of the different people, and then after a new tennis racket, there is a
    difference of six. We can use a graph to illustrate the situation ([Figure 15.4](#fig-diffindifftennisracket)).
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更具体地说明情况，我们模拟数据。我们将模拟一个初始时不同人的发球速度之间有一个差异的情况，然后在使用新网球拍后，差异变为六个。我们可以用图表来展示这种情况（[图15.4](#fig-diffindifftennisracket)）。
- en: '[PRE7]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '*[PRE8]*  *[PRE9]'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE8]*  *[PRE9]'
- en: '*![](../Images/bceeafd58e5f964ed4c299d02daa29cb.png)'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/bceeafd58e5f964ed4c299d02daa29cb.png)'
- en: 'Figure 15.4: Illustration of simulated data that shows a difference before
    and after getting a new tennis racket*  *We can obtain our estimate manually,
    by looking at the average difference of the differences. When we do that, we find
    that we estimate the effect of the new tennis racket to be 5.06, which is similar
    to what we simulated.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.4：展示在使用新网球拍前后差异的模拟数据图* *我们可以通过查看差异的平均差异来手动获得我们的估计。当我们这样做时，我们发现我们估计新网球拍的效果为5.06，这与我们模拟的相似。
- en: '[PRE10]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '*[PRE11]*  *And we can use linear regression to get the same result. The model
    we are interested in is:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE11]* *我们可以使用线性回归得到相同的结果。我们感兴趣的模型是：'
- en: \[Y_{i,t} = \beta_0 + \beta_1\times\mbox{Treatment}_i + \beta_2\times\mbox{Time}_t
    + \beta_3\times(\mbox{Treatment} \times\mbox{Time})_{i,t} + \epsilon_{i,t}\]
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: \[Y_{i,t} = \beta_0 + \beta_1\times\mbox{Treatment}_i + \beta_2\times\mbox{Time}_t
    + \beta_3\times(\mbox{Treatment} \times\mbox{Time})_{i,t} + \epsilon_{i,t}\]
- en: While we should include the separate aspects as well, it is the estimate of
    the interaction that we are interested in. In this case it is \(\beta_3\). And
    we find that our estimated effect is 5.06 ([Table 15.1](#tbl-diffindifftennisracket)).
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我们应该包括单独的方面，但我们感兴趣的是交互作用的估计。在这种情况下，它是 \(\beta_3\)。我们发现我们的估计效应是 5.06 ([表15.1](#tbl-diffindifftennisracket))。
- en: '[PRE12]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '*[PRE13]'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE13]'
- en: '*[PRE14]'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE14]'
- en: '*Table 15.1: Illustration of simulated data that shows a difference before
    and after getting a new tennis racket'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '*表15.1：获得新网球拍前后模拟数据的差异说明'
- en: '|  | (1) |'
  id: totrans-78
  prefs: []
  type: TYPE_TB
  zh: '|  | (1) |'
- en: '| --- | --- |'
  id: totrans-79
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| (Intercept) | 4.971 |'
  id: totrans-80
  prefs: []
  type: TYPE_TB
  zh: '| (Intercept) | 4.971 |'
- en: '| treatment_group1 | 3.035 |'
  id: totrans-81
  prefs: []
  type: TYPE_TB
  zh: '| treatment_group1 | 3.035 |'
- en: '| time1 | 1.006 |'
  id: totrans-82
  prefs: []
  type: TYPE_TB
  zh: '| time1 | 1.006 |'
- en: '| treatment_group1 × time1 | 5.057 |'
  id: totrans-83
  prefs: []
  type: TYPE_TB
  zh: '| treatment_group1 × time1 | 5.057 |'
- en: '| Num.Obs. | 2000 |'
  id: totrans-84
  prefs: []
  type: TYPE_TB
  zh: '| Num.Obs. | 2000 |'
- en: '| R2 | 0.927 |'
  id: totrans-85
  prefs: []
  type: TYPE_TB
  zh: '| R2 | 0.927 |'
- en: '| R2 Adj. | 0.927 |'
  id: totrans-86
  prefs: []
  type: TYPE_TB
  zh: '| R2 Adj. | 0.927 |'
- en: '| Log.Lik. | -2802.166 |'
  id: totrans-87
  prefs: []
  type: TYPE_TB
  zh: '| Log.Lik. | -2802.166 |'
- en: '| ELPD | -2806.3 |'
  id: totrans-88
  prefs: []
  type: TYPE_TB
  zh: '| ELPD | -2806.3 |'
- en: '| ELPD s.e. | 32.1 |'
  id: totrans-89
  prefs: []
  type: TYPE_TB
  zh: '| ELPD s.e. | 32.1 |'
- en: '| LOOIC | 5612.5 |'
  id: totrans-90
  prefs: []
  type: TYPE_TB
  zh: '| LOOIC | 5612.5 |'
- en: '| LOOIC s.e. | 64.2 |'
  id: totrans-91
  prefs: []
  type: TYPE_TB
  zh: '| LOOIC s.e. | 64.2 |'
- en: '| WAIC | 5612.5 |'
  id: totrans-92
  prefs: []
  type: TYPE_TB
  zh: '| WAIC | 5612.5 |'
- en: '| RMSE | 0.98 |******  ***### 15.3.2 Assumptions'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '| RMSE | 0.98 |******  ***### 15.3.2 假设'
- en: If we want to use difference-in-differences, then we need to satisfy the assumptions.
    There were three that were touched on earlier, but here we will focus on the “parallel
    trends” assumption. The parallel trends assumption haunts everything to do with
    difference-in-differences analysis because we can never prove it; we can just
    be convinced of it, and try to convince others.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们想使用双重差分法，那么我们需要满足假设。之前提到了三个假设，但在这里我们将重点放在“平行趋势”假设上。平行趋势假设困扰着与双重差分分析相关的所有事情，因为我们永远无法证明它；我们只能被说服，并试图说服他人。
- en: 'To see why we can never prove it, consider an example in which we want to know
    the effect of a new stadium on a professional sports team’s wins/loses. To do
    this we consider two professional basketball teams: the Golden State Warriors
    and the Toronto Raptors. The Warriors changed stadiums at the start of the 2019-20
    season, while the Raptors did not, so we will consider four time periods: the
    2016-17 season, 2017-18 season, 2018-19 season, and finally we will compare the
    performance with the one after they moved, so the 2019-20 season. The Raptors
    here act as our counterfactual. This means that we assume the relationship between
    the Warriors and the Raptors, in the absence of a new stadium, would have continued
    to change in a consistent way. But the fundamental problem of causal inference
    means that we can never know that for certain. We must present sufficient evidence
    to assuage any concerns that a reader may have.'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解为什么我们永远无法证明这一点，可以考虑一个例子，我们想知道新体育场对职业运动队胜负的影响。为此，我们考虑了两支职业篮球队：金州勇士队和多伦多猛龙队。勇士队在2019-20赛季开始时更换了体育场，而猛龙队没有，因此我们将考虑四个时间段：2016-17赛季、2017-18赛季、2018-19赛季，最后我们将比较他们搬迁后的表现，即2019-20赛季。猛龙队在这里充当我们的对照。这意味着我们假设在没有新体育场的情况下，勇士队和猛龙队之间的关系将继续以一致的方式变化。但因果推断的基本问题意味着我们永远无法确定这一点。我们必须提供足够的证据来消除读者可能有的任何疑虑。
- en: 'There are four main threats to validity when we use difference-in-differences,
    and we need to address all of them ([Cunningham 2021, 272–77](99-references.html#ref-Cunningham2021)):'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用双重差分法时，存在四个主要的有效性威胁，我们需要解决所有这些问题 ([Cunningham 2021, 272–77](99-references.html#ref-Cunningham2021))：
- en: Non-parallel trends. The treatment and control groups may be based on differences.
    As such it can be difficult to convincingly argue for parallel trends. In this
    case, maybe try to find another factor to consider in your model that may adjust
    for some of that. This may require triple-differenced approaches. For instance,
    in the earlier example, we could perhaps add the San Francisco 49ers, a football
    team, as they are in the same broad geographic area as the Warriors. Or maybe
    rethink the analysis to see if we can make a different control group. Adding additional
    earlier time periods may help but may introduce more issues, which we touch on
    in the third point.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 非平行趋势。处理组和对照组可能基于差异。因此，可能很难有说服力的论证平行趋势。在这种情况下，也许可以尝试在模型中考虑另一个因素，以调整其中的一些差异。这可能需要三重差分方法。例如，在先前的例子中，我们可能可以添加旧金山49人队，一支橄榄球队，因为它们与勇士队位于相同的广泛地理区域内。或者也许重新思考分析，看看我们是否可以创建不同的对照组。添加额外的早期时间段可能会有所帮助，但也可能引入更多问题，我们在第三点中提到了这些问题。
- en: Compositional differences. This is a concern when working with repeated cross-sections.
    What if the composition of those cross-sections change? For instance, if we are
    working at an app that is rapidly growing, and we want to look at the effect of
    some change. In our initial cross-section, we may have mostly young people, but
    in a subsequent cross-section, we may have more older people as the demographics
    of the app usage change. Hence our results may just be an age-effect, not an effect
    of the change that we are interested in.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 组成差异。当处理重复横截面时，这是一个需要关注的问题。如果这些横截面的组成发生变化怎么办？例如，如果我们正在开发一个快速增长的APP，并想观察某些变化的影响。在我们的初始横截面上，我们可能主要是年轻人，但在随后的横截面上，由于APP使用人群的年龄结构变化，可能会有更多老年人。因此，我们的结果可能只是年龄效应，而不是我们感兴趣的变化的影响。
- en: Long-term effects compared with reliability. As we discussed in [Chapter 8](08-hunt.html),
    there is a trade-off between the length of the analysis that we run. As we run
    the analysis for longer there is more opportunity for other factors to affect
    the results. There is also increased chance for someone who was not treated to
    be treated. But, on the other hand, it can be difficult to convincingly argue
    that short-term results will continue in the long term.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 与可靠性相比的长期影响。正如我们在[第8章](08-hunt.html)中讨论的，我们在分析中运行的时间长度存在权衡。随着分析时间的延长，其他因素影响结果的机会更多。同时，也有更大的可能性，那些未接受处理的人会接受处理。但另一方面，很难有说服力地论证短期结果会持续到长期。
- en: Functional form dependence. This is less of an issue when the outcomes are similar,
    but if they are different then functional form may be responsible for some aspects
    of the results.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 函数形式依赖。当结果相似时，这不是一个问题，但如果结果不同，函数形式可能对结果的一些方面负责。
- en: 15.3.3 French newspaper prices between 1960 and 1974
  id: totrans-101
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 15.3.3 1960年至1974年法国报纸价格
- en: In this case study we introduce Angelucci and Cagé ([2019](99-references.html#ref-angelucci2019newspapers)).
    They are interested in understanding the effect of the introduction of television
    on French newspapers. We will replicate one of the main findings.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 在本案例研究中，我们介绍了Angelucci和Cagé（[2019](99-references.html#ref-angelucci2019newspapers)）。他们感兴趣的是了解电视引入对法国报纸的影响。我们将复制其主要发现之一。
- en: The business model of newspapers has been challenged by the internet and many
    local newspapers have closed. This issue is not new. When television was introduced,
    there were similar concerns. Angelucci and Cagé ([2019](99-references.html#ref-angelucci2019newspapers))
    use the introduction of television advertising in France, announced in 1967, to
    examine the effect of decreased advertising revenue on newspapers. They create
    a dataset of French newspapers from 1960 to 1974 and then use difference-in-differences
    to examine the effect of the reduction in advertising revenues on newspapers’
    content and prices. The change that they focus on is the introduction of television
    advertising, which they argue affected national newspapers more than local newspapers.
    They find that this change results in both less journalism content in the newspapers
    and lower newspaper prices. Focusing on this change, and analyzing it using difference-in-differences,
    is important because it allows us to disentangle a few competing effects. For
    instance, did newspapers become redundant because they could no longer charge
    high prices for their advertisements, or because consumers preferred to get their
    news from the television?
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 报纸的商业模式受到了互联网的挑战，许多地方报纸已经关闭。这个问题并不新鲜。当电视被引入时，也存在类似的担忧。Angelucci和Cagé（[2019](99-references.html#ref-angelucci2019newspapers)）利用1967年宣布的法国电视广告的引入来检验减少广告收入对报纸的影响。他们创建了一个包含1960年至1974年法国报纸的数据集，然后使用双重差分法来检验广告收入减少对报纸内容和价格的影响。他们关注的变化是电视广告的引入，他们认为这比地方报纸对全国报纸的影响更大。他们发现这一变化导致报纸上的新闻内容减少，报纸价格降低。关注这一变化，并使用双重差分法进行分析，是很重要的，因为它使我们能够区分几个相互竞争的影响。例如，报纸是否因为无法再为广告收取高价而变得多余，或者是因为消费者更愿意从电视上获取新闻？
- en: We can get free access to the [data](https://www.openicpsr.org/openicpsr/project/116438/version/V1/view)
    that underpins Angelucci and Cagé ([2019](99-references.html#ref-angelucci2019newspapers))
    after registration. The dataset is in the Stata data format, “.dta”, which we
    can read with `read_dta()` from `haven`. The file that we are interested in is
    “Angelucci_Cage_AEJMicro_dataset.dta”, which is the “dta” folder.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过注册后免费获取支撑Angelucci和Cagé ([2019](99-references.html#ref-angelucci2019newspapers))
    的数据集。数据集为Stata数据格式，“.dta”，我们可以使用`haven`中的`read_dta()`读取。我们感兴趣的是“Angelucci_Cage_AEJMicro_dataset.dta”文件，它位于“dta”文件夹中。
- en: '[PRE15]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '*There are 1,196 observations in the dataset and 52 variables. Angelucci and
    Cagé ([2019](99-references.html#ref-angelucci2019newspapers)) are interested in
    the 1960-1974 time period which has around 100 newspapers. There are 14 national
    newspapers at the beginning of the period and 12 at the end. The key period is
    1967, when the French government announced it would allow advertising on television.
    Angelucci and Cagé ([2019](99-references.html#ref-angelucci2019newspapers)) argue
    that national newspapers were affected by this change, but local newspapers were
    not. The national newspapers are the treatment group and the local newspapers
    are the control group.'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '*数据集中有1,196个观测值和52个变量。Angelucci和Cagé ([2019](99-references.html#ref-angelucci2019newspapers))
    关注1960-1974这一时期，大约有100家报纸。该时期初期有14家全国性报纸，末期有12家。关键时期是1967年，当时法国政府宣布将允许在电视上做广告。Angelucci和Cagé
    ([2019](99-references.html#ref-angelucci2019newspapers)) 认为，全国性报纸受到了这一变化的影响，而地方报纸则没有。全国性报纸是处理组，地方报纸是对照组。'
- en: We focus just on the headline difference-in-differences result and construct
    summary statistics.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 我们只关注标题差异差异的结果，并构建汇总统计量。
- en: '[PRE16]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '*[PRE17]*  *We are interested in what happened from 1967 onward, especially
    in terms of advertising revenue, and whether that was different for national,
    compared with local newspapers ([Figure 15.5](#fig-frenchnewspapersrevenue)).
    We use `scales` to adjust the y-axis.'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE17]*  *我们关注从1967年开始发生的情况，特别是广告收入，以及这与全国性报纸相比是否有所不同（[图15.5](#fig-frenchnewspapersrevenue)）。我们使用`scales`调整y轴。'
- en: '[PRE18]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '*![](../Images/ee991dc1577bca0f0803bc3b4e2c24f9.png)'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/ee991dc1577bca0f0803bc3b4e2c24f9.png)'
- en: 'Figure 15.5: Revenue of French newspapers (1960-1974), by whether they were
    local or national*  *The model that we are interested in estimating is:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.5：法国报纸收入（1960-1974），按地方或全国性分类*  *我们感兴趣要估计的模型是：
- en: \[\mbox{ln}(y_{n,t}) = \beta_0 + \beta_1\times(\mbox{National binary}\times\mbox{1967
    onward binary}) + \lambda_n + \gamma_t + \epsilon\]
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: \[\mbox{ln}(y_{n,t}) = \beta_0 + \beta_1\times(\mbox{National binary}\times\mbox{1967
    onward binary}) + \lambda_n + \gamma_t + \epsilon\]
- en: It is the \(\beta_1\) coefficient that we are especially interested in. We estimate
    the models using `stan_glm()`.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 我们特别关注的是\(\beta_1\)系数。我们使用`stan_glm()`估计模型。
- en: '[PRE19]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '*[PRE20]'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE20]'
- en: '*Looking at the advertising-side variables, such as revenue and prices, in
    [Table 15.2](#tbl-frenchnewspapersadvertising) we find consistently negative coefficients.'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '*在[表15.2](#tbl-frenchnewspapersadvertising)中查看广告方面的变量，如收入和价格，我们发现系数始终为负。'
- en: '[PRE21]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '*Table 15.2: Effect of changed television advertising laws on revenue of French
    newspapers (1960-1974)'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '*表15.2：电视广告法变更对法国报纸收入（1960-1974）的影响'
- en: '|  | Ad revenue | Ad revenue over circulation | Subscription price |'
  id: totrans-120
  prefs: []
  type: TYPE_TB
  zh: '|  | 广告收入 | 广告收入占发行量比例 | 订阅价格 |'
- en: '| --- | --- | --- | --- |'
  id: totrans-121
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| Year | 0.05 | 0.04 | 0.05 |'
  id: totrans-122
  prefs: []
  type: TYPE_TB
  zh: '| 年份 | 0.05 | 0.04 | 0.05 |'
- en: '| After change | -0.23 | -0.15 | -0.04 |'
  id: totrans-123
  prefs: []
  type: TYPE_TB
  zh: '| 变化后 | -0.23 | -0.15 | -0.04 |'
- en: '| Num.Obs. | 1052 | 1048 | 1044 |'
  id: totrans-124
  prefs: []
  type: TYPE_TB
  zh: '| 观测数 | 1052 | 1048 | 1044 |'
- en: '| R2 | 0.984 | 0.896 | 0.868 |'
  id: totrans-125
  prefs: []
  type: TYPE_TB
  zh: '| R2 | 0.984 | 0.896 | 0.868 |'
- en: '| R2 Adj. | 0.983 | 0.886 | 0.852 |'
  id: totrans-126
  prefs: []
  type: TYPE_TB
  zh: '| R2 Adj. | 0.983 | 0.886 | 0.852 |'
- en: '| Log.Lik. | 336.539 | 441.471 | 875.559 |'
  id: totrans-127
  prefs: []
  type: TYPE_TB
  zh: '| Log.Lik. | 336.539 | 441.471 | 875.559 |'
- en: '| ELPD | 257.4 | 362.3 | 793.5 |'
  id: totrans-128
  prefs: []
  type: TYPE_TB
  zh: '| ELPD | 257.4 | 362.3 | 793.5 |'
- en: '| ELPD s.e. | 34.4 | 45.6 | 24.3 |'
  id: totrans-129
  prefs: []
  type: TYPE_TB
  zh: '| ELPD s.e. | 34.4 | 45.6 | 24.3 |'
- en: '| LOOIC | -514.8 | -724.6 | -1586.9 |'
  id: totrans-130
  prefs: []
  type: TYPE_TB
  zh: '| LOOIC | -514.8 | -724.6 | -1586.9 |'
- en: '| LOOIC s.e. | 68.9 | 91.2 | 48.6 |'
  id: totrans-131
  prefs: []
  type: TYPE_TB
  zh: '| LOOIC s.e. | 68.9 | 91.2 | 48.6 |'
- en: '| WAIC | -515.9 | -725.5 | -1588.9 |'
  id: totrans-132
  prefs: []
  type: TYPE_TB
  zh: '| WAIC | -515.9 | -725.5 | -1588.9 |'
- en: '| RMSE | 0.17 | 0.16 | 0.10 |*  *We can replicate the main results of Angelucci
    and Cagé ([2019](99-references.html#ref-angelucci2019newspapers)) and find that
    in many cases there appears to be a difference from 1967 onward. Angelucci and
    Cagé ([2019, 353–58](99-references.html#ref-angelucci2019newspapers)) also include
    an excellent example of the discussion of interpretation, external validity, and
    robustness that is required for difference-in-differences models.*********  ***##
    15.4 Propensity score matching'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '| RMSE | 0.17 | 0.16 | 0.10 |*  *我们可以复制Angelucci和Cagé（[2019](99-references.html#ref-angelucci2019newspapers)）的主要结果，并发现许多情况下，从1967年开始似乎存在差异。Angelucci和Cagé（[2019,
    353–58](99-references.html#ref-angelucci2019newspapers)）还包含了一个关于差异法模型所需的解释、外部效度和稳健性的讨论的优秀示例。*********  ***##
    15.4 倾向得分匹配'
- en: Difference-in-differences is a powerful analysis framework. But it can be tough
    to identify appropriate treatment and control groups. Alexander and Ward ([2018](99-references.html#ref-alexander2018age))
    compare migrant brothers, where one brother had most of their education in a different
    country, and the other brother had most of their education in the United States.
    Given the data that are available, this match provides a reasonable treatment
    and control group. But other matches could have given different results, for instance
    friends or cousins.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 差分法是一种强大的分析框架。但确定适当的处理组和对照组可能很困难。亚历山大和沃德（[2018](99-references.html#ref-alexander2018age)）比较了移民兄弟，其中一位兄弟的大部分教育在一个不同的国家完成，而另一位兄弟的大部分教育在美国完成。考虑到可用的数据，这种匹配提供了一个合理的处理组和对照组。但其他匹配可能会产生不同的结果，例如朋友或堂兄弟姐妹。
- en: 'We can only match based on observable variables. For instance, age-group or
    education. At two different times we compare smoking rates in 18-year-olds in
    one city with smoking rates in 18-year-olds in another city. This would be a coarse
    match because we know that there are many differences between 18-year-olds, even
    in terms of the variables that we commonly observe, say gender and education.
    One way to deal with this would be to create sub-groups: 18-year-old males with
    a high school education, etc. But then the sample sizes quickly become small.
    We also have the issue of how to deal with continuous variables. And is an 18-year-old
    really that different to a 19-year-old? Why not also compare with them?'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 我们只能根据可观察变量进行匹配。例如，年龄组或教育。在两个不同时间，我们比较一个城市的18岁青少年的吸烟率与另一个城市的18岁青少年的吸烟率。这将是一个粗略的匹配，因为我们知道即使在通常观察到的变量（如性别和教育）方面，18岁的青少年之间也存在许多差异。处理这种差异的一种方法是为子组创建：高中毕业的18岁男性等。但这样样本量会迅速减少。我们还面临如何处理连续变量的问题。而且，18岁的青少年真的和19岁的青少年有很大不同吗？为什么不能也与他们进行比较？
- en: One way to proceed is to consider a nearest neighbor approach, but there can
    be limited concern for uncertainty with this approach. There can also be an issue
    with having many variables because we end up with a high-dimension graph. This
    leads to propensity score matching. Here we explain the process of propensity
    score matching and a few of the concerns that are commonly brought up about it.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 一种进行的方法是考虑最近邻方法，但这种方法对不确定性的关注可能有限。由于我们最终得到一个高维图，因此也可能存在许多变量的问题。这导致了倾向得分匹配。在这里，我们解释倾向得分匹配的过程以及一些常见的关于它的担忧。
- en: Propensity score matching involves assigning some probability—the “propensity
    score”—to each observation. We construct that probability based on the observation’s
    values for the predictors without the treatment. That probability is our best
    guess at the probability of the observation being treated, regardless of whether
    it was actually treated. For instance, if 18-year-old males were treated but 19-year-old
    males were not, then, as there is not much difference between 18-year-old and
    19-year-old males in general, our assigned probability would be similar. We then
    compare the outcomes of observations with similar propensity scores.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 倾向得分匹配涉及为每个观测值分配一些概率——“倾向得分”。我们根据观测值对预测变量的值（没有治疗的情况）来构建这个概率。这个概率是我们对观测值被治疗的概率的最佳猜测，无论它实际上是否被治疗。例如，如果18岁的男性接受了治疗，而19岁的男性没有接受治疗，那么由于18岁和19岁的男性在总体上没有太大的差异，我们分配的概率将是相似的。然后我们比较具有相似倾向得分的观测值的结局。
- en: '15.4.1 Simulated example: free shipping'
  id: totrans-138
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 15.4.1 模拟示例：免费送货
- en: One advantage of propensity score matching is that it allows us to easily consider
    many predictor variables at once, and it can be constructed using logistic regression.
    To be more specific we can simulate some data. We will pretend that we work for
    a large online retailer. We are going to treat some individuals with free shipping
    to see what happens to their average purchase.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 倾向得分匹配的一个优点是它允许我们一次性考虑许多预测变量，并且可以使用逻辑回归来构建。更具体地说，我们可以模拟一些数据。我们将假装我们为一家大型在线零售商工作。我们将对一些个人提供免费送货，看看这会对他们的平均购买产生什么影响。
- en: '[PRE22]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '*[PRE23]*  *Then we need to add some probability of being treated with free
    shipping. We will say that it depends on our predictors and that younger, higher-income,
    male individuals make this treatment more likely. We only know that because we
    simulated the situation. We would not know it if we were using actual data.'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE23]*  *然后我们需要添加一些获得免费送货的概率。我们将说这取决于我们的预测变量，并且年轻、高收入、男性个体使这种处理更有可能。我们之所以知道这一点，是因为我们模拟了这种情况。如果我们使用实际数据，我们就不会知道这一点。'
- en: '[PRE24]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '*Finally, we need to have some measure of a person’s average spend. We will
    assume that this increases with income. We want those with free shipping to be
    slightly higher than those without.'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '*最后，我们需要有一个衡量一个人平均花费的指标。我们将假设这会随着收入的增加而增加。我们希望有免费送货的人的平均花费略高于没有免费送货的人。'
- en: '[PRE25]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '*[PRE26]*  *Naively we can see that there is a difference in the average spend
    between those with free shipping and those without ([Table 15.3](#tbl-heyheybigspender)).
    But the fundamental concern is what would have the spend have been of those with
    free shipping if they have not had free shipping. [Table 15.3](#tbl-heyheybigspender)
    shows an average comparison but not everyone had the same chance of getting free
    shipping. So we question the validity of that use of an average comparison. Instead
    we use propensity score matching to “link” each observation that actually got
    free shipping with their most similar observation, based on the observable variables,
    that did not get free shipping.'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE26]*  *直观地我们可以看到，免费送货和没有免费送货的人之间的平均花费存在差异（[表15.3](#tbl-heyheybigspender)）。但基本问题是，如果这些人没有免费送货，他们的花费会是多少。
    [表15.3](#tbl-heyheybigspender)显示了平均比较，但并不是每个人都有相同的机会获得免费送货。因此，我们质疑使用平均比较的有效性。相反，我们使用倾向得分匹配来“链接”每个实际获得免费送货的观测值与基于可观察变量的、未获得免费送货的最相似观测值。'
- en: '[PRE27]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: '*Table 15.3: Difference in average spend by whether had free shipping'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '*表15.3：是否免费送货的平均花费差异'
- en: '| Received free shipping? | Average spend |'
  id: totrans-148
  prefs: []
  type: TYPE_TB
  zh: '| 是否收到免费送货？ | 平均花费 |'
- en: '| --- | --- |'
  id: totrans-149
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| No | 64.44 |'
  id: totrans-150
  prefs: []
  type: TYPE_TB
  zh: '| 否 | 64.44 |'
- en: '| Yes | 86.71 |*  *We use `matchit()` from `MatchIt` to implement logistic
    regression and create matched groups. We then use `match.data()` to get the data
    of matches containing both all 254 people who were actually treated with free
    shipping and the untreated person who is considered as similar to them, based
    on propensity score, as possible. The result is a dataset of 508 observations.'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '| 是 | 86.71 |*  *我们使用`matchit()`函数从`MatchIt`包中实现逻辑回归并创建匹配组。然后我们使用`match.data()`函数来获取包含所有254个实际使用免费送货处理的人以及根据倾向得分被认为与他们相似（尽可能相似）的未处理人的数据。结果是包含508个观测值的数据库。'
- en: '[PRE28]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '*[PRE29]'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE29]'
- en: '[PRE30]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '*[PRE31]**  **Finally, we can estimate the effect of being treated on average
    spend using linear regression ([Table 15.4](#tbl-treatedexample)). We are particularly
    interested in the coefficient associated with the treatment variable, in this
    case free shipping.'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE31]*  **最后，我们可以使用线性回归（[表15.4](#tbl-treatedexample)）来估计处理对平均花费的影响。我们特别关注与处理变量相关的系数，在这种情况下是免费送货。'
- en: '[PRE32]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '*Table 15.4: Effect of being treated, using simulated data'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '*表15.4：使用模拟数据处理的平均花费效果'
- en: '|  | (1) |'
  id: totrans-158
  prefs: []
  type: TYPE_TB
  zh: '|  | (1) |'
- en: '| --- | --- |'
  id: totrans-159
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| (Intercept) | 3.862 |'
  id: totrans-160
  prefs: []
  type: TYPE_TB
  zh: '| (截距) | 3.862 |'
- en: '|  | (0.506) |'
  id: totrans-161
  prefs: []
  type: TYPE_TB
  zh: '|  | (0.506) |'
- en: '| age | 0.007 |'
  id: totrans-162
  prefs: []
  type: TYPE_TB
  zh: '| 年龄 | 0.007 |'
- en: '|  | (0.005) |'
  id: totrans-163
  prefs: []
  type: TYPE_TB
  zh: '|  | (0.005) |'
- en: '| genderMale | 0.013 |'
  id: totrans-164
  prefs: []
  type: TYPE_TB
  zh: '| 性别-男性 | 0.013 |'
- en: '|  | (0.202) |'
  id: totrans-165
  prefs: []
  type: TYPE_TB
  zh: '|  | (0.202) |'
- en: '| genderOther/decline | -0.509 |'
  id: totrans-166
  prefs: []
  type: TYPE_TB
  zh: '| 性别-其他/拒绝 | -0.509 |'
- en: '|  | (0.847) |'
  id: totrans-167
  prefs: []
  type: TYPE_TB
  zh: '|  | (0.847) |'
- en: '| income | 0.001 |'
  id: totrans-168
  prefs: []
  type: TYPE_TB
  zh: '| 收入 | 0.001 |'
- en: '|  | (0.000) |'
  id: totrans-169
  prefs: []
  type: TYPE_TB
  zh: '|  | (0.000) |'
- en: '| free_shipping1 | 10.073 |'
  id: totrans-170
  prefs: []
  type: TYPE_TB
  zh: '| free_shipping1 | 10.073 |'
- en: '|  | (0.180) |'
  id: totrans-171
  prefs: []
  type: TYPE_TB
  zh: '|  | (0.180) |'
- en: '| Num.Obs. | 508 |'
  id: totrans-172
  prefs: []
  type: TYPE_TB
  zh: '| 观测数 | 508 |'
- en: '| R2 | 0.983 |'
  id: totrans-173
  prefs: []
  type: TYPE_TB
  zh: '| R2 | 0.983 |'
- en: '| R2 Adj. | 0.983 |'
  id: totrans-174
  prefs: []
  type: TYPE_TB
  zh: '| R2 Adj. | 0.983 |'
- en: '| AIC | 2167.6 |'
  id: totrans-175
  prefs: []
  type: TYPE_TB
  zh: '| AIC | 2167.6 |'
- en: '| BIC | 2197.2 |'
  id: totrans-176
  prefs: []
  type: TYPE_TB
  zh: '| BIC | 2197.2 |'
- en: '| Log.Lik. | -1076.811 |'
  id: totrans-177
  prefs: []
  type: TYPE_TB
  zh: '| 对数似然 | -1076.811 |'
- en: '| F | 5911.747 |'
  id: totrans-178
  prefs: []
  type: TYPE_TB
  zh: '| F | 5911.747 |'
- en: '| RMSE | 2.02 |*  *In [Table 15.4](#tbl-treatedexample), which was based on
    only the matched sample, we find that the effect is what we simulated. That is,
    there is a difference of ten between the average spend of those who received free
    shipping and those that did not. That is in contrast to [Table 15.3](#tbl-heyheybigspender)
    which was based on the entire sample.'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: '| RMSE | 2.02 |*  *在[表15.4](#tbl-treatedexample)，该表仅基于匹配样本，我们发现效果与我们模拟的一致。也就是说，收到免费运输和未收到免费运输的人的平均花费相差十元。这与[表15.3](#tbl-heyheybigspender)形成对比，该表基于整个样本。'
- en: 'We cover propensity score matching because it is widely used. But there are
    tradeoffs. Transparency is needed when it is being used ([Greifer 2021](99-references.html#ref-omggreifer)).
    These concerns include ([King and Nielsen 2019](99-references.html#ref-king2019propensity)):'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 我们介绍倾向得分匹配，因为它被广泛使用。但这也存在权衡。当使用时需要透明度（[Greifer 2021](99-references.html#ref-omggreifer)）。这些担忧包括（[King和Nielsen
    2019](99-references.html#ref-king2019propensity)）：
- en: Unobservables. Propensity score matching cannot match on unobserved variables.
    This may be fine in a classroom setting, but in more realistic settings it will
    likely cause issues. It is difficult to understand why individuals that appear
    to be so similar, would have received different treatments, unless there is something
    unobserved that causes the difference. As propensity score matching cannot account
    for these, it is difficult to know which features are actually being brought together.
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不可观测变量。倾向得分匹配无法匹配不可观测变量。这在课堂环境中可能没问题，但在更现实的环境中可能会引起问题。很难理解为什么看似如此相似的个人会接受不同的治疗，除非有某些不可观测的因素导致了这种差异。由于倾向得分匹配无法解释这些因素，因此很难知道哪些特征实际上被结合在一起。
- en: Modeling. The results of propensity score matching tend to be specific to the
    model that is used. As there is considerable flexibility as to which model is
    used, this enables researchers to pick through matches to find one that suits.
    Additionally, because the two regression steps (the matching and the analysis)
    are conducted separately, there is no propagation of uncertainty.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模型。倾向得分匹配的结果往往特定于所使用的模型。由于在模型选择上具有相当大的灵活性，这使得研究人员能够挑选出适合的匹配。此外，由于两个回归步骤（匹配和分析）是分别进行的，因此不存在不确定性的传播。
- en: The fundamental problem of unobservables can never be shown to be inconsequential
    because that would require the unobserved data. Those who want to use propensity
    score matching, and other matching methods, need to be able to argue convincingly
    that it is appropriate. McKenzie ([2021](99-references.html#ref-mckenzieforthedefence))
    presents a few cases where this is possible, for instance, when there are capacity
    limits. As is the common theme of this book, such cases will require focusing
    on the data and a deep understanding of the situation that produced it.*******  ***##
    15.5 Regression discontinuity design
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 不可观测变量的基本问题永远无法证明其无关紧要，因为这需要不可观测的数据。那些想要使用倾向得分匹配和其他匹配方法的人需要能够有说服力地论证这是合适的。McKenzie
    ([2021](99-references.html#ref-mckenzieforthedefence))提出了一些可能的情况，例如，当存在容量限制时。正如本书的常见主题，这些情况将需要关注数据及其产生的情境的深入理解。*******  ***
- en: Regression discontinuity design (RDD) was established by Thistlethwaite and
    Campbell ([1960](99-references.html#ref-thistlethwaite1960regression)) and is
    a popular way to get causality when there is a continuous variable with cut-offs
    that determine treatment. Is there a difference between a student who gets 79
    per cent and a student who gets 80 per cent? Probably not much, but one may get
    a A-, while the other may get a B+. Seeing that on a transcript could affect who
    gets a job which could affect income. In this case the percentage is a “forcing
    variable” or “forcing function” and the cut-off for an A- is a “threshold”. As
    the treatment is determined by the forcing variable we need to control for that
    variable. These seemingly arbitrary cut-offs can be seen all the time. Hence,
    there has been a great deal of work using RDD.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 回归断点设计（RDD）由Thistlethwaite和Campbell于[1960年](99-references.html#ref-thistlethwaite1960regression)提出，是一种在存在连续变量且有截止点决定治疗时获取因果关系的流行方法。一个学生得了79分和一个学生得了80分之间有区别吗？可能不大，但一个可能会得到A-，而另一个可能会得到B+。在成绩单上看到这一点可能会影响谁得到工作，进而影响收入。在这种情况下，百分比是一个“强制变量”或“强制函数”，A-的截止点是一个“阈值”。由于治疗是由强制变量决定的，我们需要控制这个变量。这些看似随机的截止点随处可见。因此，已经有很多研究使用了RDD。
- en: There is sometimes slightly different terminology used when it comes to RDD.
    For instance, Cunningham ([2021](99-references.html#ref-Cunningham2021)) refers
    to the forcing function as a running variable. The exact terminology that is used
    does not matter provided we use it consistently.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 在提到RDD时，有时会使用略有不同的术语。例如，Cunningham ([2021](99-references.html#ref-Cunningham2021))
    将强制函数称为运行变量。使用的确切术语并不重要，只要我们保持一致即可。
- en: '15.5.1 Simulated example: income and grades'
  id: totrans-186
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 15.5.1 模拟示例：收入和成绩
- en: To be more specific about the situation, we simulate data. We will consider
    the relationship between income and grades, and simulate there to be a change
    if a student gets at least 80 ([Figure 15.6](#fig-rddmarks)).
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更具体地说明情况，我们模拟数据。我们将考虑收入和成绩之间的关系，并模拟如果学生至少获得80分，则会有所变化（[图15.6](#fig-rddmarks)）。
- en: '[PRE33]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: '*[PRE34]*  *[PRE35]'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE34]*  *[PRE35]'
- en: '*![](../Images/438ba3919b3a5c5de6e035537f8fd353.png)'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/438ba3919b3a5c5de6e035537f8fd353.png)'
- en: 'Figure 15.6: Illustration of simulated data that shows an effect on income
    from getting a mark that is 80, compared with 79*  *We can use a binary variable
    with linear regression to estimate the effect of getting a mark over 80 on income.
    We expect the coefficient to be around two, which is what we simulated, and what
    we find ([Table 15.5](#tbl-rddexample)).'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.6：模拟数据示意图，显示获得80分而非79分对收入的影响。*我们可以使用二元变量和线性回归来估计获得超过80分的成绩对收入的影响。我们预计系数约为2，这正是我们模拟的，也是我们发现的（[表15.5](#tbl-rddexample)）。
- en: '[PRE36]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: '*[PRE37]'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE37]'
- en: '*[PRE38]'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE38]'
- en: '*Table 15.5: Example of regression discontinuity with simulated data'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: '*表15.5：使用模拟数据的回归不连续性示例'
- en: '|  | (1) |'
  id: totrans-196
  prefs: []
  type: TYPE_TB
  zh: '|  | （1） |'
- en: '| --- | --- |'
  id: totrans-197
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| (Intercept) | 5.22 |'
  id: totrans-198
  prefs: []
  type: TYPE_TB
  zh: '| （截距） | 5.22 |'
- en: '| mark | 0.06 |'
  id: totrans-199
  prefs: []
  type: TYPE_TB
  zh: '| mark | 0.06 |'
- en: '| mark_80_and_over | 1.89 |'
  id: totrans-200
  prefs: []
  type: TYPE_TB
  zh: '| mark_80_and_over | 1.89 |'
- en: '| Num.Obs. | 1000 |'
  id: totrans-201
  prefs: []
  type: TYPE_TB
  zh: '| Num.Obs. | 1000 |'
- en: '| R2 | 0.417 |'
  id: totrans-202
  prefs: []
  type: TYPE_TB
  zh: '| R2 | 0.417 |'
- en: '| R2 Adj. | 0.415 |'
  id: totrans-203
  prefs: []
  type: TYPE_TB
  zh: '| R2 Adj. | 0.415 |'
- en: '| Log.Lik. | -1591.847 |'
  id: totrans-204
  prefs: []
  type: TYPE_TB
  zh: '| Log.Lik. | -1591.847 |'
- en: '| ELPD | -1595.1 |'
  id: totrans-205
  prefs: []
  type: TYPE_TB
  zh: '| ELPD | -1595.1 |'
- en: '| ELPD s.e. | 25.4 |'
  id: totrans-206
  prefs: []
  type: TYPE_TB
  zh: '| ELPD s.e. | 25.4 |'
- en: '| LOOIC | 3190.3 |'
  id: totrans-207
  prefs: []
  type: TYPE_TB
  zh: '| LOOIC | 3190.3 |'
- en: '| LOOIC s.e. | 50.9 |'
  id: totrans-208
  prefs: []
  type: TYPE_TB
  zh: '| LOOIC s.e. | 50.9 |'
- en: '| WAIC | 3190.3 |'
  id: totrans-209
  prefs: []
  type: TYPE_TB
  zh: '| WAIC | 3190.3 |'
- en: '| RMSE | 1.19 |*  *There are various caveats to this estimate that we will
    discuss, but the essentials of RDD are here. Given an appropriate set-up, and
    model, RDD can compare favorably to randomized trials ([Bloom, Bell, and Reiman
    2020](99-references.html#ref-bloombellreiman2020)).'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: '| RMSE | 1.19 |*   此估计存在各种注意事项，我们将在后面讨论，但RDD的基本原理就在这里。给定适当的设置和模型，RDD可以与随机试验相媲美（[Bloom,
    Bell, and Reiman 2020](99-references.html#ref-bloombellreiman2020)）。'
- en: We could also implement RDD using `rdrobust`. The advantage of this approach
    is that many common extensions are easily available.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 我们也可以使用`rdrobust`实现RDD。这种方法的优点是许多常见扩展都很容易获得。
- en: '[PRE39]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: '*[PRE40]******  ***### 15.5.2 Assumptions'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE40]******  ***### 15.5.2 假设'
- en: 'The key assumptions of RDD are ([Cunningham 2021, 163](99-references.html#ref-Cunningham2021)):'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: RDD的关键假设是（[Cunningham 2021, 163](99-references.html#ref-Cunningham2021)）：
- en: The cut-off is specific, fixed, and known to all.
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 截止点是具体的、固定的，并且众所周知。
- en: The forcing function is continuous.
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 强制函数是连续的。
- en: The first assumption is largely about being unable to manipulate the cut-off,
    and ensures that the cut-off has meaning. The second assumption enables us to
    be confident that people on either side of the threshold are similar, apart from
    just happening to just fall on either side of the threshold.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个假设主要关于无法操纵截止点，并确保截止点具有意义。第二个假设使我们能够确信，除了恰好落在阈值两侧之外，阈值两侧的人是相似的。
- en: When we discussed randomized control trials and A/B testing in [Chapter 8](08-hunt.html)
    the randomized assignment of the treatment meant that the control and treatment
    groups were the same, but for the treatment. Then we moved to difference-in-differences,
    and we assumed that there was a common trend between the treated and control groups.
    We allowed that the groups could be different, but that we could “difference out”
    their differences. Finally, we considered matching, and we said that even if the
    control and treatment groups seemed different, we were able to match, to some
    extent, those who were treated with a group that were like them in all ways, apart
    from the fact that they were not treated.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们在第8章中讨论随机对照试验和A/B测试时，治疗的随机分配意味着对照组和治疗组的除治疗外是相同的。然后我们转向差异分析，我们假设治疗组和对照组之间存在共同趋势。我们允许组之间存在差异，但我们能够“差异消除”它们之间的差异。最后，我们考虑了匹配，我们说即使对照组和治疗组看起来不同，我们能够在某种程度上将接受治疗的人与所有方面都相似但未接受治疗的人进行匹配。
- en: 'In regression discontinuity we consider a slightly different setting. The two
    groups are completely different in terms of the forcing variable. They are on
    either side of the threshold. There is no overlap at all. But we know the threshold
    and believe that those on either side are essentially matched. Let us consider
    the 2019 NBA Eastern Conference Semifinals—Toronto and Philadelphia:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 在回归不连续性中，我们考虑一个略有不同的设置。两组在强制变量方面完全不同。它们位于阈值的两边。完全没有重叠。但我们知道阈值，并相信两边的人基本上是匹配的。让我们考虑2019年NBA东部联盟半决赛——多伦多和费城：
- en: 'Game 1: Raptors win 108-95;'
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第1场：猛龙队以108-95获胜；
- en: 'Game 2: 76ers win 94-89;'
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第2场：76人队以94-89获胜；
- en: 'Game 3: 76ers win 116-95;'
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第3场：76人队以116-95获胜；
- en: 'Game 4: Raptors win 101-96;'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第4场：猛龙队以101-96获胜；
- en: 'Game 5: Raptors win 125-89;'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第5场：猛龙队以125-89获胜；
- en: 'Game 6: 76ers win 112-101; and finally,'
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第6场：76人队以112-101获胜；最终，
- en: 'Game 7: Raptors win 92-90, because of a ball that went in after bouncing on
    the rim four times.'
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第7场：猛龙队以92-90获胜，因为一个球在篮筐上弹了四次后进了。
- en: Was there really that much difference between the teams?
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 真的有那么多团队之间的差异吗？
- en: 'The continuity assumption is important, but we cannot test this as it is based
    on a counterfactual. Instead, we need to convince people of it. Ways to do this
    include:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 连续性假设很重要，但我们不能测试这一点，因为它基于反事实。相反，我们需要说服人们相信这一点。做到这一点的方法包括：
- en: Using a test/train set-up.
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用测试/训练设置。
- en: Trying different specifications. We are especially concerned if results do not
    broadly persist with just linear or quadratic functions.
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 尝试不同的规格。我们特别关注如果结果仅仅通过线性或二次函数并没有广泛持续。
- en: Considering different subsets of the data.
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 考虑数据的不同子集。
- en: Considering different windows, which is the term we give to how far each side
    of the cutoff we examine.
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 考虑不同的窗口，这是我们用来描述我们检查的截止点两边的距离的术语。
- en: Being clear about uncertainty intervals, especially in graphs.
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 明确不确定区间，尤其是在图表中。
- en: Discuss and assuaging concerns about the possibility of omitted variables.
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 讨论并缓解关于遗漏变量可能性的担忧。
- en: The threshold is also important. For instance, is there an actual shift or is
    there a non-linear relationship?
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 阈值也很重要。例如，是否存在实际的转变，或者是否存在非线性关系？
- en: 'There are a variety of weaknesses of RDD, including:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: RDD有许多弱点，包括：
- en: External validity may be difficult. For instance, when we think about the A-/B+
    example, it is hard to see those generalizing to also B-/C+ students.
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 外部效度可能很难。例如，当我们考虑A-/B+的例子时，很难看到这些可以推广到B-/C+的学生。
- en: The important responses are those that are close to the cut-off. This means
    that even if we have many A and B students, they do not help much. Hence, we need
    a lot of data or we may have concerns about our ability to support our claims
    ([Green et al. 2009](99-references.html#ref-green2009testing)).
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重要的响应是那些接近截止点的。这意味着即使我们有很多A和B学生，他们也没有太大的帮助。因此，我们需要大量的数据，或者我们可能会对我们的主张支持能力有所担忧
    ([Green等人 2009](99-references.html#ref-green2009testing))。
- en: As the researcher, we have a lot of freedom to implement different options.
    This means that open science best practice becomes vital.
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 作为研究人员，我们有很大的自由度来实施不同的选项。这意味着开放科学的最佳实践变得至关重要。
- en: To this point we have considered “sharp” RDD. That is, the threshold is strict.
    But, in reality, often the boundary is a little less strict. In a sharp RDD setting,
    if we know the value of the forcing function then we know the outcome. For instance,
    if a student gets a mark of 80 then we know that they got an A-, but if they got
    a mark of 79 then we know that they got a B+. But with fuzzy RDD it is only known
    with some probability.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们考虑的是“尖锐”的RDD。也就是说，阈值是严格的。但在现实中，边界通常不那么严格。在尖锐的RDD设置中，如果我们知道强制函数的值，那么我们就知道结果。例如，如果一个学生得了80分，那么我们知道他们得了A-，但如果他们得了79分，那么我们知道他们得了B+。但模糊RDD的结果只知道有一定的概率。
- en: We want as “sharp” an effect as possible, but if the thresholds are known, then
    they will be gamed. For instance, there is a lot of evidence that people run for
    certain marathon times, and we know that people aim for certain grades. Similarly,
    from the other side, it is a lot easier for an instructor to just give out As
    than it is to have to justify Bs. One way to look at this is to consider how “balanced”
    the sample is on either side of the threshold. We can do this using histograms
    with appropriate bins. For instance, think of the age-heaping that we found in
    the cleaned Kenyan census data in [Chapter 9](09-clean_and_prepare.html).
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望尽可能“明显”的效果，但如果阈值已知，那么它们将会被操纵。例如，有大量证据表明人们会跑特定时间的马拉松，我们知道人们会追求特定的成绩。同样，从另一方面来看，教授给出
    A 的分数比需要解释 B 的分数要容易得多。一种看待这个问题的方式是考虑阈值两边的样本是如何“平衡”的。我们可以使用适当的区间来绘制直方图来完成这项工作。例如，回想一下我们在第
    9 章中发现的清洗后的肯尼亚人口普查数据中的年龄分布。
- en: Another key factor for RDD is the possible effect of the decision around the
    choice of model. For instance, [Figure 15.7](#fig-rddissuperconcerning) illustrates
    the difference between linear ([Figure 15.7 (a)](#fig-rddissuperconcerning-1))
    and polynomial ([Figure 15.7 (b)](#fig-rddissuperconcerning-2)).
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: RDD 的另一个关键因素是选择模型时决策可能产生的影响。例如，[图 15.7](#fig-rddissuperconcerning) 展示了线性 ([图
    15.7 (a)](#fig-rddissuperconcerning-1)) 和多项式 ([图 15.7 (b)](#fig-rddissuperconcerning-2))
    之间的差异。
- en: '[PRE41]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: '*![](../Images/6b6148443f6adc191250302e502df9b8.png)'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](../Images/6b6148443f6adc191250302e502df9b8.png)'
- en: (a) Linear
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: (a) 线性
- en: '![](../Images/207435f819511684c2e234ac31f0c9df.png)'
  id: totrans-246
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/207435f819511684c2e234ac31f0c9df.png)'
- en: (b) Polynomial
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: (b) 多项式
- en: 'Figure 15.7: Comparing the result of considering the same situation with different
    functions'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 图 15.7：比较使用不同函数考虑相同情况的结果
- en: The result is that our estimate of the difference in outcome is dependent on
    the choice of model. We see this issue occur often in RDD ([Gelman 2019](99-references.html#ref-gelmanonrdd))
    and it is especially recommended that higher order polynomials not be used, and
    instead the choice of models be either linear, quadratic, or some other smooth
    function ([Gelman and Imbens 2019](99-references.html#ref-gelmanimbensrdd)).
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是，我们对结果差异的估计取决于模型的选择。我们在 RDD ([Gelman 2019](99-references.html#ref-gelmanonrdd))
    中经常看到这个问题发生，并且特别建议不要使用高阶多项式，而应选择线性、二次或其他平滑函数 ([Gelman and Imbens 2019](99-references.html#ref-gelmanimbensrdd))。
- en: RDD is a popular approach, but meta-analysis suggests that standard errors are
    often inappropriately small and this could result in spurious results ([Stommes,
    Aronow, and Sävje 2023](99-references.html#ref-stommessaysno)). If you use RDD
    it is critical that you discuss the possibility of much wider standard errors
    than are reported by software packages, and what effect this would have on your
    conclusions.*  *### 15.5.3 Alcohol and crime in California
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: RDD 是一种流行的方法，但元分析表明，标准误差通常被不适当地低估，这可能导致虚假的结果 ([Stommes, Aronow, and Sävje 2023](99-references.html#ref-stommessaysno))。如果你使用
    RDD，那么讨论比软件包报告的更广泛的标准误差的可能性，以及这将对你的结论产生什么影响是至关重要的。*  *### 15.5.3 加利福尼亚的酒精和犯罪
- en: There are many opportunities to use regression discontinuity design. For instance,
    we often see it used in elections where one candidate barely wins. Caughey and
    Sekhon ([2011](99-references.html#ref-caugheysekhon2011)) examine US House elections
    between 1942 and 2008 and showed that there is considerable difference between
    bare winners and bare losers. They highlight that one of the advantages of regression
    discontinuity is the fact that the assumptions can be tested. Another common use
    is when there is a somewhat arbitrary cut-off. For instance, in much of the USA
    the legal drinking age is 21\. Carpenter and Dobkin ([2015](99-references.html#ref-carpenterdobkin))
    consider the possible effect of alcohol on crime by comparing arrests and other
    records of those who are either side of 21 in California. They find those who
    are slightly over 21 are slightly more likely to be arrested than those slightly
    under 21\. We will revisit Carpenter and Dobkin ([2015](99-references.html#ref-carpenterdobkin))
    in the context of crime in California.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 在回归断点设计中有很多应用机会。例如，我们经常在选举中看到它的应用，其中一位候选人仅以微弱优势获胜。Caughey和Sekhon([2011](99-references.html#ref-caugheysekhon2011))研究了1942年至2008年间的美国众议院选举，并表明裸胜者和裸败者之间存在相当大的差异。他们强调，回归断点的一个优点是假设可以被检验。另一种常见应用是在存在某种任意截止点的情况下。例如，在美国的大部分地区，法定饮酒年龄是21岁。Carpenter和Dobkin([2015](99-references.html#ref-carpenterdobkin))通过比较加利福尼亚州21岁左右的被捕者和其他记录来考虑酒精对犯罪的可能影响。他们发现，略大于21岁的人被捕的可能性略高于略小于21岁的人。我们将在加利福尼亚州的犯罪背景下重新审视Carpenter和Dobkin([2015](99-references.html#ref-carpenterdobkin))的研究。
- en: 'We can obtain their replication data ([Carpenter and Dobkin 2014](99-references.html#ref-carpenterdobkinreplicationdata))
    from [here](https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/27070).
    Carpenter and Dobkin ([2015](99-references.html#ref-carpenterdobkin)) consider
    a large number of variables and construct a rate, and average this rate over a
    fortnight, but for simplicity, we will just consider numbers for a few variables:
    assault, aggravated assault, DUI, and traffic violations ([Figure 15.8](#fig-californiaarrests)).'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以从[这里](https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/27070)获取他们的复制数据([Carpenter
    and Dobkin 2014](99-references.html#ref-carpenterdobkinreplicationdata))。Carpenter和Dobkin([2015](99-references.html#ref-carpenterdobkin))考虑了许多变量，并构建了一个比率，然后在一个半月内平均这个比率，但为了简化，我们只考虑几个变量的数值：攻击、严重攻击、酒驾和交通违规([图15.8](#fig-californiaarrests))。
- en: '[PRE42]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: '*[PRE43]'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE43]'
- en: '*![](../Images/f68581fa2ab5a7224494fffb740ea1c9.png)'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/f68581fa2ab5a7224494fffb740ea1c9.png)'
- en: 'Figure 15.8: Comparing the number of arrests either side of turning 21 for
    selected reasons*  *[PRE44]'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.8：比较因特定原因在21岁前后被捕的人数*  *[PRE44]
- en: '*[PRE45]'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE45]'
- en: '*[PRE46]'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE46]'
- en: '*[PRE47]'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE47]'
- en: '*Table 15.6: Examining the effect of alcohol on crime in California'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: '*表15.6：检验加利福尼亚州酒精对犯罪的影响'
- en: '|  | (1) |'
  id: totrans-261
  prefs: []
  type: TYPE_TB
  zh: '|  | (1) |'
- en: '| --- | --- |'
  id: totrans-262
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| (Intercept) | 145.54 |'
  id: totrans-263
  prefs: []
  type: TYPE_TB
  zh: '| (截距) | 145.54 |'
- en: '| age | 3.87 |'
  id: totrans-264
  prefs: []
  type: TYPE_TB
  zh: '| age | 3.87 |'
- en: '| is_21_or_more | 13.24 |'
  id: totrans-265
  prefs: []
  type: TYPE_TB
  zh: '| is_21_or_more | 13.24 |'
- en: '| Num.Obs. | 1459 |'
  id: totrans-266
  prefs: []
  type: TYPE_TB
  zh: '| Num.Obs. | 1459 |'
- en: '| R2 | 0.299 |'
  id: totrans-267
  prefs: []
  type: TYPE_TB
  zh: '| R2 | 0.299 |'
- en: '| R2 Adj. | 0.297 |'
  id: totrans-268
  prefs: []
  type: TYPE_TB
  zh: '| R2 Adj. | 0.297 |'
- en: '| Log.Lik. | -6153.757 |'
  id: totrans-269
  prefs: []
  type: TYPE_TB
  zh: '| Log.Lik. | -6153.757 |'
- en: '| ELPD | -6157.3 |'
  id: totrans-270
  prefs: []
  type: TYPE_TB
  zh: '| ELPD | -6157.3 |'
- en: '| ELPD s.e. | 32.9 |'
  id: totrans-271
  prefs: []
  type: TYPE_TB
  zh: '| ELPD s.e. | 32.9 |'
- en: '| LOOIC | 12314.6 |'
  id: totrans-272
  prefs: []
  type: TYPE_TB
  zh: '| LOOIC | 12314.6 |'
- en: '| LOOIC s.e. | 65.7 |'
  id: totrans-273
  prefs: []
  type: TYPE_TB
  zh: '| LOOIC s.e. | 65.7 |'
- en: '| WAIC | 12314.6 |'
  id: totrans-274
  prefs: []
  type: TYPE_TB
  zh: '| WAIC | 12314.6 |'
- en: '| RMSE | 16.42 |*  *And the results are similar if we use `rdrobust`.'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: '| RMSE | 16.42 |*  *如果使用`rdrobust`，结果也相似。'
- en: '[PRE48]'
  id: totrans-276
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: '*[PRE49]***********  ***## 15.6 Instrumental variables'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE49]***********  ***## 15.6 工具变量'
- en: 'Instrumental variables (IV) is an approach that can be handy when we have some
    type of treatment and control going on, but we have a lot of correlation with
    other variables and we possibly do not have a variable that actually measures
    what we are interested in. Adjusting for observables will not be enough to create
    a good estimate. Instead we find some variable—the eponymous instrumental variable—that
    is:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 工具变量(IV)是一种在存在某种类型的治疗和控制时很有用的方法，但我们与其他变量有大量相关性，并且我们可能没有测量我们感兴趣的实际变量的变量。仅调整可观察变量不足以创建一个好的估计。相反，我们找到一个变量——同名的工具变量——它是：
- en: correlated with the treatment variable, but
  id: totrans-279
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 与处理变量相关联，但
- en: not correlated with the outcome.
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 与结果不相关。
- en: This solves our problem because the only way the instrumental variable can have
    an effect is through the treatment variable, and so we can adjust our understanding
    of the effect of the treatment variable appropriately. The trade-off is that instrumental
    variables must satisfy a bunch of different assumptions, and that, frankly, they
    are difficult to identify *ex ante*. Nonetheless, when we are able to use them,
    they are a powerful tool for speaking about causality.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 这解决了我们的问题，因为工具变量产生影响的唯一方式是通过处理变量，因此我们可以适当地调整对处理变量影响的理解。权衡的是，工具变量必须满足一系列不同的假设，而且坦白说，它们在事前是难以识别的。尽管如此，当我们能够使用它们时，它们是讨论因果关系的强大工具。
- en: The canonical instrumental variables example is smoking. These days we know
    that smoking causes cancer. But because smoking is correlated with a lot of other
    variables, for instance, education, it could be that it was actually education
    that causes cancer. RCTs may be possible, but they are likely to be troublesome
    in terms of speed and ethics, and so instead we look for some other variable that
    is correlated with smoking, but not, in and of itself, with lung cancer. In this
    case, we look to tax rates, and other policy responses, on cigarettes. As the
    tax rates on cigarettes are correlated with the number of cigarettes that are
    smoked, but not correlated with lung cancer, other than through their impact on
    cigarette smoking, through them we can assess the effect of cigarettes smoked
    on lung cancer.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 经典的工具变量例子是吸烟。如今我们知道吸烟会导致癌症。但由于吸烟与许多其他变量相关，例如教育，可能实际上是教育导致了癌症。随机对照试验可能是可行的，但它们在速度和伦理方面可能很麻烦，因此我们转而寻找一些与吸烟相关，但本身并不与肺癌相关的变量。在这种情况下，我们关注香烟的税率和其他政策反应。由于香烟的税率与吸烟的数量相关，但与肺癌不相关（除了通过影响吸烟），我们可以通过它们来评估吸烟对肺癌的影响。
- en: To implement instrumental variables we first regress tax rates on cigarette
    smoking to get some coefficient on the instrumental variable, and then (in a separate
    regression) regress tax rates on lung cancer to again, get some coefficient on
    the instrumental variable. Our estimate is then the ratio of these coefficients,
    which is described as a “Wald estimate” ([Gelman and Hill 2007, 219](99-references.html#ref-gelmanandhill)).
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 要实施工具变量，我们首先对香烟吸烟进行回归，以获得工具变量的系数，然后（在另一个回归中）对肺癌进行回归，再次获得工具变量的系数。我们的估计值是这些系数的比率，这被描述为“Wald估计”([Gelman
    and Hill 2007, 219](99-references.html#ref-gelmanandhill))。
- en: Sometimes instrumental variables are used in the context of random allocation
    of treatment, such as the Oregon Health Insurance Experiment introduced in [Chapter
    8](08-hunt.html). Recall the issue was that a lottery was used to select individuals
    who were allocated to apply for health insurance, but there was nothing forcing
    them to do this. Our approach would then be to consider the relationship between
    being selected and taking up health insurance, and then between various health
    outcomes and taking up insurance. Our instrumental variable estimate, which would
    be the ratio, would estimate only those that took up health insurance because
    they were selected.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 有时在随机分配治疗的情况下使用工具变量，例如第8章中介绍的俄勒冈健康保险实验。回想一下问题在于使用彩票选择分配给申请健康保险的个人，但没有强制他们这样做。我们的方法将是考虑被选中与接受健康保险之间的关系，以及各种健康结果与接受保险之间的关系。我们的工具变量估计值，即比率，将仅估计那些因为被选中而接受健康保险的人。
- en: 'Following the language of Gelman and Hill ([2007, 216](99-references.html#ref-gelmanandhill)),
    when we use instrumental variables we make a variety of assumptions including:'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 沿用Gelman和Hill（[2007, 216](99-references.html#ref-gelmanandhill)）的语言，当我们使用工具变量时，我们做出各种假设，包括：
- en: Ignorability of the instrument.
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 工具变量的不可观测性。
- en: Correlation between the instrumental variable and the treatment variable.
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 工具变量与处理变量之间的相关性。
- en: Monotonicity.
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 单调性。
- en: Exclusion restriction.
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 排除限制。
- en: 'As an aside, the history of instrumental variables is intriguing, and Stock
    and Trebbi ([2003](99-references.html#ref-stock2003retrospectives)), via Cunningham
    ([2021](99-references.html#ref-Cunningham2021)), provide a brief overview. The
    method was first published in Wright ([1928](99-references.html#ref-wright1928tariff)).
    This is a book about the effect of tariffs on animal and vegetable oil. Why might
    instrumental variables be important in a book about tariffs on animal and vegetable
    oil? The fundamental problem is that the effect of tariffs depends on both supply
    and demand. But we only know prices and quantities, so we do not know what is
    driving the effect. We can use instrumental variables to pin down causality. The
    intriguing aspect is that the instrumental variables discussion is only in “Appendix
    B” of that book. It would seem odd to relegate a major statistical break through
    to an appendix. Further, Philip G. Wright, the book’s author, had a son Sewall
    Wright, who had considerable expertise in statistics and the specific method used
    in “Appendix B”. Hence the mystery of “Appendix B”: did Philip or Sewall write
    it? Cunningham ([2021](99-references.html#ref-Cunningham2021)), Stock and Trebbi
    ([2003](99-references.html#ref-stock2003retrospectives)), and Angrist and Krueger
    ([2001](99-references.html#ref-angristkrueger)) all go into more detail, but on
    balance feel that it is likely that Philip authored the work.'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 作为补充，工具变量的历史非常有趣，Stock和Trebbi ([2003](99-references.html#ref-stock2003retrospectives))，通过Cunningham
    ([2021](99-references.html#ref-Cunningham2021))，提供了一个简要概述。该方法首次发表在Wright ([1928](99-references.html#ref-wright1928tariff))的作品中。这是一本关于关税对动物和植物油影响的书。为什么在关于动物和植物油关税的书里工具变量可能很重要呢？基本问题是关税的影响取决于供需双方。但我们只知道价格和数量，所以我们不知道是什么在驱动这种影响。我们可以使用工具变量来锁定因果关系。有趣的是，工具变量的讨论仅在该书的“附录B”中。将一个主要的统计突破归入附录似乎很奇怪。此外，该书的作者Philip
    G. Wright有一个儿子Sewall Wright，他在统计学和“附录B”中使用的特定方法方面有相当大的专业知识。因此，“附录B”的神秘之处在于：是Philip还是Sewall写的？Cunningham
    ([2021](99-references.html#ref-Cunningham2021))，Stock和Trebbi ([2003](99-references.html#ref-stock2003retrospectives))，以及Angrist和Krueger
    ([2001](99-references.html#ref-angristkrueger))都进行了更详细的探讨，但总体上认为Philip可能是作品的作者。
- en: '15.6.1 Simulated example: health status, smoking, and tax rates'
  id: totrans-291
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 15.6.1 模拟示例：健康状况、吸烟和税率
- en: Let us generate some data. We will explore a simulation related to the canonical
    example of health status, smoking, and tax rates. We are looking to explain how
    healthy someone is based on the amount they smoke, via the tax rate on smoking.
    We are going to generate different tax rates by provinces. The tax rate on cigarettes
    is now similar across the Canadian provinces but that this is fairly recent. Let
    us assume Alberta had a low tax, and Nova Scotia had a high tax.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们生成一些数据。我们将探索与健康状况、吸烟和税率的标准示例相关的模拟。我们试图通过吸烟量来解释一个人的健康状况，通过吸烟的税率。我们将根据省份生成不同的税率。加拿大的省份现在香烟税率相似，但这相对较新。让我们假设阿尔伯塔省的税率较低，而新斯科舍省的税率较高。
- en: We are simulating data for illustrative purposes, so we need to impose the answer
    that we want. When you actually use instrumental variables you will be reversing
    the process.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 我们正在模拟数据以供说明，因此我们需要施加我们想要的答案。当你实际使用工具变量时，你将反转这个过程。
- en: '[PRE50]'
  id: totrans-294
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: '*Now we need to relate the number of cigarettes that someone smoked to their
    health. We will model health status as a draw from the Normal distribution, with
    either a high or low mean depending on whether the person smokes.'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: '*现在我们需要将某人吸烟的数量与他们的健康状况联系起来。我们将健康状况建模为从正态分布中抽取的值，其平均值的高低取决于该人是否吸烟。'
- en: '[PRE51]'
  id: totrans-296
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: '*Now we need a relationship between cigarettes and the province (because in
    this illustration, the provinces have different tax rates).'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: '*现在我们需要建立香烟和省份之间的关系（因为在这个示例中，省份有不同的税率）。'
- en: '[PRE52]'
  id: totrans-298
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: '*[PRE53]*  *Now we can look at our data.'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE53]*  *现在我们可以查看我们的数据了。'
- en: '[PRE54]'
  id: totrans-300
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: '*![](../Images/758e99299e46cf90b450e424f8f2113c.png)*  *Finally, we can use
    the tax rate as an instrumental variable to estimate the effect of smoking on
    health.'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/758e99299e46cf90b450e424f8f2113c.png)*  *最后，我们可以使用税率作为工具变量来估计吸烟对健康的影响。'
- en: '[PRE55]'
  id: totrans-302
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: '*[PRE56]*  *By understanding the effect of tax rates on both smoking and health,
    we find that if you smoke then your health is likely to be worse than if you do
    not smoke.'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE56]*  *通过理解税率对吸烟和健康的影响，我们发现如果你吸烟，那么你的健康状况可能比不吸烟时要差。'
- en: We can use `iv_robust()` from `estimatr` to estimate IV ([Table 15.7](#tbl-ivexamplesmoker)).
    One nice reason for doing this is that it can help to keep everything organized
    and adjust the standard errors.
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用 `estimatr` 中的 `iv_robust()` 来估计工具变量 ([表15.7](#tbl-ivexamplesmoker))。这样做的一个好理由是，它可以帮助保持一切井然有序，并调整标准误差。
- en: '[PRE57]'
  id: totrans-305
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: '*Table 15.7: Instrumental variable example using simulated data'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: '*表15.7：使用模拟数据进行的工具变量示例'
- en: '|  | (1) |'
  id: totrans-307
  prefs: []
  type: TYPE_TB
  zh: '|  | (1) |'
- en: '| --- | --- |'
  id: totrans-308
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| (Intercept) | 0.977 |'
  id: totrans-309
  prefs: []
  type: TYPE_TB
  zh: '| (截距) | 0.977 |'
- en: '|  | (0.041) |'
  id: totrans-310
  prefs: []
  type: TYPE_TB
  zh: '|  | (0.041) |'
- en: '| smoker | -0.980 |'
  id: totrans-311
  prefs: []
  type: TYPE_TB
  zh: '| 吸烟者 | -0.980 |'
- en: '|  | (0.081) |'
  id: totrans-312
  prefs: []
  type: TYPE_TB
  zh: '|  | (0.081) |'
- en: '| Num.Obs. | 10000 |'
  id: totrans-313
  prefs: []
  type: TYPE_TB
  zh: '| Num.Obs. | 10000 |'
- en: '| R2 | 0.201 |'
  id: totrans-314
  prefs: []
  type: TYPE_TB
  zh: '| R2 | 0.201 |'
- en: '| R2 Adj. | 0.201 |'
  id: totrans-315
  prefs: []
  type: TYPE_TB
  zh: '| R2 Adj. | 0.201 |'
- en: '| AIC | 28342.1 |'
  id: totrans-316
  prefs: []
  type: TYPE_TB
  zh: '| AIC | 28342.1 |'
- en: '| BIC | 28363.7 |'
  id: totrans-317
  prefs: []
  type: TYPE_TB
  zh: '| BIC | 28363.7 |'
- en: '| RMSE | 1.00 |******  ***### 15.6.2 Assumptions'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: '| RMSE | 1.00 |******  ***### 15.6.2 假设'
- en: The set-up of instrumental variables is described in [Figure 15.9](#fig-dot-taxrebateasiv-quarto),
    which shows education as a confounder between income and happiness. A tax rebate
    likely only affects income, not education, and could be used as an instrumental
    variable.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 工具变量的设置在 [图15.9](#fig-dot-taxrebateasiv-quarto) 中描述，该图显示了教育作为收入和幸福感之间的混杂因素。税收返还可能只会影响收入，而不会影响教育，因此可以用作工具变量。
- en: '[PRE58]'
  id: totrans-320
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: '*<svg width="384" height="480" viewBox="0.00 0.00 189.54 116.00" xlink="http://www.w3.org/1999/xlink"
    style="; max-width: none; max-height: none"><g id="graph0" class="graph" transform="scale(1
    1) rotate(0) translate(4 112)"><title>D</title> <g id="node1" class="node"><title>a</title>
    <text text-anchor="middle" x="50.46" y="-13.8" font-family="Helvetica,sans-Serif"
    font-size="14.00">Income</text></g> <g id="node2" class="node"><title>b</title>
    <text text-anchor="middle" x="140.46" y="-13.8" font-family="Helvetica,sans-Serif"
    font-size="14.00">Happiness</text></g> <g id="edge1" class="edge"><title>a->b</title></g>
    <g id="node3" class="node"><title>c</title> <text text-anchor="middle" x="140.46"
    y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00">Education</text></g>
    <g id="edge2" class="edge"><title>c->a</title></g> <g id="edge3" class="edge"><title>c->b</title></g>
    <g id="node4" class="node"><title>d</title> <text text-anchor="middle" x="41.46"
    y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00">Tax rebate</text></g>
    <g id="edge4" class="edge"><title>d->a</title></g></g></svg>'
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: '*<svg width="384" height="480" viewBox="0.00 0.00 189.54 116.00" xlink="http://www.w3.org/1999/xlink"
    style="; max-width: none; max-height: none"><g id="graph0" class="graph" transform="scale(1
    1) rotate(0) translate(4 112)"><title>D</title> <g id="node1" class="node"><title>a</title>
    <text text-anchor="middle" x="50.46" y="-13.8" font-family="Helvetica,sans-Serif"
    font-size="14.00">收入</text></g> <g id="node2" class="node"><title>b</title> <text
    text-anchor="middle" x="140.46" y="-13.8" font-family="Helvetica,sans-Serif" font-size="14.00">幸福感</text></g>
    <g id="edge1" class="edge"><title>a->b</title></g> <g id="node3" class="node"><title>c</title>
    <text text-anchor="middle" x="140.46" y="-85.8" font-family="Helvetica,sans-Serif"
    font-size="14.00">教育</text></g> <g id="edge2" class="edge"><title>c->a</title></g>
    <g id="edge3" class="edge"><title>c->b</title></g> <g id="node4" class="node"><title>d</title>
    <text text-anchor="middle" x="41.46" y="-85.8" font-family="Helvetica,sans-Serif"
    font-size="14.00">税收返还</text></g> <g id="edge4" class="edge"><title>d->a</title></g></g></svg>'
- en: 'Figure 15.9: Education as a confounder for the relationship between income
    and happiness with tax rebate as an instrumental variable*  *As discussed earlier,
    there are a variety of assumptions that are made when using instrumental variables.
    The two most important are:'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.9：教育作为收入与幸福感之间关系的混杂因素，税收返还作为工具变量*  *如前所述，在使用工具变量时，会做出各种假设。其中最重要的两个是：
- en: Exclusion Restriction. This assumption is that the instrumental variable only
    affects the outcome variable through the predictor variable of interest.
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 排除限制。这个假设是工具变量只通过感兴趣的预测变量影响结果变量。
- en: Relevance. There must actually be a relationship between the instrumental variable
    and the predictor variable.
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 相关性。实际上，工具变量和预测变量之间必须存在某种关系。
- en: There is typically a trade-off between these two. There are plenty of variables
    that satisfy one, precisely because they do not satisfy the other. Cunningham
    ([2021, 211](99-references.html#ref-Cunningham2021)) describes how one test of
    a good instrument is if people are initially confused before you explain it to
    them, only to think it obvious in hindsight.
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 通常在这两者之间会有权衡。有很多变量满足其中一个条件，正是因为它们不满足另一个条件。Cunningham ([2021, 211](99-references.html#ref-Cunningham2021))
    描述了检验良好工具的一个标准是，在向人们解释之前，他们可能会感到困惑，但事后看来却显得显而易见。
- en: Relevance can be tested using regression and other tests for correlation. The
    exclusion restriction cannot be tested. We need to present evidence and convincing
    arguments. The difficult aspect is that the instrument needs to seem irrelevant
    because that is the implication of the exclusion restriction ([Cunningham 2021,
    225](99-references.html#ref-Cunningham2021)).
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 相关性可以通过回归和其他相关性测试来检验。排除限制无法检验。我们需要提供证据和有说服力的论据。困难之处在于，工具变量需要看起来不相关，因为这正是排除限制的含义
    ([Cunningham 2021, 225](99-references.html#ref-Cunningham2021))。
- en: Instrumental variables is a useful approach because one can obtain causal estimates
    even without explicit randomization. Finding instrumental variables used to be
    a bit of a white whale, especially in academia. But there has been increased use
    of IV approaches downstream of A/B tests ([Taddy 2019, 162](99-references.html#ref-taddy2019)).
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 工具变量是一种有用的方法，因为即使没有明确的随机化，也可以获得因果估计。寻找工具变量曾经是一点点的白鲸，尤其是在学术界。但自从A/B测试之后，工具变量方法的使用有所增加
    ([Taddy 2019, 162](99-references.html#ref-taddy2019))。
- en: For a long time, the canonical instrumental variable was rainfall, or more generally,
    the weather. However, the issue is that if the instrumental variable is correlated
    with other, potentially unobserved, variables, then they could be correlated with
    the variable of interest. This is a similar criticism to that above of propensity
    score matching. Mellon ([2024](99-references.html#ref-mellontakingourtoys)) found
    a large number of variables have been linked to weather in instrumental variable
    papers. It would seem that the likelihood of incorrectly estimated effects in
    some of them is quite high.
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 很长时间以来，标准工具变量一直是降雨量，或者更普遍地说，是天气。然而，问题是如果工具变量与其他潜在未观察到的变量相关，那么它们可能与感兴趣的变量相关。这与上面关于倾向得分匹配的批评类似。Mellon
    ([2024](99-references.html#ref-mellontakingourtoys)) 发现大量变量在工具变量论文中与天气相关联。似乎在这些变量中，某些效应被错误估计的可能性相当高。
- en: When considering an instrumental variable approach, you should spend considerable
    amounts of time on both of these assumptions. Mellon ([2024](99-references.html#ref-mellontakingourtoys))
    shows that we are especially concerned that this particular tax rebate only affects
    income and no other variable, which could itself be linked with our variables
    of interest. Approaches based on instrumental variables provide extensive freedom
    for the researcher, and Brodeur, Cook, and Heyes ([2020](99-references.html#ref-brodeurcookheyes))
    find they are more associated with p-hacking and selection reporting compared
    with RCTs and RDD. As with multiple-imputation, and propensity score matching,
    we recommend caution when using IV, and that it is never naively turned to. Indeed,
    Betz, Cook, and Hollenbach ([2018](99-references.html#ref-betzcookhollenbach2018))
    go further and say that spatial instruments are rarely valid.****  ***## 15.7
    Exercises
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 在考虑工具变量方法时，你应该在这两个假设上花费相当多的时间。Mellon ([2024](99-references.html#ref-mellontakingourtoys))
    表明我们特别担心这个特定的税收减免只会影响收入，而不会影响其他变量，而这个变量本身可能与我们的变量感兴趣。基于工具变量的方法为研究人员提供了广泛的自由度，而Brodeur、Cook和Heyes
    ([2020](99-references.html#ref-brodeurcookheyes)) 发现它们与p-hacking和选择报告相比，与RCT和RDD更为相关。正如多重插补和倾向得分匹配一样，我们建议在使用IV时要谨慎，并且永远不要天真地使用。事实上，Betz、Cook和Hollenbach
    ([2018](99-references.html#ref-betzcookhollenbach2018)) 进一步表示，空间工具变量很少是有效的。
- en: Practice
  id: totrans-330
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Practice
- en: '*(Plan)* Consider the following scenario: *Two children will both look when
    an ambulance passes, but only the older one will look if a street car passes,
    and only the younger one will look when a bike passes.* Please sketch out what
    that dataset could look like and then sketch a graph that you could build to show
    all observations.'
  id: totrans-331
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(Plan)* 考虑以下场景：*两个孩子都会在救护车经过时看，但只有年长的孩子会在电车经过时看，只有年幼的孩子会在自行车经过时看。* 请绘制出这个数据集可能的样子，然后绘制一个图表来展示所有观察结果。'
- en: '*(Simulate)* Please further consider the scenario described and simulate the
    situation. Please include at least ten tests based on the simulated data.'
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(Simulate)* 请进一步考虑所描述的场景，并模拟这种情况。请至少包括基于模拟数据的十个测试。'
- en: '*(Acquire)* Please describe a possible source of such a dataset.'
  id: totrans-333
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(Acquire)* 请描述一个可能的此类数据集来源。'
- en: '*(Explore)* Please use `ggplot2` to build the graph that you sketched. Then
    use `rstanarm` to build a model.'
  id: totrans-334
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(Explore)* 请使用 `ggplot2` 构建您所绘制的图表。然后使用 `rstanarm` 构建模型。'
- en: '*(Communicate)* Please write two paragraphs about what you did.'
  id: totrans-335
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(Communicate)* 请写两段关于你所做的工作的描述。'
- en: Quiz
  id: totrans-336
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Quiz
- en: What is the key assumption when using difference-in-differences?
  id: totrans-337
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用双重差分法时的关键假设是什么？
- en: 'Please read Varner and Sankin ([2020](99-references.html#ref-markupinsurance))
    and discuss: i) two statistical aspects; and ii) two ethical aspects.'
  id: totrans-338
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请阅读Varner和Sankin ([2020](99-references.html#ref-markupinsurance)) 的文章，并讨论：i)
    两个统计方面；ii) 两个伦理方面。
- en: Please go to the GitHub [page](https://github.com/the-markup/investigation-allstates-algorithm)
    related to Varner and Sankin ([2020](99-references.html#ref-markupinsurance)).
    Please list two points about what is good, and another two points about what could
    be improved.
  id: totrans-339
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请访问与Varner和Sankin ([2020](99-references.html#ref-markupinsurance)) 相关的GitHub
    [页面](https://github.com/the-markup/investigation-allstates-algorithm)。请列出两点优点，以及另两点可以改进的地方。
- en: What are the fundamental features of regression discontinuity design and what
    are the conditions that are needed in order for regression discontinuity design
    to be able to be used?
  id: totrans-340
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 回归不连续设计的根本特征是什么？以及回归不连续设计能够被使用所需满足的条件是什么？
- en: What are some threats to the validity of regression discontinuity design estimates?
  id: totrans-341
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 回归不连续设计估计的有效性受到哪些威胁？
- en: 'According to Meng ([2021](99-references.html#ref-Meng2021What)) “Data science
    can persuade via\(\dots\)” (pick all that apply):'
  id: totrans-342
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据Meng ([2021](99-references.html#ref-Meng2021What))，“数据科学可以通过\(\dots\)” (请选择所有适用的)：
- en: the careful establishment of evidence from fair-minded and high-quality data
    collection
  id: totrans-343
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从公平、高质量的数据收集中谨慎建立证据
- en: processing and analysis
  id: totrans-344
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 处理和分析
- en: the honest interpretation and communication of findings
  id: totrans-345
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 真诚地解释和传达研究结果
- en: large sample sizes
  id: totrans-346
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 大样本量
- en: According to Riederer ([2021](99-references.html#ref-riedererdesignpatterns))
    if we have “disjoint treated and untreated groups partitioned by a sharp cut-off”
    then which method should we use to measure the local treatment effect at the juncture
    between groups (pick one)?
  id: totrans-347
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据Riederer ([2021](99-references.html#ref-riedererdesignpatterns))，如果我们有“由一个明确的截止点分割的相互独立的处理组和未处理组”，那么在组之间的交界处测量局部处理效果应使用哪种方法？（请选择一个）？
- en: regression discontinuity
  id: totrans-348
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 回归不连续
- en: matching
  id: totrans-349
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 匹配
- en: difference-in-differences
  id: totrans-350
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双重差分
- en: event study methods
  id: totrans-351
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 事件研究法
- en: What does causal inference require according to Riederer ([2021](99-references.html#ref-riedererdesignpatterns))
    (pick all that apply)?
  id: totrans-352
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据Riederer ([2021](99-references.html#ref-riedererdesignpatterns))，因果推断需要哪些条件？（请选择所有适用的）？
- en: data management
  id: totrans-353
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 数据管理
- en: domain knowledge
  id: totrans-354
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 领域知识
- en: probabilistic reasoning
  id: totrans-355
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 概率推理
- en: Consider an Australian 30-39 year old male living in Toronto with two children
    and a PhD. Which of the following do you think they would match most closely with
    and why (please explain in a paragraph or two)?
  id: totrans-356
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 考虑一位居住在多伦多的澳大利亚30-39岁男性，他有两个孩子并拥有博士学位。你认为他们最接近以下哪一种，为什么（请解释一至两段话）？
- en: An Australian 30-39 year old male living in Toronto with one child and a bachelors
    degree
  id: totrans-357
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一位居住在多伦多的澳大利亚30-39岁男性，有一个孩子，拥有学士学位
- en: A Canadian 30-39 year old male living in Toronto with one child and a PhD
  id: totrans-358
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一位居住在多伦多的加拿大30-39岁男性，有一个孩子并拥有博士学位
- en: An Australian 30-39 year old male living in Ottawa with one child and a PhD
  id: totrans-359
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一位居住在渥太华的澳大利亚30-39岁男性，有一个孩子并拥有博士学位
- en: A Canadian 18-29 year old male living in Toronto with one child and a PhD
  id: totrans-360
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一位居住在多伦多的加拿大18-29岁男性，有一个孩子并拥有博士学位
- en: What is propensity score matching? If you were matching people, then what are
    some of the features that you would like to match on? What sort of ethical questions
    does collecting and storing such information raise for you? (Please write at least
    one paragraph for each question.)
  id: totrans-361
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 什么是倾向得分匹配？如果你正在匹配人群，那么你希望匹配哪些特征？收集和存储此类信息会引发你哪些伦理问题？（请为每个问题写至少一段话。）
- en: Draw a DAG illustrating the collider bias described by Bronner ([2020](99-references.html#ref-bronnerftw)).
  id: totrans-362
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 绘制一个DAG图，展示Bronner ([2020](99-references.html#ref-bronnerftw)) 描述的碰撞偏差。
- en: Kahneman, Sibony, and Sunstein ([2021](99-references.html#ref-NoiseKahneman))
    say “\(\dots\)while correlation does not imply causation, causation does imply
    correlation. Where there is a causal link, we should find a correlation”. With
    reference to Cunningham ([2021, chap. 1](99-references.html#ref-Cunningham2021)),
    are they right or wrong, and why?
  id: totrans-363
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Kahneman, Sibony和Sunstein ([2021](99-references.html#ref-NoiseKahneman)) 说“\(\dots\)虽然相关性不意味着因果关系，但因果关系意味着相关性。在有因果关系的场合，我们应该找到相关性”。参考Cunningham
    ([2021, 第1章](99-references.html#ref-Cunningham2021))，他们是对的还是错的，为什么？
- en: Class activities
  id: totrans-364
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 课堂活动
- en: “Look Daddy, I’m shaving”. A three-year-old stands next to his father. The father
    shaves, and then has no beard. The three-year-old “shaves”, and then also has
    no beard. Use a DAG to illustrate the situation and what might be missing.
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “看爸爸，我在刮胡子。”一个三岁的孩子站在他父亲旁边。父亲刮胡子，然后没有胡子了。这个三岁的孩子“刮胡子”，然后也没有胡子了。使用有向无环图（DAG）说明这种情况以及可能遗漏的内容。
- en: 'Consider the following situation: “There are two surgeons at a hospital. One
    is considered great, and so triage, on average, tends to send hard cases to them,
    hence many of their patients die. The other surgeon is considered good, and so
    triage, on average, tends to send moderate cases to them, hence an average number
    of their patients die.” Simulate the situation, including only patient name, surgeon
    name, and patient outcome. Run a regression. What conclusion do you draw? Then
    draw a DAG that specifies the data that were missed in that regression. Add those
    variables to the simulation and re-run the regression. How does your conclusion
    differ?'
  id: totrans-366
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 考虑以下情况：“医院里有两位外科医生。一位被认为很棒，因此平均来说，分级通常会把困难病例送到他们那里，因此许多他们的病人死亡。另一位外科医生被认为很好，因此平均来说，分级通常会把中等病例送到他们那里，因此他们的病人死亡的平均数。”模拟这种情况，包括只有病人姓名、外科医生姓名和病人结果。运行回归。你得出什么结论？然后绘制一个DAG，指定在回归中遗漏的数据。将这些变量添加到模拟中并重新运行回归。你的结论有何不同？
- en: Pick either Simpson’s paradox or Berkson’s paradox and then please think of
    an example and discuss an analytical approach to adjusting for it.
  id: totrans-367
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择辛普森悖论或伯克森悖论，然后请想一个例子，并讨论调整该悖论的分析方法。
- en: Task
  id: totrans-368
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 任务
- en: You are interested in the characteristics of people’s friendship groups and
    how those characteristics relate to individual-level outcomes, particularly economic
    measures.
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 你对人们友谊群体的特征以及这些特征如何与个人层面的结果（尤其是经济指标）相关感兴趣。
- en: You have access to individual-level data from a social media website, which
    contains information about social interactions (comments on posts, tags, etc)
    on the website, as well as a wide variety of individual-level characteristics.
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以访问社交媒体网站的个人层面数据，该网站包含有关网站上的社会互动（帖子评论、标签等）的信息，以及广泛的个人层面特征。
- en: While the social media website is very popular, not everyone in the population
    you are interested in has an account, and not everyone that has an account is
    active on the website. Given you are interested in economic measures, what are
    some possible issues with using these data to make inferences about the broader
    population?
  id: totrans-371
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 虽然社交媒体网站非常受欢迎，但你对其中感兴趣的人口中并非每个人都有账户，而且并非每个有账户的人都在网站上活跃。鉴于你对经济指标感兴趣，使用这些数据来对更广泛的总体进行推断可能会出现哪些可能的问题？
- en: 'The data do not contain information on individual-level income. But for around
    20 per cent of the sample you have information on the “census block” of the individual.
    By way of background, a census block contains no more than 3,000 individuals.
    The median income of each census block is known. As such, you decide to estimate
    individual-level income as follows:'
  id: totrans-372
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 数据中不包含个人层面的收入信息。但对于大约20%的样本，你有关于个人“人口普查区”的信息。作为背景，一个人口普查区包含不超过3,000个人。每个人口普查区的中位数收入是已知的。因此，你决定如下估计个人层面的收入：
- en: Regress the median income of each census block on a series of individual level
    characteristics (such as age, education, marital status, gender, \(\dots\)).
  id: totrans-373
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将每个人口普查区的中位数收入对一系列个人层面特征（如年龄、教育、婚姻状况、性别等）进行回归分析。
- en: Use these estimates to predict the income of individuals that do not have location
    information. Briefly discuss the advantages and disadvantages of this approach,
    particularly in how it could affect the study of income characteristics of friendship
    groups. Ensure that you address the ecological fallacy.
  id: totrans-374
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用这些估计值来预测没有位置信息的个人的收入。简要讨论这种方法的优势和劣势，特别是它如何影响对友谊群体收入特征的研究。确保你提到了生态学谬误。
- en: Understandably, the social media website will not allow the unfettered distribution
    of individual-level data. What are some ways in which you might nonetheless enhance
    the reproducibility of your work?
  id: totrans-375
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可以理解的是，社交媒体网站不会允许个人层面数据的无限制分发。你可能会采取哪些方法来增强你工作的可重复性？
- en: This should take at least two pages.
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 这至少需要两页。
- en: 'Alexander, Rohan, and Zachary Ward. 2018\. “Age at Arrival and Assimilation
    During the Age of Mass Migration.” *The Journal of Economic History* 78 (3): 904–37\.
    [https://doi.org/10.1017/S0022050718000335](https://doi.org/10.1017/S0022050718000335).Angelucci,
    Charles, and Julia Cagé. 2019\. “Newspapers in Times of Low Advertising Revenues.”
    *American Economic Journal: Microeconomics* 11 (3): 319–64\. [https://doi.org/10.1257/mic.20170306](https://doi.org/10.1257/mic.20170306).Angrist,
    Joshua, and Alan Krueger. 2001\. “Instrumental Variables and the Search for Identification:
    From Supply and Demand to Natural Experiments.” *Journal of Economic Perspectives*
    15 (4): 69–85\. [https://doi.org/10.1257/jep.15.4.69](https://doi.org/10.1257/jep.15.4.69).Arel-Bundock,
    Vincent. 2022\. “modelsummary: Data and Model Summaries in R.” *Journal of Statistical
    Software* 103 (1): 1–23\. [https://doi.org/10.18637/jss.v103.i01](https://doi.org/10.18637/jss.v103.i01).———.
    2024\. *tinytable: Simple and Configurable Tables in “HTML,” “LaTeX,” “Markdown,”
    “Word,” “PNG,” “PDF,” and “Typst” Formats*. [https://vincentarelbundock.github.io/tinytable/](https://vincentarelbundock.github.io/tinytable/).Berkson,
    Joseph. 1946\. “Limitations of the Application of Fourfold Table Analysis to Hospital
    Data.” *Biometrics Bulletin* 2 (3): 47–53\. [https://doi.org/10.2307/3002000](https://doi.org/10.2307/3002000).Betz,
    Timm, Scott Cook, and Florian Hollenbach. 2018\. “On the Use and Abuse of Spatial
    Instruments.” *Political Analysis* 26 (4): 474–79\. [https://doi.org/10.1017/pan.2018.10](https://doi.org/10.1017/pan.2018.10).Bickel,
    Peter, Eugene Hammel, and William O’Connell. 1975\. “Sex Bias in Graduate Admissions:
    Data from Berkeley: Measuring Bias Is Harder Than Is Usually Assumed, and the
    Evidence Is Sometimes Contrary to Expectation.” *Science* 187 (4175): 398–404\.
    [https://doi.org/10.1126/science.187.4175.398](https://doi.org/10.1126/science.187.4175.398).Blair,
    Graeme, Jasper Cooper, Alexander Coppock, Macartan Humphreys, and Luke Sonnet.
    2021\. *estimatr: Fast Estimators for Design-Based Inference*. [https://CRAN.R-project.org/package=estimatr](https://CRAN.R-project.org/package=estimatr).Bloom,
    Howard, Andrew Bell, and Kayla Reiman. 2020\. “Using Data from Randomized Trials
    to Assess the Likely Generalizability of Educational Treatment-Effect Estimates
    from Regression Discontinuity Designs.” *Journal of Research on Educational Effectiveness*
    13 (3): 488–517\. [https://doi.org/10.1080/19345747.2019.1634169](https://doi.org/10.1080/19345747.2019.1634169).Bolker,
    Ben, and David Robinson. 2022\. *broom.mixed: Tidying Methods for Mixed Models*.
    [https://CRAN.R-project.org/package=broom.mixed](https://CRAN.R-project.org/package=broom.mixed).Brodeur,
    Abel, Nikolai Cook, and Anthony Heyes. 2020\. “Methods Matter: p-Hacking and Publication
    Bias in Causal Analysis in Economics.” *American Economic Review* 110 (11): 3634–60\.
    [https://doi.org/10.1257/aer.20190687](https://doi.org/10.1257/aer.20190687).Bronner,
    Laura. 2020\. “Why Statistics Don’t Capture the Full Extent of the Systemic Bias
    in Policing.” *FiveThirtyEight*, June. [https://fivethirtyeight.com/features/why-statistics-dont-capture-the-full-extent-of-the-systemic-bias-in-policing/](https://fivethirtyeight.com/features/why-statistics-dont-capture-the-full-extent-of-the-systemic-bias-in-policing/).Calonico,
    Sebastian, Matias Cattaneo, Max Farrell, and Rocio Titiunik. 2021\. *rdrobust:
    Robust Data-Driven Statistical Inference in Regression-Discontinuity Designs*.
    [https://CRAN.R-project.org/package=rdrobust](https://CRAN.R-project.org/package=rdrobust).Carpenter,
    Christopher, and Carlos Dobkin. 2014\. “Replication data for: The Minimum Legal
    Drinking Age and Crime.” [https://doi.org/10.7910/DVN/27070](https://doi.org/10.7910/DVN/27070).———.
    2015\. “The Minimum Legal Drinking Age and Crime.” *The Review of Economics and
    Statistics* 97 (2): 521–24\. [https://doi.org/10.1162/REST_a_00489](https://doi.org/10.1162/REST_a_00489).Caughey,
    Devin, and Jasjeet Sekhon. 2011\. “Elections and the Regression Discontinuity
    Design: Lessons from Close U.S. House Races, 1942–2008.” *Political Analysis*
    19 (4): 385–408\. [https://doi.org/10.1093/pan/mpr032](https://doi.org/10.1093/pan/mpr032).Coyle,
    Edward, Andrew Coggan, Mari Hopper, and Thomas Walters. 1988\. “Determinants of
    Endurance in Well-Trained Cyclists.” *Journal of Applied Physiology* 64 (6): 2622–30\.
    [https://doi.org/10.1152/jappl.1988.64.6.2622](https://doi.org/10.1152/jappl.1988.64.6.2622).Cunningham,
    Scott. 2021\. *Causal Inference: The Mixtape*. 1st ed. New Haven: Yale Press.
    [https://mixtape.scunning.com](https://mixtape.scunning.com).Dagan, Noa, Noam
    Barda, Eldad Kepten, Oren Miron, Shay Perchik, Mark Katz, Miguel Hernán, Marc
    Lipsitch, Ben Reis, and Ran Balicer. 2021\. “BNT162b2 mRNA Covid-19 Vaccine in
    a Nationwide Mass Vaccination Setting.” *New England Journal of Medicine* 384
    (15): 1412–23\. [https://doi.org/10.1056/NEJMoa2101765](https://doi.org/10.1056/NEJMoa2101765).Gelman,
    Andrew. 2019\. “Another Regression Discontinuity Disaster and What Can We Learn
    from It,” June. [https://statmodeling.stat.columbia.edu/2019/06/25/another-regression-discontinuity-disaster-and-what-can-we-learn-from-it/](https://statmodeling.stat.columbia.edu/2019/06/25/another-regression-discontinuity-disaster-and-what-can-we-learn-from-it/).Gelman,
    Andrew, and Jennifer Hill. 2007\. *Data Analysis Using Regression and Multilevel/Hierarchical
    Models*. 1st ed. Cambridge University Press.Gelman, Andrew, and Guido Imbens.
    2019\. “Why High-Order Polynomials Should Not Be Used in Regression Discontinuity
    Designs.” *Journal of Business & Economic Statistics* 37 (3): 447–56\. [https://doi.org/10.1080/07350015.2017.1366909](https://doi.org/10.1080/07350015.2017.1366909).Goodrich,
    Ben, Jonah Gabry, Imad Ali, and Sam Brilleman. 2023\. “rstanarm: Bayesian applied
    regression modeling via Stan.” [https://mc-stan.org/rstanarm](https://mc-stan.org/rstanarm).Green,
    Donald, Terence Leong, Holger Kern, Alan Gerber, and Christopher Larimer. 2009\.
    “Testing the Accuracy of Regression Discontinuity Analysis Using Experimental
    Benchmarks.” *Political Analysis* 17 (4): 400–417\. [https://doi.org/10.1093/pan/mpp018](https://doi.org/10.1093/pan/mpp018).Greifer,
    Noah. 2021\. “Why Do We Do Matching for Causal Inference Vs Regressing on Confounders?”
    *Cross Validated*, September. [https://stats.stackexchange.com/q/544958](https://stats.stackexchange.com/q/544958).Hernán,
    Miguel, David Clayton, and Niels Keiding. 2011\. “The Simpson’s Paradox Unraveled.”
    *International Journal of Epidemiology* 40 (3): 780–85\. [https://doi.org/10.1093/ije/dyr041](https://doi.org/10.1093/ije/dyr041).Ho,
    Daniel, Kosuke Imai, Gary King, and Elizabeth Stuart. 2011\. “MatchIt: Nonparametric
    Preprocessing for Parametric Causal Inference.” *Journal of Statistical Software*
    42 (8): 1–28\. [https://doi.org/10.18637/jss.v042.i08](https://doi.org/10.18637/jss.v042.i08).Horst,
    Allison Marie, Alison Presmanes Hill, and Kristen Gorman. 2020\. *palmerpenguins:
    Palmer Archipelago (Antarctica) penguin data*. [https://doi.org/10.5281/zenodo.3960218](https://doi.org/10.5281/zenodo.3960218).Huntington-Klein,
    Nick. 2021\. *The Effect: An Introduction to Research Design and Causality*. 1st
    ed. Chapman & Hall. [https://theeffectbook.net](https://theeffectbook.net).Kahneman,
    Daniel, Olivier Sibony, and Cass Sunstein. 2021\. *Noise: A Flaw in Human Judgment*.
    William Collins.King, Gary, and Richard Nielsen. 2019\. “Why Propensity Scores
    Should Not Be Used for Matching.” *Political Analysis* 27 (4): 435–54\. [https://doi.org/10.1017/pan.2019.11](https://doi.org/10.1017/pan.2019.11).McKenzie,
    David. 2021\. “What Do You Need To Do To Make A Matching Estimator Convincing?
    Rhetorical vs Statistical Checks.” *World Bank Blogs—Development Impact*, February.
    [https://blogs.worldbank.org/impactevaluations/what-do-you-need-do-make-matching-estimator-convincing-rhetorical-vs-statistical](https://blogs.worldbank.org/impactevaluations/what-do-you-need-do-make-matching-estimator-convincing-rhetorical-vs-statistical).Mellon,
    Jonathan. 2024\. “Rain, Rain, Go Away: 194 Potential Exclusion‐restriction Violations
    for Studies Using Weather as an Instrumental Variable.” *American Journal of Political
    Science*, 1–18\. [https://doi.org/10.1111/ajps.12894](https://doi.org/10.1111/ajps.12894).Meng,
    Xiao-Li. 2021\. “What Are the Values of Data, Data Science, or Data Scientists?”
    *Harvard Data Science Review* 3 (1). [https://doi.org/10.1162/99608f92.ee717cf7](https://doi.org/10.1162/99608f92.ee717cf7).Podlogar,
    Tim, Peter Leo, and James Spragg. 2022\. “Using VO2max as a marker of training
    status in athletes—Can we do better?” *Journal of Applied Physiology* 133 (6):
    144–47\. [https://doi.org/10.1152/japplphysiol.00723.2021](https://doi.org/10.1152/japplphysiol.00723.2021).R
    Core Team. 2024\. *R: A Language and Environment for Statistical Computing*. Vienna,
    Austria: R Foundation for Statistical Computing. [https://www.R-project.org/](https://www.R-project.org/).Riederer,
    Emily. 2021\. “Causal Design Patterns for Data Analysts,” January. [https://emilyriederer.netlify.app/post/causal-design-patterns/](https://emilyriederer.netlify.app/post/causal-design-patterns/).Robinson,
    David, Alex Hayes, and Simon Couch. 2022\. *broom: Convert Statistical Objects
    into Tidy Tibbles*. [https://CRAN.R-project.org/package=broom](https://CRAN.R-project.org/package=broom).Sekhon,
    Jasjeet, and Rocío Titiunik. 2017\. “Understanding Regression Discontinuity Designs
    as Observational Studies.” *Observational Studies* 3 (2): 174–82\. [https://doi.org/10.1353/obs.2017.0005](https://doi.org/10.1353/obs.2017.0005).Simpson,
    Edward. 1951\. “The Interpretation of Interaction in Contingency Tables.” *Journal
    of the Royal Statistical Society: Series B (Methodological)* 13 (2): 238–41\.
    [https://doi.org/10.1111/j.2517-6161.1951.tb00088.x](https://doi.org/10.1111/j.2517-6161.1951.tb00088.x).Stock,
    James, and Francesco Trebbi. 2003\. “Retrospectives: Who Invented Instrumental
    Variable Regression?” *Journal of Economic Perspectives* 17 (3): 177–94\. [https://doi.org/10.1257/089533003769204416](https://doi.org/10.1257/089533003769204416).Stommes,
    Drew, P. M. Aronow, and Fredrik Sävje. 2023\. “On the Reliability of Published
    Findings Using the Regression Discontinuity Design in Political Science.” *Research
    & Politics* 10 (2). https://doi.org/[https://doi.org/10.1177/2053168023116645](https://doi.org/10.1177/2053168023116645).Taddy,
    Matt. 2019\. *Business Data Science*. 1st ed. McGraw Hill.Tang, John. 2015\. “Pollution
    havens and the trade in toxic chemicals: Evidence from U.S. trade flows.” *Ecological
    Economics* 112 (April): 150–60\. [https://doi.org/10.1016/j.ecolecon.2015.02.022](https://doi.org/10.1016/j.ecolecon.2015.02.022).Thistlethwaite,
    Donald, and Donald Campbell. 1960\. “Regression-Discontinuity Analysis: An Alternative
    to the Ex Post Facto Experiment.” *Journal of Educational Psychology* 51 (6):
    309–17\. [https://doi.org/10.1037/h0044319](https://doi.org/10.1037/h0044319).Varner,
    Maddy, and Aaron Sankin. 2020\. “Suckers List: How Allstate’s Secret Auto Insurance
    Algorithm Squeezes Big Spenders.” *The Markup*, February. [https://themarkup.org/allstates-algorithm/2020/02/25/car-insurance-suckers-list](https://themarkup.org/allstates-algorithm/2020/02/25/car-insurance-suckers-list).Wickham,
    Hadley, Mara Averick, Jenny Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain
    François, Garrett Grolemund, et al. 2019\. “Welcome to the Tidyverse.” *Journal
    of Open Source Software* 4 (43): 1686\. [https://doi.org/10.21105/joss.01686](https://doi.org/10.21105/joss.01686).Wickham,
    Hadley, Evan Miller, and Danny Smith. 2023\. *haven: Import and Export “SPSS”
    “Stata” and “SAS” Files*. [https://CRAN.R-project.org/package=haven](https://CRAN.R-project.org/package=haven).Wickham,
    Hadley, and Dana Seidel. 2022\. *scales: Scale Functions for Visualization*. [https://CRAN.R-project.org/package=scales](https://CRAN.R-project.org/package=scales).Wright,
    Philip. 1928\. *The Tariff on Animal and Vegetable Oils*. New York: Macmillan
    Company.****************'
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 'Alexander, Rohan, and Zachary Ward. 2018\. “Age at Arrival and Assimilation
    During the Age of Mass Migration.” *The Journal of Economic History* 78 (3): 904–37\.
    [https://doi.org/10.1017/S0022050718000335](https://doi.org/10.1017/S0022050718000335).Angelucci,
    Charles, and Julia Cagé. 2019\. “Newspapers in Times of Low Advertising Revenues.”
    *American Economic Journal: Microeconomics* 11 (3): 319–64\. [https://doi.org/10.1257/mic.20170306](https://doi.org/10.1257/mic.20170306).Angrist,
    Joshua, and Alan Krueger. 2001\. “Instrumental Variables and the Search for Identification:
    From Supply and Demand to Natural Experiments.” *Journal of Economic Perspectives*
    15 (4): 69–85\. [https://doi.org/10.1257/jep.15.4.69](https://doi.org/10.1257/jep.15.4.69).Arel-Bundock,
    Vincent. 2022\. “modelsummary: Data and Model Summaries in R.” *Journal of Statistical
    Software* 103 (1): 1–23\. [https://doi.org/10.18637/jss.v103.i01](https://doi.org/10.18637/jss.v103.i01).———.
    2024\. *tinytable: Simple and Configurable Tables in “HTML,” “LaTeX,” “Markdown,”
    “Word,” “PNG,” “PDF,” and “Typst” Formats*. [https://vincentarelbundock.github.io/tinytable/](https://vincentarelbundock.github.io/tinytable/).Berkson,
    Joseph. 1946\. “Limitations of the Application of Fourfold Table Analysis to Hospital
    Data.” *Biometrics Bulletin* 2 (3): 47–53\. [https://doi.org/10.2307/3002000](https://doi.org/10.2307/3002000).Betz,
    Timm, Scott Cook, and Florian Hollenbach. 2018\. “On the Use and Abuse of Spatial
    Instruments.” *Political Analysis* 26 (4): 474–79\. [https://doi.org/10.1017/pan.2018.10](https://doi.org/10.1017/pan.2018.10).Bickel,
    Peter, Eugene Hammel, and William O’Connell. 1975\. “Sex Bias in Graduate Admissions:
    Data from Berkeley: Measuring Bias Is Harder Than Is Usually Assumed, and the
    Evidence Is Sometimes Contrary to Expectation.” *Science* 187 (4175): 398–404\.
    [https://doi.org/10.1126/science.187.4175.398](https://doi.org/10.1126/science.187.4175.398).Blair,
    Graeme, Jasper Cooper, Alexander Coppock, Macartan Humphreys, and Luke Sonnet.
    2021\. *estimatr: Fast Estimators for Design-Based Inference*. [https://CRAN.R-project.org/package=estimatr](https://CRAN.R-project.org/package=estimatr).Bloom,
    Howard, Andrew Bell, and Kayla Reiman. 2020\. “Using Data from Randomized Trials
    to Assess the Likely Generalizability of Educational Treatment-Effect Estimates
    from Regression Discontinuity Designs.” *Journal of Research on Educational Effectiveness*
    13 (3): 488–517\. [https://doi.org/10.1080/19345747.2019.1634169](https://doi.org/10.1080/19345747.2019.1634169).Bolker,
    Ben, and David Robinson. 2022\. *broom.mixed: Tidying Methods for Mixed Models*.
    [https://CRAN.R-project.org/package=broom.mixed](https://CRAN.R-project.org/package=broom.mixed).Brodeur,
    Abel, Nikolai Cook, and Anthony Heyes. 2020\. “Methods Matter: p-Hacking and Publication
    Bias in Causal Analysis in Economics.” *American Economic Review* 110 (11): 3634–60\.
    [https://doi.org/10.1257/aer.20190687](https://doi.org/10.1257/aer.20190687).Bronner,
    Laura. 2020\. “Why Statistics Don’t Capture the Full Extent of the Systemic Bias
    in Policing.” *FiveThirtyEight*, June. [https://fivethirtyeight.com/features/why-statistics-dont-capture-the-full-extent-of-the-systemic-bias-in-policing/](https://fivethirtyeight.com/features/why-statistics-dont-capture-the-full-extent-of-the-systemic-bias-in-policing/).Calonico,
    Sebastian, Matias Cattaneo, Max Farrell, and Rocio Titiunik. 2021\. *rdrobust:
    Robust Data-Driven Statistical Inference in Regression-Discontinuity Designs*.
    [https://CRAN.R-project.org/package=rdrobust](https://CRAN.R-project.org/package=rdrobust).Carpenter,
    Christopher, and Carlos Dobkin. 2014\. “Replication data for: The Minimum Legal
    Drinking Age and Crime.” [https://doi.org/10.7910/DVN/27070](https://doi.org/10.7910/DVN/27070).———.
    2015\. “The Minimum Legal Drinking Age and Crime.” *The Review of Economics and
    Statistics* 97 (2): 521–24\. [https://doi.org/10.1162/REST_a_00489](https://doi.org/10.1162/REST_a_00489).Caughey,
    Devin, and Jasjeet Sekhon. 2011\. “Elections and the Regression Discontinuity
    Design: Lessons from Close U.S. House Races, 1942–2008.” *Political Analysis*
    19 (4): 385–408\. [https://doi.org/10.1093/pan/mpr032](https://doi.org/10.1093/pan/mpr032).Coyle,
    Edward, Andrew Coggan, Mari Hopper, and Thomas Walters. 1988\. “Determinants of
    Endurance in Well-Trained Cyclists.” *Journal of Applied Physiology* 64 (6): 2622–30\.
    [https://doi.org/10.1152/jappl.1988.64.6.2622](https://doi.org/10.1152/jappl.1988.64.6.2622).Cunningham,
    Scott. 2021\. *Causal Inference: The Mixtape*. 1st ed. New Haven: Yale Press.
    [https://mixtape.scunning.com](https://mixtape.scunning.com).Dagan, Noa, Noam
    Barda, Eldad Kepten, Oren Miron, Shay Perchik, Mark Katz, Miguel Hernán, Marc
    Lipsitch, Ben Reis, and Ran Balicer. 2021\. “BNT162b2 mRNA Covid-19 Vaccine in
    a Nationwide Mass Vaccination Setting.” *New England Journal of Medicine* 384
    (15): 1412–23\. [https://doi.org/10.1056/NEJMoa2101765](https://doi.org/10.1056/NEJMoa2101765).Gelman,
    Andrew. 2019\. “Another Regression Discontinuity Disaster and What Can We Learn
    from It,” June. [https://statmodeling.stat.columbia.edu/2019/06/25/another-regression-discontinuity-disaster-and-what-can-we-learn-from-it/](https://statmodeling.stat.columbia.edu/2019/06/25/another-regression-discontinuity-disaster-and-what-can-we-learn-from-it/).Gelman,
    Andrew, and Jennifer Hill. 2007\. *Data Analysis Using Regression and Multilevel/Hierarchical
    Models*. 1st ed. Cambridge University Press.Gelman, Andrew, and Guido Imbens.
    2019\. “Why High-Order Polynomials Should Not Be Used in Regression Discontinuity
    Designs.” *Journal of Business & Economic Statistics* 37 (3): 447–56\. [https://doi.org/10.1080/07350015.2017.1366909](https://doi.org/10.1080/07350015.2017.1366909).Goodrich,
    Ben, Jonah Gabry, Imad Ali, and Sam Brilleman. 2023\. “rstanarm: Bayesian applied
    regression modeling via Stan.” [https://mc-stan.org/rstanarm](https://mc-stan.org/rstanarm).Green,
    Donald, Terence Leong, Holger Kern, Alan Gerber, and Christopher Larimer. 2009\.
    “Testing the Accuracy of Regression Discontinuity Analysis Using Experimental
    Benchmarks.” *Political Analysis* 17 (4): 400–417\. [https://doi.org/10.1093/pan/mpp018](https://doi.org/10.1093/pan/mpp018).Greifer,
    Noah. 2021\. “Why Do We Do Matching for Causal Inference Vs Regressing on Confounders?”
    *Cross Validated*, September. [https://stats.stackexchange.com/q/544958](https://stats.stackexchange.com/q/544958).Hernán,
    Miguel, David Clayton, and Niels Keiding. 2011\. “The Simpson’s Paradox Unraveled.”
    *International Journal of Epidemiology* 40 (3): 780–85\. [https://doi.org/10.1093/ije/dyr041](https://doi.org/10.1093/ije/dyr041).Ho,
    Daniel, Kosuke Imai, Gary King, and Elizabeth Stuart. 2011\. “MatchIt: Nonparametric
    Preprocessing for Parametric Causal Inference.” *Journal of Statistical Software*
    42 (8): 1–28\. [https://doi.org/10.18637/jss.v042.i08](https://doi.org/10.18637/jss.v042.i08).Horst,
    Allison Marie, Alison Presmanes Hill, and Kristen Gorman. 2020\. *palmerpenguins:
    Palmer Archipelago (Antarctica) penguin data*. [https://doi.org/10.5281/zenodo.3960218](https://doi.org/10.5281/zenodo.3960218).Huntington-Klein,
    Nick. 2021\. *The Effect: An Introduction to Research Design and Causality*. 1st
    ed. Chapman & Hall. [https://theeffectbook.net](https://theeffectbook.net).Kahneman,
    Daniel, Olivier Sibony, and Cass Sunstein. 2021\. *Noise: A Flaw in Human Judgment*.
    William Collins.King, Gary, and Richard Nielsen. 2019\. “Why Propensity Scores
    Should Not Be Used for Matching.” *Political Analysis* 27 (4): 435–54\. [https://doi.org/10.1017/pan.2019.11](https://doi.org/10.1017/pan.2019.11).McKenzie,
    David. 2021\. “What Do You Need To Do To Make A Matching Estimator Convincing?
    Rhetorical vs Statistical Checks.” *World Bank Blogs—Development Impact*, February.
    [https://blogs.worldbank.org/impactevaluations/what-do-you-need-do-make-matching-estimator-convincing-rhetorical-vs-statistical](https://blogs.worldbank.org/impactevaluations/what-do-you-need-do-make-matching-estimator-convincing-rhetorical-vs-statistical).Mellon,
    Jonathan. 2024\. “Rain, Rain, Go Away: 194 Potential Exclusion‐restriction Violations
    for Studies Using Weather as an Instrumental Variable.” *American Journal of Political
    Science*, 1–18\. [https://doi.org/10.1111/ajps.12894](https://doi.org/10.1111/ajps.12894).Meng,
    Xiao-Li. 2021\. “What Are the Values of Data, Data Science, or Data Scientists?”
    *Harvard Data Science Review* 3 (1). [https://doi.org/10.1162/99608f92.ee717cf7](https://doi.org/10.1162/99608f92.ee717cf7).Podlogar,
    Tim, Peter Leo, and James Spragg. 2022\. “Using VO2max as a marker of training
    status in athletes—Can we do better?” *Journal of Applied Physiology* 133 (6):
    144–47\. [https://doi.org/10.1152/japplphysiol.00723.2021](https://doi.org/10.1152/japplphysiol.00723.2021).R
    Core Team. 2024\. *R: A Language and Environment for Statistical Computing*. Vienna,
    Austria: R Foundation for Statistical Computing. [https://www.R-project.org/](https://www.R-project.org/).Riederer,
    Emily. 2021\. “Causal Design Patterns for Data Analysts,” January. [https://emilyriederer.netlify.app/post/causal-design-patterns/](https://emilyriederer.netlify.app/post/causal-design-patterns/).Robinson,
    David, Alex Hayes, and Simon Couch. 2022\. *broom: Convert Statistical Objects
    into Tidy Tibbles*. [https://CRAN.R-project.org/package=broom](https://CRAN.R-project.org/package=broom).Sekhon,
    Jasjeet, and Rocío Titiunik. 2017\. “Understanding Regression Discontinuity Designs
    as Observational Studies.” *Observational Studies* 3 (2): 174–82\. [https://doi.org/10.1353/obs.2017.0005](https://doi.org/10.1353/obs.2017.0005).Simpson,
    Edward. 1951\. “The Interpretation of Interaction in Contingency Tables.” *Journal
    of the Royal Statistical Society: Series B (Methodological)* 13 (2): 238–41\.
    [https://doi.org/10.1111/j.2517-6161.1951.tb00088.x](https://doi.org/10.1111/j.2517-6161.1951.tb00088.x).Stock,
    James, and Francesco Trebbi. 2003\. “Retrospectives: Who Invented Instrumental
    Variable Regression?” *Journal of Economic Perspectives* 17 (3): 177–94\. [https://doi.org/10.1257/089533003769204416](https://doi.org/10.1257/089533003769204416).Stommes,
    Drew, P. M. Aronow, and Fredrik Sävje. 2023\. “On the Reliability of Published
    Findings Using the Regression Discontinuity Design in Political Science.” *Research
    & Politics* 10 (2). https://doi.org/[https://doi.org/10.1177/2053168023116645](https://doi.org/10.1177/2053168023116645).Taddy,
    Matt. 2019\. *Business Data Science*. 1st ed. McGraw Hill.Tang, John. 2015\. “Pollution
    havens and the trade in toxic chemicals: Evidence from U.S. trade flows.” *Ecological
    Economics* 112 (April): 150–60\. [https://doi.org/10.1016/j.ecolecon.2015.02.022](https://doi.org/10.1016/j.ecolecon.2015.02.022).Thistlethwaite,
    Donald, and Donald Campbell. 1960\. “Regression-Discontinuity Analysis: An Alternative
    to the Ex Post Facto Experiment.” *Journal of Educational Psychology* 51 (6):
    309–17\. [https://doi.org/10.1037/h0044319](https://doi.org/10.1037/h0044319).Varner,
    Maddy, and Aaron Sankin. 2020\. “Suckers List: How Allstate’s Secret Auto Insurance
    Algorithm Squeezes Big Spenders.” *The Markup*, February. [https://themarkup.org/allstates-algorithm/2020/02/25/car-insurance-suckers-list](https://themarkup.org/allstates-algorithm/2020/02/25/car-insurance-suckers-list).Wickham,
    Hadley, Mara Averick, Jenny Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain
    François, Garrett Grolemund, et al. 2019\. “Welcome to the Tidyverse.” *Journal
    of Open Source Software* 4 (43): 1686\. [https://doi.org/10.21105/joss.01686](https://doi.org/10.21105/joss.01686).Wickham,
    Hadley, Evan Miller, and Danny Smith. 2023\. *haven: Import and Export “SPSS”
    “Stata” and “SAS” Files*. [https://CRAN.R-project.org/package=haven](https://CRAN.R-project.org/package=haven).Wickham,
    Hadley, and Dana Seidel. 2022\. *scales: Scale Functions for Visualization*. [https://CRAN.R-project.org/package=scales](https://CRAN.R-project.org/package=scales).Wright,
    Philip. 1928'
