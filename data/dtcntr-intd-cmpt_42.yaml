- en: 13.2Â Mutable ListsğŸ”—
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 13.2 å¯å˜åˆ—è¡¨ğŸ”—
- en: åŸæ–‡ï¼š[https://dcic-world.org/2025-08-27/mutable-lists.html](https://dcic-world.org/2025-08-27/mutable-lists.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://dcic-world.org/2025-08-27/mutable-lists.html](https://dcic-world.org/2025-08-27/mutable-lists.html)
- en: '|  |'
  id: totrans-2
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Letâ€™s expand our study of updates yet again, this time looking at updating lists.
    Weâ€™ll start with lists.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å†æ¬¡æ‰©å±•æˆ‘ä»¬å¯¹æ›´æ–°çš„ç ”ç©¶ï¼Œè¿™æ¬¡æ˜¯æŸ¥çœ‹æ›´æ–°åˆ—è¡¨ã€‚æˆ‘ä»¬å°†ä»åˆ—è¡¨å¼€å§‹ã€‚
- en: 'Imagine that Shaunae wants to use a program to maintain her shopping list.
    She creates an initial list with two items:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: æƒ³è±¡ä¸€ä¸‹ï¼ŒShaunae æƒ³è¦ä½¿ç”¨ä¸€ä¸ªç¨‹åºæ¥ç»´æŠ¤å¥¹çš„è´­ç‰©æ¸…å•ã€‚å¥¹åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªé¡¹ç›®çš„åˆå§‹åˆ—è¡¨ï¼š
- en: '[PRE0]'
  id: totrans-5
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Do Now!
  id: totrans-6
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç°åœ¨å°±åšï¼
- en: ''
  id: totrans-7
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Shaunae wants to add eggs to her list. Write a line of code to accomplish this.
  id: totrans-8
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: Shaunae æƒ³è¦å‘å¥¹çš„æ¸…å•ä¸­æ·»åŠ é¸¡è›‹ã€‚è¯·ç¼–å†™ä¸€è¡Œä»£ç æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚
- en: 'There are two ways you could have done this:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥æœ‰ä¸¤ç§æ–¹æ³•æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼š
- en: '[PRE1]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: What is the difference between these two approaches? The difference lies in
    the impact on the heap.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸¤ç§æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼ŸåŒºåˆ«åœ¨äºå¯¹å †çš„å½±å“ã€‚
- en: The first version creates a new list containing `"eggs"`, then puts the elements
    of the two lists together in a new list.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€ä¸ªç‰ˆæœ¬åˆ›å»ºäº†ä¸€ä¸ªåŒ…å« `"eggs"` çš„æ–°åˆ—è¡¨ï¼Œç„¶åå°†ä¸¤ä¸ªåˆ—è¡¨çš„å…ƒç´ åˆå¹¶åˆ°ä¸€ä¸ªæ–°åˆ—è¡¨ä¸­ã€‚
- en: The second version inserts `"eggs"` into the existing list in the heap.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¬¬äºŒä¸ªç‰ˆæœ¬å°† `"eggs"` æ’å…¥å †ä¸­ç°æœ‰çš„åˆ—è¡¨ä¸­ã€‚
- en: 'Letâ€™s look at the directories for each version. Hereâ€™s the final directory
    for the first version:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬çœ‹çœ‹æ¯ä¸ªç‰ˆæœ¬çš„ç›®å½•ã€‚ä»¥ä¸‹æ˜¯ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„æœ€ç»ˆç›®å½•ï¼š
- en: Directory
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®å½•
- en: '[PRE2]'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_PRE
  zh: '[PRE2]'
- en: â†’Â 1010
  id: totrans-17
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: â†’ 1010
- en: Heap
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: å †
- en: 1005:Â `List(len:2)`
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '1005: `List(len:2)`'
- en: 1006:Â `"bread"`
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '1006: `"bread"`'
- en: 1007:Â `"coffee"`
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '1007: `"coffee"`'
- en: 1008:Â `List(len:1)`
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '1008: `List(len:1)`'
- en: 1009:Â `"eggs"`
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '1009: `"eggs"`'
- en: 1010:Â `List(len:3)`
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '1010: `List(len:3)`'
- en: 1011:Â `"bread"`
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '1011: `"bread"`'
- en: 1012:Â `"coffee"`
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '1012: `"coffee"`'
- en: 1013:Â `"eggs"`
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '1013: `"eggs"`'
- en: The original version of `shaunae_list` is in address 1005, the list with `"eggs"`
    is in 1008, and the combined list is in 1010.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '`shaunae_list` çš„åŸå§‹ç‰ˆæœ¬åœ¨åœ°å€ 1005ï¼ŒåŒ…å« `"eggs"` çš„åˆ—è¡¨åœ¨ 1008ï¼Œåˆå¹¶åçš„åˆ—è¡¨åœ¨ 1010ã€‚'
- en: 'In contrast, the final directory for the second version would look like:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: ç›¸æ¯”ä¹‹ä¸‹ï¼Œç¬¬äºŒä¸ªç‰ˆæœ¬çš„æœ€ç»ˆç›®å½•å°†å¦‚ä¸‹æ‰€ç¤ºï¼š
- en: Directory
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®å½•
- en: '[PRE3]'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_PRE
  zh: '[PRE3]'
- en: â†’Â 1010
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: â†’ 1010
- en: Heap
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: å †
- en: 1005:Â `List(len:3)`
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '1005: `List(len:3)`'
- en: 1006:Â `"bread"`
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '1006: `"bread"`'
- en: 1007:Â `"coffee"`
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '1007: `"coffee"`'
- en: 1008:Â `"eggs"`
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '1008: `"eggs"`'
- en: Notice here that the length and contents of the original list are changed to
    include the newly-appended `"eggs"`.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„è¿™é‡Œï¼ŒåŸå§‹åˆ—è¡¨çš„é•¿åº¦å’Œå†…å®¹å·²æ›´æ”¹ï¼Œä»¥åŒ…å«æ–°æ·»åŠ çš„ `"eggs"`ã€‚
- en: Do Now!
  id: totrans-39
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç°åœ¨å°±åšï¼
- en: ''
  id: totrans-40
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Which approach do you think is better? Why?
  id: totrans-41
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ä½ è®¤ä¸ºå“ªç§æ–¹æ³•æ›´å¥½ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ
- en: At first glance, the second approach might seem better because it doesnâ€™t create
    additional unnecessary lists. Both approaches result in the same contents in `shaunae_List`,
    so there seems little benefit to using the additional space.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: ä¹ä¸€çœ‹ï¼Œç¬¬äºŒç§æ–¹æ³•å¯èƒ½çœ‹èµ·æ¥æ›´å¥½ï¼Œå› ä¸ºå®ƒä¸ä¼šåˆ›å»ºé¢å¤–çš„éå¿…è¦åˆ—è¡¨ã€‚ä¸¤ç§æ–¹æ³•åœ¨ `shaunae_List` ä¸­çš„å†…å®¹ç›¸åŒï¼Œæ‰€ä»¥ä½¿ç”¨é¢å¤–ç©ºé—´ä¼¼ä¹æ²¡æœ‰å¤šå°‘å¥½å¤„ã€‚
- en: Unless, of course, we want to still have access to the old version of `shaunae_list`
    later on. The old list is still in the heap (though our current program has no
    name through which to access that old list). What if we instead had written the
    program this way?
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: é™¤éï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä»¥åä»ç„¶èƒ½å¤Ÿè®¿é—® `shaunae_list` çš„æ—§ç‰ˆæœ¬ã€‚æ—§åˆ—è¡¨ä»ç„¶åœ¨å †ä¸­ï¼ˆå°½ç®¡æˆ‘ä»¬çš„å½“å‰ç¨‹åºæ²¡æœ‰åç§°å¯ä»¥é€šè¿‡å®ƒæ¥è®¿é—®é‚£ä¸ªæ—§åˆ—è¡¨ï¼‰ã€‚å¦‚æœæˆ‘ä»¬ä»¥è¿™ç§æ–¹å¼ç¼–å†™ç¨‹åºä¼šæ€æ ·å‘¢ï¼Ÿ
- en: '[PRE4]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Now, if Shaunae realizes she goofed and put her art supply shopping on the
    grocery list on that last update, she could â€œundoâ€ the update by resetting her
    list variable to the previous list:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œå¦‚æœ Shaunae å‘ç°å¥¹åœ¨æœ€åä¸€æ¬¡æ›´æ–°ä¸­å°†è‰ºæœ¯ç”¨å“è´­ç‰©æ¸…å•æ”¾åœ¨äº†æ‚è´§æ¸…å•ä¸Šï¼Œå¥¹å¯ä»¥é€šè¿‡å°†å¥¹çš„åˆ—è¡¨å˜é‡é‡ç½®ä¸ºä¹‹å‰çš„åˆ—è¡¨æ¥â€œæ’¤é”€â€æ›´æ–°ï¼š
- en: '[PRE5]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Undoing a modification (just like the undo feature in document-editing tools)
    is just one example of where it can help to hang on to older versions of data
    for a little while. The point here is not to give a sophisticated treatment of
    undoing computations, but more to motivate that there are situations in which
    creating a new list is preferable to updating the old one.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: æ’¤é”€ä¿®æ”¹ï¼ˆå°±åƒæ–‡æ¡£ç¼–è¾‘å·¥å…·ä¸­çš„æ’¤é”€åŠŸèƒ½ä¸€æ ·ï¼‰åªæ˜¯è¯´æ˜ä¿ç•™æ—§ç‰ˆæœ¬æ•°æ®ä¸€æ®µæ—¶é—´å¯ä»¥æœ‰æ‰€å¸®åŠ©çš„ä¸€ä¸ªä¾‹å­ã€‚è¿™é‡Œçš„é‡ç‚¹ä¸æ˜¯å¯¹æ’¤é”€è®¡ç®—è¿›è¡Œå¤æ‚å¤„ç†ï¼Œè€Œæ˜¯è¦è¯´æ˜åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œåˆ›å»ºæ–°åˆ—è¡¨æ¯”æ›´æ–°æ—§åˆ—è¡¨æ›´å¯å–ã€‚
- en: When might we want to update, rather than preserve, the existing list?
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä½•æ—¶æƒ³è¦æ›´æ–°è€Œä¸æ˜¯ä¿ç•™ç°æœ‰åˆ—è¡¨ï¼Ÿ
- en: Remember our discussion of aliasing? We wanted two people, Elena and Jorge to
    share access to a common bank account. Might we ever want a shared shopping list?
    Sure, Shaunae and her roommate Jonella do share a shopping list, so that they
    can both add items while letting either one go to the store.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: è®°å¾—æˆ‘ä»¬è®¨è®ºçš„åˆ«åé—®é¢˜å—ï¼Ÿæˆ‘ä»¬æƒ³è¦ä¸¤ä¸ªäººï¼ŒElena å’Œ Jorgeï¼Œå…±äº«å¯¹ä¸€ä¸ªå…±åŒé“¶è¡Œè´¦æˆ·çš„è®¿é—®æƒé™ã€‚æˆ‘ä»¬æ˜¯å¦å¯èƒ½æƒ³è¦ä¸€ä¸ªå…±äº«çš„è´­ç‰©æ¸…å•ï¼Ÿå½“ç„¶ï¼ŒShaunae
    å’Œå¥¹çš„å®¤å‹ Jonella å°±å…±äº«ä¸€ä¸ªè´­ç‰©æ¸…å•ï¼Œè¿™æ ·ä»–ä»¬éƒ½å¯ä»¥æ·»åŠ é¡¹ç›®ï¼ŒåŒæ—¶è®©å…¶ä¸­ä¸€ä¸ªäººå»å•†åº—ã€‚
- en: Do Now!
  id: totrans-50
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç°åœ¨å°±åšï¼
- en: ''
  id: totrans-51
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Set up a shared shopping list that is accessible through two names, `shaunae_list`
    and `jonella_list`. Then, add an item to the list via one of these names and check
    that the item appears under the other name.
  id: totrans-52
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: è®¾ç½®ä¸€ä¸ªå…±äº«çš„è´­ç‰©æ¸…å•ï¼Œå¯ä»¥é€šè¿‡ä¸¤ä¸ªåç§°`shaunae_list`å’Œ`jonella_list`è®¿é—®ã€‚ç„¶åï¼Œé€šè¿‡å…¶ä¸­ä¸€ä¸ªåç§°æ·»åŠ ä¸€ä¸ªé¡¹ç›®åˆ°åˆ—è¡¨ä¸­ï¼Œå¹¶æ£€æŸ¥è¯¥é¡¹ç›®æ˜¯å¦å‡ºç°åœ¨å¦ä¸€ä¸ªåç§°ä¸‹ã€‚
- en: 'You might have written something like the following:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯èƒ½å·²ç»ç¼–å†™äº†å¦‚ä¸‹å†…å®¹ï¼š
- en: '[PRE6]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: If you load this code at the prompt and look at both lists at the end, youâ€™ll
    see they have the same values.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ å°†æ­¤ä»£ç åŠ è½½åˆ°æç¤ºç¬¦ä¸­å¹¶æŸ¥çœ‹æœ«å°¾çš„ä¸¤ä¸ªåˆ—è¡¨ï¼Œä½ ä¼šçœ‹åˆ°å®ƒä»¬å…·æœ‰ç›¸åŒçš„å€¼ã€‚
- en: 'In contrast, had we written the code as follows, only one of them would see
    the new item:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: ç›¸åï¼Œå¦‚æœæˆ‘ä»¬åƒä»¥ä¸‹è¿™æ ·ç¼–å†™ä»£ç ï¼Œé‚£ä¹ˆåªæœ‰ä¸€ä¸ªåˆ—è¡¨ä¼šçœ‹åˆ°æ–°é¡¹ç›®ï¼š
- en: '[PRE7]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Do Now!
  id: totrans-58
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç°åœ¨è¡ŒåŠ¨ï¼
- en: ''
  id: totrans-59
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Draw the memory diagram for the above program.
  id: totrans-60
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ä¸ºä¸Šè¿°ç¨‹åºç»˜åˆ¶å†…å­˜å›¾ã€‚
- en: 'Exercise: Creating Lists of Accounts[ğŸ”—](#(part._.Exercise__.Creating_.Lists_of_.Accounts)
    "Link to here")'
  id: totrans-61
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: ç»ƒä¹ ï¼šåˆ›å»ºè´¦æˆ·åˆ—è¡¨[ğŸ”—](#(part._.Exercise__.Creating_.Lists_of_.Accounts) "é“¾æ¥åˆ°æ­¤å¤„")
- en: In [Mutating Top-Level Variables within Functions](mutating-variables.html#%28part._mut-top-level-vars-in-func%29),
    we wrote a function to create new accounts for the bank. That function returned
    each new account as it was created. That meant that every newly-created account
    had to be associated with a name in the directory (otherwise we would not be able
    to access it from the heap).
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨[å‡½æ•°å†…ä¿®æ”¹é¡¶çº§å˜é‡](mutating-variables.html#%28part._mut-top-level-vars-in-func%29)ä¸­ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªå‡½æ•°æ¥ä¸ºé“¶è¡Œåˆ›å»ºæ–°è´¦æˆ·ã€‚è¯¥å‡½æ•°åœ¨åˆ›å»ºæ–°è´¦æˆ·æ—¶è¿”å›æ¯ä¸ªæ–°è´¦æˆ·ã€‚è¿™æ„å‘³ç€æ¯ä¸ªæ–°åˆ›å»ºçš„è´¦æˆ·éƒ½å¿…é¡»ä¸ç›®å½•ä¸­çš„åç§°ç›¸å…³è”ï¼ˆå¦åˆ™æˆ‘ä»¬æ— æ³•ä»å †ä¸­è®¿é—®å®ƒï¼‰ã€‚
- en: 'Maintaining either a list or a dictionary of all the created accounts makes
    much more sense. Weâ€™d need only a single name for the collection of accounts,
    but could still access individual accounts as needed. For example, we might want
    an `all_accts` list that looks something like the following:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: ç»´æŠ¤æ‰€æœ‰åˆ›å»ºçš„è´¦æˆ·çš„åˆ—è¡¨æˆ–å­—å…¸æ›´æœ‰æ„ä¹‰ã€‚æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªåç§°æ¥è¡¨ç¤ºè´¦æˆ·é›†åˆï¼Œä½†ä»ç„¶å¯ä»¥æ ¹æ®éœ€è¦è®¿é—®å•ä¸ªè´¦æˆ·ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½æƒ³è¦ä¸€ä¸ªç±»ä¼¼ä»¥ä¸‹å†…å®¹çš„`all_accts`åˆ—è¡¨ï¼š
- en: '[PRE8]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Do Now!
  id: totrans-65
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç°åœ¨è¡ŒåŠ¨ï¼
- en: ''
  id: totrans-66
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Write a program that creates an empty `all_accts` list, then adds a new `Account`
    to it each time `create_acct` is called. You will need to modify `create_acct`
    in order to do this. Here is the existing code as a starting point.
  id: totrans-67
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œåˆ›å»ºä¸€ä¸ªç©ºçš„`all_accts`åˆ—è¡¨ï¼Œç„¶åæ¯æ¬¡è°ƒç”¨`create_acct`æ—¶å‘å…¶ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„`Account`ã€‚ä½ éœ€è¦ä¿®æ”¹`create_acct`æ¥å®ç°è¿™ä¸€ç‚¹ã€‚ä»¥ä¸‹æ˜¯ä½œä¸ºèµ·ç‚¹çš„ç°æœ‰ä»£ç ã€‚
- en: ''
  id: totrans-68
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-69
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Do Now!
  id: totrans-70
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç°åœ¨è¡ŒåŠ¨ï¼
- en: ''
  id: totrans-71
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Did you include a line like `global all_accts` in your code? Why or why not?
  id: totrans-72
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ä½ åœ¨ä»£ç ä¸­åŒ…å«äº†ä¸€è¡Œ`global all_accts`å—ï¼Ÿä¸ºä»€ä¹ˆæˆ–ä¸ºä»€ä¹ˆä¸åŒ…å«ï¼Ÿ
- en: If you used `append` to update the `all_accts` list, then you would not need
    to include `global all_accts`. Recall that `global` is needed to tell Python to
    update a variable in the top-level directory rather than the local directory.
    If you use `all_accts.append`, however, you are modifying the heap instead of
    the directory. There is no need for `global` if your code is only modifying heap
    contents.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ ä½¿ç”¨`append`æ¥æ›´æ–°`all_accts`åˆ—è¡¨ï¼Œé‚£ä¹ˆä½ å°±ä¸éœ€è¦åŒ…å«`global all_accts`ã€‚å›æƒ³ä¸€ä¸‹ï¼Œ`global`æ˜¯å¿…éœ€çš„ï¼Œä»¥å‘Šè¯‰Pythonæ›´æ–°é¡¶çº§ç›®å½•ä¸­çš„å˜é‡è€Œä¸æ˜¯å±€éƒ¨ç›®å½•ä¸­çš„å˜é‡ã€‚ç„¶è€Œï¼Œå¦‚æœä½ ä½¿ç”¨`all_accts.append`ï¼Œä½ æ˜¯åœ¨ä¿®æ”¹å †è€Œä¸æ˜¯ç›®å½•ã€‚å¦‚æœä½ çš„ä»£ç åªä¿®æ”¹å †å†…å®¹ï¼Œåˆ™ä¸éœ€è¦`global`ã€‚
- en: 'Exercise: Creating Lists of Accounts[ğŸ”—](#(part._.Exercise__.Creating_.Lists_of_.Accounts)
    "Link to here")'
  id: totrans-74
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: ç»ƒä¹ ï¼šåˆ›å»ºè´¦æˆ·åˆ—è¡¨[ğŸ”—](#(part._.Exercise__.Creating_.Lists_of_.Accounts) "é“¾æ¥åˆ°æ­¤å¤„")
- en: In [Mutating Top-Level Variables within Functions](mutating-variables.html#%28part._mut-top-level-vars-in-func%29),
    we wrote a function to create new accounts for the bank. That function returned
    each new account as it was created. That meant that every newly-created account
    had to be associated with a name in the directory (otherwise we would not be able
    to access it from the heap).
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨[å‡½æ•°å†…ä¿®æ”¹é¡¶çº§å˜é‡](mutating-variables.html#%28part._mut-top-level-vars-in-func%29)ä¸­ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªå‡½æ•°æ¥ä¸ºé“¶è¡Œåˆ›å»ºæ–°è´¦æˆ·ã€‚è¯¥å‡½æ•°åœ¨åˆ›å»ºæ–°è´¦æˆ·æ—¶è¿”å›æ¯ä¸ªæ–°è´¦æˆ·ã€‚è¿™æ„å‘³ç€æ¯ä¸ªæ–°åˆ›å»ºçš„è´¦æˆ·éƒ½å¿…é¡»ä¸ç›®å½•ä¸­çš„åç§°ç›¸å…³è”ï¼ˆå¦åˆ™æˆ‘ä»¬æ— æ³•ä»å †ä¸­è®¿é—®å®ƒï¼‰ã€‚
- en: 'Maintaining either a list or a dictionary of all the created accounts makes
    much more sense. Weâ€™d need only a single name for the collection of accounts,
    but could still access individual accounts as needed. For example, we might want
    an `all_accts` list that looks something like the following:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: ç»´æŠ¤æ‰€æœ‰åˆ›å»ºçš„è´¦æˆ·çš„åˆ—è¡¨æˆ–å­—å…¸æ›´æœ‰æ„ä¹‰ã€‚æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªåç§°æ¥è¡¨ç¤ºè´¦æˆ·é›†åˆï¼Œä½†ä»ç„¶å¯ä»¥æ ¹æ®éœ€è¦è®¿é—®å•ä¸ªè´¦æˆ·ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½æƒ³è¦ä¸€ä¸ªç±»ä¼¼ä»¥ä¸‹å†…å®¹çš„`all_accts`åˆ—è¡¨ï¼š
- en: '[PRE10]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Do Now!
  id: totrans-78
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç°åœ¨è¡ŒåŠ¨ï¼
- en: ''
  id: totrans-79
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Write a program that creates an empty `all_accts` list, then adds a new `Account`
    to it each time `create_acct` is called. You will need to modify `create_acct`
    in order to do this. Here is the existing code as a starting point.
  id: totrans-80
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œåˆ›å»ºä¸€ä¸ªç©ºçš„ `all_accts` åˆ—è¡¨ï¼Œç„¶åæ¯æ¬¡è°ƒç”¨ `create_acct` æ—¶å‘å…¶ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„ `Account`ã€‚ä½ éœ€è¦ä¿®æ”¹
    `create_acct` æ¥å®ç°è¿™ä¸€ç‚¹ã€‚ä»¥ä¸‹æ˜¯å°†ä½œä¸ºèµ·å§‹ç‚¹çš„ç°æœ‰ä»£ç ã€‚ '
- en: ''
  id: totrans-81
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-82
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Do Now!
  id: totrans-83
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç°åœ¨å°±åšï¼
- en: ''
  id: totrans-84
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Did you include a line like `global all_accts` in your code? Why or why not?
  id: totrans-85
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ä½ åœ¨ä»£ç ä¸­åŒ…å«äº†ä¸€æ¡åƒ `global all_accts` è¿™æ ·çš„è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆæˆ–ä¸ºä»€ä¹ˆä¸åŒ…å«ï¼Ÿ
- en: If you used `append` to update the `all_accts` list, then you would not need
    to include `global all_accts`. Recall that `global` is needed to tell Python to
    update a variable in the top-level directory rather than the local directory.
    If you use `all_accts.append`, however, you are modifying the heap instead of
    the directory. There is no need for `global` if your code is only modifying heap
    contents.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ ä½¿ç”¨äº† `append` æ¥æ›´æ–° `all_accts` åˆ—è¡¨ï¼Œé‚£ä¹ˆä½ å°±ä¸éœ€è¦åŒ…å« `global all_accts`ã€‚å›æƒ³ä¸€ä¸‹ï¼Œ`global`
    æ˜¯ç”¨æ¥å‘Šè¯‰ Python æ›´æ–°é¡¶çº§ç›®å½•ä¸­çš„å˜é‡è€Œä¸æ˜¯æœ¬åœ°ç›®å½•ä¸­çš„å˜é‡çš„ã€‚ç„¶è€Œï¼Œå¦‚æœä½ ä½¿ç”¨ `all_accts.append`ï¼Œä½ æ˜¯åœ¨ä¿®æ”¹å †è€Œä¸æ˜¯ç›®å½•ã€‚å¦‚æœä½ çš„ä»£ç åªæ˜¯ä¿®æ”¹å †å†…å®¹ï¼Œé‚£ä¹ˆä¸éœ€è¦
    `global`ã€‚
