- en: Online Appendix E — R Markdown
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在线附录E — R Markdown
- en: 原文：[https://tellingstorieswithdata.com/24-rmarkdown.html](https://tellingstorieswithdata.com/24-rmarkdown.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://tellingstorieswithdata.com/24-rmarkdown.html](https://tellingstorieswithdata.com/24-rmarkdown.html)
- en: '[Appendices](./20-r_essentials.html)'
  id: totrans-2
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[附录](./20-r_essentials.html)'
- en: '[E  R Markdown](./24-rmarkdown.html)'
  id: totrans-3
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[E  R Markdown](./24-rmarkdown.html)'
- en: Quarto is the successor to R Markdown, however it is relatively new and many
    people still use R Markdown. For the most part, the aspects covered in [Chapter
    3](03-workflow.html) apply for both Quarto and R Markdown. However, in this appendix
    we provide an equivalent for R Markdown, for the guidance provided for Quarto,
    where there are aspects that differ.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Quarto是R Markdown的继任者，然而它相对较新，许多人仍然使用R Markdown。就大部分内容而言，[第3章](03-workflow.html)中涵盖的方面适用于Quarto和R
    Markdown。然而，在本附录中，我们为R Markdown提供了Quarto中提供的指导的等效内容，其中有一些方面不同。
- en: E.1 R chunks
  id: totrans-5
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: E.1 R代码块
- en: We can include code for R and many other languages in code chunks within an
    R Markdown document. Then when we knit the document, the code will run and be
    included in the document.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在R Markdown文档中的代码块中包含R和许多其他语言的代码。然后当我们编织文档时，代码将运行并被包含在文档中。
- en: To create an R chunk, we start with three backticks and then within curly braces
    we tell R Markdown that this is an R chunk. Anything inside this chunk will be
    considered R code and run as such. For instance, we could load the `tidyverse`
    and `AER` and make a graph of the number of times a survey respondent visited
    the doctor in the past two weeks.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建一个R代码块，我们首先使用三个反引号，然后在花括号内告诉R Markdown这是一个R代码块。这个代码块内的任何内容都将被视为R代码并按此运行。例如，我们可以加载`tidyverse`和`AER`，并绘制过去两周内调查受访者看医生的次数的图表。
- en: '[PRE0]{r}'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE0]{r}'
- en: library(tidyverse)
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: library(tidyverse)
- en: library(AER)
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: library(AER)
- en: data("DoctorVisits", package = "AER")
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: data("DoctorVisits", package = "AER")
- en: DoctorVisits |>
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: DoctorVisits |>
- en: ggplot(aes(x = illness)) +
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: ggplot(aes(x = illness)) +
- en: geom_histogram(stat = "count")
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: geom_histogram(stat = "count")
- en: '[PRE1]'
  id: totrans-15
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The output of that code is [Figure 3.1](03-workflow.html#fig-doctervisits)
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 该代码的输出是[Figure 3.1](03-workflow.html#fig-doctervisits)
- en: '![](../Images/fea3d502a7503de9e0f6f6d602220d17.png)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fea3d502a7503de9e0f6f6d602220d17.png)'
- en: Number of illnesses in the past two weeks, based on the 1977–1978 Australian
    Health Survey
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 过去两周内疾病数量的统计，基于1977-1978年澳大利亚健康调查
- en: Notice that in contrast to Quarto, all the options go between curly braces in
    the top line. It is not possible to use the comment notation of Quarto.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，与Quarto不同，所有选项都在顶行的大括号之间。无法使用Quarto的注释符号。
- en: E.2 Cross-references
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: E.2 交叉引用
- en: 'It can be useful to cross-reference figures, tables, and equations. This makes
    it easier to refer to them in the text. To do this for a figure we refer to the
    name of the R chunk that creates or contains the figure. For instance, `(Figure
    \@ref(fig:uniquename))` will produce: ([Figure 3.2](03-workflow.html#fig-uniquename))
    as the name of the R chunk is `uniquename`. We also need to add ‘fig’ in front
    of the chunk name so that R Markdown knows that this is a figure. We then include
    a ‘fig.cap’ in the R chunk that specifies a caption.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在交叉引用图表、表格和方程时可能很有用。这使得在文本中引用它们变得更加容易。为了对图表进行交叉引用，我们引用创建或包含该图表的R代码块名称。例如，`(Figure
    \@ref(fig:uniquename))`将生成：([Figure 3.2](03-workflow.html#fig-uniquename))，因为R代码块名称是`uniquename`。我们还需要在代码块名称前加上‘fig’以让R
    Markdown知道这是一个图表。然后我们在R代码块中包含一个‘fig.cap’来指定标题。
- en: '[PRE2]{r uniquename, fig.cap = "Number of illnesses in the past two weeks,
    based on the 1977--1978 Australian Health Survey", echo = TRUE}'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE2]{r uniquename, fig.cap = "Number of illnesses in the past two weeks,
    based on the 1977--1978 Australian Health Survey", echo = TRUE}'
- en: '[PRE3]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: library(tidyverse)
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: library(tidyverse)
- en: library(AER)
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: library(AER)
- en: data("DoctorVisits", package = "AER")
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: data("DoctorVisits", package = "AER")
- en: DoctorVisits |>
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: DoctorVisits |>
- en: ggplot(aes(x = illness)) +
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: ggplot(aes(x = illness)) +
- en: geom_histogram(stat = "count")
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: geom_histogram(stat = "count")
- en: '[PRE4]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: \begin{equation}
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: \begin{equation}
- en: Y = C + I + G + (X - M) (\#eq:macroidentity)
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: Y = C + I + G + (X - M) (\#eq:macroidentity)
- en: \end{equation}
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: \end{equation}
- en: '```'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '```'
- en: \[ Y = C + I + G + (X - M) \tag{E.1}\]
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: \[ Y = C + I + G + (X - M) \tag{E.1}\]
- en: When using cross-references ensure that the R chunks have simple labels. In
    general, try to keep the names simple but unique, and if possible, avoid punctuation
    and stick to letters. Do not use underbars in the labels because that will cause
    an error.**
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用交叉引用时，确保R代码块具有简单的标签。通常，尽量保持名称简单但唯一，如果可能，避免使用标点符号并坚持使用字母。不要在标签中使用下划线，因为这会导致错误。**
