- en: Profiling
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分析
- en: 原文：[https://en.algorithmica.org/hpc/profiling/](https://en.algorithmica.org/hpc/profiling/)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://en.algorithmica.org/hpc/profiling/](https://en.algorithmica.org/hpc/profiling/)
- en: Staring at the source code or its assembly is a popular, but not the most effective
    way of finding performance issues. When the performance doesn’t meet your expectations,
    you can identify the root cause much faster using one of the special program analysis
    tools collectively called *profilers*.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 仅仅盯着源代码或其汇编代码是一种流行但不是最有效的方法来发现性能问题。当性能不符合您的期望时，您可以使用被称为 *分析器* 的特殊程序分析工具之一来更快地识别根本原因。
- en: 'There are many different types of profilers. I like to think about them by
    analogy of how physicists and other natural scientists approach studying small
    things, picking the right tool depending on the required level of precision:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 存在许多不同类型的分析器。我喜欢将它们与物理学家和其他自然科学家如何研究小事物进行类比，根据所需的精度水平选择合适的工具：
- en: When objects are on a micrometer scale, they use optical microscopes.
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当物体处于微米尺度时，它们使用光学显微镜。
- en: When objects are on a nanometer scale, and light no longer interacts with them,
    they use electron microscopes.
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当物体处于纳米尺度，并且光不再与它们相互作用时，它们使用电子显微镜。
- en: When objects are smaller than that (e.g., the insides of an atom), they resort
    to theories and assumptions about how things work (and test these assumptions
    using intricate and indirect experiments).
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当物体比这更小（例如，原子的内部）时，他们求助于关于事物如何工作的理论和假设（并使用复杂和间接的实验来测试这些假设）。
- en: 'Similarly, there are three main profiling techniques, each operating by its
    own principles, having distinct areas of applicability, and allowing for different
    levels of precision:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，存在三种主要的分析技术，每种技术都根据其自身的原理运作，具有不同的适用领域，并允许不同的精度水平：
- en: '[Instrumentation](instrumentation) lets you time the program as a whole or
    by parts and count specific events you are interested in.'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[仪器](instrumentation) 允许您整体或按部分计时程序，并计数您感兴趣的具体事件。'
- en: '[Statistical profiling](events) lets you go down to the assembly level and
    track various *hardware events* such as branch mispredictions or cache misses,
    which are critical for performance.'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[统计分析](events) 允许您深入到汇编级别，跟踪各种 *硬件事件*，例如分支预测错误或缓存未命中，这些对于性能至关重要。'
- en: '[Program simulation](mca) lets you go down to the individual cycle level and
    look into what is happening inside the CPU on each cycle when it is executing
    a small assembly snippet.'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[程序模拟](mca) 允许您深入到单个周期级别，查看在执行小汇编片段时每个周期CPU内部发生的情况。'
- en: Practical algorithm design can be very much considered an empirical field too.
    We largely rely on the same experimental methods, although this is not because
    we don’t know some of the fundamental secrets of nature but mostly because modern
    computers are just too complex to analyze — besides, this is also true that we,
    regular software engineers, can’t know some of the details because of IP protection
    from hardware companies (in fact, considering that the most accurate x86 instruction
    tables are [reverse-engineered](https://arxiv.org/pdf/1810.04610.pdf), there is
    a reason to believe that Intel doesn’t know these details themselves).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 实际的算法设计在很大程度上也可以被认为是一个经验领域。我们主要依赖相同的实验方法，这并不是因为我们不知道自然的一些基本秘密，而是因为现代计算机过于复杂，难以分析——此外，这也意味着我们这些普通的软件工程师由于硬件公司的知识产权保护，无法了解一些细节（事实上，考虑到最准确的x86指令表是[逆向工程](https://arxiv.org/pdf/1810.04610.pdf)得来的，有理由相信英特尔本身也不知道这些细节）。
- en: In this chapter, we will study these three key profiling methods, as well as
    some time-tested practices for managing computational experiments involving performance
    evaluation.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将研究这三种关键的分析方法，以及一些经过时间考验的实践，用于管理涉及性能评估的计算实验。
- en: '[← Precomputation](https://en.algorithmica.org/hpc/compilation/precalc/)'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[← 预计算](https://en.algorithmica.org/hpc/compilation/precalc/)'
- en: '[← ../Compilation](https://en.algorithmica.org/hpc/compilation/)[Instrumentation
    →](https://en.algorithmica.org/hpc/profiling/instrumentation/)'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[← ../编译](https://en.algorithmica.org/hpc/compilation/)[仪器 →](https://en.algorithmica.org/hpc/profiling/instrumentation/)'
- en: '[../Arithmetic →](https://en.algorithmica.org/hpc/arithmetic/)'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[../算术 →](https://en.algorithmica.org/hpc/arithmetic/)'
