- en: Equality Constraint Formulation
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 等式约束公式
- en: 原文：[https://phys-sim-book.github.io/lec5.1-equality_constraints.html](https://phys-sim-book.github.io/lec5.1-equality_constraints.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://phys-sim-book.github.io/lec5.1-equality_constraints.html](https://phys-sim-book.github.io/lec5.1-equality_constraints.html)
- en: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '`<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">`'
- en: 'Dirichlet boundary conditions (BC), when integrated into the optimization time
    integrator, are represented as linear equality constraints: Ax=b,(5.1.1) In this
    equation, the matrix \(A\) is a \(m \times dn\) matrix, where \(m \leq dn\). This
    matrix functions to select the degrees of freedom (DOFs) at the nodes that are
    subject to the boundary conditions. The vector \(b\) is a \(m \times 1\) vector,
    which specifies the precise spatial values that are prescribed by these conditions.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: Dirichlet 边界条件（BC），当集成到优化时间积分器中时，表示为线性等式约束：Ax=b，（5.1.1）在这个方程中，矩阵 \(A\) 是一个 \(m
    \times dn\) 矩阵，其中 \(m \leq dn\)。这个矩阵的作用是选择受边界条件影响的节点上的自由度（DOFs）。向量 \(b\) 是一个 \(m
    \times 1\) 的向量，它指定了这些条件规定的精确空间值。
- en: '**Example 5.1.1 (Sticky Dirichlet Boundary Condition).** For a 2D system containing
    two nodes \((x_{11}, x_{12})\) and \((x_{21}, x_{22})\), to fix the second node
    at position \((1, 2)\), the boundary condition (Equation [(5.1.1)](#eq:lec5:BC_x))
    can be expressed as [00​00​10​01​]​x11​x12​x21​x22​​​=[12​].'
  id: totrans-4
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**示例 5.1.1（粘性Dirichlet边界条件）**。对于一个包含两个节点 \((x_{11}, x_{12})\) 和 \((x_{21},
    x_{22})\) 的二维系统，要将第二个节点固定在位置 \((1, 2)\)，边界条件（方程 [(5.1.1)](#eq:lec5:BC_x)）可以表示为
    [00 00 10 01] x11 x12 x21 x22 = [12]。'
- en: 'The two most common types of Dirichlet boundary conditions are sticky and slip:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 最常见的两种Dirichlet边界条件是粘性和滑动：
- en: '**Sticky Boundary Conditions**: These conditions effectively fix the position
    of certain nodes within a time step. They are characterized by a block-wise constraint
    Jacobian matrix \(A\). In this matrix, each set of \(d\) rows includes exactly
    one \(d \times d\) identity matrix. The rest of the matrix consists of zero matrices.
    This configuration is illustrated in [Example 5.1.1](#exp:lec5:dbc). The implementation
    of sticky boundary conditions ensures that the specified nodes remain stationary,
    adhering to the prescribed positions during the simulation.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '**粘性边界条件**：这些条件有效地将某些节点的位置固定在时间步内。它们的特点是具有块状约束雅可比矩阵 \(A\)。在这个矩阵中，每组 \(d\) 行包含一个
    \(d \times d\) 的单位矩阵。矩阵的其余部分由零矩阵组成。这种配置在 [示例 5.1.1](#exp:lec5:dbc) 中有说明。粘性边界条件的实现确保了指定的节点在模拟过程中保持静止，遵循规定的位置。'
- en: '**Slip Boundary Conditions**: These conditions are designed to constrain each
    boundary condition (BC) node within a specific linear subspace, such as a plane
    or a line, which may not necessarily be axis-aligned. As an example, consider
    planar slip boundary conditions. Here, for each BC node, there is a corresponding
    row in the matrix \(A\) that contains the normal vector of the plane. This vector
    occupies the columns corresponding to the BC node, as detailed in [Example 5.1.2](#exp:lec5:slip).
    Such conditions allow the nodes to move, but only within the defined linear subspace,
    thus adding a layer of complexity and realism to the simulation.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '**滑动边界条件**：这些条件旨在将每个边界条件（BC）节点约束在特定的线性子空间内，例如一个平面或一条线，这些子空间可能不是轴对齐的。例如，考虑平面滑动边界条件。在这里，对于每个
    BC 节点，矩阵 \(A\) 中都有一个对应的行，该行包含平面的法向量。这个向量占据了对应 BC 节点的列，如 [示例 5.1.2](#exp:lec5:slip)
    中详细说明。这样的条件允许节点移动，但只能在定义的线性子空间内，从而为模拟增加了复杂性和现实感。'
- en: '**Example 5.1.2 (Slip Dirichlet Boundary Condition).** For the same two-node
    system in [Example 5.1.1](#exp:lec5:dbc), to constrain the first node in the line
    with equation \(2x + 3y = 4\), the constraint (Equation [(5.1.1)](#eq:lec5:BC_x))
    can be expressed as [2​3​0​0​]​x11​x12​x21​x22​​​=4.'
  id: totrans-8
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**示例 5.1.2（滑动Dirichlet边界条件）**。对于与 [示例 5.1.1](#exp:lec5:dbc) 中相同的两个节点系统，要约束方程
    \(2x + 3y = 4\) 上的第一个节点，约束（方程 [(5.1.1)](#eq:lec5:BC_x)）可以表示为 [2 3 0 0] x11 x12
    x21 x22 = 4。'
- en: 'At the start of each time step, if we are given that all boundary conditions
    are satisfied, then the goal during optimization is simply to maintain the positions
    of the boundary condition nodes. This is represented as: AΔx=0.(5.1.2) Here, \(\Delta
    x\) is the search direction in each optimization iteration. Maintaining this condition
    ensures that any updated nodal position \(x + \alpha \Delta x\), with \(\alpha\)
    being the step size from line search, still satisfies the boundary conditions:
    A(x+αΔx)=b. This guarantees the adherence to boundary conditions throughout the
    optimization process.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在每个时间步长的开始，如果我们知道所有边界条件都已满足，那么在优化过程中的目标仅仅是保持边界条件节点的位置。这表示为：AΔx=0.(5.1.2) 这里，\(\Delta
    x\) 是每次优化迭代中的搜索方向。保持这个条件确保了任何更新的节点位置 \(x + \alpha \Delta x\)（其中 \(\alpha\) 是线搜索的步长），仍然满足边界条件：A(x+αΔx)=b。这保证了在整个优化过程中遵守边界条件。
- en: 'To enforce the linear equality constraints (Equation [(5.1.2)](#eq:lec5:BC_dx))
    for sticky DBC in a time step, we address this in each Newton iteration while
    solving for the search direction \( \Delta x \). This process involves forming
    the Lagrangian with a quadratic approximation to the Incremental Potential:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 为了在时间步长内强制执行粘性DBC的线性等式约束（方程[(5.1.2)](#eq:lec5:BC_dx)），我们在求解搜索方向 \( \Delta x
    \) 的过程中，在每次牛顿迭代中处理这个问题。这个过程涉及到使用对增量势能的二次近似来形成拉格朗日函数：
- en: L(Δx,λ)=21​ΔxTHΔx+gTΔx+λTAΔx,
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: L(Δx,λ)=21​ΔxTHΔx+gTΔx+λTAΔx,
- en: Here, \( \lambda \) is the \( m\times 1 \) Lagrange multiplier vector. The gradient
    and Hessian of the Incremental Potential are denoted by \( g \) and \( H \), respectively.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，\( \lambda \) 是 \( m\times 1 \) 的拉格朗日乘子向量。增量势能的梯度和对偶梯度分别用 \( g \) 和 \( H
    \) 表示。
- en: 'The solution is approached through a max-min optimization problem:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 解决方案通过一个最大-最小优化问题来逼近：
- en: λmax​Δxmin​L(Δx,λ),
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: λmax​Δxmin​L(Δx,λ),
- en: 'which leads to the formulation of a Karush-Kuhn-Tucker (KKT) system:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 这导致了一个Karush-Kuhn-Tucker (KKT)系统的形成：
- en: '[HA​AT​][Δxλ​]=[−g0​].(5.1.3)'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '[HA​AT​][Δxλ​]=[−g0​].(5.1.3)'
- en: Solving this KKT system is essential to determine the search direction. Note
    that this system is not Symmetric Positive Definite (SPD) and its size increases
    with the number of BC nodes.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 解决这个KKT系统对于确定搜索方向是至关重要的。请注意，这个系统不是对称正定（SPD）的，并且其大小随着边界条件节点数量的增加而增加。
