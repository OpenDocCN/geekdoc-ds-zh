- en: Modern Hardware
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 现代硬件
- en: 原文：[https://en.algorithmica.org/hpc/complexity/hardware/](https://en.algorithmica.org/hpc/complexity/hardware/)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://en.algorithmica.org/hpc/complexity/hardware/](https://en.algorithmica.org/hpc/complexity/hardware/)
- en: 'The main disadvantage of the supercomputers of the 1960s wasn’t that they were
    slow — relatively speaking, they weren’t — but that they were giant, complex to
    use, and so expensive that only the governments of the world superpowers could
    afford them. Their size was the reason they were so expensive: they required a
    lot of custom components that had to be very carefully assembled in the macro-world,
    by people holding advanced degrees in electrical engineering, in a process that
    couldn’t be scaled up for mass production.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 20世纪60年代超级计算机的主要缺点并不是它们运行缓慢——相对而言，它们并不慢——而是它们体积庞大，使用复杂，价格昂贵，只有世界超级大国的政府才能负担得起。它们的体积是它们如此昂贵的原因：它们需要大量的定制组件，这些组件必须在宏观世界中由持有高级电气工程学位的人非常仔细地组装，这个过程无法扩大到大规模生产。
- en: The turning point was the development of *microchips* — single, tiny, complete
    circuits — which revolutionized the industry and turned out to be probably the
    most important invention of the 20th century. What was a multimillion-dollar cupboard
    of computing machinery in 1965 could in 1975 fit on a [4mm × 4mm slice of silicon](https://en.wikipedia.org/wiki/MOS_Technology_6502)^([1](#fn:1))
    that you can buy for $25\. This dramatic improvement in affordability started
    the home computer revolution during the following decade, with computers like
    Apple II, Atari 2600, Commodore 64, and IBM PC becoming available to the masses.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 转折点是**微芯片**——单个、微小、完整的电路——的发展，它彻底改变了行业，并最终可能是20世纪最重要的发明。1965年价值数百万美元的计算机设备到了1975年可以装在一个[4mm
    × 4mm的硅片](https://en.wikipedia.org/wiki/MOS_Technology_6502)^([1](#fn:1))上，你只需花25美元就能买到。这种显著的成本降低在接下来的十年中开始了家用计算机革命，像Apple
    II、Atari 2600、Commodore 64和IBM PC这样的计算机开始进入大众市场。
- en: '### [#](https://en.algorithmica.org/hpc/complexity/hardware/#how-microchips-are-made)How
    Microchips are Made'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '### [#](https://en.algorithmica.org/hpc/complexity/hardware/#how-microchips-are-made)微芯片的制作过程'
- en: Microchips are “printed” on a slice of crystalline silicon using a process called
    [photolithography](https://en.wikipedia.org/wiki/Photolithography), which involves
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 微芯片是通过一种称为[光刻](https://en.wikipedia.org/wiki/Photolithography)的过程“打印”在晶圆上的，这个过程涉及
- en: growing and slicing a [very pure silicon crystal](https://en.wikipedia.org/wiki/Wafer_(electronics)),
  id: totrans-6
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 培育并切割[非常纯净的硅晶圆](https://en.wikipedia.org/wiki/Wafer_(electronics))，
- en: covering it with a layer of [a substance that dissolves when photons hit it](https://en.wikipedia.org/wiki/Photoresist),
  id: totrans-7
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在其上覆盖一层[当光子击中时会溶解的物质](https://en.wikipedia.org/wiki/Photoresist)，
- en: hitting it with photons in a set pattern,
  id: totrans-8
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以特定的模式用光子击中它，
- en: chemically [etching](https://en.wikipedia.org/wiki/Etching_(microfabrication))
    the now-exposed parts,
  id: totrans-9
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 化学性地[蚀刻](https://en.wikipedia.org/wiki/Etching_(microfabrication))现在暴露的部分，
- en: removing the remaining photoresist,
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 移除剩余的光刻胶，
- en: …and then performing another 40-50 steps over several months to complete the
    rest of the CPU.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: …然后在接下来的几个月内再进行40-50步，以完成CPU的其余部分。
- en: '![](../Images/f473bdba7169995ff310647308d395ab.png)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f473bdba7169995ff310647308d395ab.png)'
- en: 'Consider now the “hit it with photons” part. For that, we can use a system
    of lenses that projects a pattern onto a much smaller area, effectively making
    a tiny circuit with all the desired properties. This way, the optics of the 1970s
    were able to fit a few thousand transistors on the size of a fingernail, which
    gives microchips several key advantages that macro-world computers didn’t have:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 现在考虑“用光子击中它”的部分。为此，我们可以使用一个镜头系统，将图案投射到一个更小的区域，从而有效地制作一个具有所有所需特性的微小电路。这样，20世纪70年代的光学技术能够在指甲盖大小的地方容纳几千个晶体管，这为微芯片提供了几个关键优势，而宏观世界的计算机则没有这些优势：
- en: higher clock rates (that were previously limited by the speed of light);
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更高的时钟频率（以前受光速的限制）；
- en: the ability to scale the production;
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 能够扩大生产规模；
- en: much lower material and power usage, translating to much lower cost per unit.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更低的材料和能源消耗，从而降低了每单位成本。
- en: 'Apart from these immediate benefits, photolithography enabled a clear path
    to improve performance further: you can just make lenses stronger, which in turn
    would create smaller, but functionally identical devices with relatively little
    effort.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 除了这些直接的好处之外，光刻技术还开辟了一条清晰的道路来进一步提高性能：你只需使镜头更强，这反过来又会以相对较小的努力创造出更小但功能相同的设备。
- en: '### [#](https://en.algorithmica.org/hpc/complexity/hardware/#dennard-scaling)Dennard
    Scaling'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '### [#](https://en.algorithmica.org/hpc/complexity/hardware/#dennard-scaling)Dennard
    Scaling'
- en: Consider what happens when we scale a microchip down. A smaller circuit requires
    proportionally fewer materials, and smaller transistors take less time to switch
    (along with all other physical processes in the chip), allowing reducing the voltage
    and increasing the clock rate.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑一下当我们缩小微芯片时会发生什么。较小的电路需要成比例地减少材料，较小的晶体管切换所需的时间更短（以及芯片中所有其他物理过程），这允许降低电压并提高时钟频率。
- en: A more detailed observation, known as the *Dennard scaling*, states that reducing
    transistor dimensions by 30%
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 一个更详细的观察，被称为*Dennard缩放*，表明通过减少30%的晶体管尺寸
- en: doubles the transistor density ($0.7^2 \approx 0.5$),
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将晶体管密度翻倍 ($0.7^2 \approx 0.5$)
- en: increases the clock speed by 40% ($\frac{1}{0.7} \approx 1.4$),
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将时钟速度提高了40% ($\frac{1}{0.7} \approx 1.4$)
- en: and leaves the overall *power density* the same.
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 并且保持了整体*功率密度*不变。
- en: Since the per-unit manufacturing cost is a function of area, and the exploitation
    cost is mostly the cost of power^([2](#fn:2)), each new “generation” should have
    roughly the same total cost, but 40% higher clock and twice as many transistors,
    which can be promptly used, for example, to add new instructions or increase the
    word size — to keep up with the same miniaturization happening in memory microchips.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 由于单位制造成本是面积的一个函数，而利用成本主要是电力成本^([2](#fn:2))，每一代新产品应该大致具有相同的总成本，但时钟频率提高40%，晶体管数量增加一倍，可以迅速用于添加新指令或增加字长——以跟上内存微芯片中发生的相同小型化。
- en: Due to the trade-offs between energy and performance you can make during the
    design, the fidelity of the fabrication process itself, such as “180nm” or “65nm,”
    directly translating to the density of transistors, became the trademark for CPU
    efficiency^([3](#fn:3)).
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 由于在设计过程中可以在能量和性能之间进行权衡，因此制造过程本身的保真度，例如“180nm”或“65nm”，直接转化为晶体管的密度，成为了CPU效率的标志^([3](#fn:3))。
- en: Throughout most of the computing history, optical shrinking was the main driving
    force behind performance improvements. Gordon Moore, the former CEO of Intel,
    predicted in 1975 that the transistor count in microprocessors will double every
    two years. His prediction held to this day and became known as *Moore’s law*.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 在计算历史的大部分时间里，光学缩小是性能提升的主要驱动力。英特尔前首席执行官戈登·摩尔在1975年预测，微处理器的晶体管数量每两年将翻一番。他的预测一直持续到今天，并被称为*摩尔定律*。
- en: '![](../Images/a4b4a8efc6aa88b58bd7f8532df29197.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a4b4a8efc6aa88b58bd7f8532df29197.png)'
- en: Both Dennard scaling and Moore’s law are not actual laws of physics, but just
    observations made by savvy engineers. They are both destined to stop at some point
    due to fundamental physical limitations, the ultimate one being the size of silicon
    atoms. In fact, Dennard scaling already did — due to power issues.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: Dennard缩放和摩尔定律都不是物理定律，而只是精明的工程师做出的观察。它们都注定会在某个时刻停止，因为基本的物理限制，最终限制是硅原子的尺寸。事实上，Dennard缩放已经停止了——由于电力问题。
- en: Thermodynamically, a computer is just a very efficient device for converting
    electrical power into heat. This heat eventually needs to be removed, and there
    are physical limits to how much power you can dissipate from a millimeter-scale
    crystal. Computer engineers, aiming to maximize performance, essentially just
    choose the maximum possible clock rate so that the overall power consumption stays
    the same. If transistors become smaller, they have less capacitance, meaning less
    required voltage to flip them, which in turn allows increasing the clock rate.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 从热力学角度来看，计算机只是一个非常高效的将电能转换为热能的设备。这些热量最终需要被移除，并且从毫米级晶体中散发的功率有一个物理极限。计算机工程师为了最大化性能，实际上只是选择了可能的最大时钟频率，以保持整体功耗不变。如果晶体管变得更小，它们具有更小的电容，这意味着翻转它们所需的电压更低，这反过来又允许提高时钟频率。
- en: 'Around 2005–2007, this strategy stopped working because of *leakage* effects:
    the circuit features became so small that their magnetic fields started to make
    the electrons in the neighboring circuitry move in directions they are not supposed
    to, causing unnecessary heating and occasional bit flipping.'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 大约在2005-2007年，这种策略因为*漏电*效应而停止工作：电路特征变得如此之小，以至于它们的磁场开始使邻近电路中的电子以它们不应该的方向移动，造成不必要的加热和偶尔的位翻转。
- en: The only way to mitigate this is to increase the voltage; and to balance off
    power consumption you need to reduce clock frequency, which in turn makes the
    whole process progressively less profitable as transistor density increases. At
    some point, clock rates could no longer be increased by scaling, and the miniaturization
    trend started to slow down.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 减缓这一趋势的唯一方法是增加电压；为了平衡功耗，需要降低时钟频率，这反过来使得随着晶体管密度的增加，整个过程越来越不盈利。在某个时刻，通过缩放无法再增加时钟频率，微型化趋势开始放缓。
- en: '### [#](https://en.algorithmica.org/hpc/complexity/hardware/#modern-computing)Modern
    Computing'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '### [#](https://en.algorithmica.org/hpc/complexity/hardware/#modern-computing)现代计算'
- en: Dennard scaling has ended, but Moore’s law is not dead yet.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: Dennard缩放已经结束，但摩尔定律尚未死亡。
- en: Clock rates plateaued, but the transistor count is still increasing, allowing
    for the creation of new, *parallel* hardware. Instead of chasing faster cycles,
    CPU designs started to focus on getting more useful things done in a single cycle.
    Instead of getting smaller, transistors have been changing shape.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 时钟频率达到了平台期，但晶体管数量仍在增加，这允许创建新的、*并行*硬件。不再追求更快的周期，CPU设计开始专注于在一个周期内完成更多有用的事情。晶体管不再变小，而是改变了形状。
- en: This resulted in increasingly complex architectures capable of doing dozens,
    hundreds, or even thousands of different things every cycle.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 这导致了越来越复杂的架构，每个周期能够执行数十、数百甚至数千种不同的操作。
- en: '![](../Images/df288e0069539c0f2ec25a28656bbf7d.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/df288e0069539c0f2ec25a28656bbf7d.png)'
- en: Die shot of a Zen CPU core by AMD (~1,400,000,000 transistors)
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: AMD Zen CPU核心的晶圆切片（约1,400,000,000个晶体管）
- en: 'Here are some core approaches making use of more available transistors that
    are driving recent computer designs:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一些核心方法利用更多可用的晶体管，这些方法正在推动最近的计算机设计：
- en: Overlapping the execution of instructions so that different parts of the CPU
    are kept busy (pipelining);
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过重叠指令的执行，使CPU的不同部分保持忙碌（流水线）；
- en: Executing operations without necessarily waiting for the previous ones to complete
    (speculative and out-of-order execution);
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在不必要等待前一个操作完成的情况下执行操作（推测性和乱序执行）；
- en: Adding multiple execution units to process independent operations simultaneously
    (superscalar processors);
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向处理器中添加多个执行单元以同时处理独立操作（超标量处理器）；
- en: Increasing the machine word size, to the point of adding instructions capable
    of executing the same operation on a block of 128, 256, or 512 bits of data split
    into groups ([SIMD](/hpc/simd/));
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加机器字长，达到可以执行128位、256位或512位数据块的操作指令（分组[SIMD](/hpc/simd/)）；
- en: Adding [layers of cache](/hpc/cpu-cache/) on the chip to speed up [RAM and external
    memory](/hpc/external-memory/) access time (memory doesn’t quite follow the laws
    of silicon scaling);
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在芯片上添加[缓存层](/hpc/cpu-cache/)以加快[RAM和外部内存](/hpc/external-memory/)的访问时间（内存并不完全遵循硅缩放定律）；
- en: Adding multiple identical cores on a chip (parallel computing, GPUs);
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在芯片上添加多个相同的核心（并行计算，GPU）；
- en: Using multiple chips in a motherboard and multiple cheaper computers in a data
    center (distributed computing);
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在主板中使用多个芯片以及在数据中心使用多个更便宜的计算机（分布式计算）；
- en: Using custom hardware to solve a specific problem with better chip utilization
    (ASICs, FPGAs).
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用定制硬件解决特定问题，以实现更好的芯片利用率（ASICs，FPGAs）。
- en: For modern computers, the “[let’s count all operations](../)” approach for predicting
    algorithm performance isn’t just slightly wrong but is off by several orders of
    magnitude. This calls for new computation models and other ways of assessing algorithm
    performance.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 对于现代计算机，预测算法性能的“让我们计算所有操作”(let’s count all operations)方法不仅稍微错误，而且误差几个数量级。这需要新的计算模型和评估算法性能的其他方法。
- en: '* * *'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: Actual sizes of CPUs are about centimeter-scale because of power management,
    heat dissipation, and the need to plug it into the motherboard without excessive
    swearing. [↩︎](#fnref:1)
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于电源管理、散热和需要将其插入主板而不过度咒骂，CPU的实际尺寸大约是厘米级的。 [↩︎](#fnref:1)
- en: The cost of electricity for running a busy server for 2-3 years roughly equals
    the cost of making the chip itself. [↩︎](#fnref:2)
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行繁忙的服务器2-3年的电力成本大致等于制造芯片本身的成本。 [↩︎](#fnref:2)
- en: At some point, when Moore’s law started to slow down, chip makers stopped delineating
    their chips by the size of their components — and it is now more like a marketing
    term. [A special committee](https://en.wikipedia.org/wiki/International_Technology_Roadmap_for_Semiconductors)
    has a meeting every two years where they take the previous node name, divide it
    by the square root of two, round to the nearest integer, declare the result to
    be the new node name, and then drink lots of wine. The “nm” doesn’t mean nanometer
    anymore. [↩︎](#fnref:3) [← ../Complexity Models](https://en.algorithmica.org/hpc/complexity/)[Programming
    Languages →](https://en.algorithmica.org/hpc/complexity/languages/)
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在某个时刻，随着摩尔定律开始放缓，芯片制造商停止通过其组件的大小来界定他们的芯片——现在这更像是一个营销术语。[一个特别委员会](https://en.wikipedia.org/wiki/International_Technology_Roadmap_for_Semiconductors)每两年举行一次会议，他们在会上取前一个节点的名称，除以2的平方根，四舍五入到最接近的整数，宣布结果为新的节点名称，然后喝很多酒。“nm”不再意味着纳米。[↑](#fnref:3)
    [← 复杂性模型](https://en.algorithmica.org/hpc/complexity/)[编程语言 →](https://en.algorithmica.org/hpc/complexity/languages/)
