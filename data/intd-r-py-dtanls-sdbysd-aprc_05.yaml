- en: Chapter 2 Basic Types
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第二章 基本类型
- en: 原文：[https://randpythonbook.netlify.app/basic-types](https://randpythonbook.netlify.app/basic-types)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://randpythonbook.netlify.app/basic-types](https://randpythonbook.netlify.app/basic-types)
- en: In every programming language, data is stored in different ways. Writing a program
    that manipulates data requires understanding all of the choices. That is why we
    must be concerned with the different **types** of data in our R and Python programs.
    Different types are suitable for different purposes.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在每种编程语言中，数据以不同的方式存储。编写操作数据的程序需要理解所有这些选择。这就是为什么我们必须关注我们在R和Python程序中的不同**数据类型**。不同的类型适用于不同的目的。
- en: There are similarities between Python’s and R’s type systems. However, there
    are may differences as well. Be prepared for these differences. There are many
    more of them in this chapter than there were in the previous chapter!
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: Python和R的类型系统之间存在相似之处。然而，也存在许多差异。对这些差异要有准备。本章中的差异比上一章要多得多。
- en: If you’re ever unsure what type a variable has, use `type()` (in Python) or
    `typeof()` (in R) to query it.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你不确定一个变量的类型，可以使用`type()`（在Python中）或`typeof()`（在R中）来查询它。
- en: Storing an individual piece of information is simple in both languages. However,
    while Python has scalar types, R does not draw as strong of a distinction between
    scalar and compound types.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在这两种语言中，存储单个信息片段都很简单。然而，虽然Python有标量类型，但R在标量和复合类型之间并没有那么强的区分。
- en: 2.1 Basic Types In Python
  id: totrans-6
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.1 Python中的基本类型
- en: In Python, the simplest types we frequently use are `str` (short for string),
    `int` (short for integer), `float` (short for floating point) and `bool` (short
    for Boolean). This list is not exhaustive, but these are a good collection to
    start thinking about. For a complete list of built-in types in Python, click [here](https://docs.python.org/3/library/stdtypes.html).
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在Python中，我们最常用的简单类型是`str`（代表字符串）、`int`（代表整数）、`float`（代表浮点数）和`bool`（代表布尔值）。这个列表并不全面，但这些都是一个很好的起点。要获取Python中内置类型的完整列表，请点击[这里](https://docs.python.org/3/library/stdtypes.html)。
- en: '[PRE0]'
  id: totrans-8
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Strings are useful for processing text data such as names of people/places/things
    and messages such as texts, tweets and emails (Beazley and Kenneth) Jones [2014](#ref-python_cookbook)).
    If you are dealing with numbers, you need floating points if you have a number
    that might have a fractional part after its decimal; otherwise you’ll need an
    integer. Booleans are useful for situations where you need to record whether something
    is true or false. They are also important to understand for control-flow in section
    [11](/control-flow#control-flow).
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 字符串用于处理文本数据，如人/地点/事物的名称和文本、推文和电子邮件等消息（Beazley和Kenneth Jones [2014](#ref-python_cookbook)）。如果你处理的是数字，如果你有一个可能有小数部分的数字，你需要浮点数；否则，你需要整数。布尔值在需要记录某事是真或假的情况下很有用。它们对于理解第[11](/control-flow#control-flow)节中的控制流也很重要。
- en: In the next section we will discuss the Numpy library. This library has a [broader
    collection](https://numpy.org/doc/stable/user/basics.types.html) of basic types
    that allows for finer control over any script you write.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将讨论Numpy库。这个库包含了一个[更广泛的类型集合](https://numpy.org/doc/stable/user/basics.types.html)，它允许对任何你编写的脚本进行更精细的控制。
- en: 2.1.1 Type Conversions in Python
  id: totrans-11
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.1.1 Python中的类型转换
- en: We will often have to convert between types in a Python program. This is called
    **type conversion**, and it can be either implicitly or explicitly done.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在Python程序中，我们经常需要在类型之间进行转换。这被称为**类型转换**，它可以隐式或显式地进行。
- en: For example, `int`s are often implicitly converted to `float`s, so that arithmetic
    operations work.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，`int`通常会被隐式转换为`float`，这样算术运算才能正常进行。
- en: '[PRE1]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'You might be disappointed if you always count on this behavior, though. For
    example, try the following piece of code on your machine. You will receive the
    following error: `TypeError: unsupported operand type(s) for +: ''float'' and
    ''str''`.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '如果你总是依赖这种行为，你可能会感到失望。例如，在你的机器上尝试以下代码片段。你将收到以下错误：`TypeError: unsupported operand
    type(s) for +: ''float'' and ''str''`。'
- en: '[PRE2]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Explicit conversions occur when we as programmers explicitly ask Python to perform
    a conversion. We will do this with the functions such as `int()`, `str()`, `float()`,
    and `bool()`.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们作为程序员明确要求Python执行转换时，会发生显式转换。我们将使用`int()`、`str()`、`float()`和`bool()`等函数来完成此操作。
- en: '[PRE3]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 2.2 Basic Types In R
  id: totrans-19
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.2 R中的基本类型
- en: In R, the names of basic types are only slightly different. They are `logical`
    (instead of `bool`), `integer` (instead of `int`), `double` or `numeric` (instead
    of `float`)[⁵](#fn5), `character` (instead of `str`), `complex` (for calculations
    involving imaginary numbers), and `raw` (useful for working with bytes).
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在 R 中，基本类型的名称只有一点不同。它们是 `logical`（而不是 `bool`），`integer`（而不是 `int`），`double`
    或 `numeric`（而不是 `float`)[⁵](#fn5)，`character`（而不是 `str`），`complex`（用于涉及虚数的计算），和
    `raw`（用于处理字节）。
- en: '[PRE4]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: In this case R automatically upgraded `1` to a double. If you wanted to force
    it to be an integer, you can add a capital “L” to the end of the number.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，R 自动将 `1` 升级为双精度浮点数。如果你想强制它成为整数，可以在数字的末尾添加一个大写的“L”。
- en: '[PRE5]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 2.2.1 Type Conversions in R
  id: totrans-24
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.2.1 R 中的类型转换
- en: You can explicitly and implicitly convert types in R just as you did in Python.
    Implicit conversion looks like this.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在 R 中显式和隐式地转换类型，就像你在 Python 中做的那样。隐式转换看起来像这样。
- en: '[PRE6]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Explicit conversion can be achieved with functions such as `as.integer`, `as.logical`,
    `as.double`, etc.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用 `as.integer`, `as.logical`, `as.double` 等函数实现显式转换。
- en: '[PRE7]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 2.2.2 R’s Simplification
  id: totrans-29
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.2.2 R 的简化
- en: The basic types of R are a little different than the basic types of Python.
    On the one hand, Python has basic types for individual elements, and it uses separate
    types as containers for storing many elements. On the other, R uses the same type
    to store a single element as it does to store many elements. Strictly speaking,
    R does not have a scalar type.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: R 的基本类型与 Python 的基本类型略有不同。一方面，Python 有基本类型用于单个元素，并且它使用不同的类型作为存储多个元素的容器。另一方面，R
    使用相同的类型来存储单个元素和存储多个元素。严格来说，R 没有标量类型。
- en: Technically, all of the examples we just did in R are using length one **vectors**–`logical`
    `integer` `double`, `character`, `complex`, and `raw` are the possible **modes**
    of a vector. `vector`s will be discussed further section [3](/r-vectors-versus-numpy-arrays-and-pandas-series#r-vectors-versus-numpy-arrays-and-pandas-series).
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 从技术上讲，我们刚才在 R 中做的所有例子都使用了长度为 1 的 **向量**–`logical` `integer` `double`, `character`,
    `complex`, 和 `raw` 是向量的可能 **模式**。`vector`s 将在下一节 [3](/r-vectors-versus-numpy-arrays-and-pandas-series#r-vectors-versus-numpy-arrays-and-pandas-series)
    中进一步讨论。
- en: Think about which option you prefer. What are the benefits of using separate
    types for scalars and collections? What are the benefits of using the same type?
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑你更喜欢哪个选项。使用单独的类型对标量和集合有什么好处？使用相同类型有什么好处？
- en: 2.3 Exercises
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.3 练习
- en: 2.3.1 R Questions
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.3.1 R 问题
- en: Which R base type is ideal for each piece of data? Assign your answers to a
    `character` `vector` of length four called `questionOne`.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 哪种 R 基础类型最适合每份数据？将你的答案分配给长度为四的 `character` `vector`，称为 `questionOne`。
- en: An individual’s IP address
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 个人的 IP 地址
- en: whether or not an individual attended a study
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 个人是否参加了研究
- en: the number of seeds found in a plant
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 植物中发现的种子数量
- en: the amount of time it takes for a car to race around a track
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 汽车在赛道上比赛所需的时间
- en: Floating points are weird. What gets printed is not the same as what is stored!
    In R, you can control how many digits get printed by using the `options` function.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 浮点数很奇怪。打印出来的值和存储的值可能不同！在 R 中，你可以使用 `options` 函数来控制打印多少位数字。
- en: Assign`2/3` to `a`
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `2/3` 分配给 `a`
- en: '`print` `a`, and copy/paste what you see into the variable `aPrint`. Make sure
    it is a `character`.'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`print` `a`，并将你看到的复制粘贴到变量 `aPrint` 中。确保它是一个 `character`。'
- en: Take a look at the documentation for `options`. Assign the value of `options()$digits`
    to `numDigitsStart`
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看关于 `options` 的文档。将 `options()$digits` 的值分配给 `numDigitsStart`
- en: Change the number of digits to `22`
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将数字位数更改为 `22`
- en: Again, `print`, `a` and copy/paste what you see into the variable `aPrintv2`.
    Make sure it is a `character`.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次，`print`，`a`，并将你看到的复制粘贴到变量 `aPrintv2` 中。确保它是一个 `character`。
- en: Assign the output of `options()$digits` to `numDigitsEnd`
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `options()$digits` 的输出分配给 `numDigitsEnd`
- en: Floating points are weird. What gets stored might not be what you want. [“The
    only numbers that can be represented exactly in R’s numeric type are integers
    and fractions whose denominator is a power of 2.”](https://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f)
    As a consequence, you should never test strict equality (i.e. using `==`) between
    two floating points.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 浮点数很奇怪。存储的值可能不是你想要的。[“在 R 的数值类型中，唯一可以精确表示的数字是整数和分母为 2 的幂的分数。”](https://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f)
    因此，你永远不应该在两个浮点数之间进行严格的相等性测试（即使用 `==`）。
- en: Assign the square root of 2 to `mySqrt`
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 2 的平方根分配给 `mySqrt`
- en: Print the square of this variable
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打印这个变量的平方
- en: Test (using `==`) that this variable is equal to `2`. Assign the result of this
    test to `isTwoRecoverable`
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 测试（使用 `==`）这个变量是否等于 `2`。将测试结果赋值给 `isTwoRecoverable`
- en: Test for near equality (using `all.equal`). In other words, check that this
    variable is very close to `2`. Assign the result of this test to `closeEnough`.
    Make sure to read the documentation for this function because the return type
    can be tricky!
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 测试近似相等（使用 `all.equal`）。换句话说，检查这个变量是否非常接近 `2`。将测试结果赋值给 `closeEnough`。确保阅读该函数的文档，因为返回类型可能很复杂！
- en: 2.3.2 Python Questions
  id: totrans-52
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.3.2 Python 问题
- en: Which Python type is ideal for each piece of data? Assign your answers to a
    `list` of `str`ings called `question_one`.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 哪种 Python 类型最适合每份数据？将你的答案赋值给名为 `question_one` 的 `str`ings 列表。
- en: An individual’s IP address
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 个人的 IP 地址
- en: whether or not an individual attended a study
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 个人是否参加了研究
- en: the number of seeds found in a plant
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 植物中发现的种子数量
- en: the amount of time it takes for a car to race around a track
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 车在赛道上比赛所需的时间
- en: Floating points are weird. What gets printed is not the same as what is stored!
    In Python, you need to edit a class’s `__str__` method if you want to control
    how many digits get printed for a user-defined type/class, but we won’t do that.
    Instead, we’ll use [`str.format()`](https://docs.python.org/3/library/stdtypes.html#str.format)
    to return a string directly (instead of copy/paste-ing it).
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 浮点数很奇怪。打印出来的值和存储的值可能不一样！在 Python 中，如果你想控制用户定义的类型/类的打印位数，需要编辑类的 `__str__` 方法，但我们不会这么做。相反，我们将使用
    `str.format()`（[https://docs.python.org/3/library/stdtypes.html#str.format](https://docs.python.org/3/library/stdtypes.html#str.format)）直接返回一个字符串（而不是复制粘贴）。
- en: Assign `a` to `2/3`
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `a` 赋值给 `2/3`
- en: '`print` `a`, and copy/paste what you see into the variable `a_print`'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打印 `a`，并将你看到的复制粘贴到变量 `a_print` 中
- en: Create a `str` that displays 22 digits of 2/3\. Call it `a_printv2`
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个显示 2/3 的 22 位数字的 `str`，命名为 `a_printv2`
- en: '`print` the above string'
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打印上面的字符串
- en: Floating points are weird. What gets stored might not be what you want. The
    Python documentation has an excellent discussion of how storage behavior can be
    surprising. Click [here](https://docs.python.org/3/tutorial/floatingpoint.html)
    to read it.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 浮点数很奇怪。存储的值可能不是你想要的。Python 文档中对存储行为可能令人惊讶的讨论非常出色。点击[这里](https://docs.python.org/3/tutorial/floatingpoint.html)阅读。
- en: Assign the square root of 2 to `my_sqrt`
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 2 的平方根赋值给 `my_sqrt`
- en: '`print` the square of this variable'
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打印这个变量的平方
- en: Test (using `==`) that this variable is equal to `2`. Assign the result of this
    test to `is_two_recoverable`
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 测试（使用 `==`）这个变量是否等于 `2`。将测试结果赋值给 `is_two_recoverable`
- en: Test for near equality (using `np.isclose`, which is available after running
    `import numpy as np`). In other words, check that this variable is close to `2`.
    Assign the result of this test to `close_enough`.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 测试近似相等（使用 `np.isclose`，在运行 `import numpy as np` 后可用）。换句话说，检查这个变量是否接近 `2`。将测试结果赋值给
    `close_enough`。
- en: References
  id: totrans-68
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 参考文献
- en: 'Beazley, David M., and Brian K. (Brian Kenneth) Jones. 2014\. *Python Cookbook:
    Recipes for Mastering Python 3*. Third. pub-ora-media:adr: pub-ora-media.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 'Beazley, David M. 和 Brian K. (Brian Kenneth) Jones. 2014. *Python 烹饪书：精通 Python
    3 的秘籍*。第三版。pub-ora-media:adr: pub-ora-media.'
- en: '* * *'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: “double” is short for “double precision floating point.” In other programming
    languages, the programmer might choose how many decimal points of precision he
    or she wants.[↩](/basic-types#fnref5)
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: “double”是“双精度浮点数”的简称。在其他编程语言中，程序员可以选择他或她想要的十进制精度位数。[↩](/basic-types#fnref5)
