- en: 'Cloth: Stretching and Bending'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 布料：拉伸和弯曲
- en: 原文：[https://phys-sim-book.github.io/lec32.1-pbd_cloth_constraints.html](https://phys-sim-book.github.io/lec32.1-pbd_cloth_constraints.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[https://phys-sim-book.github.io/lec32.1-pbd_cloth_constraints.html](https://phys-sim-book.github.io/lec32.1-pbd_cloth_constraints.html)'
- en: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
- en: In the context of Position-Based Dynamics (PBD), the complex mechanical behaviors
    of cloth, such as its resistance to stretching and bending, are modeled through
    a system of geometric constraints. Instead of accumulating forces, the PBD framework
    directly manipulates the positions of the mesh vertices to satisfy these constraints
    in an iterative manner. This section will detail the formulation of fundamental
    constraints for cloth simulation.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在基于位置的动力学（PBD）的背景下，布料的复杂机械行为，如其抗拉伸和弯曲能力，通过一组几何约束进行建模。PBD框架不是累积力，而是直接通过迭代方式操作网格顶点的位置以满足这些约束。本节将详细阐述布料模拟的基本约束的公式。
- en: '[Stretching Resistance via Distance Constraints](#stretching-resistance-via-distance-constraints)'
  id: totrans-4
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[通过距离约束拉伸阻力](#stretching-resistance-via-distance-constraints)'
- en: The primary characteristic of most textiles is their high resistance to stretching.
    In PBD, this property is enforced by constraining the distance between connected
    particles to remain close to its initial, or rest, distance. This is one of the
    simplest yet most crucial constraints in the PBD ecosystem (we have already seen
    this constraint in [Example 32.4.1](lec31.4-solver.html#exp:solver:distance_constraint))
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数纺织品的显著特征是它们对拉伸的高抵抗力。在PBD中，这一特性通过限制连接粒子的距离保持接近其初始或静止距离来强制执行。这是PBD生态系统中最简单但最重要的约束之一（我们已经在[示例32.4.1](lec31.4-solver.html#exp:solver:distance_constraint)中看到了这个约束）
- en: '****Example 33.1.1 (Stretching Constraint).**** Consider two particles, i=1,2,
    with positions p1​ and p2​, masses m1​ and m2​, and a rest distance d between
    them. The stretching constraint function C is defined as the difference between
    the current distance and the rest distance: C(p1​,p2​)=∥p1​−p2​∥−d(33.1.1) The
    goal is to find corrections Δp1​ and Δp2​ such that C(p1​+Δp1​,p2​+Δp2​)=0. The
    gradients of the constraint function with respect to the particle positions are:
    ∇p1​​C=∥p1​−p2​∥p1​−p2​​=nand∇p2​​C=−∥p1​−p2​∥p1​−p2​​=−n where n is the unit
    vector along the axis connecting the two particles. Following the general PBD
    projection formula [(32.4.4)](lec31.4-solver.html#eq:pbd:final_correction), the
    scalar Lagrange multiplier λ is computed as: λ=w1​∥∇p1​​C∥2+w2​∥∇p2​​C∥2C(p1​,p2​)​=w1​+w2​∥p1​−p2​∥−d​
    where wi​=1/mi​ is the inverse mass of particle i. The position corrections are
    then found by moving the particles along their respective gradient directions,
    scaled by their inverse mass and λ: Δp1​=−w1​+w2​w1​​(∥p1​−p2​∥−d)nΔp2​=+w1​+w2​w2​​(∥p1​−p2​∥−d)n
    These corrections, when applied, will move the particles to exactly satisfy the
    rest length. Note that the total correction is distributed between the particles
    based on their inverse mass, ensuring that lighter particles move more than heavier
    ones and that linear momentum is conserved (∑mi​Δpi​=0).'
  id: totrans-6
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '****示例33.1.1（拉伸约束）**** 考虑两个粒子，i=1,2，其位置为p1和p2，质量为m1和m2，以及它们之间的静止距离d。拉伸约束函数C定义为当前距离与静止距离之差：C(p1,p2)=∥p1−p2∥−d(33.1.1)
    目标是找到校正Δp1和Δp2，使得C(p1+Δp1,p2+Δp2)=0。约束函数相对于粒子位置的梯度是：∇p1C=∥p1−p2∥p1−p2=n和∇p2C=−∥p1−p2∥p1−p2=−n，其中n是连接两个粒子的轴上的单位向量。根据一般的PBD投影公式[(32.4.4)](lec31.4-solver.html#eq:pbd:final_correction)，标量拉格朗日乘数λ计算如下：λ=w1∥∇p1C∥2+w2∥∇p2C∥2C(p1,p2)=w1+w2∥p1−p2∥−d，其中wi=1/mi是粒子i的逆质量。然后通过将粒子沿着各自的梯度方向移动，并按其逆质量和λ进行缩放来找到位置校正：Δp1=−w1+w2w1(∥p1−p2∥−d)nΔp2=+w1+w2w2(∥p1−p2∥−d)n
    这些校正，当应用时，将使粒子移动到正好满足静止长度。请注意，总校正根据粒子的逆质量在粒子之间分配，确保较轻的粒子比较重的粒子移动更多，并且线性动量得到保持（∑miΔpi=0）。'
- en: To achieve different levels of elasticity, a stiffness parameter k∈[0,1] can
    be introduced by scaling the corrections Δpi​ by k. This allows for materials
    with varying elasticity, from perfectly rigid (k=1) to completely unstiff (k=0).
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 为了实现不同级别的弹性，可以通过通过缩放校正Δpi由k来引入刚度参数k∈[0,1]。这允许材料具有不同的弹性，从完全刚性（k=1）到完全无刚度（k=0）。
- en: '[Dihedral Angle Bending Constraints](#dihedral-angle-bending-constraints)'
  id: totrans-8
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[二面角弯曲约束](#dihedral-angle-bending-constraints)'
- en: While stretching constraints maintain the structural integrity of the cloth
    mesh, they do not prevent it from folding unnaturally. Bending resistance, which
    dictates how the cloth wrinkles and drapes, is modeled by constraining the angle
    between adjacent triangles.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然拉伸约束保持了布网的结构完整性，但它们不能防止其不自然地折叠。弯曲阻力，它决定了布料的皱纹和垂坠方式，通过约束相邻三角形的角来建模。
- en: The constraint is defined for a pair of triangles (p1​,p3​,p2​) and (p1​,p2​,p4​)
    sharing a common edge (p1​,p2​). The bending resistance is a function of the **dihedral
    angle** ϕ between the two triangles, which is the initial angle between their
    respective normal vectors n1​ and n2​. The constraint aims to restore this angle
    to its rest value, ϕ0​.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 约束定义为一对共享公共边（p1​,p2​）和（p1​,p2​,p4​）的三角形（p1​,p3​,p2​）的三角形。弯曲阻力是两个三角形之间的二面角 ϕ
    的函数，这是它们各自法向量 n1​ 和 n2​ 之间的初始角度。约束旨在将此角度恢复到其原始值，ϕ0​。
- en: '![](../Images/b5baa6b60d5d5623b98a44bc14c1c0a5.png)'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b5baa6b60d5d5623b98a44bc14c1c0a5.png)'
- en: '**[Bending Constraints]** The provided illustration shows the dihedral angle
    for a pair of triangles in R3.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '**[弯曲约束]** 提供的插图显示了R3中一对三角形之间的二面角。'
- en: 'The constraint function is formulated as: Cbend​(p1​,p2​,p3​,p4​)=arccos(n1​⋅n2​)−ϕ0​(33.1.2)
    where the normals are computed as: n1​n2​​=(p2,1​×p3,1​)/∥p2,1​×p3,1​∥=(p2,1​×p4,1​)/∥p2,1​×p4,1​∥.​
    The gradients of this function with respect to the four vertex positions (p1​,p2​,p3​,p4​)
    are then computed, and the standard PBD projection mechanism is used to derive
    the position corrections. The stiffness of bending is determined using kbend​
    parameter.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 约束函数被公式化为：Cbend​(p1​,p2​,p3​,p4​)=arccos(n1​⋅n2​)−ϕ0​(33.1.2) 其中法向量计算如下：n1​n2​​=(p2,1​×p3,1​)/∥p2,1​×p3,1​∥=(p2,1​×p4,1​)/∥p2,1​×p4,1​∥。然后计算此函数相对于四个顶点位置（p1​,p2​,p3​,p4​）的梯度，并使用标准的PBD投影机制来推导位置校正。弯曲刚度使用
    kbend​ 参数确定。
- en: A significant advantage of this formulation is its independence from stretching.
    Because the angle is defined by normalized vectors, the constraint is invariant
    to the lengths of the triangle edges.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 此公式的显著优点是其与拉伸无关。因为角度由归一化向量定义，所以约束对三角形边长是不变的。
- en: '[Isometric Bending](#isometric-bending)'
  id: totrans-15
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[等距弯曲](#isometric-bending)'
- en: For surfaces that are nearly inextensible, the isometric bending model [[Bergou
    et al. 2006]](bibliography.html#bergou2006quadratic) can be used. This model provides
    a robust formulation based on the local Hessian of the bending energy.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 对于几乎不可拉伸的表面，可以使用等距弯曲模型 [[Bergou et al. 2006]](bibliography.html#bergou2006quadratic)。此模型基于弯曲能量的局部Hessian提供了一个稳健的公式。
- en: 'This model considers a stencil for each interior edge e0​ of the mesh, consisting
    of the four vertices of the two triangles adjacent to that edge, labeled p0​,p1​,p2​,p3​.
    The local bending energy for this stencil is defined as a quadratic form: Ebend​(ps​)=21​i,j∈{0,1,2,3}∑​Qij​(pi⊤​pj​)(33.1.3)
    where ps​=(p0​,p1​,p2​,p3​)T is the vector of stencil positions and Q∈R4×4 is
    a constant matrix representing the local Hessian of the bending energy. This matrix
    depends only on the rest geometry of the stencil and can be precomputed. Its entries
    are derived from the cotangents of the angles within the two triangles.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 此模型考虑了网格的每个内部边 e0​ 的模板，由相邻于该边的两个三角形的四个顶点组成，标记为 p0​,p1​,p2​,p3​。此模板的局部弯曲能量定义为二次形式：Ebend​(ps​)=21/2i,j∈{0,1,2,3}∑Qij​(pi⊤​pj​)(33.1.3)
    其中 ps​=(p0​,p1​,p2​,p3​)T 是模板位置的向量，Q∈R4×4 是一个常数矩阵，表示弯曲能量的局部Hessian。此矩阵仅取决于模板的原始几何形状，可以预先计算。其条目来自两个三角形内角的正切。
- en: 'The bending constraint is defined directly from this energy: Cbend​(ps​)=Ebend​(ps​).
    Since the energy is quadratic in the positions, its gradient is linear and straightforward
    to compute: ∂pi​∂Cbend​​=j∈{0,1,2,3}∑​Qij​pj​(33.1.4) This model is particularly
    effective for garment simulation where fabric is expected to deform isometrically
    (i.e., without stretching).'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 弯曲约束直接从该能量定义：Cbend​(ps​)=Ebend​(ps​)。由于能量在位置上是二次的，其梯度是线性的且易于计算：∂pi​/∂Cbend​​=j∈{0,1,2,3}∑Qij​pj​(33.1.4)
    此模型特别适用于服装模拟，其中预期织物将等距变形（即，不拉伸）。
