- en: Particle-In-Cell Transfer
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 粒子-单元格转移
- en: 原文：[https://phys-sim-book.github.io/lec29.2-pic_transfer.html](https://phys-sim-book.github.io/lec29.2-pic_transfer.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://phys-sim-book.github.io/lec29.2-pic_transfer.html](https://phys-sim-book.github.io/lec29.2-pic_transfer.html)
- en: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
- en: At the beginning of each simulation step, the grid must be cleared before accumulating
    new particle-to-grid transfers.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在每个模拟步骤的开始，在累积新的粒子到网格转移之前，必须清除网格。
- en: '**Implementation 30.2.1 (Reset Grid, simulator.py).**'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '**实现 30.2.1 (重置网格，simulator.py).**'
- en: '[PRE0]'
  id: totrans-5
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: We adopt the Saint Venant–Kirchhoff (StVK) constitutive model formulated in
    the logarithmic (Hencky) strain space using the SVD of the deformation gradient.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 我们采用使用变形梯度的奇异值分解 (SVD) 在对数 (Hencky) 应变空间中表述的 Saint Venant-Kirchhoff (StVK) 本构模型。
- en: '**Implementation 30.2.2 (Stvk Hencky Elasticity, simulator.py).**'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '**实现 30.2.2 (Stvk Hencky 弹性，simulator.py).**'
- en: '[PRE1]'
  id: totrans-8
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: During the particle-to-grid (P2G) transfer, we use quadratic B-spline interpolation
    to distribute each particle’s mass, momentum, and internal force to its neighboring
    grid nodes. This process follows the PIC (Particle-In-Cell) formulation, where
    particle velocities are directly transferred to the grid without storing affine
    velocity fields.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在粒子到网格 (P2G) 转移期间，我们使用二次 B 样条插值将每个粒子的质量、动量和内力分布到其相邻的网格节点。此过程遵循 PIC (粒子在单元格中)
    公式，其中粒子速度直接转移到网格，而不存储仿射速度场。
- en: '**Implementation 30.2.3 (PIC Particle-to-Grid (P2G) Transfers, simulator.py).**'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '**实现 30.2.3 (PIC 粒子到网格 (P2G) 转移，simulator.py).**'
- en: '[PRE2]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Right after Particle-to-Grid (P2G) Transfer, we normalize grid momentum to obtain
    nodal velocities and enforces Dirichlet boundary conditions near the domain edges
    by zeroing out velocities.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在粒子到网格 (P2G) 转移之后，我们归一化网格动量以获得节点速度，并通过将速度置零来强制执行域边缘附近的 Dirichlet 边界条件。
- en: '**Implementation 30.2.4 (Grid Update, simulator.py).**'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '**实现 30.2.4 (网格更新，simulator.py).**'
- en: '[PRE3]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: During the grid-to-particle (G2P) transfer, we gather the updated velocity from
    the background grid and compute the elastic deformation gradient update using
    the velocity gradient derived from the interpolation function.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在网格到粒子 (G2P) 转移期间，我们从背景网格中收集更新的速度，并使用从插值函数导出的速度梯度来计算弹性变形梯度更新。
- en: '**Implementation 30.2.5 (PIC Grid-to-Particle (G2P) Transfers, simulator.py).**'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '**实现 30.2.5 (PIC 网格到粒子 (G2P) 转移，simulator.py).**'
- en: '[PRE4]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Finally, particle positions are updated through advection using symplectic Euler
    time integration.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，通过使用辛欧拉时间积分进行对流，更新粒子位置。
- en: '**Implementation 30.2.6 (Particle State Update, simulator.py).**'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '**实现 30.2.6 (粒子状态更新，simulator.py).**'
- en: '[PRE5]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'A full MPM simulation step consists of the following stages:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 一个完整的 MPM 模拟步骤包括以下阶段：
- en: '**Implementation 30.2.7 (A full time step of MPM, simulator.py).**'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '**实现 30.2.7 (MPM 的一次完整时间步，simulator.py).**'
- en: '[PRE6]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '![](../Images/1bcb904b717ed3313178f48f22cea71e.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1bcb904b717ed3313178f48f22cea71e.png)'
- en: '**Figure 30.2.1.** **Time sequence of two colliding elastic blocks in 2D**.
    The red and blue blocks approach each other with opposite velocities, undergo
    large elastic deformation upon impact, and rebound with shape recovery. The simulation
    demonstrates symmetric momentum exchange and elastic energy storage under the
    MPM framework.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '**图 30.2.1.** **2D 中两个碰撞的弹性块的时间序列**。红色和蓝色块以相反的速度相互接近，在碰撞时发生大的弹性变形，并反弹以恢复形状。该模拟在
    MPM 框架下展示了对称动量交换和弹性能量存储。'
