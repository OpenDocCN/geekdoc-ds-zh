- en: Chapter 5 R’s lists Versus Python’s lists and dicts
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 5 章 R 的列表与 Python 的列表和字典
- en: 原文：[https://randpythonbook.netlify.app/rs-lists-versus-pythons-lists-and-dicts](https://randpythonbook.netlify.app/rs-lists-versus-pythons-lists-and-dicts)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://randpythonbook.netlify.app/rs-lists-versus-pythons-lists-and-dicts](https://randpythonbook.netlify.app/rs-lists-versus-pythons-lists-and-dicts)
- en: When you need to store elements in a container, but you can’t guarantee that
    these elements all have the same type, or you can’t guarantee that they all have
    the same size, then you need a `list` in R. In Python, you might need a `list`
    or `dict` (short for dictionary) (Lutz [2013](#ref-Lutz13)).
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 当你需要在一个容器中存储元素，但无法保证这些元素都具有相同的类型，或者无法保证它们都具有相同的尺寸时，那么在 R 中你需要一个 `list`。在 Python
    中，你可能需要一个 `list` 或 `dict`（字典的简称）（Lutz [2013](#ref-Lutz13)）。
- en: 5.1 `list`s In R
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 5.1 R 中的 `list`s
- en: '`list`s are one of the most flexible data types in R. You can access individual
    elements in many different ways, each element can be of different size, and each
    element can be of a different type.'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '`list`s 是 R 中最灵活的数据类型之一。你可以以许多不同的方式访问单个元素，每个元素可以有不同的尺寸，每个元素也可以是不同类型。'
- en: '[PRE0]'
  id: totrans-5
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: If you want to extract an element, you need to decide between using single square
    brackets or double square brackets. The former returns a `list`, while the second
    returns the type of the individual element.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要提取一个元素，你需要决定是使用单方括号还是双方括号。前者返回一个 `list`，而后者返回单个元素的类型。
- en: You can also name the elements of a list. This can lead to more readable code.
    To see why, examine the example below that makes use of spme data about cars (“SAS
    ^(Viya ^(Example Data Sets” [2021](#ref-sas_cars)))). The `lm()` function estimates
    a linear regression model. It returns a `list` with plenty of components.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以给列表的元素命名。这可以使代码更易读。为了了解为什么，请查看下面的示例，该示例使用了有关汽车的一些数据（“SAS ^ (Viya ^ (示例数据集）[2021](#ref-sas_cars)））。`lm()`
    函数估计一个线性回归模型。它返回一个包含许多组件的 `list`。
- en: '[PRE1]'
  id: totrans-8
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '`results` is a `list` (because `is.list(results)` returns `TRUE`), but to be
    more specific, it is an S3 object of class `lm`. If you do not know what this
    means, do not worry! S3 classes are discussed more in a later chapter. Why is
    this important? For one, I mention it so that you aren’t confused if you type
    `class(results)` and see `lm` instead of `list`. Second, the fact that the authors
    of `lm()` wrote code that returns `result` as a “fancy list” suggests that they
    are encouraging another way to access elements of the `results`: to use specialized
    functions! For example, you can use `residuals(results)`, `coefficients(results)`,
    and `fitted.values(results)`. These functions do not work for all lists in R,
    but when they do work (for `lm` and `glm` objects only), you can be sure you are
    writing the kind of code that is encouraged by the authors of `lm()`.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '`results` 是一个 `list`（因为 `is.list(results)` 返回 `TRUE`），但更具体地说，它是一个类 `lm` 的 S3
    对象。如果你不知道这是什么意思，不要担心！S3 类将在后面的章节中详细讨论。为什么这很重要呢？一方面，我提到这一点是为了防止你在输入 `class(results)`
    时看到 `lm` 而不是 `list` 而感到困惑。其次，`lm()` 的作者编写了返回“花哨列表”的代码，这表明他们鼓励以另一种方式访问 `results`
    的元素：使用专用函数！例如，你可以使用 `residuals(results)`、`coefficients(results)` 和 `fitted.values(results)`。这些函数并不适用于
    R 中的所有列表，但当它们适用时（仅适用于 `lm` 和 `glm` 对象），你可以确信你正在编写 `lm()` 作者鼓励的代码。'
- en: 5.2 `list`s In Python
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 5.2 Python 中的 `list`s
- en: '[Python `list`s](https://docs.python.org/3/library/stdtypes.html#lists) are
    very flexible, too. There are fewer choices for accessing and modifying elements
    of lists in Python–you’ll most likely end up using the square bracket operator.
    Elements can be different sizes and types, just like they were with R’s lists.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[Python `list`s](https://docs.python.org/3/library/stdtypes.html#lists) 同样非常灵活。在
    Python 中访问和修改列表元素的选择较少——你很可能会使用方括号操作符。元素可以是不同的大小和类型，就像 R 的列表一样。'
- en: Unlike in R, however, you cannot name elements of lists. If you want a container
    that allows you to access elements by name, look into Python [dictionaries](https://docs.python.org/3/library/stdtypes.html#mapping-types-dict)
    (see section [5.3](/rs-lists-versus-pythons-lists-and-dicts#dictionaries-in-python))
    or Pandas’ `Series` objects (see section [3.2](/r-vectors-versus-numpy-arrays-and-pandas-series#overview-of-python)).
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，与 R 不同，你无法给列表的元素命名。如果你想一个允许你通过名称访问元素的容器，请查看 Python 的 [字典](https://docs.python.org/3/library/stdtypes.html#mapping-types-dict)（见第
    [5.3](/rs-lists-versus-pythons-lists-and-dicts#dictionaries-in-python) 节）或 Pandas
    的 `Series` 对象（见第 [3.2](/r-vectors-versus-numpy-arrays-and-pandas-series#overview-of-python)
    节）。
- en: From the example below, you can see that we’ve been introduced to lists already.
    We have been constructing Numpy arrays from them.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 从下面的示例中，你可以看到我们已经介绍了列表。我们已经从它们构建了 Numpy 数组。
- en: '[PRE2]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Python lists have [methods attached to them](https://docs.python.org/3/tutorial/datastructures.html#more-on-lists),
    which can come in handy.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: Python 列表附带了[方法](https://docs.python.org/3/tutorial/datastructures.html#more-on-lists)，这些方法可能非常有用。
- en: '[PRE3]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Creating lists can be done as above, with the square bracket operators. They
    can also be created with the `list()` function, and by creating a *list comprehension*.
    List comprehensions are discussed more in [11.2](/control-flow#loops).
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 可以像上面那样创建列表，使用方括号运算符。它们也可以使用 `list()` 函数和创建一个 *列表推导式(list comprehension)* 来创建。列表推导式将在[11.2](/control-flow#loops)中进一步讨论。
- en: '[PRE4]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The code above makes reference to a type that is not extensively discussed
    in this text: [`tuple`s](https://docs.python.org/3.3/library/stdtypes.html?highlight=tuple#tuple).'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 上面的代码引用了一个在此文本中未广泛讨论的类型：[`元组(tuple)`](https://docs.python.org/3.3/library/stdtypes.html?highlight=tuple#tuple)。
- en: 5.3 Dictionaries In Python
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 5.3 Python 中的字典
- en: '[**Dictionaries**](https://docs.python.org/3/tutorial/datastructures.html#dictionaries)
    in Python provide a container of key-value pairs. The keys are *unique*, and they
    must be *immutable*. `string`s are the most common key type, but `int`s can be
    used as well.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '[**字典**](https://docs.python.org/3/tutorial/datastructures.html#dictionaries)
    在 Python 中提供了一个键值对的容器。键是 *唯一的*，并且它们必须是 *不可变的*。`字符串(string)` 是最常见的键类型，但也可以使用 `整数(int)`。'
- en: Here is an example of creating a `dict` with curly braces (i.e. `{}`). This
    `dict` stores the current price of a few popular cryptocurrencies. Accessing an
    individual element’s value using its key is done with the square bracket operator
    (i.e. `[]`), and deleting elements is done with the `del` keyword.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个使用大括号（即 `{}`）创建 `字典(dict)` 的示例。这个 `字典(dict)` 存储了一些流行加密货币的当前价格。使用键访问单个元素的价值是通过方括号运算符（即
    `[]`）完成的，删除元素是通过 `del` 关键字完成的。
- en: '[PRE5]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: You can also create `dict`s using **dictionary comprehensions**. Just like list
    comprehensions, these are discussed more in [11.2](/control-flow#loops).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以使用 **字典推导式(dictionary comprehensions)** 来创建 `字典(dict)`。就像列表推导式一样，这些将在[11.2](/control-flow#loops)中进一步讨论。
- en: '[PRE6]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Personally, I don’t use dictionaries as much as lists. If I have a dictionary,
    I usually convert it to a Pandas data frame (more information on those in [8.2](/data-frames#data-frames-in-python)).
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 个人来说，我不像使用列表那样经常使用字典。如果我有一个字典，我通常会将其转换为 Pandas 数据框（关于这些的更多信息请参阅[8.2](/data-frames#data-frames-in-python)）。
- en: '[PRE7]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 5.4 Exercises
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 5.4 练习
- en: 5.4.1 R Questions
  id: totrans-29
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.4.1 R 问题
- en: Consider the data sets `"adult.data"`, `"car.data"`, `"hungarian.data"`, `"iris.data"`,
    `"long-beach-va.data"` and `"switzerland.data"` (Janosi et al. [1988](#ref-misc_heart_disease_45)),
    (Fisher [1988](#ref-misc_iris_53)), (“Adult” [1996](#ref-misc_adult_2)) and (“Car
    Evaluation” [1997](#ref-misc_car_evaluation_19)) hosted by (Dua and Graff [2017](#ref-uci_data)).
    Read all of these in and store them all as a `list` of `data.frame`s. Call the
    list `listDfs`.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑数据集 `"adult.data"`、`"car.data"`、`"hungarian.data"`、`"iris.data"`、`"long-beach-va.data"`
    和 `"switzerland.data"`（Janosi 等人 [1988](#ref-misc_heart_disease_45))、（Fisher [1988](#ref-misc_iris_53))、（“Adult”
    [1996](#ref-misc_adult_2)）和（“Car Evaluation” [1997](#ref-misc_car_evaluation_19)）由（Dua
    和 Graff [2017](#ref-uci_data)）托管。读取所有这些并将它们全部存储为一个 `data.frame`s 的 `列表(list)`。将这个列表命名为
    `listDfs`。
- en: 'Here are two lists in R:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是 R 中的两个列表：
- en: '[PRE8]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Make a new `list` that is these two lists above “squished together.” It has
    to be length \(4\), and each element is one of the elements of `l1` and `l2`.
    Call this list `l3`. Make sure to delete all the “tags” or “names” of these four
    elements.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个新的 `列表(list)`，它是上面两个列表“挤压在一起”的结果。它必须有长度 \(4\)，并且每个元素是 `l1` 和 `l2` 的元素之一。将这个列表命名为
    `l3`。确保删除这四个元素的“标签”或“名称”。
- en: Extract the third element of `l3` as a length one `list` and assign it to the
    name `l4`.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `l3` 的第三个元素提取为一个长度为一的 `列表(list)` 并将其分配给名称 `l4`。
- en: Extract the third element of `l3` as a `vector` and assign it to the name `v1`.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `l3` 的第三个元素提取为一个 `向量(vector)` 并将其分配给名称 `v1`。
- en: 5.4.2 Python Questions
  id: totrans-36
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.4.2 Python 问题
- en: Read in `car.data` with `pd.read_csv()`, and use a `DataFrame` method to convert
    that to a `dict`. Store your answer as `car_dict`.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `pd.read_csv()` 读取 `car.data`，并使用 `DataFrame` 方法将其转换为 `dict`。将你的答案存储为 `car_dict`。
- en: 'Here are two `dict`s in Python:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是 Python 中的两个 `字典(dict)`：
- en: '[PRE9]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Make a new `list` that is these two `dict`s above “squished together” (why can’t
    it be another `dict`?) It has to be length \(4\), and each value is one of the
    values of \(d1\) and \(d2\). Call this list `my_list`.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个新的 `列表(list)`，它是上面两个 `字典(dict)`“挤压在一起”的结果（为什么不能是另一个 `字典(dict)`？）。它必须有长度
    \(4\)，并且每个值是 \(d1\) 和 \(d2\) 的值之一。将这个列表命名为 `my_list`。
- en: Use a list comprehension to create a list called `special_list` of all numbers
    starting from zero, up to (and including) one million, but don’t include numbers
    that are divisible by any prime number less than seven.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用列表推导式创建一个名为 `special_list` 的列表，包含从零开始到（包括）一百万的所有数字，但不包括能被小于七的任何质数整除的数字。
- en: Assign the average of all elements in the above list to the variable `special_ave`.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将上述列表中所有元素的平均值赋值给变量 `special_ave`。
- en: References
  id: totrans-43
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 参考文献
- en: “Adult.” 1996\. UCI Machine Learning Repository.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: “成人。” 1996\. UCI机器学习库。
- en: “Car Evaluation.” 1997\. UCI Machine Learning Repository.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: “汽车评估。” 1997\. UCI机器学习库。
- en: Dua, Dheeru, and Casey Graff. 2017\. “UCI Machine Learning Repository.” University
    of California, Irvine, School of Information; Computer Sciences. [http://archive.ics.uci.edu/ml](http://archive.ics.uci.edu/ml).
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: Dua, Dheeru, and Casey Graff. 2017\. “UCI机器学习库。” 加州大学欧文分校，信息与计算机科学学院。 [http://archive.ics.uci.edu/ml](http://archive.ics.uci.edu/ml).
- en: Fisher, Test, R.A. & Creator. 1988\. “Iris.” UCI Machine Learning Repository.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: Fisher, Test, R.A. & Creator. 1988\. “鸢尾花。” UCI机器学习库。
- en: Janosi, Andras, William Steinbrunn, Matthias Pfisterer, and Robert Detrano.
    1988\. “Heart Disease.” UCI Machine Learning Repository.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: Janosi, Andras, William Steinbrunn, Matthias Pfisterer, and Robert Detrano.
    1988\. “心脏病。” UCI机器学习库。
- en: 'Lutz, Mark. 2013\. *Learning Python*. 5th ed. Beijing: O’Reilly. [https://www.safaribooksonline.com/library/view/learning-python-5th/9781449355722/](https://www.safaribooksonline.com/library/view/learning-python-5th/9781449355722/).'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 'Lutz, Mark. 2013\. *《Python学习》*. 第5版. 北京: O’Reilly. [https://www.safaribooksonline.com/library/view/learning-python-5th/9781449355722/](https://www.safaribooksonline.com/library/view/learning-python-5th/9781449355722/).'
- en: “SAS ^(Viya ^(Example Data Sets.” 2021\. [https://support.sas.com/documentation/onlinedoc/viya/examples.htm](https://support.sas.com/documentation/onlinedoc/viya/examples.htm).))
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: “SAS^(Viya^(示例数据集)。” 2021\. [https://support.sas.com/documentation/onlinedoc/viya/examples.htm](https://support.sas.com/documentation/onlinedoc/viya/examples.htm).))
