- en: '21'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '21'
- en: RANDOMIZED TRIALS AND HYPOTHESIS CHECKING
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 随机试验与假设检验
- en: Dr. X invented a drug, PED-X, designed to help professional bicycle racers ride
    faster. When he tried to market it, the racers insisted that Dr. X demonstrate
    that his drug was superior to PED-Y, the banned drug that they had been using
    for years. Dr. X raised money from some investors and launched a **randomized
    trial**.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: X博士发明了一种药物PED-X，旨在帮助职业自行车手骑得更快。当他试图推销时，自行车手们坚持要求X博士证明他的药物优于PED-Y，这种他们使用多年的禁药。X博士从一些投资者那里筹集资金并启动了**随机试验**。
- en: 'He persuaded `200` professional cyclists to participate in his trial. He then
    divided them randomly into two groups: treatment and control. Each member of the
    **treatment group** received a dose of PED-X. Members of the **control group**
    were told that they were being given a dose of PED-X, but were instead given a
    dose of PED-Y.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 他说服`200`名职业自行车手参与试验。然后他将他们随机分为两个组：治疗组和对照组。**治疗组**的每位成员都接受了PED-X的剂量。**对照组**的成员被告知他们接受了PED-X的剂量，但实际上他们接受的是PED-Y的剂量。
- en: Each cyclist was asked to bike `50` miles as fast as possible. The finishing
    times for each group were normally distributed. The mean finishing time of the
    treatment group was `118.61` minutes, and that of the control group was `120.62`
    minutes. [Figure 21-1](#c21-fig-0001) shows the time for each cyclist.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 每位自行车手被要求尽可能快地骑行`50`英里。每组的完成时间呈正态分布。治疗组的平均完成时间为`118.61`分钟，而对照组为`120.62`分钟。[图21-1](#c21-fig-0001)显示了每位自行车手的时间。
- en: '![c21-fig-0001.jpg](../images/c21-fig-0001.jpg)'
  id: totrans-5
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-0001.jpg](../images/c21-fig-0001.jpg)'
- en: '[Figure 21-1](#c21-fig-0001a) Finishing times for cyclists'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '[图21-1](#c21-fig-0001) 自行车手的完成时间'
- en: Dr. X was elated until he ran into a statistician who pointed out that it was
    almost inevitable that one of the two groups would have a lower mean than the
    other, and perhaps the difference in means was merely a random occurrence. When
    she saw the crestfallen look on the scientist's face, the statistician offered
    to show him how to check the statistical significance of his study.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: X博士非常兴奋，直到遇到一位统计学家，她指出两个组中几乎总会有一个组的均值低于另一个组，或许均值之间的差异仅仅是随机现象。当她看到科学家失落的表情时，统计学家提出要教他如何检查研究的统计显著性。
- en: 21.1 Checking Significance
  id: totrans-8
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 21.1 检查显著性
- en: In any experiment that involves drawing samples at random from a population,
    there is always the possibility that an observed effect occurred purely by chance.
    [Figure 21-2](#c21-fig-0002) is a visualization of how temperatures in January
    of 2020 varied from the average temperatures in January from 1981 to 2010\. Now,
    imagine that you constructed a sample by choosing 20 random spots on the planet,
    and then discovered that the mean change in temperature for the sample was `+1`
    degree Celsius. What is the probability that the observed change in mean temperature
    was an artifact of the sites you happened to sample rather than an indication
    that the planet as a whole is warming? Answering this kind of question is what
    **statistical significance** is all about.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在任何涉及从人群中随机抽样的实验中，观察到的效应总有可能纯粹是偶然的。[图21-2](#c21-fig-0002)可视化了2020年1月的温度与1981年至2010年1月的平均温度的变化。现在，想象你通过选择地球上的20个随机地点来构建一个样本，然后发现样本的平均温度变化为`+1`摄氏度。观察到的平均温度变化是因为你恰好抽取的地点的伪影，而不是表明整个星球正在变暖的概率是多少？回答这种问题就是**统计显著性**的核心所在。
- en: '![c21-fig-0002.jpg](../images/c21-fig-0002.jpg)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-0002.jpg](../images/c21-fig-0002.jpg)'
- en: '[Figure 21-2](#c21-fig-0002a) January 2020 temperature difference from the
    1981-2010 average[^(145)](#c21-fn-0001)'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[图21-2](#c21-fig-0002a) 2020年1月与1981-2010年平均气温差异[^(145)](#c21-fn-0001)'
- en: In the early part of the twentieth century, Ronald Fisher developed an approach
    to statistical **hypothesis testing** that has become the most common approach
    for evaluating the probability an observed effect occurred purely by chance. Fisher
    says he invented the method in response to a claim by Dr. Muriel Bristol-Roach
    that when she drank tea with milk in it, she could detect whether the tea or the
    milk was poured into the teacup first. Fisher challenged her to a “tea test” in
    which she was given eight cups of tea (four for each order of adding tea and milk),
    and asked to identify those cups into which the tea had been poured before the
    milk. She did this perfectly. Fisher then calculated the probability of her having
    done this purely by chance. As we saw in Section 17.4.4, ![c21-fig-5001.jpg](../images/c21-fig-5001.jpg),
    i.e., there are `70` ways to choose `4` cups out of `8`. Since only one of these
    `70` combinations includes all `4` cups in which the tea was poured first, Fisher
    calculated that the probability of Dr. Bristol-Roach having chosen correctly by
    pure luck was ![c21-fig-5002.jpg](../images/c21-fig-5002.jpg). From this, he concluded
    that it was highly unlikely her success could be attributed to luck.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在20世纪初，罗纳德·费舍尔开发了一种统计**假设检验**的方法，已成为评估观察到的效果纯粹是偶然发生的概率的最常见方法。费舍尔说他发明了这种方法，是回应布里斯托-罗奇博士的一个声明，她声称当她喝加奶茶时，可以判断是茶先倒入茶杯还是牛奶。费舍尔向她挑战进行“茶测试”，她被提供了八杯茶（每种加茶和牛奶的顺序各四杯），要求识别那些茶先倒入的杯子。她完美地完成了。费舍尔随后计算了她纯粹偶然做到这一点的概率。正如我们在第17.4.4节中看到的，![c21-fig-5001.jpg](../images/c21-fig-5001.jpg)，即有`70`种方法从`8`杯中选择`4`杯。由于只有这`70`种组合中有一种包含所有“茶先倒入”的`4`杯，费舍尔计算出布里斯托-罗奇博士纯靠运气选择正确的概率是![c21-fig-5002.jpg](../images/c21-fig-5002.jpg)。由此，他得出结论，她的成功极不可能归因于运气。
- en: Fisher's approach to significance testing can be summarized as
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 费舍尔的显著性检验方法可以总结为
- en: 1\. State a **null hypothesis** and an **alternative hypothesis**. The null
    hypothesis is that the “treatment” has no interesting effect. For the “tea test,”
    the null hypothesis was that Dr. Bristol-Roach could not taste the difference.
    The alternative hypothesis is a hypothesis that can be true only if the null hypothesis
    is false, e.g., that Dr. Bristol-Roach could taste the difference.[^(146)](#c21-fn-0002)
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 1\. 陈述**原假设**和**备择假设**。原假设是“处理”没有有趣的效果。对于“茶测试”，原假设是布里斯托-罗奇博士无法品尝出差异。备择假设只有在原假设为假时才能成立，例如，布里斯托-罗奇博士能够品尝出差异。[^(146)](#c21-fn-0002)
- en: 2\. Understand statistical assumptions about the sample being evaluated. For
    the “tea test” Fisher assumed that Dr. Bristol-Roach was making independent decisions
    for each cup.
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 2\. 理解被评估样本的统计假设。对于“茶测试”，费舍尔假设布里斯托-罗奇博士为每杯茶做出了独立的决定。
- en: 3\. Compute a relevant **test statistic**. In this case, the test statistic
    was the fraction of correct answers given by Dr. Bristol-Roach.
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 3\. 计算相关的**检验统计量**。在这种情况下，检验统计量是布里斯托-罗奇博士给出的正确答案的比例。
- en: 4\. Derive the probability of that test statistic under the null hypothesis.
    In this case, it is the probability of getting all of the cups right by accident,
    i.e., `0.014`.
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 4\. 在原假设下推导该检验统计量的概率。在这种情况下，这是偶然得到所有杯子的概率，即`0.014`。
- en: 5\. Decide whether that probability is sufficiently small that you are willing
    to assume the null hypothesis is false, i.e., to **reject** the null hypothesis.
    Common values for the rejection level, which should be chosen in advance, are
    `0.05` and `0.01`.
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 5\. 决定该概率是否足够小，以至于你愿意假设原假设为假，即**拒绝**原假设。拒绝水平的常见值，应该提前选择，是`0.05`和`0.01`。
- en: Returning to our cyclists, imagine that the times for the treatment and control
    groups were samples drawn from infinite populations of finishing times for PED-X
    users and PED-Y users. The null hypothesis for this experiment is that the means
    of those two larger populations are the same, i.e., the difference between the
    population mean of the treatment group and the population mean of the control
    group is 0\. The alternative hypothesis is that they are not the same, i.e., the
    difference in means is not equal to 0.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 回到我们的骑行者，假设治疗组和对照组的时间是从PED-X用户和PED-Y用户的无限完成时间总体中抽取的样本。这个实验的原假设是这两个更大总体的均值相同，即治疗组的总体均值与对照组的总体均值之间的差为0。备择假设是它们不相同，即均值之差不等于0。
- en: Next, we go about trying to reject the null hypothesis. We choose a threshold,
    α, for statistical significance, and try to show that the probability of the data
    having been drawn from distributions consistent with the null hypothesis is less
    than α. We then say that we can reject the null hypothesis with confidence α,
    and accept the negation of the null hypothesis with probability `1 –` α.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们开始尝试拒绝原假设。我们为统计显著性选择一个阈值α，并尝试证明数据来自与原假设一致的分布的概率小于α。然后我们说可以以置信度α拒绝原假设，并以概率`1
    –` α接受原假设的否定。
- en: The choice of α affects the kind of errors we make. The larger α, the more often
    we will reject a null hypothesis that is actually true. These are known as **type
    I errors**. When α is smaller, we will more often accept a null hypothesis that
    is actually false. These are known as **type II errors**.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: α的选择影响我们犯错的类型。α越大，我们越可能拒绝实际上真实的原假设。这被称为**第一类错误**。当α较小的时候，我们更可能接受实际上是错误的原假设。这被称为**第二类错误**。
- en: Typically, people choose α = `0.05`. However, depending upon the consequences
    of being wrong, it might be preferable to choose a smaller or larger α. Imagine,
    for example, that the null hypothesis is that there is no difference in the rate
    of premature death between those taking PED-X and those taking PED-Y. We might
    well want to choose a small α, say `0.001`, as the basis for rejecting that hypothesis
    before deciding whether one drug was safer than the other. On the other hand,
    if the null hypothesis were that there is no difference in the performance-enhancing
    effect of PED-X and PED-Y, we might comfortably choose a pretty large α.[^(147)](#c21-fn-0003)
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，人们选择α = `0.05`。然而，根据错误的后果，选择一个较小或较大的α可能更为合适。例如，假设原假设是，服用PED-X和服用PED-Y之间的早逝率没有差异。我们可能希望选择一个较小的α，比如`0.001`，作为拒绝该假设的基础，然后再决定哪种药物更安全。另一方面，如果原假设是PED-X和PED-Y在增强表现的效果上没有差异，我们可能会舒适地选择一个相对较大的α。[^(147)](#c21-fn-0003)
- en: The next step is to compute the test statistic. The most common test statistic
    is the **t-statistic**. The t-statistic tells us how different, measured in units
    of standard error, the estimate derived from the data is from the null hypothesis.
    The larger the t-statistic, the more likely the null hypothesis can be rejected.
    For our example, the t-statistic tells us how many standard errors the difference
    in the two means (`118.44 – 119.82 = -1.38`) is from `0`. The t-statistic for
    our PED-X example is `-2.11` (you'll see how to compute this shortly). What does
    this mean? How do we use it?
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是计算检验统计量。最常见的检验统计量是**t统计量**。t统计量告诉我们，从数据中得出的估计值与原假设之间的差异有多大，以标准误的单位来衡量。t统计量越大，越有可能拒绝原假设。在我们的例子中，t统计量告诉我们两个均值的差异（`118.44
    – 119.82 = -1.38`）距离`0`有多少个标准误。我们的PED-X示例的t统计量是`-2.11`（稍后你会看到如何计算这个值）。这意味着什么？我们如何使用它？
- en: We use the t-statistic in much the same way we use the number of standard deviations
    from the mean to compute confidence intervals (see Section 17.4.2). Recall that
    for all normal distributions, the probability of an example lying within a fixed
    number of standard deviations of the mean is fixed. Here we do something slightly
    more complex that accounts for the number of samples used to compute the standard
    error. Instead of assuming a normal distribution, we assume a **t-distribution**.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用t统计量的方式与使用均值的标准差数量来计算置信区间的方法非常相似（参见第17.4.2节）。请记住，对于所有正态分布，样本落在均值的固定标准差数量内的概率是固定的。在这里，我们做了一些稍微复杂的事情，考虑了用于计算标准误的样本数量。我们假设的是**t分布**，而不是正态分布。
- en: T-distributions were first described, in 1908, by William Gosset, a statistician
    working for the Arthur Guinness and Son brewery.[^(148)](#c21-fn-0004) The t-distribution
    is actually a family of distributions, since the shape of the distribution depends
    upon the degrees of freedom in the sample.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: t分布最早由威廉·戈塞特（William Gosset）于1908年描述，他是一位为亚瑟·吉尼斯与儿子酿酒厂工作的统计学家。[^(148)](#c21-fn-0004)
    t分布实际上是一系列分布，因为分布的形状取决于样本的自由度。
- en: The **degrees of freedom** describes the amount of independent information used
    to derive the t-statistic. In general, we can think of degrees of freedom as the
    number of independent observations in a sample that are available to estimate
    some statistic about the population from which that sample is drawn.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '**自由度**描述了用于推导t统计量的独立信息量。一般来说，我们可以将自由度视为样本中可用于估计某个关于样本所抽取的总体的统计量的独立观察数量。'
- en: A t-distribution resembles a normal distribution, and the larger the degrees
    of freedom, the closer it is to a normal distribution. For small degrees of freedom,
    the t-distributions have notably fatter tails than normal distributions. For degrees
    of freedom of 30 or more, t-distributions are very close to normal.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: t分布类似于正态分布，自由度越大，越接近正态分布。对于小自由度，t分布的尾部比正态分布明显更胖。对于自由度在30或以上的情况，t分布非常接近正态分布。
- en: Now, let's use the sample variance to estimate the population variance. Consider
    a sample containing the three examples 100, 200, and 300\. Recall that
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们用样本方差来估计总体方差。考虑一个包含三个例子100、200和300的样本。回想一下
- en: '![c21-fig-5003.jpg](../images/c21-fig-5003.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-5003.jpg](../images/c21-fig-5003.jpg)'
- en: so the variance of our sample is
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 所以我们的样本方差是
- en: '![c21-fig-5004.jpg](../images/c21-fig-5004.jpg)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-5004.jpg](../images/c21-fig-5004.jpg)'
- en: It might appear that we are using three independent pieces of information, but
    we are not. The three terms in the numerator are not independent of each other,
    because all three observations were used to compute the mean of the sample of
    `200` riders. The degrees of freedom is `2`, since if we know the mean and any
    two of the three observations, the value of the third observation is fixed.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 看起来我们似乎在使用三个独立的信息片段，但实际上并不是。分子中的三个项并不是彼此独立的，因为这三个观察值都用于计算`200`名骑行者样本的均值。自由度为`2`，因为如果我们知道均值和三个观察值中的任何两个，则第三个观察值的值是固定的。
- en: The larger the degrees of freedom, the higher the probability that the sample
    statistic is representative of the population. The degrees of freedom in a t-statistic
    computed from a single sample is one less than the sample size, because the mean
    of the sample is used in calculating the t-statistic. If two samples are used,
    the degrees of freedom is two less than the sum of the sample sizes, because the
    mean of each sample is used in calculating the t-statistic. For example, for the
    PED-X/PED-Y experiment, the degrees of freedom is `198`.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 自由度越大，样本统计量代表总体的概率越高。从单个样本计算的t统计量的自由度比样本大小少一，因为在计算t统计量时使用了样本的均值。如果使用两个样本，则自由度比样本大小之和少二，因为在计算t统计量时使用了每个样本的均值。例如，对于PED-X/PED-Y实验，自由度为`198`。
- en: Given the degrees of freedom, we can draw a plot showing the appropriate t-distribution,
    and then see where the t-statistic we have computed for our PED-X example lies
    on the distribution. The code in [Figure 21-3](#c21-fig-0005) does that, and produces
    the plot in [Figure 21-4](#c21-fig-0006). The code first uses the function `scipy.random.standard_t`
    to generate many examples drawn from a t-distribution with `198` degrees of freedom.
    It then draws white lines at the t-statistic and the negative of the t-statistic
    for the PED-X sample.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在给定自由度的情况下，我们可以绘制一个显示适当t分布的图，并查看我们为PED-X示例计算的t统计量在分布中的位置。[图21-3](#c21-fig-0005)中的代码执行了这一点，并生成了[图21-4](#c21-fig-0006)中的图。该代码首先使用函数`scipy.random.standard_t`生成许多从自由度为`198`的t分布中抽取的样本。然后，它在PED-X样本的t统计量及其负值处绘制白线。
- en: '![c21-fig-0003.jpg](../images/c21-fig-0003.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-0003.jpg](../images/c21-fig-0003.jpg)'
- en: '[Figure 21-3](#c21-fig-0005a) Plotting a t-distribution'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '[图21-3](#c21-fig-0005a) 绘制t分布'
- en: '![c21-fig-0004.jpg](../images/c21-fig-0004.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-0004.jpg](../images/c21-fig-0004.jpg)'
- en: '[Figure 21-4](#c21-fig-0006a) Visualizing the t-statistic'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '[图21-4](#c21-fig-0006a) 可视化t统计量'
- en: The sum of the fractions of the area of the histogram to the left and right
    of the white lines equals the probability of getting a value at least as extreme
    as the observed value if
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 白线左右的直方图区域的分数之和等于在原假设为真时，观察值至少极端的概率。
- en: the sample is representative of the population, and
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 样本代表总体，并且
- en: the null hypothesis is true.
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 原假设为真。
- en: We need to look at both tails because our null hypothesis is that the population
    means are equal. So, the test should fail if the mean of the treatment group is
    either statistically significantly larger or smaller than the mean of the control
    group.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要查看两个尾部，因为我们的原假设是总体均值相等。因此，如果治疗组的均值在统计上显著大于或小于对照组的均值，检验应该失败。
- en: Under the assumption that the null hypothesis holds, the probability of getting
    a value at least as extreme as the observed value is called a **p-value**. For
    our PED-X example, the p-value is the probability of seeing a difference in the
    means at least as large as the observed difference, under the assumption that
    the actual population means of the treatment and controls are identical.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在原假设成立的假设下，得到至少与观察值一样极端的值的概率被称为**p 值**。对于我们的 PED-X 示例，p 值是指在假设治疗组和对照组的实际总体均值相同的情况下，观察到的均值差异至少与实际差异一样大的概率。
- en: It may seem odd that p-values tell us something about the probability of an
    event occurring if the null hypothesis holds, when what we are usually hoping
    is that the null hypothesis doesn't hold. However, it is not so different in character
    from the classic **scientific method**, which is based upon designing experiments
    that have the potential to refute a hypothesis. The code in [Figure 21-5](#c21-fig-0007)
    computes and prints the t-statistic and p-value for our two samples, one containing
    the times of the control group and the other the times of the treatment group.
    The library function `scipy.stats.ttest_ind` performs a two-tailed two-sample
    **t-test** and returns both the t-statistic and the p-value. Setting the parameter
    `equal_var` to `False` indicates that we don't know whether the two populations
    have the same variance.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 如果原假设成立，p 值似乎告诉我们事件发生的概率，这看起来有些奇怪，因为我们通常希望原假设不成立。然而，这与经典的**科学方法**并没有太大区别，科学方法是基于设计能够反驳假设的实验。图
    [21-5](#c21-fig-0007) 中的代码计算并打印我们的两个样本的 t 统计量和 p 值，一个样本包含对照组的时间，另一个样本包含治疗组的时间。库函数
    `scipy.stats.ttest_ind` 执行双尾两样本**t 检验**并返回 t 统计量和 p 值。将参数 `equal_var` 设置为 `False`
    表示我们不知道这两个总体是否具有相同的方差。
- en: '![c21-fig-0005.jpg](../images/c21-fig-0005.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-0005.jpg](../images/c21-fig-0005.jpg)'
- en: '[Figure 21-5](#c21-fig-0007a) Compute and print t-statistic and p-value'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 21-5](#c21-fig-0007a) 计算并打印 t 统计量和 p 值'
- en: When we run the code, it reports
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们运行代码时，它报告
- en: '[PRE0]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: “Yes,” Dr. X crowed, “it seems that the probability of PED-X being no better
    than PED-Y is only `4%`, and therefore the probability that PED-X has an effect
    is 96`%`. Let the cash registers start ringing.” Alas, his elation lasted only
    until he read the next section of this chapter.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，”X 博士兴奋地说，“看来 PED-X 不比 PED-Y 更好的概率只有 `4%`，因此 PED-X 有效的概率是 `96%`。让现金注册机开始响起来。”可惜，他的兴奋仅持续到他阅读本章的下一部分。
- en: 21.2 Beware of P-values
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 21.2 警惕 P 值
- en: It is way too easy to read something into a p-value that it doesn't really imply.
    It is tempting to think of a p-value as the probability of the null hypothesis
    being true. But this is not what it actually is.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 过于简单地将某种含义读入 p 值是非常容易的。将 p 值视为原假设为真的概率是很有诱惑力的，但这并不是它的实际含义。
- en: The null hypothesis is analogous to a defendant in the Anglo-American criminal
    justice system. That system is based on a principle called “presumption of innocence,”
    i.e., innocent until proven guilty. Analogously, we assume that the null hypothesis
    is true unless we see enough evidence to the contrary. In a trial, a jury can
    rule that a defendant is “guilty” or “not guilty.” A “not guilty” verdict implies
    that the evidence was insufficient to convince the jury that the defendant was
    guilty “beyond a reasonable doubt.” [^(149)](#c21-fn-0005) Think of it as equivalent
    to “guilt was not proven.” A verdict of “not guilty” does not imply that the evidence
    was sufficient to convince the jury that the defendant was innocent. And it says
    nothing about what the jury would have concluded had it seen different evidence.
    Think of a p-value as a jury verdict where the standard “beyond a reasonable doubt”
    is defined by α, and the evidence is the data from which the t-statistic was constructed.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 零假设类似于英美刑事司法系统中的被告。该系统基于一种称为“无罪推定”的原则，即在未被证明有罪之前被认为是无罪。类似地，我们假设零假设是真实的，除非我们看到足够的证据反对它。在审判中，陪审团可以裁定被告是“有罪”或“无罪”。“无罪”裁决意味着证据不足以使陪审团相信被告“超出合理怀疑”是有罪的。[^(149)](#c21-fn-0005)可以将其视为“没有证明有罪”。“无罪”裁决并不意味着证据足以使陪审团相信被告是无罪的。它也没有说明如果陪审团看到不同的证据会得出什么结论。可以将
    p 值视为陪审团裁决，其中标准“超出合理怀疑”由 α 定义，而证据则是构建 t 统计量的数据。
- en: A small p-value indicates that a particular sample is unlikely if the null hypothesis
    is true. It is akin to a jury concluding that it was unlikely that it would have
    been presented with this set of evidence if the defendant were innocent, and therefore
    reaching a guilty verdict. Of course, that doesn't mean that the defendant is
    actually guilty. Perhaps the jury was presented with misleading evidence. Analogously,
    a low p-value might be attributable to the null hypothesis actually being false,
    or it could simply be that the sample is unrepresentative of the population from
    which it is drawn, i.e., the evidence is misleading.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 小 p 值表明，如果零假设为真，则特定样本不太可能出现。它类似于陪审团得出结论，认为如果被告是无罪的，就不太可能会呈现出这一组证据，因此做出了有罪的裁决。当然，这并不意味着被告实际上有罪。也许陪审团看到了误导性的证据。类似地，低
    p 值可能是因为零假设实际上是错误的，或者只是因为样本并不能代表其来源的人群，即证据是误导性的。
- en: As you might expect, Dr. X staunchly claimed that his experiment showed that
    the null hypothesis was probably false. Dr. Y insisted that the low p-value was
    probably attributable to an unrepresentative sample and funded another experiment
    of the same size as Dr. X's. When the statistics were computed using the samples
    from her experiment, the code printed
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所预料的，Dr. X 坚决声称他的实验表明零假设可能是错误的。Dr. Y 坚持认为低 p 值可能是由于不具代表性的样本，并资助了与 Dr. X 的实验规模相同的另一项实验。当用她的实验样本计算统计数据时，代码打印了
- en: '[PRE1]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: This p-value is more than 17 times larger than that obtained from Dr. X's experiment,
    and certainly provides no reason to doubt the null hypothesis. Confusion reigned.
    But we can clear it up!
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 这个 p 值比 Dr. X 的实验得到的值大了 17 倍以上，确实没有理由怀疑零假设。混乱盛行。但我们可以澄清它！
- en: You may not be surprised to discover that this is not a true story—after all,
    the idea of a cyclist taking a performance-enhancing drug strains credulity. In
    fact, the samples for the experiments were generated by the code in [Figure 21-6](#c21-fig-0008).
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能不会惊讶地发现这并不是一个真实的故事——毕竟，骑自行车的人服用增强表现的药物的想法确实令人怀疑。实际上，实验的样本是通过[图 21-6](#c21-fig-0008)中的代码生成的。
- en: '![c21-fig-0006.jpg](../images/c21-fig-0006.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-0006.jpg](../images/c21-fig-0006.jpg)'
- en: '[Figure 21-6](#c21-fig-0008a) Code for generating racing examples'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 21-6](#c21-fig-0008a) 生成竞赛示例的代码'
- en: Since the experiment is purely computational, we can run it many times to get
    many different samples. When we generated `10,000` pairs of samples (one from
    each distribution) and plotted the probability of the p-values, we got the plot
    in [Figure 21-7](#c21-fig-0009).
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 由于实验纯粹是计算性的，我们可以多次运行它以获得许多不同的样本。当我们生成了 `10,000` 对样本（每个分布各一个）并绘制 p 值的概率时，得到了[图
    21-7](#c21-fig-0009)。
- en: '![c21-fig-0007.jpg](../images/c21-fig-0007.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-0007.jpg](../images/c21-fig-0007.jpg)'
- en: '[Figure 21-7](#c21-fig-0009a) Probability of p-values'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 21-7](#c21-fig-0009a) p 值的概率'
- en: Since about 10`%` of the p-values lie below `0.04`, it is not terribly surprising
    that an experiment happened to show significance at the `4%` level. On the other
    hand, that the second experiment yielded a completely different result is also
    not surprising. What does seem surprising is that given we know that the means
    of the two distributions are actually different, we get a result that is significant
    at the `5%` level only about `12%` of the time. Roughly 88`%` of the time we would
    fail to reject a fallacious null hypothesis at the `5%` level.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 由于约`10%`的p值低于`0.04`，因此一个实验恰好在`4%`水平上显示显著性并不令人感到惊讶。另一方面，第二个实验得出完全不同的结果也并不令人意外。看起来令人惊讶的是，考虑到我们知道两个分布的均值实际上是不同的，我们得到的结果在`5%`水平上只有约`12%`的时间是显著的。大约`88%`的时间，我们未能在`5%`水平上拒绝错误的原假设。
- en: That p-values can be unreliable indicators of whether it is truly appropriate
    to reject a null hypothesis is one of the reasons so many of the results appearing
    in the scientific literature cannot be reproduced by other scientists. One problem
    is that there is a strong relationship between the **study power** (the size of
    the samples) and the credibility of the statistical finding.[^(150)](#c21-fn-0006)
    If we increase the sample size in our example to `3000`, we fail to reject the
    fallacious null hypothesis only about `1%` of the time.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: p值可能是不可靠的指标，这也是许多出现在科学文献中的结果无法被其他科学家重复的原因之一。一个问题是，**研究能力**（样本的大小）与统计发现的可信度之间存在强关系。[^(150)](#c21-fn-0006)
    如果我们将样本大小增加到`3000`，我们仅约`1%`的时间未能拒绝错误的原假设。
- en: Why are so many studies under-powered? If we were truly running an experiment
    with people (rather than a simulation), it would be 20 times more expensive to
    draw samples of size `2000` than samples of size `100`.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 为什么这么多研究的统计能力不足？如果我们真的在进行一项对人进行实验（而不是模拟），那么提取大小为`2000`的样本将比提取大小为`100`的样本贵20倍。
- en: The problem of sample size is an intrinsic attribute of what is called the frequentist
    approach to statistics. In Section 21.7, we discuss an alternative approach that
    attempts to mitigate this problem.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 样本大小的问题是所谓频率主义统计方法的一个内在特征。在21.7节中，我们讨论一种试图缓解这一问题的替代方法。
- en: 21.3 One-tail and One-sample Tests
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 21.3 单尾和单样本检验
- en: Thus far in this chapter, we have looked only at two-tailed two-sample tests.
    Sometimes, it is more appropriate to use a **one-tailed** and/or a **one-sample**
    t-test.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们在本章中只讨论了双尾双样本检验。有时，使用**单尾**和/或**单样本**t检验更为合适。
- en: 'Let''s first consider a one-tailed two-sample test. In our two-tailed test
    of the relative effectiveness of PED-X and PED-Y, we considered three cases: 1)
    they were equally effective, 2) PED-X was more effective than PED-Y, and 3) PED-Y
    was more effective than PED-X. The goal was to reject the null hypothesis (case 1)
    by arguing that if it were true, it would be unlikely to see as large a difference
    as observed in the means of the PED-X and PED-Y samples.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们考虑一个单尾双样本检验。在我们对PED-X和PED-Y相对有效性的双尾检验中，我们考虑了三种情况：1）它们同样有效，2）PED-X比PED-Y更有效，以及3）PED-Y比PED-X更有效。目标是通过论证如果原假设（情况1）为真，那么看到PED-X和PED-Y样本均值之间如此大的差异是不太可能的，从而拒绝原假设。
- en: Suppose, however, that PED-X were substantially less expensive than PED-Y. To
    find a market for his compound, Dr. X would only need to show that PED-X is at
    least as effective as PED-Y. One way to think about this is that we want to reject
    the hypothesis that the means are equal or that the PED-X mean is larger. Note
    that this is strictly weaker than the hypothesis that the means are equal. (Hypothesis
    `A` is strictly weaker than hypothesis `B`, if whenever `B` is true `A` is true,
    but not vice versa.)
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，假设PED-X的成本显著低于PED-Y。为了为他的化合物找到市场，X博士只需证明PED-X至少与PED-Y一样有效。可以这样理解，我们希望拒绝均值相等或PED-X均值更大的假设。请注意，这比均值相等的假设要严格弱。(假设`A`严格弱于假设`B`，如果`B`为真时`A`也为真，但反之不然。)
- en: To do this, we start with a two-sample test with the original null hypothesis
    computed by the code in [Figure 21-5](#c21-fig-0007). It printed
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 为此，我们从一个双样本检验开始，原始原假设由[图21-5](#c21-fig-0007)中的代码计算得出。它打印了
- en: '[PRE2]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: allowing us to reject the null hypothesis at about the 4`%` level.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 允许我们在约`4%`的水平上拒绝原假设。
- en: How about our weaker hypothesis? Recall [Figure 21-4](#c21-fig-0006). We observed
    that under the assumption that the null hypothesis holds, the sum of the fractions
    of the areas of the histogram to the left and right of the white lines equals
    the probability of getting a value at least as extreme as the observed value.
    However, to reject our weaker hypothesis we don't need to take into account the
    area under the left tail, because that corresponds to PED-X being more effective
    than PED-Y (a negative time difference), and we're interested only in rejecting
    the hypothesis that PED-X is less effective. That is, we can do a one-tailed test.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的较弱假设怎么样？回想一下[图21-4](#c21-fig-0006)。我们观察到在零假设成立的假设下，白线左侧和右侧直方图区域的分数之和等于获得至少与观察值一样极端的值的概率。然而，为了拒绝我们的较弱假设，我们不需要考虑左尾下的区域，因为这对应于PED-X比PED-Y更有效（一个负时间差），而我们只对拒绝PED-X不如PED-Y的假设感兴趣。也就是说，我们可以进行单尾检验。
- en: Since the t-distribution is symmetric, to get the value for a one-tailed test
    we divide the p-value from the two-tailed test in half. So the p-value for the
    one-tailed test is `0.02`. This allows us to reject our weaker hypothesis at the
    `2%` level, something that we could not do using the two-tailed test.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 由于t分布是对称的，因此为了获得单尾检验的值，我们将双尾检验的p值减半。因此，单尾检验的p值为`0.02`。这使我们能够在`2%`的水平上拒绝我们较弱的假设，而这在使用双尾检验时无法做到。
- en: Because a one-tailed test provides more power to detect an effect, it is tempting
    to use a one-tailed test whenever one has a hypothesis about the direction of
    an effect. This is usually not a good idea. A one-tailed test is appropriate only
    if the consequences of missing an effect in the untested direction are negligible.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 因为单尾检验提供了更强的效能来检测效应，所以每当有关于效应方向的假设时，使用单尾检验是很诱人的。但这通常不是一个好主意。仅当未检验方向上漏掉效应的后果微不足道时，单尾检验才合适。
- en: Now let's look at a one-sample test. Suppose that, after years of experience
    of people using PED-Y, it was well established that the mean time for a racer
    on PED-Y to complete a 50-mile course is `120` minutes. To discover whether PED-X
    had a different effect than PED-Y, we would test the null hypothesis that the
    mean time for a single PED-X sample is equal to `120`. We can do this using the
    function `scipy.stats.ttest_1samp`, which takes as arguments a single sample and
    the population mean against which it is compared. It returns a tuple containing
    the t-statistic and p-value. For example, if we append to the end of the code
    in [Figure 21-5](#c21-fig-0007) the code
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们看看单样本检验。假设经过多年使用PED-Y的经验，赛车手在PED-Y下完成50英里赛道的平均时间是`120`分钟。为了发现PED-X是否与PED-Y有不同的效应，我们将检验零假设，即单个PED-X样本的平均时间等于`120`。我们可以使用函数`scipy.stats.ttest_1samp`来实现，该函数接受一个样本和与之比较的总体均值作为参数。它返回一个包含t统计量和p值的元组。例如，如果我们在[图21-5](#c21-fig-0007)的代码末尾附加代码。
- en: '[PRE3]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: it prints
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 它打印。
- en: '[PRE4]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: It is not surprising that the p-value is smaller than the one we got using the
    two-sample two-tail test. By assuming that we know one of the two means, we have
    removed a source of uncertainty.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: p值小于我们使用双样本双尾检验得到的值并不令人惊讶。通过假设我们知道两个均值之一，我们消除了一个不确定性来源。
- en: So, after all this, what have we learned from our statistical analysis of PED-X
    and PED-Y? Even though there is a difference in the expected performance of PED-X
    and PED-Y users, no finite sample of PED-X and PED-Y users is guaranteed to reveal
    that difference. Moreover, because the difference in the expected means is small
    (less than half a percent), it is unlikely that an experiment of the size Dr.
    X ran (`100` riders in each group) will yield evidence that would allow us to
    conclude at the `95%` confidence level that there is a difference in means. We
    could increase the likelihood of getting a result that is statistically significant
    at the `95%` level by using a one-tailed test, but that would be misleading, because
    we have no reason to assume that PED-X is not less effective than PED-Y.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，经过这一切，我们从PED-X和PED-Y的统计分析中学到了什么？尽管PED-X和PED-Y用户的预期表现存在差异，但没有任何有限的PED-X和PED-Y用户样本能保证揭示这一差异。此外，由于预期均值的差异很小（不到千分之五），因此不太可能像Dr.
    X进行的实验（每组`100`名骑手）会产生足够的证据，使我们能在`95%`的置信水平下得出均值存在差异的结论。我们可以通过使用单尾检验来提高在`95%`水平上获得统计显著结果的可能性，但那将是误导性的，因为我们没有理由假设PED-X的效果不低于PED-Y。
- en: 21.4  Significant or Not?
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 21.4 显著性与否？
- en: Lyndsay and John have wasted an inordinate amount of time over the last several
    years playing a game called Words with Friends. They have played each other 1,273
    times, and Lyndsay has won 666 of those games, prompting her to boast, “I'm way
    better at this game than you are.” John asserted that Lyndsay's claim was nonsense,
    and that the difference in wins could be (and probably should be) attributed entirely
    to luck.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 林德赛和约翰在过去几年中浪费了大量时间玩一个叫做“与朋友单词”的游戏。他们之间共进行了1273场比赛，林德赛赢了666场，因此她得意洋洋地说：“我在这个游戏中比你强多了。”约翰坚称林德赛的说法毫无意义，并认为胜利的差异完全应该归因于运气。
- en: 'John, who had recently read a book about statistics, proposed the following
    way to find out whether it was reasonable to attribute Lyndsay''s relative success
    to skill:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 最近读过一本关于统计学的书的约翰，提出了一种方法来判断是否合理将林德赛的相对成功归因于技能：
- en: Treat each of the `1,273` games as an experiment returning `1` if Lyndsay was
    the victor and `0` if she was not.
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将每场`1,273`场比赛视为一次实验，如果林德赛获胜则返回`1`，否则返回`0`。
- en: Choose the null hypothesis that the mean value of those experiments is `0.5`.
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择零假设，即这些实验的平均值为`0.5`。
- en: Perform a two-tailed one-sample test for that null hypothesis.
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对该零假设执行双尾单样本检验。
- en: When he ran the code
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 当他运行代码时
- en: '[PRE5]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: it printed
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 它打印了
- en: '[PRE6]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: prompting John to claim that the difference wasn't even close to being significant
    at the `5%` level.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 促使约翰声称差异甚至没有接近`5%`水平的显著性。
- en: Lyndsay, who had not studied statistics, but had read Chapter 18 of this book,
    was not satisfied. “Let's run a Monte Carlo simulation,” she suggested, and supplied
    the code in [Figure 21-8](#c21-fig-0010).
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 林德赛没有学习过统计学，但读过本书第18章，对此并不满意。“让我们进行一次蒙特卡罗模拟，”她建议，并提供了[图21-8](#c21-fig-0010)中的代码。
- en: '![c21-fig-0008.jpg](../images/c21-fig-0008.jpg)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-0008.jpg](../images/c21-fig-0008.jpg)'
- en: '[Figure 21-8](#c21-fig-0010a) Lyndsay''s simulation of games'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '[图21-8](#c21-fig-0010a) 林德赛的游戏模拟'
- en: When Lyndsay's code was run it printed,
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 当林德赛的代码运行时，它打印了，
- en: '[PRE7]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: prompting her to claim that John's statistical test was completely bogus and
    that the difference in wins was statistically significant at the `5%` level.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 促使她声称约翰的统计检验完全无效，并且胜利的差异在`5%`水平上是统计显著的。
- en: “No,” John explained patiently, “it's your simulation that's bogus. It assumed
    that you were the better player and performed the equivalent of a one-tailed test.
    The inner loop of your simulation is wrong. You should have performed the equivalent
    of a two-tailed test by testing whether, in the simulation, either player won
    more than the `666` games that you won in actual competition.” John then ran the
    simulation in [Figure 21-9](#c21-fig-0011).
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: “不，”约翰耐心解释，“是你的模拟有问题。它假设你是更好的玩家，并进行了相当于单尾检验的操作。你模拟的内部循环是错误的。你应该进行相当于双尾检验，测试在模拟中是否有任一玩家赢得了你在实际比赛中赢得的`666`场比赛。”约翰随后运行了[图21-9](#c21-fig-0011)中的模拟。
- en: '![c21-fig-0009.jpg](../images/c21-fig-0009.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-0009.jpg](../images/c21-fig-0009.jpg)'
- en: '[Figure 21-9](#c21-fig-0011a) Correct simulation of games'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '[图21-9](#c21-fig-0011a) 游戏的正确模拟'
- en: John's simulation printed
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 约翰的模拟打印了
- en: '[PRE8]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: “That's pretty darned close to what my two-tailed test predicted,” crowed John.
    Lyndsay's unladylike response was not appropriate for inclusion in a family-oriented
    book.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: “这与我的双尾检验预测的非常接近，”约翰得意地说。林德赛不雅的反应不适合出现在家庭导向的书中。
- en: '**Finger exercise**: An investigative reporter discovered that not only was
    Lyndsay employing dubious statistical methods, she was applying them to data she
    had merely made up.[^(151)](#c21-fn-0007) In fact, John had defeated Lyndsay 479
    times and lost 443 times. At what level is this difference statistically significant?'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '**手指练习**：一位调查记者发现，林德赛不仅使用了可疑的统计方法，还将其应用于她仅仅虚构的数据上。[^(151)](#c21-fn-0007) 实际上，约翰击败了林德赛479次，输掉了443次。这个差异在统计上有多显著？'
- en: 21.5 Which N?
  id: totrans-107
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 21.5 哪个N？
- en: A professor wondered whether attending lectures was correlated with grades in
    his department. He recruited `40` freshmen and gave them all ankle bracelets so
    that he could track their whereabouts. Half of the students were not allowed to
    attend any of the lectures in any of their classes,[^(152)](#c21-fn-0008) and
    half were required to attend all of the lectures.[^(153)](#c21-fn-0009) Over the
    next four years, each student took `40` different classes, yielding `800` grades
    for each group of students.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 一位教授想知道上课是否与他所在系的成绩相关。他招募了`40`名新生，并给他们所有人都佩戴了脚踝手环，以便追踪他们的去向。一半的学生不被允许参加他们所有课程的任何讲座，[^(152)](#c21-fn-0008)而另一半则被要求参加所有讲座。[^(153)](#c21-fn-0009)
    在接下来的四年中，每位学生参加了`40`门不同的课程，为每组学生提供了`800`个成绩。
- en: When the professor performed a two-tailed t-test on the means of these two samples
    of size `800`, the p-value was about `0.01`. This disappointed the professor,
    who was hoping that there would be no statistically significant effect—so that
    he would feel less guilty about canceling lectures and going to the beach. In
    desperation, he took a look at the mean GPAs of the two groups and discovered
    very little difference. How, he wondered, could such a small difference in means
    be significant at that level?
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 当教授对这两个样本（每个样本大小为`800`）的均值进行双尾t检验时，p值约为`0.01`。这让教授感到失望，他原本希望没有统计显著性效应——这样他就能少一些因取消讲座而感到的愧疚，可以去海滩。出于绝望，他查看了两组的平均GPA，发现差异非常小。他想知道，均值如此微小的差异为何会在那个水平上显著？
- en: When the sample size is large enough, even a small effect can be highly statistically
    significant. `N` matters, a lot. [Figure 21-10](#c21-fig-0012) plots the mean
    p-value of `1000` trials against the size of the samples used in those trials.
    For each sample size and each trial we generated two samples. Each was drawn from
    a Gaussian with a standard deviation of `5`. One had a mean of `100` and the other
    a mean of `100.5`. The mean p-value drops linearly with the sample size. The `0.5%`
    difference in means becomes consistently statistically significant at the `5%`
    level when the sample size reaches about `2000`, and at the `1%` level when the
    sample size nears `3000`.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 当样本大小足够大时，即使是微小的效应也可能具有高度统计显著性。`N`很重要，影响很大。 [图 21-10](#c21-fig-0012)绘制了`1000`次试验的平均p值与试验中使用的样本大小的关系。对于每个样本大小和每次试验，我们生成了两个样本。每个样本均来自标准差为`5`的高斯分布。其中一个样本的均值为`100`，另一个的均值为`100.5`。平均p值随着样本大小线性下降。当样本大小达到约`2000`时，均值之间`0.5%`的差异在`5%`水平上变得显著，而当样本大小接近`3000`时，在`1%`水平上显著。
- en: '![c21-fig-0010.jpg](../images/c21-fig-0010.jpg)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-0010.jpg](../images/c21-fig-0010.jpg)'
- en: '[Figure 21-10](#c21-fig-0012a) Impact of sample size on p-value'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 21-10](#c21-fig-0012a) 样本大小对p值的影响'
- en: Returning to our example, was the professor justified in using an `N` of `800`
    for each **arm** of his study? To put it another way, were there really `800`
    independent examples for each cohort of `20` students? Probably not. There were
    `800` grades per sample, but only `20` students, and the `40` grades associated
    with each student should probably not be viewed as independent examples. After
    all, some students consistently get good grades, and some students consistently
    get grades that disappoint.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 回到我们的例子，教授在他的研究中使用`N`为`800`的每个**组别**是否合理？换句话说，是否真的有`800`个独立的样本对应每组`20`名学生？可能不是。每个样本有`800`个成绩，但只有`20`名学生，而与每名学生相关的`40`个成绩可能不应视为独立样本。毕竟，有些学生始终能获得好成绩，而有些学生的成绩则令人失望。
- en: The professor decided to look at the data a different way. He computed the GPA
    for each student. When he performed a two-tailed t-test on these two samples,
    each of size `20`, the p-value was about `0.3`. He headed to the beach.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 教授决定以不同的方式查看数据。他计算了每位学生的GPA。当他对这两个样本（每个样本大小为`20`）进行双尾t检验时，p值约为`0.3`。于是他去了海滩。
- en: 21.6 Multiple Hypotheses
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 21.6 多重假设
- en: In Chapter 19, we looked at sampling using data from the Boston Marathon. The
    code in [Figure 21-11](#c21-fig-0013) reads in data from the 2012 race and looks
    for statistically significant differences in the mean finishing times of the women
    from a small set of countries. It uses the `get_BM_data` function defined in Figure
    19-2.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在第19章中，我们使用波士顿马拉松的数据进行了抽样。 [图 21-11](#c21-fig-0013)中的代码读取了2012年比赛的数据，并查找来自少数国家的女性完赛时间的统计显著性差异。它使用了图19-2中定义的`get_BM_data`函数。
- en: '![c21-fig-0011.jpg](../images/c21-fig-0011.jpg)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-0011.jpg](../images/c21-fig-0011.jpg)'
- en: '[Figure 21-11](#c21-fig-0013a) Comparing mean finishing times for selected
    countries'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 21-11](#c21-fig-0013a) 比较所选国家的平均完赛时间'
- en: When the code is run, it prints
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 当代码运行时，它打印
- en: '[PRE9]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: It looks as if either Italy or Japan can claim to have faster women runners
    than the other.[^(154)](#c21-fn-0010) However, such a conclusion would be pretty
    tenuous. While one set of runners did have a faster mean time than the other,
    the sample sizes (`20` and `32`) were small and perhaps not representative of
    the capabilities of women marathoners in each country.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 看起来意大利或日本都可以声称其女性跑者比对方更快。[^(154)](#c21-fn-0010)然而，这样的结论将是相当脆弱的。虽然一组跑者的平均时间确实比另一组快，但样本大小（`20`和`32`）较小，可能并不能代表各国女性马拉松选手的能力。
- en: 'More important, there is a flaw in the way we constructed our experiment. We
    checked `10` null hypotheses (one for each distinct pair of countries) and discovered
    that one of them could be rejected at the `5%` level. One way to think about it
    is that we were actually checking the null hypothesis: “for all pairs of countries,
    the mean finishing times of their female marathon runners are the same.” It might
    be fine to reject that null hypothesis, but that is not the same as rejecting
    the null hypothesis that women marathon runners from Italy and Japan are equally
    fast.'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 更重要的是，我们的实验构建方式存在缺陷。我们检查了`10`个零假设（每对国家各一个），并发现其中一个在`5%`水平上可以被拒绝。可以认为我们实际上在检查零假设：“所有国家对之间的女性马拉松选手的平均完赛时间相同。”拒绝这个零假设可能没问题，但这并不等同于拒绝意大利和日本的女性马拉松选手速度相同的零假设。
- en: The point is made starkly by the example in [Figure 21-12](#c21-fig-0014). In
    that example, we draw 50 pairs of samples of size `200` from the same population,
    and for each we test whether the means of the samples are statistically different.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 这一点在[图 21-12](#c21-fig-0014)的例子中表现得非常明显。在那个例子中，我们从同一总体中抽取50对样本，每个样本大小为`200`，并测试每对样本的均值是否存在统计差异。
- en: '![c21-fig-0012.jpg](../images/c21-fig-0012.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-0012.jpg](../images/c21-fig-0012.jpg)'
- en: '[Figure 21-12](#c21-fig-0014a) Checking multiple hypotheses'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 21-12](#c21-fig-0014a) 检查多个假设'
- en: Since the samples are all drawn from the same population, we know that the null
    hypothesis is true. Yet, when we run the code it prints
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 由于所有样本都来自同一总体，我们知道零假设是正确的。然而，当我们运行代码时，它打印
- en: '[PRE10]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: indicating that the null hypothesis can be rejected for two pairs.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 表示可以拒绝两个配对的零假设。
- en: This is not particularly surprising. Recall that a p-value of `0.05` indicates
    that if the null hypothesis holds, the probability of seeing a difference in means
    at least as large as the difference for the two samples is `0.05\.` Therefore,
    it is not surprising that if we examine 50 pairs of samples, two of them have
    means that are statistically significantly different from each other. Running
    large sets of related experiments, and then **cherry-picking** the result you
    like, can be kindly described as sloppy. An unkind person might call it something
    else.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 这并不特别令人惊讶。回想一下，p值为`0.05`表示如果零假设成立，观察到两个样本之间的均值差异至少与此差异一样大的概率为`0.05`。因此，如果我们检查50对样本，其中两对样本的均值在统计上显著不同，这并不奇怪。运行大量相关实验，然后**挑选**你喜欢的结果，可以被温和地描述为马虎。不友好的人可能会称之为其他东西。
- en: 'Returning to our Boston Marathon experiment, we checked whether we could reject
    the null hypothesis (no difference in means) for `10` pairs of samples. When running
    an experiment involving multiple hypotheses, the simplest and most conservative
    approach is to use something called the **Bonferroni correction**. The intuition
    behind it is simple: when checking a family of `m` hypotheses, one way of maintaining
    an appropriate **family-wise error rate** is to test each individual hypothesis
    at a level of ![c21-fig-5005.jpg](../images/c21-fig-5005.jpg). Using the Bonferroni
    correction to see if the difference between Italy and Japan is significant at
    the *α* = `0.05` level, we should check if the p-value is less than `0.05/10`
    i.e., `0.005`—which it is not.'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 回到我们的波士顿马拉松实验，我们检查是否可以拒绝零假设（均值无差异）对于`10`对样本。当进行涉及多个假设的实验时，最简单且最保守的方法是使用**邦费罗尼校正**。其直觉很简单：在检查`m`个假设的家庭时，维持适当的**家庭错误率**的一种方法是以![c21-fig-5005.jpg](../images/c21-fig-5005.jpg)的水平测试每个单独的假设。使用邦费罗尼校正检查意大利和日本之间的差异在*α*
    = `0.05`水平上是否显著，我们应该检查p值是否小于`0.05/10`，即`0.005`——而它并不是。
- en: The Bonferroni correction is conservative (i.e., it fails to reject the null
    hypothesis more often than necessary) if there are many tests or the test statistics
    for the tests are positively correlated. An additional issue is the absence of
    a generally accepted definition of “family of hypotheses.” It is obvious that
    the hypotheses generated by the code in [Figure 21-12](#c21-fig-0014) are related,
    and therefore a correction needs to be applied. But the situation is not always
    so clear cut.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 如果有许多测试或者测试统计量之间正相关，博恩费罗尼校正是保守的（即，它比必要时更频繁地未能拒绝原假设）。另一个问题是缺乏一个普遍接受的“假设家族”的定义。显然，[图21-12](#c21-fig-0014)中代码生成的假设是相关的，因此需要进行校正。但情况并不总是如此明确。
- en: 21.7 Conditional Probability and Bayesian Statistics
  id: totrans-132
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 21.7 条件概率与贝叶斯统计
- en: Up to this point, we have taken what is called a **frequentist** approach to
    statistics. We have drawn conclusions from samples based entirely on the frequency
    or proportion of the data. This is the most commonly used inference framework,
    and leads to the well-established methodologies of statistical hypothesis testing
    and confidence intervals covered earlier in this book. In principle, it has the
    advantage of being unbiased. Conclusions are reached solely on the basis of observed
    data.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们采取了所谓的**频率主义**统计方法。我们完全基于数据的频率或比例从样本中得出结论。这是最常用的推理框架，并导致本书前面讨论的统计假设检验和置信区间等成熟方法。从原则上讲，它的优点在于无偏。结论完全基于观察到的数据。
- en: In some situations, however, an alternative approach to statistics, **Bayesian
    statistics**, is more appropriate. Consider the cartoon in [Figure 21-13](#c21-fig-0015).[^(155)](#c21-fn-0011)
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 然而在某些情况下，另一种统计方法**贝叶斯统计**更为合适。考虑[图21-13](#c21-fig-0015)中的漫画。[^(155)](#c21-fn-0011)
- en: '![c21-fig-0013.jpg](../images/c21-fig-0013.jpg)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-0013.jpg](../images/c21-fig-0013.jpg)'
- en: '[Figure 21-13](#c21-fig-0015a) Has the sun exploded?'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: '[图21-13](#c21-fig-0015a) 太阳爆炸了吗？'
- en: 'What''s going on here? The frequentist knows that there are only two possibilities:
    the machine rolls a pair of sixes and is lying, or it doesn''t roll a pair of
    sixes and is telling the truth. Since the probability of not rolling a pair of
    sixes is `35/36` (`97.22%`), the frequentist concludes that the machine is probably
    telling the truth, and therefore the sun has probably exploded.[^(156)](#c21-fn-0012)'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 这里发生了什么？频率主义者知道只有两种可能性：机器掷出一对六且在说谎，或者没有掷出一对六且在讲真话。由于不掷出一对六的概率为`35/36`（`97.22%`），频率主义者得出结论，机器可能在讲真话，因此太阳可能爆炸了。[^(156)](#c21-fn-0012)
- en: The Bayesian uses additional information in building her probability model.
    She agrees it is unlikely that the machine rolls a pair of sixes; however, she
    argues that the probability of that happening needs to be compared to the *a priori*
    probability that the sun has not exploded. She concludes that the likelihood of
    the sun having not exploded is even higher than `97.22%,` and decides to bet that
    “the sun will come out tomorrow.”
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 贝叶斯使用额外信息来建立她的概率模型。她同意机器不太可能掷出一对六；然而，她认为这种情况发生的概率需要与太阳未爆炸的*先验*概率进行比较。她得出结论，太阳未爆炸的可能性甚至高于`97.22%`，并决定押注“太阳明天会出来”。
- en: 21.7.1 Conditional Probabilities
  id: totrans-139
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 21.7.1 条件概率
- en: The key idea underlying Bayesian reasoning is **conditional probability**.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 贝叶斯推理的关键思想是**条件概率**。
- en: In our earlier discussion of probability, we relied on the assumption that events
    were independent. For example, we assumed that whether a coin flip came up heads
    or tails was unrelated to whether the previous flip came up heads or tails. This
    is convenient mathematically, but life doesn't always work that way. In many practical
    situations, independence is a bad assumption.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们之前讨论概率时，依赖于事件独立的假设。例如，我们假设抛硬币结果为正面或反面与之前的结果无关。这在数学上是方便的，但生活并不总是这样。在许多实际情况下，独立性是一个糟糕的假设。
- en: Consider the probability that a randomly chosen adult American is male and weighs
    over `197` pounds. The probability of being male is about `0.5` and the probability
    of weighing more than `197` pounds (the average weight in the U.S.[^(157)](#c21-fn-0013))
    is also about `0.5`.[^(158)](#c21-fn-0014) If these were independent events, the
    probability of the selected person being both male and weighing more than `197`
    pounds would be `0.25`. However, these events are not independent, since the average
    American male weighs about `30` pounds more than the average female. So, a better
    question to ask is 1) what is the probability of the selected person being a male,
    and 2) given that the selected person is a male, what is the probability of that
    person weighing more than `197` pounds? The notation of conditional probability
    makes it easy to say just that.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑随机选择的美国成年人是男性且体重超过`197`磅的概率。男性的概率约为`0.5`，而体重超过`197`磅（美国的平均体重[^(157)](#c21-fn-0013)）的概率也约为`0.5`。[^(158)](#c21-fn-0014)
    如果这些事件是独立的，则选定的人同时是男性且体重超过`197`磅的概率将是`0.25`。然而，这些事件并不是独立的，因为平均美国男性的体重比平均女性重约`30`磅。因此，更好的问题是1）选定的人是男性的概率是多少，以及2）在选定的人是男性的情况下，该人体重超过`197`磅的概率是多少？条件概率的符号使得这一点变得容易表达。
- en: The notation `P(A|B)` stands for the probability of `A` being true under the
    assumption that `B` is true. It is often read as “the probability of `A`, given
    `B`.” Therefore, the formula
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 符号`P(A|B)`表示在假设`B`为真的情况下`A`为真的概率。通常读作“在`B`的条件下`A`的概率”。因此，公式
- en: '![c21-fig-5006.jpg](../images/c21-fig-5006.jpg)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-5006.jpg](../images/c21-fig-5006.jpg)'
- en: expresses exactly the probability we are looking for. If `P(A)` and `P(B)` are
    independent, `P(A|B) = P(A)`. For the above example, `B` is male and `*A*` is
    weight `> 197`.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 正好表达了我们要寻找的概率。如果`P(A)`和`P(B)`是独立的，则`P(A|B) = P(A)`。在上述例子中，`B`是男性，而`*A*`是体重`>
    197`。
- en: In general, if *P*(*B*) ≠ 0,
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 一般而言，如果*P*(*B*) ≠ 0，
- en: '![c21-fig-5007.jpg](../images/c21-fig-5007.jpg)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-5007.jpg](../images/c21-fig-5007.jpg)'
- en: Like conventional probabilities, conditional probabilities always lie between
    `0` and `1`. Furthermore, if *Ā* stands for *not A*, *P*(*A*|*B*) + *P*(*Ā*|*B*)
    = 1\. People often incorrectly assume that *P*(*A*|*B*) is equal to *P*(*B*|*A*).
    There is no reason to expect this to be true. For example, the value of *P*(*Male*|*Maltese*)
    is roughly `0.5`, but *P*(*Maltese*|*Male*) is about `0.000064`.[^(159)](#c21-fn-0015)
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 像常规概率一样，条件概率总是在`0`和`1`之间。此外，如果*Ā*表示*不A*，则*P*(*A*|*B*) + *P*(*Ā*|*B*) = 1。人们常常错误地假设*P*(*A*|*B*)等于*P*(*B*|*A*)。没有理由期望这种情况成立。例如，*P*(*Male*|*Maltese*)的值大约为`0.5`，但*P*(*Maltese*|*Male*)约为`0.000064`。[^(159)](#c21-fn-0015)
- en: '**Finger exercise:** Estimate the probability that a randomly chosen American
    is both male and weighs more than `197` pounds. Assume that `50%` of the population
    is male, and that the weights of the male population are normally distributed
    with a mean of `210` pounds and a standard deviation of `30` pounds. (Hint: think
    about using the empirical rule.)'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '**指尖练习：** 估计随机选择的美国人同时是男性且体重超过`197`磅的概率。假设`50%`的人口是男性，男性的体重呈正态分布，平均为`210`磅，标准差为`30`磅。（提示：考虑使用经验法则。）'
- en: The formula *P*(*A*|*B*, *C*) stands for the probability of *A*, given that
    both *B* and *C* hold. Assuming that *B* and *C* are independent of each other,
    the definition of a conditional probability and the multiplication rule for independent
    probabilities imply that
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 公式*P*(*A*|*B*, *C*)表示在*B*和*C*均为真的条件下* A*为真的概率。假设*B*和*C*相互独立，条件概率的定义和独立概率的乘法法则表明
- en: '![c21-fig-5008.jpg](../images/c21-fig-5008.jpg)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-5008.jpg](../images/c21-fig-5008.jpg)'
- en: where the formula *P*(*A*, *B*, *C*) stands for the probability of all of *A*,
    *B*, and *C* being true.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 公式*P*(*A*, *B*, *C*)代表* A*、*B*和*C*都为真的概率。
- en: Similarly, *P*(*A*, *B*|*C*) stands for the probability of *A and B*, given
    *C*. Assuming that *A* and *B* are independent of each other
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，*P*(*A*, *B*|*C*)表示在*C*条件下* A和B*的概率。假设* A*和*B*相互独立
- en: '![c21-fig-5009.jpg](../images/c21-fig-5009.jpg)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-5009.jpg](../images/c21-fig-5009.jpg)'
- en: 21.7.2 Bayes’ Theorem
  id: totrans-155
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 21.7.2 贝叶斯定理
- en: 'Suppose that an asymptomatic woman in her forties goes for a mammogram and
    receives bad news: the mammogram is “positive.” [^(160)](#c21-fn-0016)'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 假设一位四十多岁的无症状女性去做乳腺X光检查，并收到了坏消息：乳腺X光检查结果“阳性”。[^(160)](#c21-fn-0016)
- en: The probability that a woman who has breast cancer will get a **true positive**
    result on a mammogram is `0.9`. The probability that a woman who does not have
    breast cancer will get a **false positive** on a mammogram is `0.07`.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 患有乳腺癌的女性在乳腺X光检查中得到**真实阳性**结果的概率是`0.9`。没有乳腺癌的女性在乳腺X光检查中得到**误报**的概率是`0.07`。
- en: We can use conditional probabilities to express these facts. Let
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用条件概率来表达这些事实。设
- en: '[PRE11]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Using these variables, we write the conditional probabilities
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这些变量，我们写出条件概率
- en: '[PRE12]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Given these conditional probabilities, how worried should a woman in her forties
    with a positive mammogram be? What is the probability that she actually has breast
    cancer? Is it `0.93`, since the false positive rate is `7%`? More? less?
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到这些条件概率，四十多岁女性在阳性乳腺X光检查后该多担心？她实际患乳腺癌的概率是多少？是`0.93`吗，因为误报率是`7%`？更多？更少？
- en: 'It''s a trick question: We haven''t supplied enough information to allow you
    to answer the question in a sensible way. To do that, you need to know the **prior
    probabilities** for breast cancer for a woman in her forties. The fraction of
    women in their forties who have breast cancer is `0.008 (8` out of `1000).` The
    fraction who do not have breast cancer is therefore `1 – 0.008 = 0.992`:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个技巧性问题：我们没有提供足够的信息让你以合理的方式回答问题。要做到这一点，你需要知道四十多岁女性患乳腺癌的**先验概率**。四十多岁女性患乳腺癌的比例是`0.008
    (1000中有8)`。因此，她们没有乳腺癌的比例为`1 – 0.008 = 0.992`：
- en: '[PRE13]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'We now have all the information we need to address the question of how worried
    that woman in her forties should be. To compute the probability that she has breast
    cancer we use something called **Bayes’ Theorem**[^(161)](#c21-fn-0017) (often
    called Bayes’ Law or Bayes’ Rule) :'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们拥有了解决四十多岁女性该多担心的所有信息。要计算她患乳腺癌的概率，我们使用称为**贝叶斯定理**的东西[^(161)](#c21-fn-0017)（通常称为贝叶斯法则或贝叶斯规则）：
- en: '![c21-fig-5010.jpg](../images/c21-fig-5010.jpg)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-5010.jpg](../images/c21-fig-5010.jpg)'
- en: In the Bayesian world, probability measures a **degree of belief**. Bayes' theorem
    links the degree of belief in a proposition before and after accounting for evidence.
    The formula to the left of the equal sign, `P(A|B),` is the **posterior** probability,
    the degree of belief in `A,` having accounted for `B`. The posterior is defined
    in terms of the **prior**, `P(A),` and the **support** that the evidence, `B`,
    provides for `A`. The support is the ratio of the probability of `B` holding if
    `A` holds and the probability of `B` holding independently of `A`, i.e., ![c21-fig-5011.jpg](../images/c21-fig-5011.jpg).
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 在贝叶斯世界中，概率测量的是**信念的程度**。贝叶斯定理将考虑证据前后的信念程度联系起来。等号左侧的公式`P(A|B)`是**后验**概率，即在考虑`B`后对`A`的信念程度。后验概率以**先验**`P(A)`和证据`B`对`A`提供的**支持**来定义。支持是`B`在`A`成立时的概率与`B`独立于`A`的概率之比，即![c21-fig-5011.jpg](../images/c21-fig-5011.jpg)。
- en: If we use Bayes’ Theorem to estimate the probability of the woman actually having
    breast cancer, we get (where `canc` plays the role of `A`, and `pos` the role
    of `B` in our statement of Bayes’ Theorem)
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们使用贝叶斯定理来估计这位女性实际患乳腺癌的概率，我们会得到（其中`canc`在我们的贝叶斯定理中扮演`A`的角色，`pos`则扮演`B`的角色）
- en: '![c21-fig-5012.jpg](../images/c21-fig-5012.jpg)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-5012.jpg](../images/c21-fig-5012.jpg)'
- en: The probability of having a positive test is
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 阳性检测的概率是
- en: '![c21-fig-5013.jpg](../images/c21-fig-5013.jpg)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-5013.jpg](../images/c21-fig-5013.jpg)'
- en: so
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 所以
- en: '![c21-fig-5014.jpg](../images/c21-fig-5014.jpg)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![c21-fig-5014.jpg](../images/c21-fig-5014.jpg)'
- en: That is, approximately `90%` of the positive mammograms are false positives![^(162)](#c21-fn-0018)
    Bayes’ Theorem helped us here because we had an accurate estimate of the prior
    probability of a woman in her forties having breast cancer.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 也就是说，约`90%`的阳性乳腺X光检查结果是误报![^(162)](#c21-fn-0018)。贝叶斯定理在这里帮助了我们，因为我们准确估计了四十多岁女性患乳腺癌的先验概率。
- en: Keep in mind that if we had started with an incorrect prior, incorporating that
    prior into our probability estimate would make the estimate worse rather than
    better. For example, if we had started with the prior
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，如果我们开始时使用了错误的先验，将该先验纳入我们的概率估计中，会使估计结果更糟而非更好。例如，如果我们开始时的先验是
- en: '[PRE14]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: we would have concluded that the false positive rate was about `5%`, i.e., that
    the probability of a woman in her forties with a positive mammogram having breast
    cancer is roughly `0.95`.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 我们会得出误报率大约为`5%`，即，四十多岁女性在阳性乳腺X光检查中患乳腺癌的概率大约为`0.95`。
- en: '**Finger exercise:** You are wandering through a forest and see a field of
    delicious-looking mushrooms. You fill your basket with them, and head home prepared
    to cook them up and serve them to your husband. Before you cook them, however,
    he demands that you consult a book about local mushroom species to check whether
    they are poisonous. The book says that 80% of the mushrooms in the local forest
    are poisonous. However, you compare your mushrooms to the ones pictured in the
    book, and decide that you are 95% certain that your mushrooms are safe. How comfortable
    should you be about serving them to your husband (assuming that you would rather
    not become a widow)?'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: '**指尖练习：** 你正在森林中漫步，看到一片看起来美味的蘑菇田。你用篮子装满了它们，准备回家烹饪并给丈夫端上。不过，在你烹饪之前，他要求你查阅一本关于当地蘑菇种类的书，检查它们是否有毒。书中说当地森林中80%的蘑菇是有毒的。然而，你将你的蘑菇与书中的图片进行比较，决定你有95%的把握认为这些蘑菇是安全的。你在给丈夫端上这些蘑菇时应该有多安心（假设你宁愿不成为寡妇）？'
- en: 21.8 Terms Introduced in Chapter
  id: totrans-179
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 21.8 章节中引入的术语
- en: randomized trial
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 随机试验
- en: treatment group
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 治疗组
- en: control group
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对照组
- en: statistical significance
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 统计显著性
- en: hypothesis testing
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 假设检验
- en: null hypothesis
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 零假设
- en: alternative hypothesis
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 备择假设
- en: test statistic
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检验统计量
- en: hypothesis rejection
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 假设拒绝
- en: type I error
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第一类错误
- en: type II error
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二类错误
- en: t-statistic
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: t统计量
- en: t-distribution
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: t分布
- en: degrees of freedom
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自由度
- en: p-value
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: p值
- en: scientific method
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 科学方法
- en: t-test
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: t检验
- en: power of a study
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 研究的效能
- en: two-tailed p-test
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 双尾p检验
- en: one-tailed p-test
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 单尾p检验
- en: arm of a study
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 研究的组别
- en: cherry-picking
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 樱桃采摘
- en: Bonferroni correction
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 邦费罗尼校正
- en: family-wise error rate
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 家族型错误率
- en: frequentist statistics
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 频率统计
- en: Bayesian statistics
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 贝叶斯统计
- en: conditional probability
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 条件概率
- en: true positive
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 真阳性
- en: false positive
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 假阳性
- en: prior probability
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 先验概率
- en: Bayes theorem
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 贝叶斯定理
- en: degree of belief
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 信度
- en: posterior probability
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 后验概率
- en: prior
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 先验
- en: support
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持
