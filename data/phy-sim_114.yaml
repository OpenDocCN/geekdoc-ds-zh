- en: Friction Energy and Its Derivatives
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摩擦能及其导数
- en: 原文：[https://phys-sim-book.github.io/lec22.3-fric_and_derivatives.html](https://phys-sim-book.github.io/lec22.3-fric_and_derivatives.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://phys-sim-book.github.io/lec22.3-fric_and_derivatives.html](https://phys-sim-book.github.io/lec22.3-fric_and_derivatives.html)
- en: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '`<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">`'
- en: With λ, r, and n precomputed for each friction point-edge pair, we can now conveniently
    compute the energy ([Implementation 22.3.1](#imp:lec22:fric_val)), gradient ([Implementation
    22.3.2](#imp:lec22:fric_grad)), and Hessian ([Implementation 22.3.3](#imp:lec22:fric_hess))
    of the friction potential and add them into the optimization.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 对于每个摩擦点-边缘对，我们已经预先计算了λ、r和n，现在我们可以方便地计算摩擦势能的能量（[实现 22.3.1](#imp:lec22:fric_val)）、梯度（[实现
    22.3.2](#imp:lec22:fric_grad)）和Hessian（[实现 22.3.3](#imp:lec22:fric_hess)），并将它们添加到优化中。
- en: '**Implementation 22.3.1 (Friction energy value, FrictionEnergy.py).**'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '**实现 22.3.1（摩擦能值，FrictionEnergy.py）**'
- en: '[PRE0]'
  id: totrans-5
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When computing the gradient and Hessian, we used the relative velocity v^k​
    as an intermediate variable to make the implementation more organized. This approach
    is given by: ∇Pf​(x)=k∑​(∂x∂v^k​​)T∂v^k​∂Dk​(x)​,∇2Pf​(x)=k∑​(∂x∂v^k​​)T∂v^k2​∂2Dk​(x)​∂x∂v^k​​,
    where the derivatives of Dk​ with respect to v^k​ have exactly the same forms
    as in [Frictional Contact](./lec9-friction.html).'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在计算梯度和Hessian时，我们使用了相对速度v^k作为中间变量，以使实现更加有序。这种方法给出：∇Pf(x)=k∑(∂x/∂v^k)T∂v^k/∂Dk(x)，∇2Pf(x)=k∑(∂x/∂v^k)T∂v^k2/∂2Dk(x)∂x/∂v^k，其中Dk相对于v^k的导数与[摩擦接触](./lec9-friction.html)中的形式完全相同。
- en: '**Implementation 22.3.2 (Friction energy gradient, FrictionEnergy.py).**'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '**实现 22.3.2（摩擦能梯度，FrictionEnergy.py）**'
- en: '[PRE1]'
  id: totrans-8
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '**Implementation 22.3.3 (Friction energy Hessian, FrictionEnergy.py).**'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '**实现 22.3.3（摩擦能Hessian，FrictionEnergy.py）**'
- en: '[PRE2]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'After these implementations, we can finally run our compressing squares example
    with frictional self-contact (see: [Figure 22.3.1](#fig:lec22:compress_2_squares_fric)).
    From the figure, we observe that once the two squares touch, the large friction
    between them and the ground restricts any sliding. This causes the squares to
    rotate counter-clockwise as they are compressed by the ceiling.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些实现之后，我们终于可以运行带有摩擦自接触的压缩平方示例（见：[图 22.3.1](#fig:lec22:compress_2_squares_fric)）。从图中可以看出，一旦两个正方形接触，它们之间以及与地面的较大摩擦力会限制任何滑动。这导致正方形在受到天花板的压缩时逆时针旋转。
- en: '![](../Images/6017282846460d48562d77236ce4c17e.png)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6017282846460d48562d77236ce4c17e.png)'
- en: '**Figure 22.3.1.** Two squares dropped onto the ground and compressed by a
    ceiling. The friction coefficient is 0.4 between any contacting surfaces, which
    restricts any sliding here in this scene and results in counter-clockwise rotations
    of the two squares under compression. As their interface becomes nearly vertical,
    the squares are finally detached.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '**图 22.3.1。** 两个正方形被扔到地面上，并被天花板压缩。任何接触表面的摩擦系数为 0.4，这限制了场景中的任何滑动，并导致两个正方形在压缩下逆时针旋转。当它们的界面几乎垂直时，正方形最终分离。'
