- en: 12  Linear models
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 12  线性模型
- en: 原文：[https://tellingstorieswithdata.com/12-ijalm.html](https://tellingstorieswithdata.com/12-ijalm.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://tellingstorieswithdata.com/12-ijalm.html](https://tellingstorieswithdata.com/12-ijalm.html)
- en: '[Modeling](./12-ijalm.html)'
  id: totrans-2
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[建模](./12-ijalm.html)'
- en: '[12  Linear models](./12-ijalm.html)'
  id: totrans-3
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[12  线性模型](./12-ijalm.html)'
- en: '**Prerequisites**'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '**先决条件**'
- en: Read *Regression and Other Stories*, ([Gelman, Hill, and Vehtari 2020](99-references.html#ref-gelmanhillvehtari2020))
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读 *回归及其他故事* ([Gelman, Hill, and Vehtari 2020](99-references.html#ref-gelmanhillvehtari2020))
- en: Focus on Chapters 6 “Background on regression modeling”, 7 “Linear regression
    with a single predictor”, and 10 “Linear regression with multiple predictors”,
    which provide a detailed guide to linear models.
  id: totrans-6
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重点关注第 6 章“回归建模背景”，第 7 章“单变量线性回归”和第 10 章“多变量线性回归”，这些章节提供了线性模型的详细指南。
- en: Read *An Introduction to Statistical Learning with Applications in R*, ([James
    et al. [2013] 2021](99-references.html#ref-islr))
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读 *统计学习导论及其在 R 中的应用* ([James et al. [2013] 2021](99-references.html#ref-islr))
- en: Focus on Chapter 3 “Linear Regression”, which provides a complementary treatment
    of linear models from a different perspective.
  id: totrans-8
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重点关注第 3 章“线性回归”，它从不同角度对线性模型进行了补充说明。
- en: Read *Why most published research findings are false*, ([Ioannidis 2005](99-references.html#ref-ioannidis2005most))
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读 *为什么大多数发表的研究结果都是错误的* ([Ioannidis 2005](99-references.html#ref-ioannidis2005most))
- en: Details aspects that can undermine the conclusions drawn from statistical models.
  id: totrans-10
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 详细说明可能削弱从统计模型中得出的结论的方面。
- en: '**Key concepts and skills**'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念和技能**'
- en: Linear models are a key component of statistical inference and enable us to
    quickly explore a wide range of data.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 线性模型是统计推断的关键组成部分，使我们能够快速探索广泛的数据。
- en: Simple and multiple linear regression model a continuous outcome variable as
    a function of one, and multiple, predictor variables, respectively.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 简单和多重线性回归模型分别将连续结果变量视为一个或多个预测变量的函数。
- en: Linear models tend to focus on either inference or prediction.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 线性模型往往侧重于推断或预测。
- en: '**Software and packages**'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '**软件和包**'
- en: Base R ([R Core Team 2024](99-references.html#ref-citeR))
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基础 R ([R Core Team 2024](99-references.html#ref-citeR))
- en: '`beepr` ([Bååth 2018](99-references.html#ref-beepr))'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`beepr` ([Bååth 2018](99-references.html#ref-beepr))'
- en: '`broom` ([Robinson, Hayes, and Couch 2022](99-references.html#ref-broom))'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`broom` ([Robinson, Hayes, and Couch 2022](99-references.html#ref-broom))'
- en: '`broom.mixed` ([Bolker and Robinson 2022](99-references.html#ref-mixedbroom))'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`broom.mixed` ([Bolker and Robinson 2022](99-references.html#ref-mixedbroom))'
- en: '`modelsummary` ([Arel-Bundock 2022](99-references.html#ref-citemodelsummary))'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`modelsummary` ([Arel-Bundock 2022](99-references.html#ref-citemodelsummary))'
- en: '`purrr` ([Wickham and Henry 2022](99-references.html#ref-citepurrr))'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`purrr` ([Wickham and Henry 2022](99-references.html#ref-citepurrr))'
- en: '`rstanarm` ([Goodrich et al. 2023](99-references.html#ref-citerstanarm))'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rstanarm` ([Goodrich et al. 2023](99-references.html#ref-citerstanarm))'
- en: '`testthat` ([Wickham 2011](99-references.html#ref-testthat))'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`testthat` ([Wickham 2011](99-references.html#ref-testthat))'
- en: '`tictoc` ([Izrailev 2022](99-references.html#ref-Izrailev2014))'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tictoc` ([Izrailev 2022](99-references.html#ref-Izrailev2014))'
- en: '`tidyverse` ([Wickham et al. 2019](99-references.html#ref-tidyverse))'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tidyverse` ([Wickham et al. 2019](99-references.html#ref-tidyverse))'
- en: '`tinytable` ([Arel-Bundock 2024](99-references.html#ref-tinytable))'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tinytable` ([Arel-Bundock 2024](99-references.html#ref-tinytable))'
- en: '[PRE0]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '*## 12.1 Introduction'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '*## 12.1 简介'
- en: Linear models have been used in various forms for a long time. Stigler ([1986,
    16](99-references.html#ref-stigler)) describes how least squares, which is a method
    to fit simple linear regression, was associated with foundational problems in
    astronomy in the 1700s, such as determining the motion of the moon and reconciling
    the non-periodic motion of Jupiter and Saturn. The fundamental issue at the time
    with least squares was that of hesitancy by those coming from a statistical background
    to combine different observations. Astronomers were early to develop a comfort
    with doing this, possibly because they had typically gathered their observations
    themselves and knew that the conditions of the data gathering were similar, even
    though the value of the observation was different. For instance, Stigler ([1986,
    28](99-references.html#ref-stigler)) characterizes Leonhard Euler, the eighteenth
    century mathematician mentioned in [Chapter 6](06-farm.html), as considering that
    errors increase as they are aggregated, in comparison to Tobias Mayer, the eighteenth
    century astronomer, who was comfortable that errors would cancel each other. It
    took longer, again, for social scientists to become comfortable with linear models,
    possibly because they were hesitant to group together data they worried were not
    alike. In one sense astronomers had an advantage because they could compare their
    predictions with what happened whereas this was more difficult for social scientists
    ([Stigler 1986, 163](99-references.html#ref-stigler)).
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 线性模型已经以各种形式被使用了很长时间。Stigler ([1986, 16](99-references.html#ref-stigler)) 描述了最小二乘法，这是一种拟合简单线性回归的方法，它与18世纪天文学的基础性问题有关，例如确定月亮的运动和调和木星和土星的非周期性运动。当时最小二乘法的基本问题是那些来自统计学背景的人对于结合不同观察结果的犹豫。天文学家很早就开始适应这样做，可能是因为他们通常自己收集观察数据，并且知道数据收集的条件是相似的，尽管观察的值是不同的。例如，Stigler
    ([1986, 28](99-references.html#ref-stigler)) 将18世纪的数学家Leonhard Euler描述为认为误差随着它们的聚合而增加，相比之下，18世纪的天文学家Tobias
    Mayer则认为误差会相互抵消。社会科学家适应线性模型需要更长的时间，可能是因为他们犹豫将他们担心不相似的数据分组在一起。在某种意义上，天文学家有优势，因为他们可以将他们的预测与实际发生的情况进行比较，而这对社会科学家来说更困难([Stigler
    1986, 163](99-references.html#ref-stigler))。
- en: When we build models, we are not discovering “the truth”. A model is not, and
    cannot be, a true representation of reality. We are using the model to help us
    explore and understand our data. There is no one best model, there are just useful
    models that help us learn something about the data that we have and hence, hopefully,
    something about the world from which the data were generated. When we use models,
    we are trying to understand the world, but there are constraints on the perspective
    we bring to this. We should not just throw data into a model and hope that it
    will sort it out. It will not.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们构建模型时，我们并不是在发现“真相”。模型本身并不是，也不可能是一个现实的真正代表。我们使用模型来帮助我们探索和理解我们的数据。没有一种最佳模型，只有那些能帮助我们了解我们所拥有的数据，从而，希望地，了解数据生成世界的有用模型。当我们使用模型时，我们试图理解世界，但我们对这种视角有所限制。我们不应该只是将数据扔进模型，希望它能将其整理出来。它不会。
- en: Regression is indeed an oracle, but a cruel one. It speaks in riddles and delights
    in punishing us for asking bad questions.
  id: totrans-31
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 回归确实是一个先知，但是一个残酷的先知。它用谜语说话，并乐于惩罚我们提出糟糕的问题。
- en: ''
  id: totrans-32
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: McElreath ([[2015] 2020, 162](99-references.html#ref-citemcelreath))
  id: totrans-33
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: McElreath ([[2015] 2020, 162](99-references.html#ref-citemcelreath))
- en: We use models to understand the world. We poke, push, and test them. We build
    them and rejoice in their beauty, and then seek to understand their limits and
    ultimately destroy them. It is this process that is important, it is this process
    that allows us to better understand the world; not the outcome, although they
    may be coincident. When we build models, we need to keep in mind both the world
    of the model and the broader world that we want to be able to speak about. The
    datasets that we have are often unrepresentative of real-world populations in
    certain ways. Models trained on such data are not worthless, but they are also
    not unimpeachable. To what extent does the model teach us about the data that
    we have? To what extent do the data that we have reflect the world about which
    we would like to draw conclusions? We need to keep such questions front of mind.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用模型来理解世界。我们对其进行试探、推动和测试。我们构建它们，并为其美丽而欢欣，然后寻求理解它们的局限性，最终摧毁它们。这个过程本身才是重要的，这个过程使我们能够更好地理解世界；虽然结果可能与之巧合，但结果本身并不是最重要的。当我们构建模型时，我们需要同时考虑到模型的世界以及我们想要讨论的更广泛的世界。我们拥有的数据集往往在某些方面不能代表现实世界的人口。在这样数据上训练的模型并非毫无价值，但它们也并非无可挑剔。模型在多大程度上教会了我们关于我们所拥有的数据？我们所拥有的数据在多大程度上反映了我们想要得出结论的世界？我们需要将这些疑问放在心中。
- en: A lot of statistical methods commonly used today were developed for situations
    such as astronomy and agriculture. Ronald Fisher, introduced in [Chapter 8](08-hunt.html),
    published Fisher ([[1925] 1928](99-references.html#ref-fisherresearchworkers))
    while he worked at an agricultural research institution. But many of the subsequent
    uses in the twentieth and twenty-first centuries concern applications that may
    have different properties. Statistical validity relies on assumptions, and so
    while what is taught is correct, our circumstances may not meet the starting criteria.
    Statistics is often taught as though it proceeds through some idealized process
    where a hypothesis appears, is tested against some data that similarly appears,
    and is either confirmed or not. But that is not what happens, in practice. We
    react to incentives. We dabble, guess, and test, and then follow our intuition,
    backfilling as we need. All of this is fine. But it is not a world in which a
    traditional null hypothesis, which we will get to later, holds completely. This
    means concepts such as p-values and power lose some of their meaning. While we
    need to understand these foundations, we also need to be sophisticated enough
    to know when we need to move away from them.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 今天许多常用的统计方法都是为了应对诸如天文学和农业等情境而开发的。在第8章中介绍的罗纳德·费希尔，在他担任农业研究机构工作时发表了费希尔（[[1925]
    1928](99-references.html#ref-fisherresearchworkers)）。但20世纪和21世纪许多后续的应用可能具有不同的特性。统计的有效性依赖于假设，因此虽然所教授的内容是正确的，但我们的情况可能不符合起始标准。统计学通常被教授为通过某种理想化的过程进行，其中出现一个假设，然后对其进行测试，与类似出现的数据进行比较，要么得到证实，要么不得到证实。但在实践中并非如此。我们会对激励做出反应。我们会尝试、猜测和测试，然后跟随我们的直觉，在需要时进行回溯。所有这些都很好。但这并不是一个完全符合传统零假设的世界，我们将在后面讨论。这意味着诸如p值和功效等概念失去了一些意义。虽然我们需要理解这些基础，但我们还需要足够成熟，知道何时需要偏离它们。
- en: Statistical checks are widely used in modeling. And an extensive suite of them
    is available. But automated testing of code and data is also important. For instance,
    Knutson et al. ([2022](99-references.html#ref-wakefieldestimates)) built a model
    of excess deaths in a variety of countries, to estimate the overall death toll
    from the pandemic. After initially releasing the model, which had been extensively
    manually checked for statistical issues and reasonableness, some of the results
    were reexamined and it was found that the estimates for Germany and Sweden were
    oversensitive. The authors quickly addressed the issue, but the integration of
    automated testing of expected values for the coefficients, in addition to the
    usual manual statistical checks, would go some way to enabling us to have more
    faith in the models of others.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 统计检查在建模中得到了广泛应用，并且有大量的工具可供使用。但代码和数据的自动化测试也同样重要。例如，Knutson等人（[2022](99-references.html#ref-wakefieldestimates)）建立了一个多种国家超额死亡率的模型，以估计大流行的总死亡人数。在最初发布模型后，该模型已经过广泛的手动检查，以解决统计问题和合理性，一些结果被重新审视，发现德国和瑞典的估计过于敏感。作者迅速解决了这个问题，但除了通常的手动统计检查外，对系数期望值的自动化测试将有助于我们对他人的模型有更多的信心。
- en: 'In this chapter we begin with simple linear regression, and then move to multiple
    linear regression, the difference being the number of explanatory variables that
    we allow. We go through two approaches for each of these: base R, in particular
    the `lm()` and `glm()` functions, which are useful when we want to quickly use
    the models in EDA; and `rstanarm` for when we are interested in inference. In
    general, a model is either optimized for inference or prediction. A focus on prediction
    is one of the hallmarks of machine learning. For historical reasons that has tended
    to be dominated by Python, although `tidymodels` ([Kuhn and Wickham 2020](99-references.html#ref-citeTidymodels))
    has been developed in R. Due to the need to also introduce Python, we devote the
    [Chapter 14](13-prediction.html) to various approaches focused on prediction.
    Regardless of the approach we use, the important thing to remember that we are
    just doing something akin to fancy averaging, and our results always reflect the
    biases and idiosyncrasies of the dataset.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们首先从简单的线性回归开始，然后转向多元线性回归，区别在于我们允许的解释变量数量。对于每种方法，我们都有两种方法：基础R，特别是`lm()`和`glm()`函数，当我们需要快速在EDA中使用模型时很有用；以及`rstanarm`，当我们对推理感兴趣时使用。一般来说，一个模型要么是针对推理优化，要么是针对预测。预测是机器学习的显著特征之一。由于历史原因，这通常由Python主导，尽管`tidymodels`（[Kuhn和Wickham
    2020](99-references.html#ref-citeTidymodels)）是在R中开发的。由于还需要介绍Python，我们将在第14章（13-prediction.html）中介绍各种专注于预测的方法。无论我们使用哪种方法，重要的是要记住我们只是在做一些类似复杂平均的事情，我们的结果总是反映了数据集的偏差和特殊性。
- en: Finally a note on terminology and notation. For historical and context-specific
    reasons there are a variety of terms used to describe the same idea across the
    literature. We follow Gelman, Hill, and Vehtari ([2020](99-references.html#ref-gelmanhillvehtari2020))
    and use the terms “outcome” and “predictor”, we follow the frequentist notation
    of James et al. ([[2013] 2021](99-references.html#ref-islr)), and the Bayesian
    model specification of McElreath ([[2015] 2020](99-references.html#ref-citemcelreath)).
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，关于术语和符号的说明。由于历史和上下文特定的原因，在文献中使用了各种术语来描述相同的概念。我们遵循Gelman, Hill, 和 Vehtari
    ([2020](99-references.html#ref-gelmanhillvehtari2020)）的术语“结果”和“预测”，我们遵循James等人（[[2013]
    2021](99-references.html#ref-islr)）的频率主义符号，以及McElreath（[[2015] 2020](99-references.html#ref-citemcelreath)）的贝叶斯模型规范。
- en: 12.2 Simple linear regression
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 12.2 简单线性回归
- en: 'When we are interested in the relationship of some continuous outcome variable,
    say \(y\), and some predictor variable, say \(x\), we can use simple linear regression.
    This is based on the Normal, also called “Gaussian”, distribution, but it is not
    these variables themselves that are normally distributed. The Normal distribution
    is determined by two parameters, the mean, \(\mu\), and the standard deviation,
    \(\sigma\) ([Pitman 1993, 94](99-references.html#ref-pitman)):'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们对某些连续结果变量（例如\(y\)）和某些预测变量（例如\(x\)）之间的关系感兴趣时，我们可以使用简单线性回归。这是基于正态分布，也称为“高斯”分布，但并不是这些变量本身是正态分布的。正态分布由两个参数决定，即均值\(\mu\)和标准差\(\sigma\)（[Pitman
    1993, 94](99-references.html#ref-pitman)）：
- en: \[y = \frac{1}{\sqrt{2\pi\sigma}}e^{-\frac{1}{2}z^2},\] where \(z = (x - \mu)/\sigma\)
    is the difference between \(x\) and the mean, scaled by the standard deviation.
    Altman and Bland ([1995](99-references.html#ref-Altman1995)) provide an overview
    of the Normal distribution.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: \[y = \frac{1}{\sqrt{2\pi\sigma}}e^{-\frac{1}{2}z^2},\] 其中 \(z = (x - \mu)/\sigma\)
    是 \(x\) 和均值之间的差异，按标准差进行缩放。Altman和Bland ([1995](99-references.html#ref-Altman1995)）提供了正态分布的概述。
- en: As introduced in [Appendix A](20-r_essentials.html), we use `rnorm()` to simulate
    data from the Normal distribution.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 如附录A（20-r_essentials.html）中所述，我们使用`rnorm()`来模拟正态分布的数据。
- en: '[PRE1]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '*[PRE2]*  *Here we specified 20 draws from a Normal distribution with a true
    mean, \(\mu\), of zero and a true standard deviation, \(\sigma\), of one. When
    we deal with real data, we will not know the true value of these, and we want
    to use our data to estimate them. We can create an estimate of the mean, \(\hat{\mu}\),
    and an estimate of the standard deviation, \(\hat{\sigma}\), with the following
    estimators:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE2]*  *在这里，我们指定从具有真实均值\(\mu\)为零和真实标准差\(\sigma\)为一的正态分布中抽取20个样本。当我们处理真实数据时，我们将不知道这些真实值，我们希望使用我们的数据来估计它们。我们可以使用以下估计量创建均值的估计值\(\hat{\mu}\)和标准差的估计值\(\hat{\sigma}\)：'
- en: \[ \begin{aligned} \hat{\mu} &= \frac{1}{n} \times \sum_{i = 1}^{n}x_i\\ \hat{\sigma}
    &= \sqrt{\frac{1}{n-1} \times \sum_{i = 1}^{n}\left(x_i - \hat{\mu}\right)^2}
    \end{aligned} \]
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \begin{aligned} \hat{\mu} &= \frac{1}{n} \times \sum_{i = 1}^{n}x_i\\ \hat{\sigma}
    &= \sqrt{\frac{1}{n-1} \times \sum_{i = 1}^{n}\left(x_i - \hat{\mu}\right)^2}
    \end{aligned} \]
- en: 'If \(\hat{\sigma}\) is the estimate of the standard deviation, then the standard
    error (SE) of the estimate of the mean, \(\hat{\mu}\), is:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 如果\(\hat{\sigma}\)是标准差的估计值，那么均值估计\(\hat{\mu}\)的标准误（SE）是：
- en: \[\mbox{SE}(\hat{\mu}) = \frac{\hat{\sigma}}{\sqrt{n}}.\]
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: \[\mbox{SE}(\hat{\mu}) = \frac{\hat{\sigma}}{\sqrt{n}}.\]
- en: The standard error is a comment about the estimate of the mean compared with
    the actual mean, while the standard deviation is a comment about how widely distributed
    the data are.[¹](#fn1)
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 标准误是对均值估计与实际均值之间差异的评论，而标准差是对数据分布广泛程度的评论。[¹](#fn1)
- en: We can implement these in code using our simulated data to see how close our
    estimates are.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用我们的模拟数据来实现这些，以查看我们的估计有多接近。
- en: '[PRE3]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '*Table 12.1: Estimates of the mean and standard deviation based on the simulated
    data'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '*表12.1：基于模拟数据的均值和标准差估计'
- en: '| Estimated mean | Estimated standard deviation | Estimated standard error
    |'
  id: totrans-52
  prefs: []
  type: TYPE_TB
  zh: '| 估计的均值 | 估计的标准差 | 估计的标准误 |'
- en: '| --- | --- | --- |'
  id: totrans-53
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| -0.21 | 0.91 | 0.2 |*  *We should not be too worried that our estimates are
    slightly off ([Table 12.1](#tbl-meanstdexample)), relative to the “true” mean
    and SD of 0 and 1\. We only considered 20 observations. It will typically take
    a larger number of draws before we get the expected shape, and our estimated parameters
    get close to the actual parameters, but it will almost surely happen ([Figure 12.1](#fig-normaldistributiontakingshape)).
    Wasserman ([2005, 76](99-references.html#ref-wasserman)) considers our certainty
    of this, which is due to the Law of Large Numbers, as a crowning accomplishment
    of probability, although Wood ([2015, 15](99-references.html#ref-wood)), perhaps
    more prosaically, describes it as “almost” a statement “of the obvious”!'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '| -0.21 | 0.91 | 0.2 |*  *我们不应该过于担心我们的估计值与“真实”的均值为0和标准差为1相比略有偏差([表12.1](#tbl-meanstdexample))。我们只考虑了20个观测值。通常需要更多的抽样次数才能得到预期的形状，我们的估计参数才会接近实际参数，但这几乎肯定会发生([图12.1](#fig-normaldistributiontakingshape))。Wasserman
    ([2005, 76](99-references.html#ref-wasserman))认为我们对此的确定性，这是由于大数定律，是概率学的伟大成就，尽管Wood
    ([2015, 15](99-references.html#ref-wood))可能更平实地描述它为“几乎”是“显而易见”的陈述！'
- en: '[PRE4]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '*![](../Images/c18a8cc75e9b98bb0b2e1fa69631e12a.png)'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/c18a8cc75e9b98bb0b2e1fa69631e12a.png)'
- en: 'Figure 12.1: The Normal distribution takes its familiar shape as the number
    of draws increases*  *When we use simple linear regression, we assume that our
    relationship is characterized by the variables and the parameters. If we have
    two variables, \(Y\) and \(X\), then we could characterize a linear relationship
    between these as:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.1：随着抽样次数的增加，正态分布呈现出其熟悉的形状*  *当我们使用简单线性回归时，我们假设我们的关系由变量和参数来表征。如果我们有两个变量，\(Y\)和\(X\)，那么我们可以将这些变量之间的线性关系表征为：
- en: \[ Y = \beta_0 + \beta_1 X + \epsilon. \tag{12.1}\]
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: \[ Y = \beta_0 + \beta_1 X + \epsilon. \tag{12.1}\]
- en: 'Here, there are two parameters, also referred to as coefficients: the intercept,
    \(\beta_0\), and the slope, \(\beta_1\). In [Equation 12.1](#eq-xandy) we are
    saying that the expected value of \(Y\) is \(\beta_0\) when \(X\) is 0, and that
    the expected value of \(Y\) will change by \(\beta_1\) units for every one unit
    change in \(X\). We may then take this relationship to the data that we have to
    estimate these parameters. The \(\epsilon\) is noise and accounts for deviations
    away from this relationship. It is this noise that we generally assume to be normally
    distributed, and it is this that leads to \(Y \sim N(\beta, \sigma^2)\).'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，有两个参数，也称为系数：截距，\(\beta_0\)，和斜率，\(\beta_1\)。在[方程12.1](#eq-xandy)中，我们说的是当\(X\)为0时，\(Y\)的期望值是\(\beta_0\)，并且每当\(X\)增加一个单位，\(Y\)的期望值将增加\(\beta_1\)个单位。然后我们可以将这种关系应用到我们拥有的数据中来估计这些参数。\(\epsilon\)是噪声，它解释了偏离这种关系的偏差。我们通常假设这种噪声是正态分布的，这就是导致\(Y
    \sim N(\beta, \sigma^2)\)的原因。
- en: '12.2.1 Simulated example: running times'
  id: totrans-60
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 12.2.1 模拟示例：运行时间
- en: To make this example concrete, we revisit an example from [Chapter 9](09-clean_and_prepare.html)
    about the time it takes someone to run five kilometers, compared with the time
    it takes them to run a marathon ([Figure 12.2 (a)](#fig-fivekmvsmarathon-1)).
    We specified a relationship of 8.4, as that is roughly the ratio between a five-kilometer
    run and the 42.2-kilometer distance of a marathon. To help the reader, we include
    the simulation code again here. Notice that it is the noise that is normally distributed,
    not the variables. We do not require the variables themselves to be normally distributed
    in order to use linear regression.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使这个例子具体化，我们回顾了[第9章](09-clean_and_prepare.html)中的一个例子，关于某人跑五公里所需的时间与跑马拉松所需的时间的比较([图12.2
    (a)](#fig-fivekmvsmarathon-1))。我们指定了8.4的关系，因为这大约是五公里跑和马拉松42.2公里距离的比率。为了帮助读者，我们再次在此处包含模拟代码。注意，是噪声服从正态分布，而不是变量。我们不需要变量本身服从正态分布，才能使用线性回归。
- en: '[PRE5]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '*[PRE6]'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE6]'
- en: '*![](../Images/d6d52b2bbdf1ac5cf55cfe7f068f485d.png)'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '*![图片](../Images/d6d52b2bbdf1ac5cf55cfe7f068f485d.png)*'
- en: (a) Distribution of simulated data
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: (a) 模拟数据的分布
- en: '![](../Images/1666f82a40e34673b9a88374b99805fc.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/1666f82a40e34673b9a88374b99805fc.png)'
- en: (b) With one linear best-fit line illustrating the implied relationship
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: (b) 用一条最佳拟合直线说明隐含的关系
- en: '![](../Images/7940e313f29b9b02d35627693c499fca.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7940e313f29b9b02d35627693c499fca.png)'
- en: (c) Including standard errors
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: (c) 包含标准误差
- en: 'Figure 12.2: Simulated data of the relationship between the time to run five
    kilometers and a marathon'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.2：五公里跑时间和马拉松时间之间关系的模拟数据
- en: 'In this simulated example, we know the true values of \(\beta_0\) and \(\beta_1\),
    which are zero and 8.4, respectively. But our challenge is to see if we can use
    only the data, and simple linear regression, to recover them. That is, can we
    use \(x\), which is the five-kilometer time, to produce estimates of \(y\), which
    is the marathon time, and that we denote by \(\hat{y}\) (by convention, hats are
    used to indicate that these are, or will be, estimated values) ([James et al.
    [2013] 2021, 61](99-references.html#ref-islr)):'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个模拟例子中，我们知道 \(\beta_0\) 和 \(\beta_1\) 的真实值，分别是零和8.4。但我们的挑战是看看我们是否只能使用数据，以及简单的线性回归，来恢复它们。也就是说，我们能否使用
    \(x\)，即五公里跑的时间，来产生 \(y\)，即马拉松时间的估计值，我们用 \(\hat{y}\) 表示（按照惯例，帽子用于表示这些是，或将是，估计值）([James
    等人 [2013] 2021, 61](99-references.html#ref-islr))：
- en: \[\hat{y} = \hat{\beta}_0 + \hat{\beta}_1 x.\]
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: \[\hat{y} = \hat{\beta}_0 + \hat{\beta}_1 x.\]
- en: This involves estimating values for \(\beta_0\) and \(\beta_1\). But how should
    we estimate these coefficients? Even if we impose a linear relationship there
    are many options because many straight lines could be drawn. But some of those
    lines would fit the data better than others.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 这涉及到估计 \(\beta_0\) 和 \(\beta_1\) 的值。但我们应该如何估计这些系数呢？即使我们施加线性关系，也有很多选择，因为可以画出很多直线。但其中一些直线会比其他直线更好地拟合数据。
- en: 'One way we could define a line as being “better” than another, is if it is
    as close as possible to each of the known \(x\) and \(y\) combinations. There
    are a lot of candidates for how we define as “close as possible”, but one is to
    minimize the residual sum of squares. To do this we produce estimates for \(\hat{y}\)
    based on some guesses of \(\hat{\beta}_0\) and \(\hat{\beta}_1\), given the \(x\).
    We then work out how wrong, for every observation \(i\), we were ([James et al.
    [2013] 2021, 62](99-references.html#ref-islr)):'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以定义一条线比另一条线“更好”，如果它尽可能接近每个已知的 \(x\) 和 \(y\) 组合。我们有很多关于如何定义“尽可能接近”的候选方法，但其中一种是通过最小化残差平方和。为此，我们根据
    \(x\) 的某些猜测值来产生 \(\hat{y}\) 的估计，然后计算出对于每个观察值 \(i\)，我们有多大的错误([James 等人 [2013] 2021,
    62](99-references.html#ref-islr))：
- en: \[e_i = y_i - \hat{y}_i.\]
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: \[e_i = y_i - \hat{y}_i.\]
- en: 'To compute the residual sum of squares (RSS), we sum the errors across all
    the points (taking the square to account for negative differences) ([James et
    al. [2013] 2021, 62](99-references.html#ref-islr)):'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 要计算残差平方和（RSS），我们需要对所有点上的误差进行求和（取平方以考虑负差异）([James 等人 [2013] 2021, 62](99-references.html#ref-islr))：
- en: \[\mbox{RSS} = e^2_1+ e^2_2 +\dots + e^2_n.\]
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: \[\mbox{RSS} = e^2_1+ e^2_2 +\dots + e^2_n.\]
- en: This results in one linear best-fit line ([Figure 12.2 (b)](#fig-fivekmvsmarathon-2)),
    but it is worth reflecting on all the assumptions and decisions that it took to
    get us to this point.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 这导致了一条最佳拟合直线([图12.2 (b)](#fig-fivekmvsmarathon-2))，但值得反思所有假设和决策，这些假设和决策使我们到达了这一点。
- en: Underpinning our use of simple linear regression is a belief that there is some
    “true” relationship between \(X\) and \(Y\). And that this is a linear function
    of \(X\). We do not, and cannot, know the “true” relationship between \(X\) and
    \(Y\). All we can do is use our sample to estimate it. But because our understanding
    depends on that sample, for every possible sample, we would get a slightly different
    relationship, as measured by the coefficients.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用简单线性回归的基础是相信 \(X\) 和 \(Y\) 之间存在某种“真实”的关系。并且这是 \(X\) 的线性函数。我们不知道，也不可能知道 \(X\)
    和 \(Y\) 之间的“真实”关系。我们所能做的就是用我们的样本来估计它。但由于我们的理解依赖于这个样本，对于每一个可能的样本，我们会得到一个略有不同的关系，这由系数来衡量。
- en: That \(\epsilon\) is a measure of our error—what does the model not know in
    the small, contained world of the dataset? But it does not tell us whether the
    model is appropriate outside of the dataset (think, by way of analogy, to the
    concepts of internal and external validity for experiments introduced in [Chapter
    8](08-hunt.html)). That requires our judgement and experience.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: \(\epsilon\) 是我们误差的度量——在数据集的小型、封闭世界中，模型不知道什么？但它并没有告诉我们模型是否适合数据集之外（通过类比，想想第 8
    章中引入的实验的内效性和外效性概念）。这需要我们的判断和经验。
- en: We can conduct simple linear regression with `lm()` from base R. We specify
    the outcome variable first, then `~`, followed by the predictor. The outcome variable
    is the variable of interest, while the predictor is the basis on which we consider
    that variable. Finally, we specify the dataset.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用来自基础 R 的 `lm()` 函数进行简单线性回归。我们首先指定结果变量，然后是 `~`，接着是预测变量。结果变量是我们感兴趣的变量，而预测变量是我们考虑该变量的基础。最后，我们指定数据集。
- en: Before we run a regression, we may want to include a quick check of the class
    of the variables, and the number of observations, just to ensure that it corresponds
    with what we were expecting, although we may have done that earlier in the workflow.
    And after we run it, we may check that our estimate seems reasonable. For instance,
    (pretending that we had not ourselves imposed this in the simulation) based on
    our knowledge of the respective distances of a five-kilometer run and a marathon,
    we would expect \(\beta_1\) to be somewhere between six and ten.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们运行回归之前，我们可能想要快速检查变量的类别和观测数，以确保它符合我们的预期，尽管我们可能在工作流程的早期已经做过这样的事情。运行之后，我们可能检查我们的估计是否合理。例如，（假设我们自己在模拟中没有强加这个条件）根据我们对五公里跑和马拉松距离的了解，我们预计
    \(\beta_1\) 应该在六到十之间。
- en: '[PRE7]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '*To quickly see the result of the regression, we can use `summary()`.'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '*为了快速查看回归结果，我们可以使用 `summary()`。'
- en: '[PRE8]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '*[PRE9]*  *But we can also use `modelsummary()` from `modelsummary` ([Table 12.2](#tbl-modelsummaryfivekmonly)).
    The advantage of that approach is that we get a nicely formatted table. We focus
    initially on those results in the “Five km only” column.'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE9]*  *但我们也可以使用来自 `modelsummary` 的 `modelsummary()` 函数([表 12.2](#tbl-modelsummaryfivekmonly))。这种方法的优点是我们可以得到一个格式良好的表格。我们最初关注“仅五公里”这一列的结果。'
- en: '[PRE10]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '*Table 12.2: Explaining marathon times based on five-kilometer run times'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '*表 12.2：根据五公里跑时间解释马拉松时间'
- en: '|  | Five km only | Five km only, centered |'
  id: totrans-89
  prefs: []
  type: TYPE_TB
  zh: '|  | 仅五公里 | 五公里，中心化 |'
- en: '| --- | --- | --- |'
  id: totrans-90
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| (Intercept) | 4.47 | 185.73 |'
  id: totrans-91
  prefs: []
  type: TYPE_TB
  zh: '| (Intercept) | 4.47 | 185.73 |'
- en: '|  | (6.75) | (1.23) |'
  id: totrans-92
  prefs: []
  type: TYPE_TB
  zh: '|  | (6.75) | (1.23) |'
- en: '| five_km_time | 8.20 |  |'
  id: totrans-93
  prefs: []
  type: TYPE_TB
  zh: '| five_km_time | 8.20 |  |'
- en: '|  | (0.30) |  |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
  zh: '|  | (0.30) |  |'
- en: '| centered_time |  | 8.20 |'
  id: totrans-95
  prefs: []
  type: TYPE_TB
  zh: '| centered_time |  | 8.20 |'
- en: '|  |  | (0.30) |'
  id: totrans-96
  prefs: []
  type: TYPE_TB
  zh: '|  |  | (0.30) |'
- en: '| Num.Obs. | 200 | 200 |'
  id: totrans-97
  prefs: []
  type: TYPE_TB
  zh: '| Num.Obs. | 200 | 200 |'
- en: '| R2 | 0.790 | 0.790 |'
  id: totrans-98
  prefs: []
  type: TYPE_TB
  zh: '| R2 | 0.790 | 0.790 |'
- en: '| R2 Adj. | 0.789 | 0.789 |'
  id: totrans-99
  prefs: []
  type: TYPE_TB
  zh: '| R2 Adj. | 0.789 | 0.789 |'
- en: '| AIC | 1714.7 | 1714.7 |'
  id: totrans-100
  prefs: []
  type: TYPE_TB
  zh: '| AIC | 1714.7 | 1714.7 |'
- en: '| BIC | 1724.6 | 1724.6 |'
  id: totrans-101
  prefs: []
  type: TYPE_TB
  zh: '| BIC | 1724.6 | 1724.6 |'
- en: '| Log.Lik. | -854.341 | -854.341 |'
  id: totrans-102
  prefs: []
  type: TYPE_TB
  zh: '| Log.Lik. | -854.341 | -854.341 |'
- en: '| F | 745.549 | 745.549 |'
  id: totrans-103
  prefs: []
  type: TYPE_TB
  zh: '| F | 745.549 | 745.549 |'
- en: '| RMSE | 17.34 | 17.34 |*  *The top half of [Table 12.2](#tbl-modelsummaryfivekmonly)
    provides our estimated coefficients and standard errors in brackets. And the second
    half provides some useful diagnostics, which we will not dwell too much in this
    book. The intercept in the “Five km only” column is the marathon time associated
    with a hypothetical five-kilometer time of zero minutes. Hopefully this example
    illustrates the need to always interpret the intercept coefficient carefully.
    And to disregard it at times. For instance, in this circumstance, we know that
    the intercept should be zero, and it is just being set to around four because
    that is the best fit given all the observations were for five-kilometer times
    between 15 and 30.'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '| RMSE | 17.34 | 17.34 |*   *[表12.2](#tbl-modelsummaryfivekmonly)的上半部分提供了我们的估计系数和括号中的标准误差。下半部分提供了一些有用的诊断信息，我们在这本书中不会过多地讨论。在“仅五公里”列中的截距是与假设的五公里时间为零分钟的马拉松时间相关。希望这个例子说明了始终仔细解释截距系数的必要性。有时甚至可以忽略它。例如，在这种情况下，我们知道截距应该是零，但它被设置为大约四，因为这是所有观察值都在15到30分钟的五公里时间范围内的最佳拟合。*'
- en: The intercept becomes more interpretable when we run the regression using centered
    five-kilometer time, which we do in the “Five km only, centered” column of [Table 12.2](#tbl-modelsummaryfivekmonly).
    That is, for each of the five-kilometer times we subtract the mean five-kilometer
    time. In this case, the intercept is interpreted as the expected marathon time
    for someone who runs five kilometers in the average time. Notice that the slope
    estimate is unchanged it is only the intercept that has changed.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们使用中心化的五公里时间进行回归分析时，截距变得更加可解释，这是我们在[表12.2的“仅五公里，中心化”列中进行的](#tbl-modelsummaryfivekmonly)。也就是说，对于每个五公里时间，我们减去平均五公里时间。在这种情况下，截距被解释为跑五公里平均时间的跑步者的预期马拉松时间。请注意，斜率估计没有改变，只是截距发生了变化。
- en: '[PRE11]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '*Following Gelman, Hill, and Vehtari ([2020, 84](99-references.html#ref-gelmanhillvehtari2020))
    we recommend considering the coefficients as comparisons, rather than effects.
    And to use language that makes it clear these are comparisons, on average, based
    on one dataset. For instance, we may consider that the coefficient on the five-kilometer
    run time shows how different individuals compare. When comparing the marathon
    times of individuals in our dataset whose five-kilometer run time differed by
    one minute, on average we find their marathon times differ by about eight minutes.
    This makes sense seeing as a marathon is roughly that many times longer than a
    five-kilometer run.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '*根据Gelman、Hill和Vehtari（[2020，第84页](99-references.html#ref-gelmanhillvehtari2020)）的建议，我们建议将系数视为比较，而不是效应。并且使用明确表明这些是比较的语言，平均而言，基于一个数据集。例如，我们可能会考虑五公里跑步时间系数显示了不同个体之间的差异。当比较我们数据集中五公里跑步时间相差一分钟的个体的马拉松时间时，我们发现他们的马拉松时间平均相差大约八分钟。考虑到马拉松大约是五公里跑步长度的那么多倍，这是有道理的。'
- en: We can use `augment()` from `broom` to add the fitted values and residuals to
    our original dataset. This allows us to plot the residuals ([Figure 12.3](#fig-fivekmvsmarathonresids)).
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用`broom`包中的`augment()`函数将拟合值和残差添加到我们的原始数据集中。这允许我们绘制残差图（[图12.3](#fig-fivekmvsmarathonresids)）。
- en: '[PRE12]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '*[PRE13]'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE13]*'
- en: '*![](../Images/c56a1fca3a39029728c9ed8c04389dea.png)'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '*![图片](../Images/c56a1fca3a39029728c9ed8c04389dea.png)*'
- en: (a) Distribution of residuals
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: (a) 残差的分布
- en: '![](../Images/91075e1aa5c4f427bea226709870c0af.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '*![图片](../Images/91075e1aa5c4f427bea226709870c0af.png)*'
- en: (b) Residuals by five-kilometer time
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: (b) 按五公里时间计算的残差
- en: '![](../Images/487f0eab1ad67aeb47771dabb3241656.png)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '*![图片](../Images/487f0eab1ad67aeb47771dabb3241656.png)*'
- en: (c) Residuals by marathon time
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: (c) 按马拉松时间计算的残差
- en: '![](../Images/df3ac721bd9b3972ba7169b3f1fe8daf.png)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '*![图片](../Images/df3ac721bd9b3972ba7169b3f1fe8daf.png)*'
- en: (d) Comparing the estimated time with the actual time
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: (d) 比较估计时间与实际时间
- en: 'Figure 12.3: Residuals from the simple linear regression with simulated data
    on the time someone takes to run five kilometers and a marathon'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.3：基于模拟数据对某人跑五公里和马拉松所需时间的简单线性回归的残差
- en: We want to try to speak to the “true” relationship, so we need to try to capture
    how much we think our understanding depends on the sample that we have to analyze.
    And this is where the standard error comes in. It guides us, based on many assumptions,
    about how to think about the estimates of parameters based on the data that we
    have ([Figure 12.2 (c)](#fig-fivekmvsmarathon-3)). Part of this is captured by
    the fact that standard errors are a function of sample size \(n\), and as the
    sample size increases, the standard errors decrease.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 我们想要尝试表达“真实”的关系，因此我们需要尝试捕捉我们认为我们的理解依赖于我们必须要分析的样本的程度。这就是标准误差发挥作用的地方。它基于许多假设，指导我们如何思考基于我们拥有的数据对参数估计的看法（[图12.2
    (c)](#fig-fivekmvsmarathon-3)）。这部分内容部分地被以下事实所捕捉，即标准误差是样本大小\(n\)的函数，并且随着样本大小的增加，标准误差会减小。
- en: The most common way to summarize the range of uncertainty for a coefficient
    is to transform its standard error into a confidence interval. These intervals
    are often misunderstood to represent a statement of probability about a given
    realization of the coefficients (i.e. \(\hat\beta\)). In reality, confidence intervals
    are a statistic whose properties can only be understood “in expectation” (which
    is equivalent to repeating an experiment many times). A 95 per cent confidence
    interval is a range, such that there is “approximately a 95 per cent chance that
    the” range contains the population parameter, which is typically unknown ([James
    et al. [2013] 2021, 66](99-references.html#ref-islr)).
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 总结系数的不确定性范围的最常见方法是将其标准误差转换为置信区间。这些区间通常被误解为关于系数给定实现的概率陈述（即\(\hat\beta\)）。实际上，置信区间是一个统计量，其性质只能在“期望”下（这相当于重复实验多次）才能理解。95%置信区间是一个范围，其中“大约有95%的机会”该范围包含总体参数，这通常是未知的（[James等人[2013]
    2021, 66](99-references.html#ref-islr)）。
- en: When the coefficient follows a Normal distribution, the lower and upper end
    of a 95 per cent confidence interval range will be about \(\hat{\beta_1} \pm 2
    \times \mbox{SE}\left(\hat{\beta_1}\right)\). For instance, in the case of the
    marathon time example, the lower end is \(8.2 - 2 \times 0.3 = 7.6\) and the upper
    end is \(8.2 + 2 \times 0.3 = 8.8\), and the true value (which we only know in
    this case because we simulated it) is 8.4.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 当系数遵循正态分布时，95%置信区间的上下限将大约是\(\hat{\beta_1} \pm 2 \times \mbox{SE}\left(\hat{\beta_1}\right)\)。例如，在马拉松时间示例中，下限是\(8.2
    - 2 \times 0.3 = 7.6\)，上限是\(8.2 + 2 \times 0.3 = 8.8\)，而真实值（在这个案例中我们只知道，因为我们模拟了它）是8.4。
- en: We can use this machinery to test claims. For instance, we could claim that
    there is no relationship between \(X\) and \(Y\), i.e. \(\beta_1 = 0\), as an
    alternative to a claim that there is some relationship between \(X\) and \(Y\),
    i.e. \(\beta_1 \neq 0\). This is the null hypothesis testing approach mentioned
    earlier. In [Chapter 8](08-hunt.html) we needed to decide how much evidence it
    would take to convince us that our tea taster could distinguish whether milk or
    tea had been added first. In the same way, here we need to decide if the estimate
    of \(\beta_1\), which we denote as \(\hat{\beta}_1\), is far enough away from
    zero for us to be comfortable claiming that \(\beta_1 \neq 0\). If we were very
    confident in our estimate of \(\beta_1\) then it would not have to be far, but
    if we were not, then it would have to be substantial. For instance, if the confidence
    interval contains zero, then we lack evidence to suggest \(\beta_1 \neq 0\). The
    standard error of \(\hat{\beta}_1\) does an awful lot of work here in accounting
    for a variety of factors, only some of which it can actually account for, as does
    our choice as to what it would take to convince us.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用这个机制来测试主张。例如，我们可以主张\(X\)和\(Y\)之间没有关系，即\(\beta_1 = 0\)，作为对\(X\)和\(Y\)之间存在某种关系的另一种主张，即\(\beta_1
    \neq 0\)。这就是前面提到的零假设检验方法。在[第8章](08-hunt.html)中，我们需要决定需要多少证据才能让我们相信我们的茶品鉴师能够区分牛奶和茶哪个先加。同样，在这里，我们需要决定\(\beta_1\)的估计值，我们称之为\(\hat{\beta}_1\)，是否足够远离零，以至于我们可以舒适地声称\(\beta_1
    \neq 0\)。如果我们对我们的\(\beta_1\)的估计非常有信心，那么它不需要太远，但如果我们没有，那么它就必须是显著的。例如，如果置信区间包含零，那么我们就缺乏证据来表明\(\beta_1
    \neq 0\)。\(\hat{\beta}_1\)的标准误差在这里做了大量的工作，它考虑了各种因素，其中只有一部分它实际上可以解释，正如我们选择需要多少证据才能让我们信服一样。
- en: 'We use this standard error and \(\hat{\beta}_1\) to get the “test statistic”
    or t-statistic:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用这个标准误差和\(\hat{\beta}_1\)来得到“检验统计量”或t统计量：
- en: \[t = \frac{\hat{\beta}_1}{\mbox{SE}(\hat{\beta}_1)}.\]
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: \[t = \frac{\hat{\beta}_1}{\mbox{SE}(\hat{\beta}_1)}.\]
- en: And we then compare our t-statistic to the t-distribution of Student ([1908](99-references.html#ref-student1908probable))
    to compute the probability of getting this absolute t-statistic or a larger one,
    if it was the case that \(\beta_1 = 0\). This probability is the p-value. A smaller
    p-value means there is a smaller “probability of observing something at least
    as extreme as the observed test statistic” ([Gelman, Hill, and Vehtari 2020, 57](99-references.html#ref-gelmanhillvehtari2020)).
    Here we use the t-distribution of Student ([1908](99-references.html#ref-student1908probable))
    rather than the Normal distribution, because the t-distribution has slightly larger
    tails than a standard Normal distribution.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们将我们的t统计量与Student的t分布([1908](99-references.html#ref-student1908probable))进行比较，以计算得到这个绝对t统计量或更大统计量的概率，如果假设\(\beta_1
    = 0\)成立的话。这个概率就是p值。较小的p值意味着观察到的“至少与测试统计量一样极端的观察结果”的概率较小 ([Gelman, Hill, and Vehtari
    2020, 57](99-references.html#ref-gelmanhillvehtari2020))。在这里，我们使用Student的t分布([1908](99-references.html#ref-student1908probable))而不是正态分布，因为t分布的尾部比标准正态分布略大。
- en: Words! Mere words! How terrible they were! How clear, and vivid, and cruel!
    One could not escape from them. And yet what a subtle magic there was in them!
    They seemed to be able to give a plastic form to formless things, and to have
    a music of their own as sweet as that of viol or of lute. Mere words! Was there
    anything so real as words?
  id: totrans-127
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 词语！仅仅是词语！多么可怕！多么清晰、生动和残酷！人们无法逃避它们。然而，它们中又有着多么微妙的魔力！它们似乎能够赋予无形之物以形态，并且拥有自己独特的音乐，如同小提琴或鲁特琴般甜美。仅仅是词语！还有什么比词语更真实吗？
- en: ''
  id: totrans-128
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '*The Picture of Dorian Gray* ([Wilde 1891](99-references.html#ref-wilde)).'
  id: totrans-129
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*《道林·格雷的画像》* ([Wilde 1891](99-references.html#ref-wilde)).'
- en: We will not make much use of p-values in this book because they are a specific
    and subtle concept. They are difficult to understand and easy to abuse. Even though
    they are “little help” for “scientific inference” many disciplines are incorrectly
    fixated on them ([Nelder 1999, 257](99-references.html#ref-nelderdoesntmiss)).
    One issue is that they embody every assumption of the workflow, including everything
    that went into gathering and cleaning the data. While p-values have implications
    if all the assumptions were correct, when we consider the full data science workflow
    there are usually an awful lot of assumptions. And we do not get guidance from
    p-values about whether the assumptions are satisfied ([Greenland et al. 2016,
    339](99-references.html#ref-greenland2016statistical)).
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们将不会过多地使用p值，因为它们是一个具体而微妙的概念。它们难以理解且容易被滥用。尽管它们对“科学推断”只有“一点帮助”，但许多学科却错误地过分依赖它们
    ([Nelder 1999, 257](99-references.html#ref-nelderdoesntmiss))。一个问题在于，它们包含了工作流程中的每一个假设，包括所有用于收集和清理数据的内容。虽然如果所有假设都正确，p值确实有影响，但当考虑到完整的数据科学工作流程时，通常会有大量的假设。而且，p值并不能指导我们是否满足了这些假设
    ([Greenland et al. 2016, 339](99-references.html#ref-greenland2016statistical))。
- en: A p-value may reject a null hypothesis because the null hypothesis is false,
    but it may also be that some data were incorrectly gathered or prepared. We can
    only be sure that the p-value speaks to the hypothesis we are interested in testing
    if all the other assumptions are correct. There is nothing wrong about using p-values,
    but it is important to use them in sophisticated and thoughtful ways. Cox ([2018](99-references.html#ref-coxtalks))
    discusses what this requires.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: p值可能会因为零假设是错误的而拒绝零假设，但也可能是某些数据收集或准备不当。只有当所有其他假设都正确时，我们才能确信p值反映了我们感兴趣测试的假设。使用p值本身并没有错，但重要的是要以复杂和深思熟虑的方式使用它们。Cox
    ([2018](99-references.html#ref-coxtalks))讨论了这需要什么。
- en: One application where it is easy to see an inappropriate focus on p-values is
    in power analysis. Power, in a statistical sense, refers to probability of rejecting
    a null hypothesis that is false. As power relates to hypothesis testing, it also
    relates to sample size. There is often a worry that a study is “under-powered”,
    meaning there was not a large enough sample, but rarely a worry that, say, the
    data were inappropriately cleaned, even though we cannot distinguish between these
    based only on a p-value. As Meng ([2018](99-references.html#ref-meng2018statistical))
    and Bradley et al. ([2021](99-references.html#ref-Bradley2021)) demonstrate, a
    focus on power can blind us from our responsibility to ensure our data are high
    quality.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 在一个容易看到对p值不适当关注的例子中是功效分析。在统计意义上，功效指的是拒绝一个错误假设的概率。由于功效与假设检验相关，它也与样本量相关。人们常常担心研究“功效不足”，意味着样本量不够大，但很少担心，比如说，数据被不适当地清理了，尽管我们仅凭p值无法区分这些情况。正如Meng
    ([2018](99-references.html#ref-meng2018statistical)) 和Bradley等人 ([2021](99-references.html#ref-Bradley2021))
    所证明的，对功效的关注可能会使我们忽视确保我们的数据高质量的职责。
- en: '*Shoulders of giants* *Dr Nancy Reid is University Professor in the Department
    of Statistical Sciences at the University of Toronto. After obtaining a PhD in
    Statistics from Stanford University in 1979, she took a position as a postdoctoral
    fellow at Imperial College London. She was appointed as an assistant professor
    at the University of British Columbia in 1980, and then moved to the University
    of Toronto in 1986, where she was promoted to full professor in 1988 and served
    as department chair between 1997 and 2002 ([Staicu 2017](99-references.html#ref-Staicu2017)).
    Her research focuses on obtaining accurate inference in small-sample regimes and
    developing inferential procedures for complex models featuring intractable likelihoods.
    Cox and Reid ([1987](99-references.html#ref-cox1987parameter)) examine how re-parameterizing
    models can simplify inference, Varin, Reid, and Firth ([2011](99-references.html#ref-varin2011overview))
    surveys methods for approximating intractable likelihoods, and Reid ([2003](99-references.html#ref-reid2003asymptotics))
    overviews inferential procedures in the small-sample regime. Dr Reid was awarded
    the 1992 COPSS Presidents’ Award, the Royal Statistical Society Guy Medal in Silver
    in 2016 and in Gold in 2022, and the COPSS Distinguished Achievement Award and
    Lectureship in 2022.************  ****## 12.3 Multiple linear regression'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '*巨人的肩膀* *Nancy Reid博士是多伦多大学统计科学系的大学教授。1979年，她在斯坦福大学获得统计学博士学位后，在伦敦帝国理工学院担任博士后研究员。1980年，她在不列颠哥伦比亚大学被任命为助理教授，然后于1986年搬到多伦多大学，在那里她于1988年被提升为全职教授，并在1997年至2002年期间担任系主任
    ([Staicu 2017](99-references.html#ref-Staicu2017))。她的研究专注于在小样本情况下获得准确的推断，并开发具有难以处理的似然函数的复杂模型的推断程序。Cox和Reid
    ([1987](99-references.html#ref-cox1987parameter)) 研究了重新参数化模型如何简化推断，Varin、Reid和Firth
    ([2011](99-references.html#ref-varin2011overview)) 概述了近似难以处理的似然函数的方法，Reid ([2003](99-references.html#ref-reid2003asymptotics))
    概述了小样本情况下的推断程序。Reid博士获得了1992年的COPSS总统奖、2016年的皇家统计学会银质Guy奖章和2022年的金质Guy奖章，以及2022年的COPSS杰出成就奖和讲座奖。************  ****##
    12.3 多元线性回归'
- en: To this point we have just considered one explanatory variable. But we will
    usually have more than one. One approach would be to run separate regressions
    for each explanatory variable. But compared with separate linear regressions for
    each, adding more explanatory variables allows for associations between the outcome
    variable and the predictor variable of interest to be assessed while adjusting
    for other explanatory variables. The results can be quite different, especially
    when the explanatory variables are correlated with each other.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们只考虑了一个解释变量。但通常我们会考虑不止一个。一种方法是为每个解释变量运行单独的回归分析。但与为每个变量单独进行线性回归相比，增加更多的解释变量允许在调整其他解释变量的同时评估结果变量与感兴趣预测变量之间的关联。结果可能会有很大不同，尤其是当解释变量之间相互关联时。
- en: 'We may also like to consider explanatory variables that are not continuous.
    For instance: pregnant or not; day or night. When there are only two options then
    we can use a binary variable, which is considered either 0 or 1\. If we have a
    column of character values that only has two values, such as: `c("Myles", "Ruth",
    "Ruth", "Myles", "Myles", "Ruth")`, then using this as an explanatory variable
    in the usual regression set-up would mean that it is treated as a binary variable.
    If there are more than two levels, then we can use a combination of binary variables,
    where some baseline outcome gets integrated into the intercept.'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可能希望考虑非连续的解释变量。例如：怀孕与否；白天或夜晚。当只有两种选择时，我们可以使用二元变量，这被视为0或1。如果我们有一列只有两个值的字符值，例如：`c("Myles",
    "Ruth", "Ruth", "Myles", "Myles", "Ruth")`，那么在通常的回归设置中将它用作解释变量意味着它被视为二元变量。如果有超过两个级别，那么我们可以使用二元变量的组合，其中一些基线结果被整合到截距中。
- en: '12.3.1 Simulated example: running times with rain and humidity'
  id: totrans-136
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 12.3.1 模拟示例：有雨和湿度的跑步时间
- en: As an example, we add whether it was raining to our simulated relationship between
    marathon and five-kilometer run times. We then specify that if it was raining,
    the individual is ten minutes slower than they otherwise would have been.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 作为例子，我们将是否下雨添加到我们模拟的马拉松和五公里跑步时间之间的关系中。然后我们指定，如果下雨，个体会比没有下雨时慢十分钟。
- en: '[PRE14]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '*We can add additional explanatory variables to `lm()` with `+`. Again, we
    will include a variety of quick tests for class and the number of observations,
    and add another about missing values. We may not have any idea what the coefficient
    of rain should be, but if we did not expect it to make them faster, then we could
    also add a test of that with a wide interval of non-negative values.'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: '*我们可以使用`+`向`lm()`函数添加额外的解释变量。同样，我们将包括一系列针对类别和观测数目的快速测试，并添加一个关于缺失值的测试。我们可能不知道雨的系数应该是多少，但如果我们预期它不会使它们更快，那么我们也可以添加一个测试，使用广泛的非负值区间。'
- en: '[PRE15]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '*[PRE16]*  *The result, in the second column of [Table 12.3](#tbl-modelsummaryruntimes),
    shows that when we compare individuals in our dataset who ran in the rain with
    those who did not, the ones in the rain tended to have a slower time. And this
    corresponds with what we expect if we look at a plot of the data ([Figure 12.4
    (a)](#fig-fivekmvsmarathonbinary-1)).'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE16]* *结果，在[表12.3](#tbl-modelsummaryruntimes)的第二列显示，当我们比较数据集中下雨跑步和没有下雨的人时，下雨的人往往跑得慢。这与我们查看数据图（[图12.4
    (a)](#fig-fivekmvsmarathonbinary-1)）时预期的相符。'
- en: We have included two types of tests here. The ones run before `lm()` check inputs,
    and the ones run after `lm()` check outputs. We may notice that some of the input
    checks are the same as earlier. One way to avoid having to rewrite tests many
    times would be to install and load `testthat` to create a suite of tests of class
    in say an R file called “class_tests.R”, which are then called using `test_file()`.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在这里包括了两种类型的测试。在`lm()`之前运行的检查输入，以及在`lm()`之后运行的检查输出。我们可能会注意到一些输入检查与之前相同。避免多次重写测试的一种方法是将`testthat`安装并加载到名为“class_tests.R”的R文件中，创建一系列针对类别的测试，然后使用`test_file()`调用。
- en: For instance, we could save the following as “test_class.R” in a dedicated tests
    folder.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我们可以将以下内容保存为“test_class.R”，在一个专门的测试文件夹中。
- en: '[PRE17]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '*We could save the following as “test_observations.R”'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '*我们可以将以下内容保存为“test_observations.R”。'
- en: '[PRE18]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '*And finally, we could save the following as “test_coefficient_estimates.R”.'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '*最后，我们可以将以下内容保存为“test_coefficient_estimates.R”。'
- en: '[PRE19]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '*We could then change the regression code to call these test files rather than
    write them all out.'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '*然后我们可以更改回归代码，使其调用这些测试文件，而不是全部写出来。'
- en: '[PRE20]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '*It is important to be clear about what we are looking for in the checks of
    the coefficients. When we simulate data, we put in place reasonable guesses for
    what the data could look like, and it is similarly reasonable guesses that we
    test. A failing test is not necessarily a reason to go back and change things,
    but instead a reminder to look at what is going on in both, and potentially update
    the test if necessary.'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '*在检查系数时，我们必须清楚我们想要寻找什么。当我们模拟数据时，我们为数据可能看起来像什么放置合理的猜测，并且我们测试的也是类似的合理猜测。失败的测试不一定是返回并更改事物的理由，而是一个提醒，要查看两者中发生的事情，并在必要时可能更新测试。'
- en: In addition to wanting to include additional explanatory variables, we may think
    that they are related to each another. For instance, maybe rain really matters
    if it is also humid that day. We are interested in the humidity and temperature,
    but also how those two variables interact ([Figure 12.4 (b)](#fig-fivekmvsmarathonbinary-2)).
    We can do this by using `*` instead of `+` when we specify the model. When we
    interact variables in this way, then we almost always need to include the individual
    variables as well and `lm()` will do this by default. The result is contained
    in the third column of [Table 12.3](#tbl-modelsummaryruntimes).
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 除了想要包含额外的解释变量外，我们还可能认为它们彼此相关。例如，如果那天也是潮湿的，那么下雨可能真的很重要。我们对湿度和温度感兴趣，但还想知道这两个变量如何相互作用([图12.4
    (b)](#fig-fivekmvsmarathonbinary-2))。我们可以通过在指定模型时使用`*`而不是`+`来实现这一点。当我们以这种方式交互变量时，我们几乎总是需要包括单个变量，而`lm()`会默认这样做。结果包含在[表12.3](#tbl-modelsummaryruntimes)的第三列中。
- en: '[PRE21]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '*[PRE22]'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE22]'
- en: '*![](../Images/88da1c1e219bd39c10a011e38685a4e7.png)'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/88da1c1e219bd39c10a011e38685a4e7.png)'
- en: (a) Only whether it was raining
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: (a) 只有是否下雨
- en: '![](../Images/2687af827b407a267f1cc049c3f6115a.png)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2687af827b407a267f1cc049c3f6115a.png)'
- en: (b) Whether it was raining and the level of humidity
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: (b) 是否下雨和湿度水平
- en: 'Figure 12.4: Simple linear regression with simulated data on the time someone
    takes to run five kilometers and a marathon, depending on the weather*  *[PRE23]'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.4：基于天气的模拟数据对某人跑五公里和马拉松所需时间的简单线性回归*  *[PRE23]
- en: '*Table 12.3: Explaining marathon times based on five-kilometer run times and
    weather features'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '*表12.3：根据五公里跑时间和天气特征解释马拉松成绩'
- en: '|  | Five km only | Add rain | Add humidity |'
  id: totrans-161
  prefs: []
  type: TYPE_TB
  zh: '|  | 五公里跑 | 添加降雨 | 添加湿度 |'
- en: '| --- | --- | --- | --- |'
  id: totrans-162
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| (Intercept) | 4.47 | 3.88 | 20.68 |'
  id: totrans-163
  prefs: []
  type: TYPE_TB
  zh: '| (Intercept) | 4.47 | 3.88 | 20.68 |'
- en: '|  | (6.75) | (6.84) | (7.12) |'
  id: totrans-164
  prefs: []
  type: TYPE_TB
  zh: '|  | (6.75) | (6.84) | (7.12) |'
- en: '| five_km_time | 8.20 | 8.22 | 8.24 |'
  id: totrans-165
  prefs: []
  type: TYPE_TB
  zh: '| five_km_time | 8.20 | 8.22 | 8.24 |'
- en: '|  | (0.30) | (0.30) | (0.31) |'
  id: totrans-166
  prefs: []
  type: TYPE_TB
  zh: '|  | (0.30) | (0.30) | (0.31) |'
- en: '| was_rainingYes |  | 11.88 | 11.00 |'
  id: totrans-167
  prefs: []
  type: TYPE_TB
  zh: '| was_rainingYes |  | 11.88 | 11.00 |'
- en: '|  |  | (3.22) | (6.36) |'
  id: totrans-168
  prefs: []
  type: TYPE_TB
  zh: '|  |  | (3.22) | (6.36) |'
- en: '| humidityLow |  |  | -18.01 |'
  id: totrans-169
  prefs: []
  type: TYPE_TB
  zh: '| humidityLow |  |  | -18.01 |'
- en: '|  |  |  | (3.45) |'
  id: totrans-170
  prefs: []
  type: TYPE_TB
  zh: '|  |  |  | (3.45) |'
- en: '| was_rainingYes × humidityLow |  |  | 0.92 |'
  id: totrans-171
  prefs: []
  type: TYPE_TB
  zh: '| was_rainingYes × humidityLow |  |  | 0.92 |'
- en: '|  |  |  | (7.47) |'
  id: totrans-172
  prefs: []
  type: TYPE_TB
  zh: '|  |  |  | (7.47) |'
- en: '| Num.Obs. | 200 | 200 | 200 |'
  id: totrans-173
  prefs: []
  type: TYPE_TB
  zh: '| Num.Obs. | 200 | 200 | 200 |'
- en: '| R2 | 0.790 | 0.791 | 0.795 |'
  id: totrans-174
  prefs: []
  type: TYPE_TB
  zh: '| R2 | 0.790 | 0.791 | 0.795 |'
- en: '| R2 Adj. | 0.789 | 0.789 | 0.791 |'
  id: totrans-175
  prefs: []
  type: TYPE_TB
  zh: '| R2 Adj. | 0.789 | 0.789 | 0.791 |'
- en: '| AIC | 1714.7 | 1716.3 | 1719.4 |'
  id: totrans-176
  prefs: []
  type: TYPE_TB
  zh: '| AIC | 1714.7 | 1716.3 | 1719.4 |'
- en: '| BIC | 1724.6 | 1729.5 | 1739.2 |'
  id: totrans-177
  prefs: []
  type: TYPE_TB
  zh: '| BIC | 1724.6 | 1729.5 | 1739.2 |'
- en: '| Log.Lik. | -854.341 | -854.169 | -853.721 |'
  id: totrans-178
  prefs: []
  type: TYPE_TB
  zh: '| Log.Lik. | -854.341 | -854.169 | -853.721 |'
- en: '| F | 745.549 | 372.836 | 189.489 |'
  id: totrans-179
  prefs: []
  type: TYPE_TB
  zh: '| F | 745.549 | 372.836 | 189.489 |'
- en: '| RMSE | 17.34 | 17.32 | 17.28 |*  *There are a variety of threats to the validity
    of linear regression estimates, and aspects to think about, particularly when
    using an unfamiliar dataset. We need to address these when we use it, and usually
    graphs and associated text are sufficient to assuage most of them. Aspects of
    concern include:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: '| RMSE | 17.34 | 17.32 | 17.28 |*  *线性回归估计的有效性存在各种威胁，需要考虑的方面，尤其是当使用不熟悉的数据库时。当我们使用它时，我们需要解决这些问题，通常图表和相关文本足以减轻大多数问题。需要关注的方面包括：'
- en: Linearity of explanatory variables. We are concerned with whether the predictors
    enter in a linear way. We can usually be convinced there is enough linearity in
    our explanatory variables for our purposes by using graphs of the variables.
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '解释变量的线性。我们关心预测变量是否以线性方式进入。我们可以通过使用变量的图来说服自己，我们的解释变量在我们的目的上通常有足够的线性。 '
- en: Homoscedasticity of errors. We are concerned that the errors are not becoming
    systematically larger or smaller throughout the sample. If that is happening,
    then we term it heteroscedasticity. Again, graphs of errors, such as [Figure 12.3
    (b)](#fig-fivekmvsmarathonresids-2), are used to convince us of this.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 错误的同方差性。我们担心误差在整个样本中不是系统地变大或变小。如果发生这种情况，我们称之为异方差性。同样，错误图，如[图12.3 (b)](#fig-fivekmvsmarathonresids-2)，被用来让我们相信这一点。
- en: Independence of errors. We are concerned that the errors are not correlated
    with each other. For instance, if we are interested in weather-related measurement
    such as average daily temperature, then we may find a pattern because the temperature
    on one day is likely similar to the temperature on another. We can be convinced
    that we have satisfied this condition by looking at the residuals compared with
    observed values, such as [Figure 12.3 (c)](#fig-fivekmvsmarathonresids-3), or
    estimates compared with actual outcomes, such as [Figure 12.3 (d)](#fig-fivekmvsmarathonresids-4).
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 错误的独立性。我们担心误差之间不是相互独立的。例如，如果我们对与天气相关的测量感兴趣，比如平均每日温度，那么我们可能会发现一个模式，因为某一天的温度很可能与另一天的温度相似。我们可以通过查看残差与观测值相比，例如[图12.3(c)](#fig-fivekmvsmarathonresids-3)，或者估计值与实际结果相比，例如[图12.3(d)](#fig-fivekmvsmarathonresids-4)，来确信我们已经满足了这一条件。
- en: Outliers and other high-impact observations. Finally, we might be worried that
    our results are being driven by a handful of observations. For instance, thinking
    back to [Chapter 5](05-graphs_tables_maps.html) and Anscombe’s Quartet, we notice
    that linear regression estimates would be heavily influenced by the inclusion
    of one or two particular points. We can become comfortable with this by considering
    our analysis on various subsets. For instance, randomly removing some observation
    in the way we did to the US states in [Chapter 11](11-eda.html).
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 异常值和其他高影响观测。最后，我们可能会担心我们的结果是由少数观测驱动的。例如，回想一下[第5章](05-graphs_tables_maps.html)和安斯康姆的四重奏，我们会注意到线性回归估计会受到包含一个或两个特定点的影响。通过考虑我们的分析在各个子集上的情况，我们可以对此感到满意。例如，随机移除一些观测，就像我们在[第11章](11-eda.html)中对美国各州所做的那样。
- en: Those aspects are statistical concerns and relate to whether the model is working.
    The most important threat to validity and hence the aspect that must be addressed
    at some length, is whether this model is directly relevant to the research question
    of interest.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 这些方面是统计问题，与模型是否有效相关。对有效性构成的最重要威胁，因此必须详细解决的问题，是模型是否直接与感兴趣的研究问题相关。
- en: '*Shoulders of giants* *Dr Daniela Witten is the Dorothy Gilford Endowed Chair
    of Mathematical Statistics and Professor of Statistics & Biostatistics at the
    University of Washington. After taking a PhD in Statistics from Stanford University
    in 2010, she joined the University of Washington as an assistant professor. She
    was promoted to full professor in 2018\. One active area of her research is double-dipping
    which is focused on the effect of sample splitting ([Gao, Bien, and Witten 2022](99-references.html#ref-selectiveinference)).
    She is an author of the influential *Introduction to Statistical Learning* ([James
    et al. [2013] 2021](99-references.html#ref-islr)). Witten was appointed a Fellow
    of the American Statistical Association in 2020 and awarded the COPSS Presidents’
    Award in 2022.**********  ****## 12.4 Building models'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: '*巨人的肩膀* *丹妮拉·维滕博士是华盛顿大学数学统计学的多萝西·吉尔福德捐赠教授和统计学与生物统计学教授。2010年从斯坦福大学获得统计学博士学位后，她作为助理教授加入了华盛顿大学。2018年晋升为正教授。她研究的一个活跃领域是双重抽样，专注于样本分割的影响([高、比恩和维滕
    2022](99-references.html#ref-selectiveinference))。她是影响深远的*统计学习导论*([詹姆斯等人 [2013]
    2021](99-references.html#ref-islr))的作者。维滕于2020年被任命为美国统计协会会员，并在2022年获得了COPSS总统奖。**********  ****##
    12.4 构建模型'
- en: 'Breiman ([2001](99-references.html#ref-breiman2001statistical)) describes two
    cultures of statistical modeling: one focused on inference and the other on prediction.
    In general, around the time Breiman ([2001](99-references.html#ref-breiman2001statistical))
    was published, various disciplines tended to focus on either inference or prediction.
    For instance, Jordan ([2004](99-references.html#ref-Jordan2004)) describes how
    statistics and computer science had been separate for some time, but how the goals
    of each field were becoming more closely aligned. The rise of data science, and
    in particular machine learning has meant there is now a need to be comfortable
    with both ([Neufeld and Witten 2021](99-references.html#ref-Neufeld2021)). The
    two cultures are being brought closer together, and there is an overlap and interaction
    between prediction and inference. But their separate evolution means there are
    still considerable cultural differences. As a small example of this, the term
    “machine learning” tends to be used in computer science, while the term “statistical
    learning” tends to be used in statistics, even though they usually refer to the
    same machinery.'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: Breiman ([2001](99-references.html#ref-breiman2001statistical)) 描述了统计建模的两种文化：一种侧重于推断，另一种侧重于预测。一般来说，在
    Breiman ([2001](99-references.html#ref-breiman2001statistical)) 发表的大约同一时期，各个学科倾向于关注推断或预测。例如，Jordan
    ([2004](99-references.html#ref-Jordan2004)) 描述了统计学和计算机科学曾经是分开的，但每个领域的目标正变得越来越接近。数据科学的兴起，尤其是机器学习的出现，意味着现在需要适应两者([Neufeld
    and Witten 2021](99-references.html#ref-Neufeld2021))。这两种文化正在被拉近，预测和推断之间有重叠和互动。但它们各自的发展意味着仍然存在相当大的文化差异。作为这一点的微小例子，术语“机器学习”在计算机科学中较为常见，而术语“统计学习”在统计学中较为常见，尽管它们通常指的是相同的机制。
- en: In this book we will focus on inference using the probabilistic programming
    language Stan to fit models in a Bayesian framework, and interface with it using
    `rstanarm`. Inference and forecasting have different cultures, ecosystems, and
    priorities. You should try to develop a comfort in both. One way these different
    cultures manifest is in language choice. The primary language in this book is
    R, and for the sake of consistency we focus on that here. But there is an extensive
    culture, especially but not exclusively focused on prediction, that uses Python.
    We recommend focusing on only one language and approach initially, but after developing
    that initial familiarity it is important to become multilingual. We introduce
    prediction based on Python in [Online Appendix 14](13-prediction.html).
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们将专注于使用概率编程语言 Stan 在贝叶斯框架中拟合模型，并通过 `rstanarm` 与其接口。推断和预测有不同的文化、生态系统和优先级。你应该努力在这两方面都感到舒适。这些不同文化的一种表现方式是语言选择。本书的主要语言是
    R，为了保持一致性，我们在这里关注它。但有一个广泛的文化，特别是但不仅限于预测，它使用 Python。我们建议最初只关注一种语言和方法，但在熟悉了这种初始语言后，变得多语言是非常重要的。我们在[在线附录
    14](13-prediction.html)中介绍了基于 Python 的预测。
- en: We will again not go into the details, but running a regression in a Bayesian
    setting is similar to the frequentist approach that underpins `lm()`. The main
    difference from a regression point of view, is that the parameters involved in
    the models (i.e. \(\beta_0\), \(\beta_1\), etc) are considered random variables,
    and so themselves have associated probability distributions. In contrast, the
    frequentist paradigm assumes that any randomness from these coefficients comes
    from a parametric assumption on the distribution of the error term, \(\epsilon\).
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将再次不深入细节，但在贝叶斯框架下运行回归与支撑 `lm()` 的频率主义方法类似。从回归的角度来看，主要的不同之处在于模型中涉及的参数（即 \(\beta_0\),
    \(\beta_1\) 等）被视为随机变量，因此它们自身具有相关的概率分布。相比之下，频率主义范式假设这些系数的任何随机性都来自对误差项 \(\epsilon\)
    分布的参数假设。
- en: 'Before we run a regression in a Bayesian framework, we need to decide on a
    starting probability distribution for each of these parameters, which we call
    a “prior”. While the presence of priors adds some additional complication, it
    has several advantages, and we will discuss the issue of priors in more detail
    below. This is another reason for the workflow advocated in this book: the simulation
    stage leads directly to priors. We will again specify the model that we are interested
    in, but this time we include priors.'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们以贝叶斯框架运行回归之前，我们需要为这些参数中的每一个决定一个起始概率分布，我们称之为“先验”。虽然先验的存在增加了一些额外的复杂性，但它有几个优点，我们将在下面更详细地讨论先验的问题。这也是本书所倡导的工作流程的另一个原因：模拟阶段直接导致先验。我们再次指定我们感兴趣的模型，但这次我们包括了先验。
- en: \[ \begin{aligned} y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\ \mu_i
    &= \beta_0 +\beta_1x_i\\ \beta_0 &\sim \mbox{Normal}(0, 2.5) \\ \beta_1 &\sim
    \mbox{Normal}(0, 2.5) \\ \sigma &\sim \mbox{Exponential}(1) \\ \end{aligned} \]
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \begin{aligned} y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\ \mu_i
    &= \beta_0 +\beta_1x_i\\ \beta_0 &\sim \mbox{Normal}(0, 2.5) \\ \beta_1 &\sim
    \mbox{Normal}(0, 2.5) \\ \sigma &\sim \mbox{Exponential}(1) \\ \end{aligned} \]
- en: We combine information from the data with the priors to obtain posterior distributions
    for our parameters. Inference is then carried out based on analyzing posterior
    distributions.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将数据中的信息与先验结合起来，以获得参数的后验分布。然后，基于后验分布的分析进行推断。
- en: Another aspect that is different between Bayesian approaches and the way we
    have been doing modeling to this point, is that Bayesian models will usually take
    longer to run. Because of this, it can be useful to run the model in a separate
    R script and then save it with `saveRDS()`. With sensible Quarto chunk options
    for “eval” and “echo” (see [Chapter 3](03-workflow.html)), the model can then
    be read into the Quarto document with `readRDS()` rather than being run every
    time the paper is compiled. In this way, the model delay is only imposed once
    for a given model. It can also be useful to add `beep()` from `beepr` to the end
    of the model, to get an audio notification when the model is done.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 与我们迄今为止所采用的方法相比，贝叶斯方法的一个不同之处在于，贝叶斯模型通常需要更长的时间来运行。正因为如此，将模型在单独的R脚本中运行并使用`saveRDS()`保存它可能是有用的。通过合理的Quarto块选项“eval”和“echo”（见[第3章](03-workflow.html)），模型可以通过`readRDS()`而不是每次编译论文时都运行来被读入Quarto文档。这样，对于给定的模型，模型延迟只会被施加一次。在模型的末尾添加`beepr`中的`beep()`，当模型完成后可以得到音频通知。
- en: '[PRE24]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '*[PRE25]'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE25]'
- en: '*We use `stan_glm()` with the “gaussian()” family to specify multiple linear
    regression and the model formula is written in the same way as base R and `rstanarm``.
    We have explicitly added the default priors, as we see this as good practice,
    although strictly this is not necessary.'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: '*我们使用`stan_glm()`的“gaussian()”族来指定多元线性回归，模型公式与基础R和`rstanarm`的写法相同。我们明确添加了默认先验，尽管严格来说这不是必需的，但我们认为这是一种良好的实践。'
- en: The estimation results, which are in the first column of [Table 12.4](#tbl-modelsummarybayesbetter),
    are not quite what we expect. For instance, the rate of increase in marathon times
    is estimated to be around three minutes per minute of increase in five-kilometer
    time, which seems low given the ratio of a five-kilometer run to marathon distance.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: '[表12.4](#tbl-modelsummarybayesbetter)的第一列中的估计结果并不完全符合我们的预期。例如，马拉松时间的增加速度估计为每分钟增加五公里时间大约三分钟，考虑到五公里跑与马拉松距离的比例，这似乎有点低。'
- en: 12.4.1 Picking priors
  id: totrans-198
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 12.4.1 选择先验
- en: The issue of picking priors is a challenging one and the subject of extensive
    research. For the purposes of this book, using the `rstanarm` defaults is fine.
    But even if they are just the default, priors should be explicitly specified in
    the model and included in the function. This is to make it clear to others what
    has been done. We could use `default_prior_intercept()` and `default_prior_coef()`
    to find the default priors in `rstanarm` and then explicitly include them in the
    model.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 选择先验的问题是一个具有挑战性的问题，也是广泛研究的话题。为了本书的目的，使用`rstanarm`的默认值是可以的。但即使它们只是默认值，先验也应该在模型中明确指定并包含在函数中。这是为了使其他人清楚已经做了什么。我们可以使用`default_prior_intercept()`和`default_prior_coef()`在`rstanarm`中找到默认先验，然后明确地将它们包含在模型中。
- en: It is normal to find it difficult to know what prior to specify. Getting started
    by adapting someone else’s `rstanarm` code is perfectly fine. If they have not
    specified their priors, then we can use the helper function `prior_summary()`,
    to find out which priors were used.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 发现难以确定先验是很正常的。通过修改他人的`rstanarm`代码开始是完全可以接受的。如果他们没有指定先验，那么我们可以使用辅助函数`prior_summary()`来找出使用了哪些先验。
- en: '[PRE26]'
  id: totrans-201
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '*[PRE27]*  *We are interested in understanding what the priors imply before
    we involve any data. We do this by implementing prior predictive checks. This
    means simulating from the priors to look at what the model implies about the possible
    magnitude and direction of the relationships between the explanatory and outcome
    variables. This process is no different to all the other simulation that we have
    done to this point.'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE27]*  *我们在涉及任何数据之前，对先验信息所暗示的内容感兴趣。我们通过实施先验预测检查来完成这项工作。这意味着从先验分布中进行模拟，以查看模型对解释变量和结果变量之间可能的大小和方向关系的暗示。这个过程与我们迄今为止所做的一切模拟没有区别。'
- en: '[PRE28]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '*[PRE29]'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE29]'
- en: '*![](../Images/bd6a1ea3734c7957362e98ecf675fb20.png)'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/bd6a1ea3734c7957362e98ecf675fb20.png)'
- en: (a) Distribution of implied marathon times
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: (a) 推断出的马拉松时间分布
- en: '![](../Images/311dd43da813f1145c9ed6420b4c5f8a.png)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/311dd43da813f1145c9ed6420b4c5f8a.png)'
- en: (b) Relationship between 5km and marathon times
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: (b) 5公里和马拉松时间的关系
- en: 'Figure 12.5: Some implications from the priors that were used'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.5：使用先验信息的一些含义
- en: '[Figure 12.5](#fig-worstmodelever) suggests our model has been poorly constructed.
    Not only are there world record marathon times, but there are also negative marathon
    times! One issue is that our prior for \(\beta_1\) does not take in all the information
    that we know. We know that a marathon is about eight times longer than a five-kilometer
    run and so we could center the prior for \(\beta_1\) around that. Our re-specified
    model is:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: '[图12.5](#fig-worstmodelever)表明我们的模型构建得不好。不仅存在世界纪录的马拉松时间，还存在负的马拉松时间！一个问题是我们对\(\beta_1\)的先验没有包含我们所知道的所有信息。我们知道马拉松大约是五公里跑的八倍长，因此我们可以将\(\beta_1\)的先验集中在这一点上。我们重新指定的模型是：'
- en: \[ \begin{aligned} y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\ \mu_i
    &= \beta_0 +\beta_1x_i\\ \beta_0 &\sim \mbox{Normal}(0, 2.5) \\ \beta_1 &\sim
    \mbox{Normal}(8, 2.5) \\ \sigma &\sim \mbox{Exponential}(1) \\ \end{aligned} \]
    And we can see from prior prediction checks that it seems more reasonable ([Figure 12.6](#fig-secondworstmodelever)).
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \begin{aligned} y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\ \mu_i
    &= \beta_0 +\beta_1x_i\\ \beta_0 &\sim \mbox{Normal}(0, 2.5) \\ \beta_1 &\sim
    \mbox{Normal}(8, 2.5) \\ \sigma &\sim \mbox{Exponential}(1) \\ \end{aligned} \]
    我们可以从先验预测检查中看到，这似乎更加合理（[图12.6](#fig-secondworstmodelever)）。
- en: '[PRE30]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '*[PRE31]'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE31]'
- en: '*![](../Images/55a25acb2cdcc39290e4bf0d446a0d35.png)'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/55a25acb2cdcc39290e4bf0d446a0d35.png)'
- en: (a) Distribution of implied marathon times
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: (a) 推断出的马拉松时间分布
- en: '![](../Images/2f213cee32ac5acede615e4a9a47fc2f.png)'
  id: totrans-216
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2f213cee32ac5acede615e4a9a47fc2f.png)'
- en: (b) Relationship between 5km and marathon times
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: (b) 5公里和马拉松时间的关系
- en: 'Figure 12.6: Updated priors'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.6：更新后的先验
- en: If we were not sure what to do then `rstanarm` could help to improve the specified
    priors, by scaling them based on the data. Specify the prior that you think is
    reasonable, even if this is just the default, and include it in the function,
    but also include “autoscale = TRUE”, and `rstanarm` will adjust the scale. When
    we re-run our model with these updated priors and allowing auto-scaling we get
    much better results, which are in the second column of [Table 12.4](#tbl-modelsummarybayesbetter).
    You can then add those to the written-out model instead.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们不确定该怎么做，那么`rstanarm`可以帮助我们通过根据数据缩放来改进指定的先验。指定你认为合理的先验，即使这只是默认值，也要将其包含在函数中，但也要包含“autoscale
    = TRUE”，然后`rstanarm`将调整缩放。当我们用这些更新的先验和允许自动缩放重新运行我们的模型时，我们得到了更好的结果，这些结果在[表12.4](#tbl-modelsummarybayesbetter)的第二列中。然后你可以将它们添加到写出的模型中。
- en: '[PRE32]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '*[PRE33]'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE33]'
- en: '*Table 12.4: Forecasting and explanatory models of marathon times based on
    five-kilometer run times'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: '*表12.4：基于五公里跑时间的马拉松时间预测和解释模型'
- en: '|  | Non-scaled priors | Auto-scaling priors |'
  id: totrans-223
  prefs: []
  type: TYPE_TB
  zh: '|  | 未缩放先验 | 自动缩放先验 |'
- en: '| --- | --- | --- |'
  id: totrans-224
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| (Intercept) | -67.50 | 8.66 |'
  id: totrans-225
  prefs: []
  type: TYPE_TB
  zh: '| (Intercept) | -67.50 | 8.66 |'
- en: '| five_km_time | 3.47 | 7.90 |'
  id: totrans-226
  prefs: []
  type: TYPE_TB
  zh: '| five_km_time | 3.47 | 7.90 |'
- en: '| was_rainingYes | 0.12 | 9.23 |'
  id: totrans-227
  prefs: []
  type: TYPE_TB
  zh: '| was_rainingYes | 0.12 | 9.23 |'
- en: '| Num.Obs. | 100 | 100 |'
  id: totrans-228
  prefs: []
  type: TYPE_TB
  zh: '| Num.Obs. | 100 | 100 |'
- en: '| R2 | 0.015 | 0.797 |'
  id: totrans-229
  prefs: []
  type: TYPE_TB
  zh: '| R2 | 0.015 | 0.797 |'
- en: '| R2 Adj. | -1.000 | 0.790 |'
  id: totrans-230
  prefs: []
  type: TYPE_TB
  zh: '| R2 Adj. | -1.000 | 0.790 |'
- en: '| Log.Lik. | -678.336 | -425.193 |'
  id: totrans-231
  prefs: []
  type: TYPE_TB
  zh: '| Log.Lik. | -678.336 | -425.193 |'
- en: '| ELPD | -679.5 | -429.0 |'
  id: totrans-232
  prefs: []
  type: TYPE_TB
  zh: '| ELPD | -679.5 | -429.0 |'
- en: '| ELPD s.e. | 3.3 | 8.9 |'
  id: totrans-233
  prefs: []
  type: TYPE_TB
  zh: '| ELPD s.e. | 3.3 | 8.9 |'
- en: '| LOOIC | 1359.0 | 858.0 |'
  id: totrans-234
  prefs: []
  type: TYPE_TB
  zh: '| LOOIC | 1359.0 | 858.0 |'
- en: '| LOOIC s.e. | 6.6 | 17.8 |'
  id: totrans-235
  prefs: []
  type: TYPE_TB
  zh: '| LOOIC s.e. | 6.6 | 17.8 |'
- en: '| WAIC | 1359.0 | 857.9 |'
  id: totrans-236
  prefs: []
  type: TYPE_TB
  zh: '| WAIC | 1359.0 | 857.9 |'
- en: '| RMSE | 175.52 | 16.85 |*  *As we used the “autoscale = TRUE” option, it can
    be helpful to look at how the priors were updated with `prior_summary()` from
    `rstanarm`.'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: '| RMSE | 175.52 | 16.85 |*  *由于我们使用了“autoscale = TRUE”选项，查看如何使用`rstanarm`的`prior_summary()`更新先验可能是有帮助的。'
- en: '[PRE34]'
  id: totrans-238
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '*[PRE35]********  ***### 12.4.2 Posterior distribution'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE35]********  ***### 12.4.2 后验分布'
- en: Having built a Bayesian model, we may want to look at what it implies ([Figure 12.7](#fig-ppcheckandposteriorvsprior)).
    One way to do this is to consider the posterior distribution.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 建立了贝叶斯模型后，我们可能想看看它意味着什么（[图12.7](#fig-ppcheckandposteriorvsprior)）。一种方法是考虑后验分布。
- en: One way to use the posterior distribution is to consider whether the model is
    doing a good job of fitting the data. The idea is that if the model is doing a
    good job of fitting the data, then the posterior should be able to be used to
    simulate data that are like the actual data ([Gelman et al. 2020](99-references.html#ref-bayesianworkflow)).
    We can implement a posterior predictive check with `pp_check()` from `rstanarm`
    ([Figure 12.7 (a)](#fig-ppcheckandposteriorvsprior-1)). This compares the actual
    outcome variable with simulations from the posterior distribution. And we can
    compare the posterior with the prior with `posterior_vs_prior()` to see how much
    the estimates change once data are taken into account ([Figure 12.7 (b)](#fig-ppcheckandposteriorvsprior-2)).
    Helpfully, `pp_check()` and `posterior_vs_prior()` return `ggplot2` objects so
    we can modify the look of them in the normal way we manipulate graphs. These checks
    and discussion would typically just be briefly mentioned in the main content of
    a paper, with the detail and graphs added to a dedicated appendix.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 使用后验分布的一种方法是考虑模型是否很好地拟合了数据。想法是，如果模型很好地拟合了数据，那么后验分布应该能够用来模拟与实际数据类似的数据（[Gelman等人2020](99-references.html#ref-bayesianworkflow)）。我们可以使用`rstanarm`的`pp_check()`实现后验预测检验（[图12.7
    (a)](#fig-ppcheckandposteriorvsprior-1)）。这比较了实际结果变量与后验分布的模拟。我们可以使用`posterior_vs_prior()`比较后验分布与先验分布，以查看在考虑数据后估计值的变化程度（[图12.7
    (b)](#fig-ppcheckandposteriorvsprior-2)）。方便的是，`pp_check()`和`posterior_vs_prior()`返回`ggplot2`对象，因此我们可以像处理图形一样修改它们的样式。这些检查和讨论通常只会在论文的主要内容中简要提及，详细内容和图形则添加到专门的附录中。
- en: '[PRE36]'
  id: totrans-242
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: '*![](../Images/d0b85f255cd2076b7f5dc2ba020c4110.png)'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/d0b85f255cd2076b7f5dc2ba020c4110.png)'
- en: (a) Posterior prediction check
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: (a) 后验预测检验
- en: '![](../Images/bfc87d771c2b9d9fa67a19c5225dd248.png)'
  id: totrans-245
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bfc87d771c2b9d9fa67a19c5225dd248.png)'
- en: (b) Comparing the posterior with the prior
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: (b) 比较后验分布与先验分布
- en: 'Figure 12.7: Examining how the model fits, and is affected by, the data'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.7：检查模型如何拟合数据，以及数据如何影响模型
- en: With a simple model like this, the differences between the prediction and inference
    approaches are minimal. But as model or data complexity increases these differences
    can become important.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这样一个简单的模型，预测方法和推断方法之间的差异很小。但随着模型或数据复杂性的增加，这些差异可能变得很重要。
- en: We have already discussed confidence intervals and the Bayesian equivalent to
    a confidence interval is called a “credibility interval”, and reflects two points
    where there is a certain probability mass between them, in this case 95 per cent.
    Bayesian estimation provides a distribution for each coefficient. This means there
    is an infinite number of points that we could use to generate this interval. The
    entire distribution should be shown graphically ([Figure 12.8](#fig-credibleintervals)).
    This might be using a cross-referenced appendix.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经讨论了置信区间，而贝叶斯等价于置信区间的称为“可信区间”，它反映了两个点之间有一定概率质量，在这种情况下为95%。贝叶斯估计为每个系数提供一个分布。这意味着我们可以使用无限多个点来生成这个区间。整个分布应通过图形展示出来（[图12.8](#fig-credibleintervals)）。这可能是通过交叉引用的附录来实现的。
- en: '[PRE37]'
  id: totrans-250
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: '*![](../Images/7f66308f2fd91ce20a856dd4fec103b4.png)'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/7f66308f2fd91ce20a856dd4fec103b4.png)'
- en: 'Figure 12.8: Credible intervals**  **### 12.4.3 Diagnostics'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.8：可信区间**  **### 12.4.3 诊断
- en: The final aspect that we would like to check is a practical matter. `rstanarm`
    uses a sampling algorithm called Markov chain Monte Carlo (MCMC) to obtain samples
    from the posterior distributions of interest. We need to quickly check for the
    existence of signs that the algorithm ran into issues. We consider a trace plot,
    such as [Figure 12.9 (a)](#fig-stanareyouokay-1), and a Rhat plot, such as [Figure 12.9
    (b)](#fig-stanareyouokay-2). These would typically go in a cross-referenced appendix.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 我们想要检查的最后一个方面是一个实际问题。`rstanarm`使用一种称为马尔可夫链蒙特卡洛（MCMC）的采样算法来从感兴趣的后续分布中获取样本。我们需要快速检查是否存在算法遇到问题的迹象。我们考虑跟踪图，例如[图12.9
    (a)](#fig-stanareyouokay-1)，以及Rhat图，例如[图12.9 (b)](#fig-stanareyouokay-2)。这些通常会在交叉引用的附录中。
- en: '[PRE38]'
  id: totrans-254
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: '*![](../Images/de32f7a40b49cdbac9092f0602e8dc12.png)'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/de32f7a40b49cdbac9092f0602e8dc12.png)'
- en: (a) Trace plot
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: (a) 跟踪图
- en: '![](../Images/017f418b272eeb0290be2d9ad144c75f.png)'
  id: totrans-257
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/017f418b272eeb0290be2d9ad144c75f.png)'
- en: (b) Rhat plot
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: (b) Rhat图
- en: 'Figure 12.9: Checking the convergence of the MCMC algorithm'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.9：检查MCMC算法的收敛性
- en: In the trace plot, we are looking for lines that appear to bounce around, but
    are horizontal, and have a nice overlap between the chains. The trace plot in
    [Figure 12.9 (a)](#fig-stanareyouokay-1) does not suggest anything out of the
    ordinary. Similarly, with the Rhat plot, we are looking for everything to be close
    to 1, and ideally no more than 1.1\. Again [Figure 12.9 (b)](#fig-stanareyouokay-2)
    is an example that does not suggest any problems. If these diagnostics are not
    like this, then simplify the model by removing or modifying predictors, change
    the priors, and re-run it.*  *### 12.4.4 Parallel processing
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 在跟踪图中，我们寻找看起来在水平方向上弹跳但重叠良好的线条。图12.9 (a)中的跟踪图没有显示出任何异常。同样，在Rhat图中，我们寻找所有值都接近1，理想情况下不超过1.1。再次，[图12.9
    (b)](#fig-stanareyouokay-2)是一个没有显示出任何问题的例子。如果这些诊断结果不是这样，那么通过删除或修改预测变量简化模型，改变先验，然后重新运行。*  *###
    12.4.4 并行处理
- en: Sometimes code is slow because the computer needs to do the same thing many
    times. We may be able to take advantage of this and enable these jobs to be done
    at the same time using parallel processing. This is especially the case when estimating
    Bayesian models.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 有时代码运行缓慢是因为计算机需要多次执行相同的事情。我们可能可以利用这一点，并使这些工作能够同时通过并行处理来完成。这在估计贝叶斯模型时尤其如此。
- en: After installing and loading `tictoc` we can use `tic()` and `toc()` to time
    various aspects of our code. This is useful with parallel processing, but also
    more generally, to help us find out where the largest delays are.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装和加载`tictoc`之后，我们可以使用`tic()`和`toc()`来计时代码的各个方面。这对于并行处理很有用，但更普遍地，这有助于我们找出最大的延迟在哪里。
- en: '[PRE39]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: '*[PRE40]'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE40]'
- en: '[PRE41]'
  id: totrans-265
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: '*[PRE42]'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE42]'
- en: '[PRE43]'
  id: totrans-267
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: '*[PRE44]'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE44]'
- en: '[PRE45]'
  id: totrans-269
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: '*[PRE46]****  ***And so we know that there is something slowing down the code.
    (In this artificial case it is `Sys.sleep()` causing a delay of three seconds.)'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE46]****  ***因此我们知道代码中存在某种减慢速度的因素。（在这个人工案例中，是`Sys.sleep()`导致延迟了三秒钟。）'
- en: We could use `parallel` which is part of base R to run functions in parallel.
    We could also use `future` which brings additional features. After installing
    and loading `future` we use `plan()` to specify whether we want to run things
    sequentially (“sequential”) or in parallel (“multisession”). We then wrap what
    we want this applied to within `future()`.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用`parallel`，它是基础R的一部分，以并行运行函数。我们还可以使用`future`，它带来了额外的功能。在安装和加载`future`之后，我们使用`plan()`来指定我们想要顺序运行（“顺序”）还是并行运行（“多会话”）。然后我们将要应用的内容包裹在`future()`中。
- en: To see this in action we will create a dataset and then implement a function
    on a row-wise basis.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 为了看到这个动作的实际效果，我们将创建一个数据集，然后在行级别上实现一个函数。
- en: '[PRE47]'
  id: totrans-273
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: '*The sequential approach takes about 5 seconds, while the multisession approach
    takes about 0.3 seconds.'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: '*顺序方法大约需要5秒钟，而多会话方法大约需要0.3秒钟。'
- en: In the case of estimating Bayesian models many packages such as `rstanarm` have
    support for parallel processing built in through `cores`.************  ***## 12.5
    Concluding remarks
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 在估计贝叶斯模型的情况下，许多包如`rstanarm`通过`cores`内置了并行处理的支持。************  ***## 12.5 结论
- en: In this chapter we have considered linear models. We established a foundation
    for analysis, and described some essential approaches. We have also skimmed over
    a lot. This chapter and the next should be considered together. These provide
    you with enough to get started, but for doing more than that, going through the
    modeling books recommended in [Chapter 18](17-concluding.html).
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: '在本章中，我们考虑了线性模型。我们为分析奠定了基础，并描述了一些基本方法。我们还简要地浏览了一些内容。本章和下一章应一起考虑。这些为你提供了足够的起点，但要做得更多，请参阅第18章中推荐建模书籍。 '
- en: 12.6 Exercises
  id: totrans-277
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 12.6 练习
- en: Practice
  id: totrans-278
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 练习
- en: '*(Plan)* Consider the following scenario: *A person is interested in the heights
    of all the buildings in London. They walk around the city counting the number
    of floors for each building, and noting the year of construction.* Please sketch
    what that dataset could look like and then sketch a graph that you could build
    to show all observations.'
  id: totrans-279
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(计划)* 考虑以下情景：*一个人对伦敦所有建筑的高度感兴趣。他们在城市里四处走动，计算每座建筑的楼层数，并记录建设年份。* 请绘制出这个数据集可能的样子，然后绘制一个图表来展示所有观测值。'
- en: '*(Simulate)* Please further consider the scenario described and simulate the
    situation, along with three predictors that are associated the count of the number
    of levels. Please include at least ten tests based on the simulated data. Submit
    a link to a GitHub Gist that contains your code.'
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(模拟)* 进一步考虑所描述的情景，并模拟该情景，包括与楼层数计数相关的三个预测变量。请至少包含基于模拟数据的十个测试。提交一个包含你代码的GitHub
    Gist链接。'
- en: '*(Acquire)* Please describe one possible source of such a dataset.'
  id: totrans-281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(获取)* 请描述一个可能的此类数据集来源。'
- en: '*(Explore)* Please use `ggplot2` to build the graph that you sketched. Then
    use `rstanarm` to build a model with number of floors as an outcome and the year
    of construction as a predictor. Submit a link to a GitHub Gist that contains your
    code.'
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(探索)* 请使用`ggplot2`构建你绘制的图表。然后使用`rstanarm`构建一个以楼层数为结果变量，建设年份为预测变量的模型。提交一个包含你代码的GitHub
    Gist链接。'
- en: '*(Communicate)* Please write two paragraphs about what you did.'
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(沟通)* 请写两段关于你所做的事情的描述。'
- en: Quiz
  id: totrans-284
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小测验
- en: Please simulate the situation in which there are two predictors, “race” and
    “gender”, and one outcome variable, “vote_preference”, which is imperfectly related
    to them. Submit a link to a GitHub Gist that contains your code.
  id: totrans-285
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请模拟一个有两个预测变量，“种族”和“性别”，以及一个结果变量“投票偏好”，它们与它们不完全相关的情景。提交一个包含你代码的GitHub Gist链接。
- en: Please write a linear relationship between some outcome variable, Y, and some
    predictor, X. What is the intercept term? What is the slope term? What would adding
    a hat to these indicate?
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请写出一个结果变量Y与预测变量X之间的线性关系。截距项是什么？斜率项是什么？在这些项上添加一个帽子会表示什么？
- en: Which of the following are examples of linear models (select all that apply)?
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪些是线性模型的例子（选择所有适用的）？
- en: '`lm(y ~ x_1 + x_2 + x_3, data = my_data)`'
  id: totrans-288
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`lm(y ~ x_1 + x_2 + x_3, data = my_data)`'
- en: '`lm(y ~ x_1 + x_2^2 + x_3, data = my_data)`'
  id: totrans-289
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`lm(y ~ x_1 + x_2^2 + x_3, data = my_data)`'
- en: '`lm(y ~ x_1 * x_2 + x_3, data = my_data)`'
  id: totrans-290
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`lm(y ~ x_1 * x_2 + x_3, data = my_data)`'
- en: '`lm(y ~ x_1 + x_1^2 + x_2 + x_3, data = my_data)`'
  id: totrans-291
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`lm(y ~ x_1 + x_1^2 + x_2 + x_3, data = my_data)`'
- en: What is the least squares criterion? Similarly, what is RSS and what are we
    trying to do when we run least squares regression?
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最小二乘准则是什么？同样，什么是RSS，我们在运行最小二乘回归时试图做什么？
- en: What is bias (in a statistical context)?
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 偏差（在统计背景下）是什么？
- en: 'Consider five variables: earth, fire, wind, water, and heart. Please simulate
    a scenario where heart depends on the other four, which are independent of each
    other. Then please write R code that would fit a linear regression model to explain
    heart as a function of the other variables. Submit a link to a GitHub Gist that
    contains your code.'
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 考虑五个变量：地球、火、风、水和心。请模拟一个情景，其中心依赖于其他四个变量，而这四个变量是相互独立的。然后请编写R代码，以拟合一个线性回归模型来解释心作为其他变量的函数。提交一个包含你代码的GitHub
    Gist链接。
- en: 'According to Greenland et al. ([2016](99-references.html#ref-greenland2016statistical)),
    p-values test (pick one):'
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据Greenland等人（[2016](99-references.html#ref-greenland2016statistical)）的研究，p值测试（选择一个）：
- en: All the assumptions about how the data were generated (the entire model), not
    just the targeted hypothesis it is supposed to test (such as a null hypothesis).
  id: totrans-296
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关于数据生成方式的所有假设（整个模型），而不仅仅是它打算测试的目标假设（例如，零假设）。
- en: Whether the hypothesis targeted for testing is true or not.
  id: totrans-297
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 目标假设是否为真。
- en: A dichotomy whereby results can be declared “statistically significant”.
  id: totrans-298
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一种二分法，其中结果可以宣布为“统计上显著”。
- en: 'According to Greenland et al. ([2016](99-references.html#ref-greenland2016statistical)),
    a p-value may be small because (select all that apply):'
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据Greenland等人([2016](99-references.html#ref-greenland2016statistical))的说法，p值可能很小，因为（选择所有适用的）：
- en: The targeted hypothesis is false.
  id: totrans-300
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 目标假设是错误的。
- en: The study protocols were violated.
  id: totrans-301
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 研究方案被违反了。
- en: It was selected for presentation based on its small size.
  id: totrans-302
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它因其体积小而被选中进行展示。
- en: Please explain what a p-value is, using only the term itself (i.e. “p-value”)
    and words that are amongst the 1,000 most common in the English language according
    to the [XKCD Simple Writer](https://xkcd.com/simplewriter/). (Please write one
    or two paragraphs.)
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请仅使用术语本身（即“p-value”）和根据[XKCD Simple Writer](https://xkcd.com/simplewriter/)列出的英语中最常见的1000个单词来解释什么是p值。（请写一到两段。）
- en: What is power (in a statistical context)?
  id: totrans-304
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在统计背景下，什么是功效？
- en: Look at the list of people awarded the [COPSS Presidents’ Award](https://en.wikipedia.org/wiki/COPSS_Presidents%27_Award)
    or the [Guy Medal in Gold](https://en.wikipedia.org/wiki/Guy_Medal) and write
    a short biography of them in the style of the “Shoulders of giants” entries in
    this book.
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看获得[COPSS总统奖](https://en.wikipedia.org/wiki/COPSS_Presidents%27_Award)或[金质盖伊奖章](https://en.wikipedia.org/wiki/Guy_Medal)的人的名单，并以本书“巨人的肩膀”条目风格为他们写一篇简短传记。
- en: Discuss, with the help of examples and citations, the quote from McElreath ([[2015]
    2020, 162](99-references.html#ref-citemcelreath)) included toward the start of
    this chapter. Write at least three paragraphs.
  id: totrans-306
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用例子和引用，讨论本章开头引用的McElreath的话([[2015] 2020, 162](99-references.html#ref-citemcelreath))。至少写三个段落。
- en: Class activities
  id: totrans-307
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 课堂活动
- en: Use the [starter folder](https://github.com/RohanAlexander/starter_folder) and
    create a new repo.
  id: totrans-308
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用[起始文件夹](https://github.com/RohanAlexander/starter_folder)并创建一个新的仓库。
- en: We are interested in understanding the relationship between bill length and
    depth for Adelie penguins using `palmerpenguins`. Begin by sketching and simulating.
  id: totrans-309
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们对使用`palmerpenguins`理解阿德利企鹅的翅膀长度和深度之间的关系感兴趣。开始时进行草图和模拟。
- en: 'Then add three graphs to the data section: one of each variable separately
    and a third of the relationship between the two.'
  id: totrans-310
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 然后在数据部分添加三个图表：每个变量的一个，以及两个变量之间关系的第三个。
- en: Then in the model section, write out the model. Use `rstanarm` to estimate a
    linear model between the two variables in an R script.
  id: totrans-311
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 然后在模型部分，写出模型。使用`rstanarm`在R脚本中估计两个变量之间的线性模型。
- en: Read that model into the results section and use `modelsummary` to create a
    summary table.
  id: totrans-312
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将该模型读入结果部分，并使用`modelsummary`创建一个摘要表。
- en: '[PRE48]'
  id: totrans-313
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: '*![](../Images/9063bc40248e09c2478bfad9ac407929.png)*  **   (This question
    is based on Gelman and Vehtari ([2024, 32](99-references.html#ref-gelmanonteaching)).)
    Please follow the instructions [here](https://youtu.be/_Dof_Ks-f9U) to make a
    paper plane. Measure:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/9063bc40248e09c2478bfad9ac407929.png)*  **   （这个问题基于Gelman和Vehtari([2024,
    32](99-references.html#ref-gelmanonteaching))。）请按照[这里](https://youtu.be/_Dof_Ks-f9U)的说明制作一张纸飞机。测量：'
- en: the width of the wings;
  id: totrans-315
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 翼的宽度；
- en: the length of the wings;
  id: totrans-316
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 翼的长度；
- en: the height of the winglets;
  id: totrans-317
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 翼尖的高度；
- en: in a safe space, fly your plane and measure for how long it stays in the air.
  id: totrans-318
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在一个安全的空间里，驾驶你的飞机并测量它在空中停留的时间。
- en: Combine your data with those of the rest of the class in a table that looks
    like [Table 12.5](#tbl-planes). Then use linear regression to explore the relationship
    between the dependent and independent variables. Based on the results, how would
    you change your plane design if you were to do this exercise again?
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 将你的数据与全班其他同学的数据合并到一个类似于[表12.5](#tbl-planes)的表格中。然后使用线性回归来探索因变量和自变量之间的关系。基于结果，如果你再次做这个练习，你会如何改变你的飞机设计？
- en: 'Table 12.5: Data gathered on the relationship between features of a paper plane
    and the length of time it stays in the air'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 表12.5：关于纸飞机特征与其在空中停留时间之间关系的数据
- en: '| Wing width (mm) | Wing length (mm) | Winglet height (mm) | Flying time (sec)
    |'
  id: totrans-321
  prefs: []
  type: TYPE_TB
  zh: '| 翼展（mm） | 翼长（mm） | 翼尖高度（mm） | 飞行时间（秒） |'
- en: '| --- | --- | --- | --- |'
  id: totrans-322
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| ... | ... | ... | ... |'
  id: totrans-323
  prefs: []
  type: TYPE_TB
  zh: '| ... | ... | ... | ... |'
- en: Imagine that we add FIPS code as an explanatory variable in a linear regression
    model explaining inflation, by US county. Please discuss the likely effect of
    this and whether it is a good idea. You may want to simulate the situation to
    help you think it through more clearly.
  id: totrans-324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 想象一下，我们在一个线性回归模型中添加FIPS代码作为解释变量，试图解释美国各县的通货膨胀情况。请讨论这可能的效应，以及这是否是一个好主意。你可能需要模拟这种情况来帮助你更清晰地思考。
- en: Imagine that we add latitude and longitude as explanatory variables in a regression
    trying to explain flu prevalence in each UK city and town. Please discuss the
    likely effect of this and whether it is a good idea. You may want to simulate
    the situation to help you think it through more clearly.
  id: totrans-325
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 想象一下，我们在一个试图解释每个英国城市和镇流感流行情况的回归模型中添加了经纬度作为解释变量。请讨论这可能的效应，以及这是否是一个好主意。你可能需要模拟这种情况来帮助你更清晰地思考。
- en: 'In Shakespeare’s *Julius Caesar*, the character Cassius famously says:'
  id: totrans-326
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在莎士比亚的*《朱利叶斯·凯撒》*中，角色凯西乌斯著名地说：
- en: The fault, dear Brutus, is not in our stars,
  id: totrans-327
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 亲爱的布鲁图斯，错误不在于我们的星星，
- en: But in ourselves, that we are underlings.
  id: totrans-328
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 但在于我们自己，我们是下属。
- en: Please discuss p-values, the common, but potentially misleading, use of significance
    stars in regression tables, and Ioannidis ([2005](99-references.html#ref-ioannidis2005most)),
    with reference to this quote. - Imagine that a variance estimate ends up negative.
    Please discuss.*  *### Task
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 请讨论p值，回归表中显著性星号（*significance stars*）的常见但可能具有误导性的使用，以及Ioannidis ([2005](99-references.html#ref-ioannidis2005most))
    的观点，并参考以下引言。 - 想象一下，方差估计结果为负数。请讨论。*  *### 任务
- en: 'Allow that the true data generating process is a Normal distribution with mean
    of one, and standard deviation of 1\. We obtain a sample of 1,000 observations
    using some instrument. Simulate the following situation:'
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 假设真实数据生成过程是一个均值为1，标准差为1的正态分布。我们使用某种工具获得了一个包含1,000个观测值的样本。模拟以下情况：
- en: Unknown to us, the instrument has a mistake in it, which means that it has a
    maximum memory of 900 observations, and begins over-writing at that point, so
    the final 100 observations are actually a repeat of the first 100.
  id: totrans-331
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们不知道，仪器中有一个错误，这意味着它最多只能存储900个观测值，并在那个点开始覆盖，所以最后的100个观测值实际上是前100个的重复。
- en: We employ a research assistant to clean and prepare the dataset. During the
    process of doing this, unknown to us, they accidentally change half of the negative
    draws to be positive.
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们雇佣了一名研究助理来清理和准备数据集。在这个过程中，我们不知道，他们意外地将一半的负数抽取改为正数。
- en: They additionally, accidentally, change the decimal place on any value between
    1 and 1.1, so that, for instance 1 becomes 0.1, and 1.1 would become 0.11.
  id: totrans-333
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 他们还意外地改变了介于1和1.1之间的任何值的十进制点，例如，1变成0.1，而1.1将变成0.11。
- en: You finally get the cleaned dataset and are interested in understanding whether
    the mean of the true data generating process is greater than 0.
  id: totrans-334
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你最终得到了清理后的数据集，并且你对了解真实数据生成过程的均值是否大于0感兴趣。
- en: Write at least two pages about what you did and what you found. Also discuss
    what effect the issues had, and what steps you can put in place to ensure actual
    analysis has a chance to flag some of these issues.
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 至少写两页关于你所做的工作以及你所发现的内容。同时讨论这些问题产生的影响，以及你可以采取哪些步骤来确保实际分析有机会识别这些问题。
- en: Use Quarto, and include an appropriate title, author, date, link to a GitHub
    repo, and citations to produce a draft. Following this, please pair with another
    student and exchange your written work. Update it based on their feedback, and
    be sure to acknowledge them by name in your paper. Submit a PDF.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Quarto，并包含适当的标题、作者、日期、GitHub仓库链接以及引用来制作草稿。在此之后，请与另一位学生配对并交换你的书面作品。根据他们的反馈进行更新，并在你的论文中提及他们的名字。提交PDF。
- en: 'Altman, Douglas, and Martin Bland. 1995\. “Statistics notes: The normal distribution.”
    *BMJ* 310 (6975): 298–98\. [https://doi.org/10.1136/bmj.310.6975.298](https://doi.org/10.1136/bmj.310.6975.298).Arel-Bundock,
    Vincent. 2022\. “modelsummary: Data and Model Summaries in R.” *Journal of Statistical
    Software* 103 (1): 1–23\. [https://doi.org/10.18637/jss.v103.i01](https://doi.org/10.18637/jss.v103.i01).———.
    2024\. *tinytable: Simple and Configurable Tables in “HTML,” “LaTeX,” “Markdown,”
    “Word,” “PNG,” “PDF,” and “Typst” Formats*. [https://vincentarelbundock.github.io/tinytable/](https://vincentarelbundock.github.io/tinytable/).Bååth,
    Rasmus. 2018\. *beepr: Easily Play Notification Sounds on any Platform*. [https://CRAN.R-project.org/package=beepr](https://CRAN.R-project.org/package=beepr).Bolker,
    Ben, and David Robinson. 2022\. *broom.mixed: Tidying Methods for Mixed Models*.
    [https://CRAN.R-project.org/package=broom.mixed](https://CRAN.R-project.org/package=broom.mixed).Bradley,
    Valerie, Shiro Kuriwaki, Michael Isakov, Dino Sejdinovic, Xiao-Li Meng, and Seth
    Flaxman. 2021\. “Unrepresentative Big Surveys Significantly Overestimated US Vaccine
    Uptake.” *Nature* 600 (7890): 695–700\. [https://doi.org/10.1038/s41586-021-04198-4](https://doi.org/10.1038/s41586-021-04198-4).Breiman,
    Leo. 2001\. “Statistical Modeling: The Two Cultures.” *Statistical Science* 16
    (3): 199–231\. [https://doi.org/10.1214/ss/1009213726](https://doi.org/10.1214/ss/1009213726).Cox,
    David. 2018\. “In Gentle Praise of Significance Tests.” *YouTube*, October. [https://youtu.be/txLj%5FP9UlCQ](https://youtu.be/txLj%5FP9UlCQ).Cox,
    David, and Nancy Reid. 1987\. “Parameter Orthogonality and Approximate Conditional
    Inference.” *Journal of the Royal Statistical Society: Series B (Methodological)*
    49 (1): 1–18\. [https://doi.org/10.1111/j.2517-6161.1987.tb01422.x](https://doi.org/10.1111/j.2517-6161.1987.tb01422.x).Fisher,
    Ronald. (1925) 1928\. *Statistical Methods for Research Workers*. 2nd ed. London:
    Oliver; Boyd.Gao, Lucy, Jacob Bien, and Daniela Witten. 2022\. “Selective Inference
    for Hierarchical Clustering.” *Journal of the American Statistical Association*,
    October, 1–11\. [https://doi.org/10.1080/01621459.2022.2116331](https://doi.org/10.1080/01621459.2022.2116331).Gelman,
    Andrew, Jennifer Hill, and Aki Vehtari. 2020\. *Regression and Other Stories*.
    Cambridge University Press. [https://avehtari.github.io/ROS-Examples/](https://avehtari.github.io/ROS-Examples/).Gelman,
    Andrew, and Aki Vehtari. 2024\. *Active Statistics: Stories, Games, Problems,
    and Hands-on Demonstrations for Applied Regression and Causal Inference*. Cambridge
    University Press. [https://doi.org/10.1017/9781009436243](https://doi.org/10.1017/9781009436243).Gelman,
    Andrew, Aki Vehtari, Daniel Simpson, Charles Margossian, Bob Carpenter, Yuling
    Yao, Lauren Kennedy, Jonah Gabry, Paul-Christian Bürkner, and Martin Modrák. 2020\.
    “Bayesian Workflow.” arXiv. [https://doi.org/10.48550/arXiv.2011.01808](https://doi.org/10.48550/arXiv.2011.01808).Goodrich,
    Ben, Jonah Gabry, Imad Ali, and Sam Brilleman. 2023\. “rstanarm: Bayesian applied
    regression modeling via Stan.” [https://mc-stan.org/rstanarm](https://mc-stan.org/rstanarm).Greenland,
    Sander, Stephen Senn, Kenneth Rothman, John Carlin, Charles Poole, Steven Goodman,
    and Douglas Altman. 2016\. “Statistical Tests, P values, Confidence Intervals,
    and Power: A Guide to Misinterpretations.” *European Journal of Epidemiology*
    31 (4): 337–50\. [https://doi.org/10.1007/s10654-016-0149-3](https://doi.org/10.1007/s10654-016-0149-3).Ioannidis,
    John. 2005\. “Why Most Published Research Findings Are False.” *PLOS Medicine*
    2 (8): e124\. [https://doi.org/10.1371/journal.pmed.0020124](https://doi.org/10.1371/journal.pmed.0020124).Izrailev,
    Sergei. 2022\. *tictoc: Functions for Timing R Scripts, as Well as Implementations
    of “Stack” and “List” Structures*. [https://CRAN.R-project.org/package=tictoc](https://CRAN.R-project.org/package=tictoc).James,
    Gareth, Daniela Witten, Trevor Hastie, and Robert Tibshirani. (2013) 2021\. *An
    Introduction to Statistical Learning with Applications in R*. 2nd ed. Springer.
    [https://www.statlearning.com](https://www.statlearning.com).Jordan, Michael.
    2004\. “Graphical Models.” *Statistical Science* 19 (1). [https://doi.org/10.1214/088342304000000026](https://doi.org/10.1214/088342304000000026).Knutson,
    Victoria, Serge Aleshin-Guendel, Ariel Karlinsky, William Msemburi, and Jon Wakefield.
    2022\. “Estimating Global and Country-Specific Excess Mortality During the COVID-19
    Pandemic,” May. [https://cdn.who.int/media/docs/default-source/world-health-data-platform/covid-19-excessmortality/covid-methods-paper-revision.pdf](https://cdn.who.int/media/docs/default-source/world-health-data-platform/covid-19-excessmortality/covid-methods-paper-revision.pdf).Kuhn,
    Max, and Hadley Wickham. 2020\. *tidymodels: a collection of packages for modeling
    and machine learning using tidyverse principles*. [https://www.tidymodels.org](https://www.tidymodels.org).McElreath,
    Richard. (2015) 2020\. *Statistical Rethinking: A Bayesian Course with Examples
    in R and Stan*. 2nd ed. Chapman; Hall/CRC.Meng, Xiao-Li. 2018\. “Statistical Paradises
    and Paradoxes in Big Data (i): Law of Large Populations, Big Data Paradox, and
    the 2016 US Presidential Election.” *The Annals of Applied Statistics* 12 (2):
    685–726\. [https://doi.org/10.1214/18-AOAS1161SF](https://doi.org/10.1214/18-AOAS1161SF).Nelder,
    John. 1999\. “From Statistics to Statistical Science.” *Journal of the Royal Statistical
    Society: Series D (The Statistician)* 48 (2): 257–69\. [https://doi.org/10.1111/1467-9884.00187](https://doi.org/10.1111/1467-9884.00187).Neufeld,
    Anna, and Daniela Witten. 2021\. “Discussion of Breiman’s "Two Cultures": From
    Two Cultures to One.” *Observational Studies* 7 (1): 171–74\. [https://doi.org/10.1353/obs.2021.0004](https://doi.org/10.1353/obs.2021.0004).Pitman,
    Jim. 1993\. *Probability*. 1st ed. New York: Springer. [https://doi.org/10.1007/978-1-4612-4374-8](https://doi.org/10.1007/978-1-4612-4374-8).R
    Core Team. 2024\. *R: A Language and Environment for Statistical Computing*. Vienna,
    Austria: R Foundation for Statistical Computing. [https://www.R-project.org/](https://www.R-project.org/).Reid,
    Nancy. 2003\. “Asymptotics and the Theory of Inference.” *The Annals of Statistics*
    31 (6): 1695–1731\. [https://doi.org/10.1214/aos/1074290325](https://doi.org/10.1214/aos/1074290325).Robinson,
    David, Alex Hayes, and Simon Couch. 2022\. *broom: Convert Statistical Objects
    into Tidy Tibbles*. [https://CRAN.R-project.org/package=broom](https://CRAN.R-project.org/package=broom).Staicu,
    Ana-Maria. 2017\. “Interview with Nancy Reid.” *International Statistical Review*
    85 (3): 381–403\. [https://doi.org/10.1111/insr.12237](https://doi.org/10.1111/insr.12237).Stigler,
    Stephen. 1986\. *The History of Statistics*. Massachusetts: Belknap Harvard.Student.
    1908\. “The Probable Error of a Mean.” *Biometrika* 6 (1): 1–25\. [https://doi.org/10.2307/2331554](https://doi.org/10.2307/2331554).Varin,
    Cristiano, Nancy Reid, and David Firth. 2011\. “An Overview of Composite Likelihood
    Methods.” *Statistica Sinica*, 5–42\. [https://www.jstor.org/stable/24309261](https://www.jstor.org/stable/24309261).Wasserman,
    Larry. 2005\. *All of Statistics*. Springer.Wickham, Hadley. 2011\. “testthat:
    Get Started with Testing.” *The R Journal* 3: 5–10\. [https://journal.r-project.org/archive/2011-1/RJournal%5F2011-1%5FWickham.pdf](https://journal.r-project.org/archive/2011-1/RJournal%5F2011-1%5FWickham.pdf).Wickham,
    Hadley, Mara Averick, Jenny Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain
    François, Garrett Grolemund, et al. 2019\. “Welcome to the Tidyverse.” *Journal
    of Open Source Software* 4 (43): 1686\. [https://doi.org/10.21105/joss.01686](https://doi.org/10.21105/joss.01686).Wickham,
    Hadley, and Lionel Henry. 2022\. *purrr: Functional Programming Tools*. [https://CRAN.R-project.org/package=purrr](https://CRAN.R-project.org/package=purrr).Wilde,
    Oscar. 1891\. *The Picture of Dorian Gray*. [https://www.gutenberg.org/files/174/174-h/174-h.htm](https://www.gutenberg.org/files/174/174-h/174-h.htm).Wood,
    Simon. 2015\. *Core Statistics*. Cambridge University Press. [https://www.maths.ed.ac.uk/\%7Eswood34/core-statistics.pdf](https://www.maths.ed.ac.uk/\%7Eswood34/core-statistics.pdf).*
    ** * *'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
- en: Given the small sample size in the example of 20, we strictly should use the
    finite-sample adjustment, but as this is not the focus of this book we will move
    forward with the general approach.[↩︎](#fnref1)*************
  id: totrans-338
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在20个样本大小的例子中，我们严格来说应该使用有限样本调整，但由于这不是本书的重点，我们将继续使用通用方法。[↩︎](#fnref1)*************
