- en: Core Framework
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 核心框架
- en: 原文：[https://phys-sim-book.github.io/lec31.2-core_framework.html](https://phys-sim-book.github.io/lec31.2-core_framework.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://phys-sim-book.github.io/lec31.2-core_framework.html](https://phys-sim-book.github.io/lec31.2-core_framework.html)
- en: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
- en: 'The PBD framework simulates a physical object by discretizing it into a set
    of N particles and defining its behavior through M geometric constraints (relationships).
    The central idea is to treat the system as a set of particles and constraints.
    At each time step, particle positions are first predicted using an explicit integration
    scheme, after which an iterative solver adjusts these predicted positions to satisfy
    all geometric constraints. We can formally define such a system as follows:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: PBD 框架通过将物理对象离散化为一组 N 个粒子，并通过 M 个几何约束（关系）定义其行为来模拟物理对象。核心思想是将系统视为一组粒子和约束。在每个时间步，首先使用显式积分方案预测粒子位置，然后迭代求解器调整这些预测位置以满足所有几何约束。我们可以正式定义这样一个系统如下：
- en: '****Definition 32.2.1 (PBD System).**** A PBD system is a tuple consisting
    of a set of N particles and a set of M constraints.'
  id: totrans-4
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '****定义 32.2.1 (PBD 系统).**** PBD 系统是由一组 N 个粒子和一组 M 个约束组成的元组。'
- en: ''
  id: totrans-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Each **particle** i∈{1,…,N} is characterized by its position pi​∈R3, velocity
    vi​∈R3, and mass mi​. For convenience, we define the inverse mass wi​=1/mi​, where
    wi​=0 for infinitely massive (i.e., static or kinematically controlled) particles.
  id: totrans-6
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 每个 **粒子** i∈{1,…,N} 由其位置 pi∈R3、速度 vi∈R3 和质量 mi 表示。为了方便，我们定义逆质量 wi=1/mi，其中 wi=0
    对于无限质量（即静态或动力学控制）的粒子。
- en: ''
  id: totrans-7
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The dynamic behavior is governed by a **set of constraints**. Each constraint
    j∈{1,…M} is defined by a scalar-valued function Cj​(p1​,…,pnj​​) which operates
    on a subset of nj​ particles. The constraint is satisfied if Cj​=0 for an *equality*
    constraint, or Cj​≥0 for an *inequality* constraint.
  id: totrans-8
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 动态行为由一组约束控制。每个约束 j∈{1,…,M} 由一个标量值函数 Cj(p1,…,pnj) 定义，该函数作用于 nj 个粒子的子集。如果对于等式约束，Cj=0，或者对于不等式约束，Cj≥0，则约束得到满足。
- en: The simulation proceeds in discrete time steps of size Δt. The central loop
    of the PBD algorithm can be described as follows.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 模拟以离散时间步长 Δt 进行。PBD 算法的中心循环可以描述如下。
- en: '![](../Images/08062c68929416fa2bffc52db0cf8a5e.png)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/08062c68929416fa2bffc52db0cf8a5e.png)'
- en: '**Figure 32.2.1 (PBD Main Algorithm).** The core of the loop is a multi-phase
    process: velocity and position prediction, constraint construction, constraint
    solving, and state update.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '**图 32.2.1 (PBD 主算法).** 循环的核心是一个多阶段过程：速度和位置预测、约束构建、约束求解和状态更新。'
- en: Note that since the algorithm simulates a system which is 2nd order in t, we
    need to specify both positions and velocities before the simulation loop starts.
    This loop structure ensures that velocities are implicitly updated based on the
    geometric corrections performed by the solver, producing the correct behavior
    for a 2nd-order dynamical system.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，由于该算法模拟的是一个二阶 t 的系统，因此在模拟循环开始之前，我们需要指定位置和速度。这种循环结构确保速度通过求解器执行的几何校正隐式更新，从而产生二阶动力学系统的正确行为。
