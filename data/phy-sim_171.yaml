- en: Volume Conservation Constraints
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 体积守恒约束
- en: 原文：[https://phys-sim-book.github.io/lec32.3-pbd_volume_constraints.html](https://phys-sim-book.github.io/lec32.3-pbd_volume_constraints.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://phys-sim-book.github.io/lec32.3-pbd_volume_constraints.html](https://phys-sim-book.github.io/lec32.3-pbd_volume_constraints.html)
- en: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '`<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">`'
- en: The simulation of incompressible or nearly incompressible materials is critical
    for many applications in computer graphics. In a force-based framework, incompressibility
    typically requires solving a complex Poisson equation for pressure. PBD offers
    a more direct and often simpler approach by enforcing volume or density conservation
    through geometric constraints. This section will explore several such constraints,
    beginning with those defined on discrete mesh elements like tetrahedra and extending
    to global volume constraints for closed surfaces.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在计算机图形学的许多应用中，不可压缩或近似不可压缩材料的模拟至关重要。在一个基于力的框架中，不可压缩性通常需要求解一个复杂的泊松方程来求解压力。PBD通过通过几何约束强制执行体积或密度守恒提供了一种更直接且通常更简单的方法。本节将探讨几种此类约束，从定义在离散网格元素（如四面体）上的约束开始，扩展到封闭表面的全局体积约束。
- en: '[Tetrahedral Volume and Triangle Area Constraints](#tetrahedral-volume-and-triangle-area-constraints)'
  id: totrans-4
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[四面体体积和三角形面积约束](#tetrahedral-volume-and-triangle-area-constraints)'
- en: For volumetric objects discretized into a tetrahedral mesh, incompressibility
    can be approximated by constraining the volume of each individual tetrahedron
    to remain at its rest volume.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 对于离散成四面体网格的体积对象，可以通过限制每个单个四面体的体积保持在其静止体积来近似不可压缩性。
- en: '****Definition 33.3.1 (Tetrahedral Volume Constraint).**** Given a tetrahedron
    defined by four vertices with positions p1​,p2​,p3​,p4​ and a rest volume V0​,
    the volume constraint function C is defined as: C(p1​,p2​,p3​,p4​)=61​((p2​−p1​)×(p3​−p1​))⋅(p4​−p1​)−V0​(33.3.1)
    The constraint is satisfied when C=0. The gradients of this function with respect
    to the four vertex positions are: ∇p1​​C∇p2​​C∇p3​​C∇p4​​C​=61​((p3​−p2​)×(p4​−p2​))=61​((p4​−p3​)×(p1​−p3​))=61​((p1​−p4​)×(p2​−p4​))=61​((p2​−p1​)×(p3​−p1​))​
    These gradients—vectors proportional to the areas of the opposing faces—are used
    to calculate position corrections for the four vertices. An analogous constraint
    can be defined for the area of a triangle in 2D or 3D simulations.'
  id: totrans-6
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '****定义33.3.1（四面体体积约束）.**** 给定一个由四个顶点p1、p2、p3、p4定义的四面体，其静止体积为V0，体积约束函数C定义为：C(p1,
    p2, p3, p4) = 61((p2−p1)×(p3−p1))⋅(p4−p1)−V0 (33.3.1) 当C=0时，约束得到满足。此函数关于四个顶点位置的梯度是：∇p1C∇p2C∇p3C∇p4C
    = 61((p3−p2)×(p4−p2)) = 61((p4−p3)×(p1−p3)) = 61((p1−p4)×(p2−p4)) = 61((p2−p1)×(p3−p1))
    这些梯度——与对立面的面积成比例的向量——用于计算四个顶点的位置修正。对于2D或3D模拟中的三角形面积，可以定义一个类似的约束。'
- en: '[Global Volume for Closed Meshes](#global-volume-for-closed-meshes)'
  id: totrans-7
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[封闭网格的全局体积](#global-volume-for-closed-meshes)'
- en: 'For objects represented by a closed, watertight triangle mesh (such as an inflatable
    character), it is often desirable to control the total enclosed volume. This can
    be achieved with a single global constraint that acts on all vertices of the mesh.
    The total volume V of a closed mesh can be calculated using the Divergence Theorem,
    which discretizes to a sum over all triangles. The volume contributed by each
    triangle i with vertices (pt1​i​,pt2​i​,pt3​i​) is the signed volume of the tetrahedron
    formed by the triangle and the origin:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 对于由封闭、密封的三角形网格（如可充气角色）表示的对象，通常希望控制封闭的总体积。这可以通过对网格的所有顶点施加单个全局约束来实现。封闭网格的总体积V可以使用散度定理计算，该定理离散化为一个所有三角形的和。每个三角形i（顶点为pt1i、pt2i、pt3i）的贡献体积是由三角形和原点形成的四面体的有向体积：
- en: V=i∑N_triangles​61​(pt1​i​×pt2​i​)⋅pt3​i​
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: V=i∑N_triangles61(pt1i×pt2i)⋅pt3i
- en: 'The global volume constraint is then formulated to maintain this volume at
    a target value, which is typically the rest volume V0​ scaled by a pressure factor
    kpressure​: C(p1​,...,pN​)=(i∑​61​(pt1i​​×pt2i​​)⋅pt3i​​)−kpressure​V0​(33.3.2)
    The gradient of this constraint with respect to a vertex position pj​ is the sum
    of the gradients from all triangles adjacent to that vertex. This results in a
    correction that redistributes the volume error across the entire surface.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 然后将全局体积约束公式化为保持此体积在目标值，该目标值通常是静止体积V0乘以压力因子kpressure：C(p1,...,pN) = (i∑61(pt1i×pt2i)⋅pt3i)−kpressureV0
    (33.3.2) 此约束关于顶点位置pj的梯度是所有与该顶点相邻的三角形的梯度的和。这导致一个校正，在整个表面上重新分配体积误差。
