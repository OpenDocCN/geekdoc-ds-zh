- en: 13\. Integration and Measure Theory
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 13. 积分与测度理论
- en: 原文：[https://leanprover-community.github.io/mathematics_in_lean/C13_Integration_and_Measure_Theory.html](https://leanprover-community.github.io/mathematics_in_lean/C13_Integration_and_Measure_Theory.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://leanprover-community.github.io/mathematics_in_lean/C13_Integration_and_Measure_Theory.html](https://leanprover-community.github.io/mathematics_in_lean/C13_Integration_and_Measure_Theory.html)
- en: '*[Mathematics in Lean](index.html)* **   13\. Integration and Measure Theory'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '*[Lean 中的数学](index.html)* **   13. 积分与测度理论'
- en: '[View page source](_sources/C13_Integration_and_Measure_Theory.rst.txt)'
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[查看页面源代码](_sources/C13_Integration_and_Measure_Theory.rst.txt)'
- en: '* * *'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '## 13.1\. Elementary Integration[](#elementary-integration "Link to this heading")'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '## 13.1. 基本积分[](#elementary-integration "链接到这个标题")'
- en: We first focus on integration of functions on finite intervals in `ℝ`. We can
    integrate elementary functions.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先关注在 `ℝ` 的有限区间上函数的积分。我们可以积分基本函数。
- en: '[PRE0]'
  id: totrans-7
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The fundamental theorem of calculus relates integration and differentiation.
    Below we give simplified statements of the two parts of this theorem. The first
    part says that integration provides an inverse to differentiation and the second
    one specifies how to compute integrals of derivatives. (These two parts are very
    closely related, but their optimal versions, which are not shown here, are not
    equivalent.)
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 微积分的基本定理将积分和微分联系起来。以下给出该定理两部分的简化陈述。第一部分说明积分提供了对微分的逆运算，第二部分指定了如何计算导数的积分。（这两部分非常密切相关，但它们的最佳版本，此处未展示，并不等价。）
- en: '[PRE1]'
  id: totrans-9
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Convolution is also defined in Mathlib and its basic properties are proved.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 卷积也在 Mathlib 中定义，并且其基本性质得到了证明。
- en: '[PRE2]  ## 13.2\. Measure Theory[](#measure-theory "Link to this heading")'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE2]  ## 13.2. 测度理论[](#measure-theory "链接到这个标题")'
- en: The general context for integration in Mathlib is measure theory. Even the elementary
    integrals of the previous section are in fact Bochner integrals. Bochner integration
    is a generalization of Lebesgue integration where the target space can be any
    Banach space, not necessarily finite dimensional.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: Mathlib 中积分的一般背景是测度理论。甚至上一节中的基本积分实际上也是博赫纳积分。博赫纳积分是勒贝格积分的推广，其中目标空间可以是任何Banach空间，不一定是有限维的。
- en: The first component in the development of measure theory is the notion of a
    \(\sigma\)-algebra of sets, which are called the *measurable* sets. The type class
    `MeasurableSpace` serves to equip a type with such a structure. The sets `empty`
    and `univ` are measurable, the complement of a measurable set is measurable, and
    a countable union or intersection of measurable sets is measurable. Note that
    these axioms are redundant; if you `#print MeasurableSpace`, you will see the
    ones that Mathlib uses. As the examples below show, countability assumptions can
    be expressed using the `Encodable` type class.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 测度理论发展的第一个组成部分是集合的 \(\sigma\)-代数概念，这些集合被称为 *可测集*。类型类 `MeasurableSpace` 用于为一个类型提供这种结构。集合
    `empty` 和 `univ` 是可测的，可测集合的补集是可测的，可测集合的可数并或交集是可测的。请注意，这些公理是多余的；如果你 `#print MeasurableSpace`，你会看到
    Mathlib 使用的那些。如下面的例子所示，可数性假设可以使用 `Encodable` 类型类来表示。
- en: '[PRE3]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Once a type is measurable, we can measure it. On paper, a measure on a set (or
    type) equipped with a \(\sigma\)-algebra is a function from the measurable sets
    to the extended non-negative reals that is additive on countable disjoint unions.
    In Mathlib, we don’t want to carry around measurability assumptions every time
    we write an application of the measure to a set. So we extend the measure to any
    set `s` as the infimum of measures of measurable sets containing `s`. Of course,
    many lemmas still require measurability assumptions, but not all.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦一个类型是可测的，我们就可以对其进行测量。在纸上，一个集合（或类型）上的测度是测度集到扩展非负实数的函数，在可数可分并集中是可加的。在 Mathlib
    中，我们不想每次将测度应用于集合时都携带可测性假设。因此，我们将测度扩展到任何集合 `s`，作为包含 `s` 的可测集合测度的下确界。当然，许多引理仍然需要可测性假设，但并非所有。
- en: '[PRE4]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Once a type has a measure associated with it, we say that a property `P` holds
    *almost everywhere* if the set of elements where the property fails has measure
    0. The collection of properties that hold almost everywhere form a filter, but
    Mathlib introduces special notation for saying that a property holds almost everywhere.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦一个类型与一个测度相关联，我们就说一个性质 `P` 在几乎处处成立，如果该性质失败元素的集合的测度为0。几乎处处成立的性质集合形成一个过滤器，但 Mathlib
    引入了特殊的符号来说明一个性质在几乎处处成立。
- en: '[PRE5]  ## 13.3\. Integration[](#integration "Link to this heading")'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE5]  ## 13.3. 积分[](#integration "链接到这个标题")'
- en: Now that we have measurable spaces and measures we can consider integrals. As
    explained above, Mathlib uses a very general notion of integration that allows
    any Banach space as the target. As usual, we don’t want our notation to carry
    around assumptions, so we define integration in such a way that an integral is
    equal to zero if the function in question is not integrable. Most lemmas having
    to do with integrals have integrability assumptions.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了可测空间和测度，我们可以考虑积分。如上所述，Mathlib使用一个非常通用的积分概念，允许任何Banach空间作为目标。通常，我们不希望我们的符号携带任何假设，因此我们定义积分的方式是，如果所讨论的函数不可积，则积分等于零。与积分有关的大多数引理都有可积性假设。
- en: '[PRE6]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'As an example of the complex interactions between our various conventions,
    let us see how to integrate constant functions. Recall that a measure `μ` takes
    values in `ℝ≥0∞`, the type of extended non-negative reals. There is a function
    `ENNReal.toReal : ℝ≥0∞ → ℝ` which sends `⊤`, the point at infinity, to zero. For
    any `s : Set α`, if `μ s = ⊤`, then nonzero constant functions are not integrable
    on `s`. In that case, their integrals are equal to zero by definition, as is `(μ
    s).toReal`. So in all cases we have the following lemma.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '作为我们各种约定之间复杂交互的一个例子，让我们看看如何积分常数函数。回想一下，测度 `μ` 在 `ℝ≥0∞` 上取值，这是扩展非负实数的类型。存在一个函数
    `ENNReal.toReal : ℝ≥0∞ → ℝ`，它将无穷大点 `⊤` 映射到零。对于任何 `s : Set α`，如果 `μ s = ⊤`，则非零常数函数在
    `s` 上不可积。在这种情况下，它们的积分根据定义等于零，正如 `(μ s).toReal` 一样。因此，在所有情况下，我们都有以下引理。'
- en: '[PRE7]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: We now quickly explain how to access the most important theorems in integration
    theory, starting with the dominated convergence theorem. There are several versions
    in Mathlib, and here we only show the most basic one.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们简要说明如何访问积分理论中最重要的定理，从支配收敛定理开始。Mathlib中有几个版本，这里我们只展示最基本的一个。
- en: '[PRE8]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Then we have Fubini’s theorem for integrals on product type.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们有了关于乘积类型积分的Fubini定理。
- en: '[PRE9]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: There is a very general version of convolution that applies to any continuous
    bilinear form.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 存在一个非常通用的卷积版本，适用于任何连续的双线性形式。
- en: '[PRE10]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Finally, Mathlib has a very general version of the change-of-variables formula.
    In the statement below, `BorelSpace E` means the \(\sigma\)-algebra on `E` is
    generated by the open sets of `E`, and `IsAddHaarMeasure μ` means that the measure
    `μ` is left-invariant, gives finite mass to compact sets, and give positive mass
    to open sets.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，Mathlib有一个非常通用的变量替换公式的版本。在下面的陈述中，`BorelSpace E` 表示 `E` 上的 \(\sigma\)-代数是由
    `E` 的开集生成的，而 `IsAddHaarMeasure μ` 表示测度 `μ` 是左不变的，对紧集给出有限质量，并对开集给出正质量。
- en: '[PRE11] [Previous](C12_Differential_Calculus.html "12\. Differential Calculus")
    [Next](genindex.html "Index")'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE11] [上一节](C12_Differential_Calculus.html "12. 微分学") [下一节](genindex.html
    "索引")'
- en: '* * *'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: © Copyright 2020-2025, Jeremy Avigad, Patrick Massot. Text licensed under CC
    BY 4.0.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: © 版权所有 2020-2025，Jeremy Avigad，Patrick Massot。文本许可协议为 CC BY 4.0。
- en: 'Built with [Sphinx](https://www.sphinx-doc.org/) using a [theme](https://github.com/readthedocs/sphinx_rtd_theme)
    provided by [Read the Docs](https://readthedocs.org). ## 13.1\. Elementary Integration[](#elementary-integration
    "Link to this heading")'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 [Sphinx](https://www.sphinx-doc.org/) 构建，使用 [主题](https://github.com/readthedocs/sphinx_rtd_theme)
    由 [Read the Docs](https://readthedocs.org) 提供。## 13.1. 初等积分[](#elementary-integration
    "链接到这个标题")
- en: We first focus on integration of functions on finite intervals in `ℝ`. We can
    integrate elementary functions.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先关注在 `ℝ` 上的有限区间上函数的积分。我们可以积分初等函数。
- en: '[PRE12]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: The fundamental theorem of calculus relates integration and differentiation.
    Below we give simplified statements of the two parts of this theorem. The first
    part says that integration provides an inverse to differentiation and the second
    one specifies how to compute integrals of derivatives. (These two parts are very
    closely related, but their optimal versions, which are not shown here, are not
    equivalent.)
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 微积分基本定理将积分和微分联系起来。下面我们给出该定理两部分的简化陈述。第一部分说明积分提供了对微分的逆运算，第二部分指定了如何计算导数的积分。（这两部分非常紧密相关，但它们的最佳版本（此处未展示）并不等价。）
- en: '[PRE13]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Convolution is also defined in Mathlib and its basic properties are proved.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 卷积也在Mathlib中定义，并且其基本性质得到了证明。
- en: '[PRE14]  ## 13.2\. Measure Theory[](#measure-theory "Link to this heading")'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE14]'
- en: The general context for integration in Mathlib is measure theory. Even the elementary
    integrals of the previous section are in fact Bochner integrals. Bochner integration
    is a generalization of Lebesgue integration where the target space can be any
    Banach space, not necessarily finite dimensional.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: Mathlib 中积分的一般背景是测度理论。甚至上一节中的基本积分实际上也是 Bochner 积分。Bochner 积分是 Lebesgue 积分的推广，其中目标空间可以是任何
    Banach 空间，不一定是有限维的。
- en: The first component in the development of measure theory is the notion of a
    \(\sigma\)-algebra of sets, which are called the *measurable* sets. The type class
    `MeasurableSpace` serves to equip a type with such a structure. The sets `empty`
    and `univ` are measurable, the complement of a measurable set is measurable, and
    a countable union or intersection of measurable sets is measurable. Note that
    these axioms are redundant; if you `#print MeasurableSpace`, you will see the
    ones that Mathlib uses. As the examples below show, countability assumptions can
    be expressed using the `Encodable` type class.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 测度理论发展中的第一个组成部分是集合的 \(\sigma\)-代数概念，这些集合被称为**可测**集合。类型类 `MeasurableSpace` 用于为一个类型提供这种结构。集合
    `empty` 和 `univ` 是可测的，可测集合的补集也是可测的，可测集合的可数并或交也是可测的。请注意，这些公理是多余的；如果你 `#print MeasurableSpace`，你会看到
    Mathlib 使用的那些。如下面的例子所示，可数性假设可以使用 `Encodable` 类型类来表示。
- en: '[PRE15]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Once a type is measurable, we can measure it. On paper, a measure on a set (or
    type) equipped with a \(\sigma\)-algebra is a function from the measurable sets
    to the extended non-negative reals that is additive on countable disjoint unions.
    In Mathlib, we don’t want to carry around measurability assumptions every time
    we write an application of the measure to a set. So we extend the measure to any
    set `s` as the infimum of measures of measurable sets containing `s`. Of course,
    many lemmas still require measurability assumptions, but not all.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦一个类型是可测的，我们就可以对其进行测量。在纸上，一个在带有 \(\sigma\)-代数的集合（或类型）上的测度是一个从可测集合到扩展非负实数的函数，它在可数不相交的并集上是可加的。在
    Mathlib 中，我们不希望在每次将测度应用于集合时都携带可测性假设。因此，我们将测度扩展到任何集合 `s`，作为包含 `s` 的可测集合测度的下确界。当然，许多引理仍然需要可测性假设，但并非所有。
- en: '[PRE16]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Once a type has a measure associated with it, we say that a property `P` holds
    *almost everywhere* if the set of elements where the property fails has measure
    0. The collection of properties that hold almost everywhere form a filter, but
    Mathlib introduces special notation for saying that a property holds almost everywhere.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦一个类型与其相关联的测度，我们说一个属性 `P` 在**几乎处处**成立，如果属性失败的元素集合的测度为 0。几乎处处成立的属性集合形成一个过滤器，但
    Mathlib 引入了特殊的符号来说明一个属性几乎处处成立。
- en: '[PRE17]  ## 13.3\. Integration[](#integration "Link to this heading")'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE17]  ## 13.3\. 积分[](#integration "链接到这个标题")'
- en: Now that we have measurable spaces and measures we can consider integrals. As
    explained above, Mathlib uses a very general notion of integration that allows
    any Banach space as the target. As usual, we don’t want our notation to carry
    around assumptions, so we define integration in such a way that an integral is
    equal to zero if the function in question is not integrable. Most lemmas having
    to do with integrals have integrability assumptions.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了可测空间和测度，我们可以考虑积分。如上所述，Mathlib 使用一个非常一般的积分概念，允许任何 Banach 空间作为目标。像往常一样，我们不希望我们的符号携带假设，所以我们定义积分的方式是，如果相关函数不可积，则积分等于零。与积分有关的大多数引理都有可积性假设。
- en: '[PRE18]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'As an example of the complex interactions between our various conventions,
    let us see how to integrate constant functions. Recall that a measure `μ` takes
    values in `ℝ≥0∞`, the type of extended non-negative reals. There is a function
    `ENNReal.toReal : ℝ≥0∞ → ℝ` which sends `⊤`, the point at infinity, to zero. For
    any `s : Set α`, if `μ s = ⊤`, then nonzero constant functions are not integrable
    on `s`. In that case, their integrals are equal to zero by definition, as is `(μ
    s).toReal`. So in all cases we have the following lemma.'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '作为我们各种约定之间复杂交互的一个例子，让我们看看如何积分常数函数。回想一下，测度 `μ` 在 `ℝ≥0∞` 类型中取值，即扩展非负实数类型。存在一个函数
    `ENNReal.toReal : ℝ≥0∞ → ℝ`，它将无穷大点 `⊤` 映射到零。对于任何 `s : Set α`，如果 `μ s = ⊤`，则非零常数函数在
    `s` 上不可积。在这种情况下，它们的积分根据定义等于零，就像 `(μ s).toReal` 一样。所以，在所有情况下，我们都有以下引理。'
- en: '[PRE19]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: We now quickly explain how to access the most important theorems in integration
    theory, starting with the dominated convergence theorem. There are several versions
    in Mathlib, and here we only show the most basic one.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在简要解释如何访问积分理论中最重要的定理，从支配收敛定理开始。Mathlib中有几个版本，这里我们只展示最基本的一个。
- en: '[PRE20]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Then we have Fubini’s theorem for integrals on product type.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们有了乘积类型上的积分的傅里叶定理。
- en: '[PRE21]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: There is a very general version of convolution that applies to any continuous
    bilinear form.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 存在一个非常通用的卷积版本，适用于任何连续的双线性形式。
- en: '[PRE22]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Finally, Mathlib has a very general version of the change-of-variables formula.
    In the statement below, `BorelSpace E` means the \(\sigma\)-algebra on `E` is
    generated by the open sets of `E`, and `IsAddHaarMeasure μ` means that the measure
    `μ` is left-invariant, gives finite mass to compact sets, and give positive mass
    to open sets.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，Mathlib有一个非常通用的变量替换公式。在下面的陈述中，`BorelSpace E` 表示 `E` 上的 \(\sigma\)-代数是由 `E`
    的开集生成的，而 `IsAddHaarMeasure μ` 表示测度 `μ` 是左不变的，对紧集赋予有限质量，对开集赋予正质量。
- en: '[PRE23]  ## 13.1\. Elementary Integration[](#elementary-integration "Link
    to this heading")'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE23]  ## 13.1\. 基本积分[](#elementary-integration "链接到本标题")'
- en: We first focus on integration of functions on finite intervals in `ℝ`. We can
    integrate elementary functions.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先关注在有限区间 \(\mathbb{R}\) 上的函数积分。我们可以积分基本函数。
- en: '[PRE24]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: The fundamental theorem of calculus relates integration and differentiation.
    Below we give simplified statements of the two parts of this theorem. The first
    part says that integration provides an inverse to differentiation and the second
    one specifies how to compute integrals of derivatives. (These two parts are very
    closely related, but their optimal versions, which are not shown here, are not
    equivalent.)
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 微积分的基本定理将积分和微分联系起来。以下我们给出该定理两部分的简化陈述。第一部分说明积分是微分的逆运算，第二部分则指定了如何计算导数的积分。（这两部分非常紧密相关，但它们的最佳版本（此处未展示）并不等价。）
- en: '[PRE25]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: Convolution is also defined in Mathlib and its basic properties are proved.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: Mathlib中也定义了卷积，并证明了其基本性质。
- en: '[PRE26]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '## 13.2\. Measure Theory[](#measure-theory "Link to this heading")'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '## 13.2\. 测度论[](#measure-theory "链接到本标题")'
- en: The general context for integration in Mathlib is measure theory. Even the elementary
    integrals of the previous section are in fact Bochner integrals. Bochner integration
    is a generalization of Lebesgue integration where the target space can be any
    Banach space, not necessarily finite dimensional.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在Mathlib中，积分的一般背景是测度论。甚至上一节中的基本积分实际上也是博赫纳积分。博赫纳积分是勒贝格积分的推广，其中目标空间可以是任何Banach空间，不一定是有限维的。
- en: The first component in the development of measure theory is the notion of a
    \(\sigma\)-algebra of sets, which are called the *measurable* sets. The type class
    `MeasurableSpace` serves to equip a type with such a structure. The sets `empty`
    and `univ` are measurable, the complement of a measurable set is measurable, and
    a countable union or intersection of measurable sets is measurable. Note that
    these axioms are redundant; if you `#print MeasurableSpace`, you will see the
    ones that Mathlib uses. As the examples below show, countability assumptions can
    be expressed using the `Encodable` type class.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 测度论发展中的第一个组成部分是集合的 \(\sigma\)-代数概念，这些集合被称为 *可测* 集合。类型类 `MeasurableSpace` 用于为一个类型提供这种结构。空集和全集是可测的，可测集合的补集是可测的，可测集合的可数并集或交集也是可测的。请注意，这些公理是多余的；如果你
    `#print MeasurableSpace`，你会看到Mathlib使用的那些。如下面的例子所示，可数性假设可以使用 `Encodable` 类型类来表示。
- en: '[PRE27]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Once a type is measurable, we can measure it. On paper, a measure on a set (or
    type) equipped with a \(\sigma\)-algebra is a function from the measurable sets
    to the extended non-negative reals that is additive on countable disjoint unions.
    In Mathlib, we don’t want to carry around measurability assumptions every time
    we write an application of the measure to a set. So we extend the measure to any
    set `s` as the infimum of measures of measurable sets containing `s`. Of course,
    many lemmas still require measurability assumptions, but not all.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦一个类型是可测的，我们就可以对其进行测量。在纸上，一个带有 \(\sigma\)-代数的集合（或类型）上的测度是从可测集合到扩展非负实数的函数，在可数可分并集中是可加的。在Mathlib中，我们不希望在每次将测度应用于集合时都携带可测性假设。因此，我们将测度扩展到任何集合
    `s`，作为包含 `s` 的可测集合测度的下确界。当然，许多引理仍然需要可测性假设，但并非所有。
- en: '[PRE28]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: Once a type has a measure associated with it, we say that a property `P` holds
    *almost everywhere* if the set of elements where the property fails has measure
    0. The collection of properties that hold almost everywhere form a filter, but
    Mathlib introduces special notation for saying that a property holds almost everywhere.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦一个类型与一个测度相关联，我们就说一个性质 `P` 在几乎处处成立，如果该性质失败元素的集合的测度为0。几乎处处成立的性质集合形成一个过滤器，但Mathlib引入了特殊的符号来说明一个性质在几乎处处成立。
- en: '[PRE29]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: '## 13.3\. Integration[](#integration "Link to this heading")'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '## 13.3\. 积分[](#integration "链接到这个标题")'
- en: Now that we have measurable spaces and measures we can consider integrals. As
    explained above, Mathlib uses a very general notion of integration that allows
    any Banach space as the target. As usual, we don’t want our notation to carry
    around assumptions, so we define integration in such a way that an integral is
    equal to zero if the function in question is not integrable. Most lemmas having
    to do with integrals have integrability assumptions.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了可测空间和测度，我们可以考虑积分。如上所述，Mathlib使用一个非常通用的积分概念，允许任何Banach空间作为目标。通常，我们不希望我们的符号携带任何假设，所以我们定义积分的方式是，如果所讨论的函数不可积，则积分等于零。与积分有关的大多数引理都有可积性的假设。
- en: '[PRE30]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'As an example of the complex interactions between our various conventions,
    let us see how to integrate constant functions. Recall that a measure `μ` takes
    values in `ℝ≥0∞`, the type of extended non-negative reals. There is a function
    `ENNReal.toReal : ℝ≥0∞ → ℝ` which sends `⊤`, the point at infinity, to zero. For
    any `s : Set α`, if `μ s = ⊤`, then nonzero constant functions are not integrable
    on `s`. In that case, their integrals are equal to zero by definition, as is `(μ
    s).toReal`. So in all cases we have the following lemma.'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '作为我们各种约定之间复杂交互的一个例子，让我们看看如何积分常数函数。回忆一下，测度 `μ` 取值在 `ℝ≥0∞`，即扩展非负实数的类型。有一个函数 `ENNReal.toReal
    : ℝ≥0∞ → ℝ`，它将无穷大的点 `⊤` 映射到零。对于任何 `s : Set α`，如果 `μ s = ⊤`，则非零常数函数在 `s` 上不可积。在这种情况下，它们的积分根据定义等于零，就像
    `(μ s).toReal` 一样。所以，在所有情况下，我们都有以下引理。'
- en: '[PRE31]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: We now quickly explain how to access the most important theorems in integration
    theory, starting with the dominated convergence theorem. There are several versions
    in Mathlib, and here we only show the most basic one.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在快速解释如何访问积分理论中最重要的一些定理，从支配收敛定理开始。Mathlib中有几个版本，这里我们只展示最基本的一个。
- en: '[PRE32]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: Then we have Fubini’s theorem for integrals on product type.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们有乘积类型上的积分的Fubini定理。
- en: '[PRE33]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: There is a very general version of convolution that applies to any continuous
    bilinear form.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 存在一个非常通用的卷积版本，适用于任何连续的双线性形式。
- en: '[PRE34]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: Finally, Mathlib has a very general version of the change-of-variables formula.
    In the statement below, `BorelSpace E` means the \(\sigma\)-algebra on `E` is
    generated by the open sets of `E`, and `IsAddHaarMeasure μ` means that the measure
    `μ` is left-invariant, gives finite mass to compact sets, and give positive mass
    to open sets.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，Mathlib有一个非常通用的变量替换公式的版本。在下面的陈述中，`BorelSpace E` 表示 `E` 上的 \(\sigma\)-代数是由
    `E` 的开集生成的，而 `IsAddHaarMeasure μ` 表示测度 `μ` 是左不变的，对紧集给出有限质量，并对开集给出正质量。
- en: '[PRE35]*'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE35]*'
