- en: 2  Drinking from a fire hose
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 2  喝消防水
- en: 原文：[https://tellingstorieswithdata.com/02-drinking_from_a_fire_hose.html](https://tellingstorieswithdata.com/02-drinking_from_a_fire_hose.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://tellingstorieswithdata.com/02-drinking_from_a_fire_hose.html](https://tellingstorieswithdata.com/02-drinking_from_a_fire_hose.html)
- en: '[Foundations](./01-introduction.html)'
  id: totrans-2
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[基础](./01-introduction.html)'
- en: '[2  Drinking from a fire hose](./02-drinking_from_a_fire_hose.html)'
  id: totrans-3
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[2  喝消防水](./02-drinking_from_a_fire_hose.html)'
- en: '*Chapman and Hall/CRC published this book in July 2023\. You can purchase that
    [here](https://www.routledge.com/Telling-Stories-with-Data-With-Applications-in-R/Alexander/p/book/9781032134772).
    This online version has some updates to what was printed.*  ***Prerequisites**'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '*Chapman and Hall/CRC于2023年7月出版了这本书。您可以在[这里](https://www.routledge.com/Telling-Stories-with-Data-With-Applications-in-R/Alexander/p/book/9781032134772)购买。这个在线版本对印刷版有所更新。*  **先决条件**'
- en: 'Read *The mundanity of excellence: An ethnographic report on stratification
    and Olympic swimmers*, ([Chambliss 1989](99-references.html#ref-chambliss1989mundanity))'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读 *卓越的平凡：关于分层和奥运游泳者的民族志报告* ([Chambliss 1989](99-references.html#ref-chambliss1989mundanity))
- en: This paper finds that excellence is not due to some special talent or gift,
    but instead due to technique, discipline, and attitude.
  id: totrans-6
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这篇论文发现，卓越并非源于某种特殊的天赋或天赋，而是由于技巧、纪律和态度。
- en: Read *Data science as an atomic habit*, ([Barrett 2021](99-references.html#ref-citeBarrett))
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读 *数据科学作为原子习惯* ([Barrett 2021](99-references.html#ref-citeBarrett))
- en: This blog post describes an approach to learning data science that involves
    making small, consistent, actions.
  id: totrans-8
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这篇博客文章描述了一种学习数据科学的方法，该方法涉及采取小而一致的行动。
- en: Read *This is how AI bias really happens—and why it’s so hard to fix*, ([Hao
    2019](99-references.html#ref-hao2019))
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读 *这是AI偏见真正发生的原因——以及为什么它如此难以修复* ([Hao 2019](99-references.html#ref-hao2019))
- en: This article highlights some of the ways in which models can perpetuate bias.
  id: totrans-10
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本文强调了模型如何持续存在偏见的一些方式。
- en: '**Key concepts and skills**'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念和技能**'
- en: The statistical programming language R enables us to tell interesting stories
    using data. It is a language like any other, and the path to mastery can be slow.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 统计编程语言R使我们能够使用数据讲述有趣的故事。它就像任何其他语言一样，精通它的路径可能很慢。
- en: 'The workflow that we use to approach projects is: plan, simulate, acquire,
    explore, and share.'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们用于处理项目的流程是：计划、模拟、获取、探索和分享。
- en: The way to learn R is to start with a small project and break down what is required
    to achieve it into tiny steps, look at other people’s code, and draw on that to
    achieve each step. Complete that project and move onto the next project. With
    each project you will get a little better.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 学习R的方法是从一个小项目开始，将实现它所需的内容分解成微小的步骤，查看他人的代码，并从中吸取经验以实现每一步。完成该项目后，再进行下一个项目。随着每个项目的完成，你将变得越来越好。
- en: '**Software and packages**'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '**软件和包**'
- en: Base R ([R Core Team 2024](99-references.html#ref-citeR))
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基础R ([R Core Team 2024](99-references.html#ref-citeR))
- en: Core `tidyverse` ([Wickham et al. 2019](99-references.html#ref-tidyverse))
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 核心tidyverse ([Wickham et al. 2019](99-references.html#ref-tidyverse))
- en: '`dplyr` ([Wickham et al. 2022](99-references.html#ref-citedplyr))'
  id: totrans-18
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dplyr` ([Wickham et al. 2022](99-references.html#ref-citedplyr))'
- en: '`ggplot2` ([Wickham 2016](99-references.html#ref-citeggplot))'
  id: totrans-19
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ggplot2` ([Wickham 2016](99-references.html#ref-citeggplot))'
- en: '`tidyr` ([Wickham, Vaughan, and Girlich 2023](99-references.html#ref-citetidyr))'
  id: totrans-20
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tidyr` ([Wickham, Vaughan, and Girlich 2023](99-references.html#ref-citetidyr))'
- en: '`stringr` ([Wickham 2022](99-references.html#ref-citestringr))'
  id: totrans-21
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`stringr` ([Wickham 2022](99-references.html#ref-citestringr))'
- en: '`readr` ([Wickham, Hester, and Bryan 2022](99-references.html#ref-citereadr))'
  id: totrans-22
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`readr` ([Wickham, Hester, and Bryan 2022](99-references.html#ref-citereadr))'
- en: '`janitor` ([Firke 2023](99-references.html#ref-janitor))'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`janitor` ([Firke 2023](99-references.html#ref-janitor))'
- en: '`lubridate` ([Grolemund and Wickham 2011](99-references.html#ref-GrolemundWickham2011))'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`lubridate` ([Grolemund and Wickham 2011](99-references.html#ref-GrolemundWickham2011))'
- en: '`opendatatoronto` ([Gelfand 2022](99-references.html#ref-citeSharla))'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`opendatatoronto` ([Gelfand 2022](99-references.html#ref-citeSharla))'
- en: '`tinytable` ([Arel-Bundock 2024](99-references.html#ref-tinytable))'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tinytable` ([Arel-Bundock 2024](99-references.html#ref-tinytable))'
- en: '[PRE0]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '*## 2.1 Hello, World!'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '*## 2.1 Hello, World!'
- en: 'The way to start, is to start. In this chapter we go through three complete
    examples of the data science workflow advocated in this book. This means we:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 开始的方法就是开始。在本章中，我们探讨了本书所倡导的数据科学工作流程的三个完整示例。这意味着我们：
- en: \[ \mbox{Plan} \rightarrow \mbox{Simulate} \rightarrow \mbox{Acquire} \rightarrow
    \mbox{Explore} \rightarrow \mbox{Share} \] If you are new to R, then some of the
    code may be a bit unfamiliar to you. If you are new to statistics, then some of
    the concepts may be unfamiliar. Do not worry. It will all soon become familiar.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \mbox{计划} \rightarrow \mbox{模拟} \rightarrow \mbox{获取} \rightarrow \mbox{探索}
    \rightarrow \mbox{分享} \] 如果你刚接触R，那么一些代码可能对你来说有些陌生。如果你刚接触统计学，那么一些概念可能也不熟悉。不要担心，所有这些很快就会变得熟悉。
- en: The only way to learn how to tell stories, is to start telling stories yourself.
    This means that you should try to get these examples working. Do the sketches
    yourself, type everything out yourself (using Posit Cloud if you are new to R
    and do not have it locally installed), and execute it all. It is important to
    realize that it will be challenging at the start. This is normal.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 学习如何讲述故事的唯一方法就是自己开始讲故事。这意味着你应该尝试让这些示例运行起来。自己完成草图，自己输入所有内容（如果你是R的新手且没有本地安装，请使用Posit
    Cloud），并执行所有操作。重要的是要认识到，一开始这将是具有挑战性的。这是正常的。
- en: Whenever you’re learning a new tool, for a long time, you’re going to suck\(\dots\)
    But the good news is that is typical; that’s something that happens to everyone,
    and it’s only temporary.
  id: totrans-32
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 无论你学习任何新工具，在很长一段时间里，你都会很糟糕\(\dots\) 但好消息是这是典型的；这是每个人都会遇到的事情，而且只是暂时的。
- en: ''
  id: totrans-33
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Hadley Wickham as quoted by Barrett ([2021](99-references.html#ref-citeBarrett)).
  id: totrans-34
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 如巴雷特引用的哈德利·维克汉姆（[2021](99-references.html#ref-citeBarrett)）。
- en: You will be guided thoroughly here. Hopefully by experiencing the excitement
    of telling stories with data, you will feel empowered to stick with it.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 你在这里将得到彻底的指导。希望你能通过体验用数据讲故事带来的兴奋，从而感到有力量坚持下去。
- en: The first step of the workflow is to plan. We do this because we need to establish
    an end-point, even if we later need to update it as we learn more about the situation.
    We then simulate because this forces us into the details of our plan. In some
    projects, data acquisition may be as straight-forward as downloading a dataset,
    but in others the data acquisition may be much of the focus, for instance, if
    we conduct a survey. We explore the data using various quantitative methods to
    come to understand it. And finally, we share our understanding, in a way that
    is focused on the needs of our audience.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 工作流程的第一步是计划。我们这样做是因为我们需要确定一个终点，即使我们后来需要根据对情况的更多了解来更新它。然后我们进行模拟，因为这迫使我们深入到计划的细节中。在某些项目中，数据获取可能像下载一个数据集那样简单，但在其他项目中，数据获取可能成为重点，例如，如果我们进行一项调查。我们使用各种定量方法来探索数据，以便理解它。最后，我们以关注受众需求的方式分享我们的理解。
- en: To get started, go to [Posit Cloud](https://posit.cloud) and create an account;
    the free version is fine for now. We use that initially, rather than the desktop,
    so that getting started is the same for everyone, but to avoid having to pay you
    should change to a local installation later. Once you have an account and log
    in, it should look something like [Figure 2.1 (a)](#fig-02-rstudio_cloud-1).
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始，请访问[Posit Cloud](https://posit.cloud)并创建一个账户；目前免费版本就足够了。我们最初使用它，而不是桌面版本，这样每个人开始的方式都一样，但为了避免付费，你应该稍后改为本地安装。一旦你有了账户并登录，它应该看起来像[图2.1
    (a)](#fig-02-rstudio_cloud-1)。
- en: '![](../Images/0c22287c6a35a5972a021a59b30a698d.png)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0c22287c6a35a5972a021a59b30a698d.png)'
- en: (a) Opening Posit Cloud for the first time
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: (a) 首次打开Posit Cloud
- en: '![](../Images/59f1c67a3a741fe43f616e050b91fdb4.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/59f1c67a3a741fe43f616e050b91fdb4.png)'
- en: (b) Opening a new RStudio project
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: (b) 打开一个新的RStudio项目
- en: 'Figure 2.1: Getting started with Posit Cloud and a new project'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.1：使用Posit Cloud和新建项目入门
- en: 'You will be in “Your Projects”. From here you should start a new project: “New
    Project” \(\rightarrow\) “New RStudio Project” ([Figure 2.1 (b)](#fig-02-rstudio_cloud-2)).
    You can give the project a name by clicking on “Untitled Project” and replacing
    it.'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 你将进入“您的项目”。从这里开始，你应该启动一个新的项目：“新建项目” \(\rightarrow\) “新建RStudio项目” ([图2.1 (b)](#fig-02-rstudio_cloud-2))。你可以通过点击“未命名项目”并替换它来给项目命名。
- en: 'We will now go through three worked examples: Australian elections, Toronto
    shelter usage, and neonatal mortality. These examples build increasing complexity,
    but from the first one, we will be telling a story with data. While we briefly
    explain many aspects here, almost everything is explained in much more detail
    in the rest of the book.'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将讨论三个工作示例：澳大利亚选举、多伦多庇护所使用情况和新生儿死亡率。这些示例的复杂性逐渐增加，但从一个开始，我们将用数据讲述一个故事。虽然我们在这里简要解释了许多方面，但几乎所有内容都在本书的其余部分有更详细的解释。
- en: 2.2 Australian elections
  id: totrans-45
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.2 澳大利亚选举
- en: Australia is a parliamentary democracy with 151 seats in the House of Representatives,
    which is the lower house and that from which government is formed. There are two
    major parties—“Liberal” and “Labor”—two minor parties—“Nationals” and “Greens”—and
    many smaller parties and independents. In this example we will create a graph
    of the number of seats that each party won in the 2022 Federal Election.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 澳大利亚是一个议会民主国家，众议院有 151 个席位，这是下议院，政府就是从那里形成的。有两个主要政党——“自由党”和“工党”——两个小政党——“国家党”和“绿党”——以及许多小党和独立人士。在这个例子中，我们将创建一个图表，显示每个政党在
    2022 年联邦选举中赢得的席位数量。
- en: 2.2.1 Plan
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.2.1 规划
- en: For this example, we need to plan two aspects. The first is what the dataset
    that we need will look like, and the second is what the final graph will look
    like.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个例子，我们需要规划两个方面。第一个是我们需要的数据库将看起来像什么，第二个是最终的图表将看起来像什么。
- en: The basic requirement for the dataset is that it has the name of the seat (sometimes
    called a “division” in Australia) and the party of the person elected. A quick
    sketch of the dataset that we would need is [Figure 2.2 (a)](#fig-australiaexample-data).
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集的基本要求是它包含席位的名称（有时在澳大利亚被称为“选区”），以及当选人的政党。我们需要的数据集的快速草图是 [图 2.2 (a)](#fig-australiaexample-data)。
- en: '![](../Images/3a95f1507c69efaf58063b0ae5716b30.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/3a95f1507c69efaf58063b0ae5716b30.png)'
- en: (a) Quick sketch of a dataset that could be useful for analyzing Australian
    elections
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: (a) 分析澳大利亚选举可能有用的数据集的快速草图
- en: '![](../Images/a7167ef6b10e6b6dde618cb9163d65c5.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/a7167ef6b10e6b6dde618cb9163d65c5.png)'
- en: (b) Quick sketch of a possible graph of the number of seats won by each party
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: (b) 每个政党赢得的席位数量的可能图表的快速草图
- en: 'Figure 2.2: Sketches of a potential dataset and graph related to an Australian
    election'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.2：与澳大利亚选举相关的潜在数据集和图表草图
- en: We also need to plan the graph that we are interested in. Given we want to display
    the number of seats that each party won, a quick sketch of what we might aim for
    is [Figure 2.2 (b)](#fig-australiaexample-graph).
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还需要规划我们感兴趣的图表。鉴于我们想显示每个政党赢得的席位数量，我们可能的目标草图是 [图 2.2 (b)](#fig-australiaexample-graph)。
- en: 2.2.2 Simulate
  id: totrans-56
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.2.2 模拟
- en: We now simulate some data, to bring some specificity to our sketches.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在模拟一些数据，以便为我们的草图增加一些具体性。
- en: 'To get started, within Posit Cloud, make a new Quarto document: “File” \(\rightarrow\)
    “New File” \(\rightarrow\) “Quarto document\(\dots\)”. Give it a title, such as
    “Exploring the 2022 Australian Election”, add your name as author, and unclick
    “Use visual markdown editor” ([Figure 2.3 (a)](#fig-quarto-australian-elections-clcik)).
    Leave the other options as their default, and then click “Create”.'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始，在 Posit Cloud 中创建一个新的 Quarto 文档：“文件” \(\rightarrow\) “新建文件” \(\rightarrow\)
    “Quarto 文档\(\dots\)”。给它一个标题，例如“探索 2022 年澳大利亚选举”，添加你的名字作为作者，并取消选中“使用视觉 Markdown
    编辑器” ([图 2.3 (a)](#fig-quarto-australian-elections-clcik))。保留其他选项为默认设置，然后点击“创建”。
- en: '![](../Images/63e8d0eb533b9195620f11d6fc1ca629.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/63e8d0eb533b9195620f11d6fc1ca629.png)'
- en: (a) Creating a new Quarto document
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: (a) 创建一个新的 Quarto 文档
- en: '![](../Images/26e94f006ae86ef5258f6d663cf439f1.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/26e94f006ae86ef5258f6d663cf439f1.png)'
- en: (b) Installing rmarkdown if necessary
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: (b) 如果需要，安装 rmarkdown
- en: '![](../Images/ecbfca5b30fba3321fe74a628b84f6d9.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/ecbfca5b30fba3321fe74a628b84f6d9.png)'
- en: (c) After initial setup and with a preamble
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: (c) 初始设置和前言之后
- en: '![](../Images/bdb91bbf0ffd30687ec2bbd19c1b5785.png)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/bdb91bbf0ffd30687ec2bbd19c1b5785.png)'
- en: (d) Highlighting the green arrow to run the chunk
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: (d) 突出显示绿色箭头以运行代码块
- en: '![](../Images/fbd574c9170e7be56e5aa87a3118420d.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/fbd574c9170e7be56e5aa87a3118420d.png)'
- en: (e) Highlighting the cross to remove the messages
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: (e) 突出显示十字以移除消息
- en: '![](../Images/db42ee08a3e9d1fe708628ba2bb96a98.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/db42ee08a3e9d1fe708628ba2bb96a98.png)'
- en: (f) Highlighting the render button
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: (f) 突出显示渲染按钮
- en: 'Figure 2.3: Getting started with a Quarto document'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.3：使用 Quarto 文档开始
- en: 'You may get a notification along the lines of “Package rmarkdown required\(\dots\).”
    ([Figure 2.3 (b)](#fig-quarto-australian-elections-wtfquarto)). If that happens,
    click “Install”. For this example, we will put everything into this one Quarto
    document. You should save it as “australian_elections.qmd”: “File” \(\rightarrow\)
    “Save As\(\dots\)”.'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能会收到类似“需要包 rmarkdown\(\dots\).”的通知 ([图 2.3 (b)](#fig-quarto-australian-elections-wtfquarto))。如果发生这种情况，请点击“安装”。在这个例子中，我们将所有内容都放入一个
    Quarto 文档中。你应该将其保存为“australian_elections.qmd”： “文件” \(\rightarrow\) “另存为\(\dots\)”。
- en: 'Remove almost all the default content, and then beneath the heading material
    create a new R code chunk: “Code” \(\rightarrow\) “Insert Chunk”. Then add preamble
    documentation that explains:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 删除几乎所有默认内容，然后在标题材料下方创建一个新的R代码块：“代码” \(\rightarrow\) “插入代码块”。然后添加前言文档，解释说明：
- en: the purpose of the document;
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文档的目的；
- en: the author and contact details;
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 作者和联系方式；
- en: when the file was written or last updated; and
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当文件被写入或最后更新时；
- en: prerequisites that the file relies on.
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文件所依赖的先决条件。
- en: '[PRE1]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '*In R, lines that start with “#” are comments. This means that they are not
    run as code by R, but are instead designed to be read by humans. Each line of
    this preamble should start with a “#”. Also make it clear that this is the preamble
    section by surrounding that with “####”. The result should look like [Figure 2.3
    (c)](#fig-quarto-australian-elections-3).'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '*在R中，以“#”开头的行是注释。这意味着它们不会被R作为代码执行，而是设计为供人类阅读。这个前言的每一行都应该以一个“#”开头。同时，通过用“####”包围它来清楚地表明这是前言部分。结果应该看起来像[图2.3
    (c)](#fig-quarto-australian-elections-3)。'
- en: After this we need to setup the workspace. This involves installing and loading
    any packages that will be needed. A package only needs to be installed once for
    each computer, but needs to be loaded each time it is to be used. In this case
    we are going to use the `tidyverse` and `janitor` packages. They will need to
    be installed because this is the first time they are being used, and then each
    will need to be loaded.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 在此之后，我们需要设置工作区。这涉及到安装和加载任何需要的包。一个包只需要在每个计算机上安装一次，但每次使用时都需要加载。在这种情况下，我们将使用`tidyverse`和`janitor`包。由于这是第一次使用，它们需要被安装，然后每个包都需要被加载。
- en: '*Shoulders of giants* *Hadley Wickham is Chief Scientist at RStudio. After
    earning a PhD in Statistics from Iowa State University in 2008 he was appointed
    as an assistant professor at Rice University, and became Chief Scientist at RStudio,
    now Posit, in 2013\. He developed the `tidyverse` collection of packages, and
    has published many books including *R for Data Science* ([Wickham, Çetinkaya-Rundel,
    and Grolemund [2016] 2023](99-references.html#ref-r4ds)) and *Advanced R* ([Wickham
    2019](99-references.html#ref-advancedr)). He was awarded the COPSS Presidents’
    Award in 2019.*  *An example of installing the packages follows. Run this code
    by clicking the small green arrow associated with the R code chunk ([Figure 2.3
    (d)](#fig-quarto-australian-elections-4)).'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '*“巨人的肩膀”* *Hadley Wickham是RStudio的首席科学家。2008年从爱荷华州立大学获得统计学博士学位后，他被任命为莱斯大学的助理教授，并于2013年成为RStudio（现在是Posit）的首席科学家。他开发了`tidyverse`包集合，并出版了许多书籍，包括*《R数据科学》（Wickham,
    Çetinkaya-Rundel, and Grolemund [2016] 2023）*和*《高级R》（Wickham 2019）*。他在2019年获得了COPSS总统奖。*
    以下是一个安装包的示例。通过点击与R代码块相关的小绿色箭头来运行此代码（[图2.3 (d)](#fig-quarto-australian-elections-4)）。'
- en: '[PRE2]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '*Now that the packages are installed, they need to be loaded. As that package
    installation step only needs to be done once per computer, that code should be
    commented out so that it is not accidentally run, or even just removed. Additionally,
    we can remove the message that printed when we installed the packages ([Figure 2.3
    (e)](#fig-quarto-australian-elections-5)).'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '*现在包已经安装，它们需要被加载。由于包安装步骤只需要在每个计算机上执行一次，因此应该将此代码注释掉，以避免意外运行，或者甚至可以直接删除。此外，我们还可以删除安装包时打印的消息（[图2.3
    (e)](#fig-quarto-australian-elections-5)）。'
- en: '[PRE3]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '*We can render the entire document by clicking “Render” ([Figure 2.3 (f)](#fig-quarto-australian-elections-6)).
    When you do this, you may be asked to install some packages. If that happens,
    then you should agree to this. This will result in a HTML document.'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '*我们可以通过点击“渲染”（[图2.3 (f)](#fig-quarto-australian-elections-6)）来渲染整个文档。当你这样做时，可能会要求你安装一些包。如果发生这种情况，那么你应该同意。这将生成一个HTML文档。'
- en: For an introduction to the packages that were just installed, each package contains
    a help file that provides information about them and their functions. It can be
    accessed by prepending a question mark to the package name and then running that
    code in the console. For instance `?tidyverse`.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 对于刚刚安装的包的介绍，每个包都包含一个帮助文件，提供有关它们及其功能的信息。可以通过在包名前加一个问号来访问它，然后在控制台中运行该代码。例如 `?tidyverse`。
- en: 'To simulate our data, we need to create a dataset with two variables: “Division”
    and “Party”, and some values for each. In the case of “Division” reasonable values
    would be a name of one of the 151 Australian divisions. In the case of “Party”
    reasonable values would be one of the following five: “Liberal”, “Labor”, “National”,
    “Green”, or “Other”. Again, this code can be run by clicking the small green arrow
    associated with the R code chunk.'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 为了模拟我们的数据，我们需要创建一个包含两个变量：“Division”和“Party”，以及每个变量的某些值。在“Division”的情况下，合理的值可以是151个澳大利亚分区中的一个名称。在“Party”的情况下，合理的值可以是以下五个之一：“Liberal”，“Labor”，“National”，“Green”，或“Other”。同样，这段代码可以通过点击与R代码块相关联的小绿色箭头来运行。
- en: '[PRE4]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '*[PRE5]*  *At a certain point, your code will not run and you will want to
    ask others for help. Do not take a screenshot of a small snippet of the code and
    expect that someone will be able to help based on that. They, almost surely, cannot.
    Instead, you need to provide them with your whole script in a way that they can
    run. We will explain what GitHub is more completely in [Chapter 3](03-workflow.html),
    but for now, if you need help, then you should naively create a GitHub Gist which
    will enable you to share your code in a way that is more helpful than taking a
    screenshot. The first step is to create a free account on [GitHub](https://github.com)
    ([Figure 2.4 (a)](#fig-githubone)). Thinking about an appropriate username is
    important because this will become part of your professional profile. It would
    make sense to have a username that is professional, independent of any course,
    and ideally related to your real name. Then look for a “+” in the top right, and
    select “New gist” ([Figure 2.4 (b)](#fig-githubgistone)).'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE5]*  *在某个时刻，你的代码将无法运行，你将需要向他人寻求帮助。不要只截取一小段代码的截图，并期望有人能根据这些截图帮助你。他们几乎肯定不能。相反，你需要以他们可以运行的方式提供你的整个脚本。我们将在[第3章](03-workflow.html)中更完整地解释GitHub，但就目前而言，如果你需要帮助，那么你应该天真地创建一个GitHub
    Gist，这样你就可以以比截图更有帮助的方式分享你的代码。第一步是在[GitHub](https://github.com)上创建一个免费账户([图2.4(a)](#fig-githubone))。考虑一个合适的用户名很重要，因为这将成为你专业档案的一部分。拥有一个专业、独立于任何课程，并且理想情况下与你的真实姓名相关的用户名是有意义的。然后寻找右上角的“+”，选择“New
    gist”([图2.4(b)](#fig-githubgistone))。'
- en: '![](../Images/25133178af693cb1a28bf2fb9ea4e2ae.png)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/25133178af693cb1a28bf2fb9ea4e2ae.png)'
- en: (a) GitHub sign-up screen
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: (a) GitHub注册屏幕
- en: '![](../Images/e3427565a662e6c465bbf1cbc7ca12c3.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e3427565a662e6c465bbf1cbc7ca12c3.png)'
- en: (b) New GitHub Gist
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: (b) 新GitHub Gist
- en: '![](../Images/005281b17fa667fe67b70ee2a46612fb.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/005281b17fa667fe67b70ee2a46612fb.png)'
- en: (c) Create a public GitHub Gist to share code
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: (c) 创建公开的GitHub Gist以分享代码
- en: 'Figure 2.4: Creating a Gist to share code when asking for help'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.4：在寻求帮助时创建Gist以分享代码
- en: From here you should add all the code to that Gist, not just the final bit that
    is giving an error. And give it a meaningful filename that includes “.R” at the
    end, for instance, “australian_elections.R”. In [Figure 2.4 (c)](#fig-githubgisttwo)
    it will turn out that we have incorrect capitalization, `library(Tidyverse)` instead
    of `library(tidyverse)`.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 从这里你应该将所有代码添加到那个Gist中，而不仅仅是导致错误的最后一段代码。并且给文件起一个有意义的名字，文件名末尾包含“.R”，例如，“australian_elections.R”。在[图2.4(c)](#fig-githubgisttwo)中，我们会发现我们使用了错误的字母大小写，`library(Tidyverse)`而不是`library(tidyverse)`。
- en: Click “Create public gist”. We can then share the URL to this Gist with whoever
    we are asking to help, explain what the problem is, and what we are trying to
    achieve. It will be easier for them to help, because all the code is available.*****  ****###
    2.2.3 Acquire
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“Create public gist”。然后我们可以将此Gist的URL分享给任何我们需要帮助的人，解释问题是什么，我们试图实现什么。这将更容易得到他们的帮助，因为所有代码都是可用的。*****  ****###
    2.2.3 获取
- en: Now we want to get the actual data. The data we need is from the Australian
    Electoral Commission (AEC), which is the non-partisan agency that organizes Australian
    federal elections. We can pass a page of their website to `read_csv()` from `readr`.
    We do not need to explicitly load `readr` because it is part of the `tidyverse`.
    The `<-` or “assignment operator” allocates the output of `read_csv()` to an object
    called “raw_elections_data”.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们想要获取实际数据。我们需要的数据来自澳大利亚选举委员会(AEC)，这是一个非党派机构，负责组织澳大利亚联邦选举。我们可以将他们的网站页面传递给`read_csv()`函数，该函数来自`readr`包。我们不需要显式加载`readr`包，因为它已经是`tidyverse`的一部分。`<-`或“赋值运算符”将`read_csv()`的输出分配给一个名为“raw_elections_data”的对象。
- en: '[PRE6]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '*We can take a quick look at the dataset using `head()` which will show the
    first six rows, and `tail()` which will show the last six rows.'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '*我们可以使用`head()`快速查看数据集，它会显示前六行，而`tail()`会显示最后六行。'
- en: '[PRE7]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '*[PRE8]'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE8]'
- en: '[PRE9]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '*[PRE10]**  **We need to clean the data so that we can use it. We are trying
    to make it similar to the dataset that we thought we wanted in the planning stage.
    While it is fine to move away from the plan, this needs to be a deliberate, reasoned
    decision. After reading in the dataset that we saved, the first thing that we
    will do is adjust the names of the variables. We will do this using `clean_names()`
    from `janitor`.'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE10]**  **我们需要清理数据以便使用。我们试图使其与我们规划阶段认为想要的数据集相似。虽然偏离计划是可以的，但这需要是一个深思熟虑、有理有据的决定。在读取我们保存的数据集后，我们将做的第一件事是调整变量的名称。我们将使用
    `janitor` 中的 `clean_names()` 来完成这项工作。'
- en: '[PRE11]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '*[PRE12]'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE12]'
- en: '*[PRE13]*  *The names are faster to type because RStudio will auto-complete
    them. To do this, we begin typing the name of a variable and then use the “tab”
    key to complete it.'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE13]*  *名称输入更快，因为 RStudio 会自动完成它们。为此，我们开始输入变量的名称，然后使用“tab”键来完成。'
- en: 'There are many variables in the dataset, and we are primarily interested in
    two: “division_nm” and “party_nm”. We can choose certain variables of interest
    with `select()` from `dplyr` which we loaded as part of the `tidyverse`. The “pipe
    operator”, `|>`, pushes the output of one line to be the first input of the function
    on the next line.'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集中有许多变量，我们主要对两个变量感兴趣：“division_nm”和“party_nm”。我们可以使用 `dplyr` 中的 `select()`
    选择感兴趣的变量，它是我们作为 `tidyverse` 部分加载的。 “管道运算符”，`|>`，将一行输出推送到下一行函数的第一个输入。
- en: '[PRE14]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '*[PRE15]*  *Some of the variable names are still not obvious because they are
    abbreviated. We can look at the names of the columns in this dataset with `names()`.
    And we can change the names using `rename()` from `dplyr`.'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE15]*  *一些变量名称仍然不明显，因为它们是缩写的。我们可以使用 `names()` 查看这个数据集中的列名。我们可以使用 `dplyr`
    中的 `rename()` 来更改名称。'
- en: '[PRE16]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '*[PRE17]*  *[PRE18]'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE17]*  *[PRE18]'
- en: '*[PRE19]*  *We could now look at the unique values in the “elected_party” column
    using `unique()`.'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE19]*  *我们可以现在查看“elected_party”列中的唯一值，使用 `unique()`。'
- en: '[PRE20]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '*[PRE21]*  *As there is more detail in this than we wanted, we may want to
    simplify the party names to match what we simulated, using `case_match()` from
    `dplyr`.'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE21]*  *由于这里比我们想要的更详细，我们可能想要使用 `dplyr` 中的 `case_match()` 简化政党名称，以匹配我们模拟的。'
- en: '[PRE22]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '*[PRE23]*  *Our data now matches our plan ([Figure 2.2 (a)](#fig-australiaexample-data)).
    For every electoral division we have the party of the person that won it.'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE23]*  *我们的数据现在与我们的计划匹配 ([图 2.2 (a)](#fig-australiaexample-data)). 对于每个选区，我们都有获胜者的政党。'
- en: Having now nicely cleaned the dataset, we should save it, so that we can start
    with that cleaned dataset in the next stage. We should make sure to save it under
    a new file name so we are not replacing the raw data, and so that it is easy to
    identify the cleaned dataset later.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经很好地清理了数据集，我们应该保存它，以便我们可以在下一阶段使用这个清理后的数据集。我们应该确保使用新的文件名保存，这样我们就不会替换原始数据，并且以后可以轻松识别清理后的数据集。
- en: '[PRE24]**********  ***### 2.2.4 Explore'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE24]**********  ***### 2.2.4 探索'
- en: We may like to explore the dataset that we created. One way to better understand
    a dataset is to make a graph. In particular, here we would like to build the graph
    that we planned in [Figure 2.2 (b)](#fig-australiaexample-graph).
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可能想探索我们创建的数据集。更好地理解数据集的一种方法是通过制作图表。特别是，我们想要构建我们在 [图 2.2 (b)](#fig-australiaexample-graph)
    中规划的图表。
- en: First, we read in the dataset that we just created.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们读取我们刚刚创建的数据集。
- en: '[PRE25]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '*We can get a quick count of how many seats each party won using `count()`
    from `dplyr`.'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '*我们可以使用 `dplyr` 中的 `count()` 快速统计每个政党赢得的席位数量。'
- en: '[PRE26]'
  id: totrans-125
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '*[PRE27]*  *To build the graph that we are interested in, we use `ggplot2`
    which is part of the `tidyverse`. The key aspect of this package is that we build
    graphs by adding layers using “+”, which we call the “add operator”. In particular
    we will create a bar chart using `geom_bar()` from `ggplot2` ([Figure 2.5 (a)](#fig-canadanice-1)).'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE27]*  *为了构建我们感兴趣的图表，我们使用 `ggplot2`，它是 `tidyverse` 的一部分。这个包的关键方面是我们通过添加层来构建图表，使用“+”作为“添加运算符”。特别是，我们将使用
    `ggplot2` 中的 `geom_bar()` 创建条形图 ([图 2.5 (a)](#fig-canadanice-1))。'
- en: '[PRE28]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '*![](../Images/172ea281541c61d25006642b73465c9e.png)'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/172ea281541c61d25006642b73465c9e.png)'
- en: (a) Default options
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: (a) 默认选项
- en: '![](../Images/5c61df1b51006613b53dda612bf5f17a.png)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/5c61df1b51006613b53dda612bf5f17a.png)'
- en: (b) Improved theme and labels
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: (b) 改进的主题和标签
- en: 'Figure 2.5: Number of seats won, by political party, at the 2022 Australian
    Federal Election'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.5：2022 年澳大利亚联邦选举中各政党赢得的席位数量
- en: '[Figure 2.5 (a)](#fig-canadanice-1) accomplishes what we set out to do. But
    we can make it look a bit nicer by modifying the default options and improving
    the labels ([Figure 2.5 (b)](#fig-canadanice-2)).***  ***### 2.2.5 Share'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '[图2.5 (a)](#fig-canadanice-1) 实现了我们设定的目标。但我们可以通过修改默认选项和改进标签([图2.5 (b)](#fig-canadanice-2))使其看起来更美观。***  ***###
    2.2.5 分享'
- en: To this point we have downloaded some data, cleaned it, and made a graph. We
    would typically need to communicate what we have done at some length. In this
    case, we can write a few paragraphs about what we did, why we did it, and what
    we found to conclude our workflow. An example follows.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经下载了一些数据，对其进行了清理，并制作了一个图表。我们通常需要详细地传达我们所做的工作。在这种情况下，我们可以写几段关于我们所做的工作、为什么这样做以及我们发现了什么，以总结我们的工作流程。以下是一个例子。
- en: Australia is a parliamentary democracy with 151 seats in the House of Representatives,
    which is the house from which government is formed. There are two major parties—“Liberal”
    and “Labor”—two minor parties—“Nationals” and “Greens”—and many smaller parties.
    The 2022 Federal Election occurred on 21 May, and around 15 million votes were
    cast. We were interested in the number of seats that were won by each party.
  id: totrans-135
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 澳大利亚是一个议会民主国家，众议院有151个席位，政府就是从众议院中产生的。有两个主要政党——“自由党”和“工党”——两个小政党——“国家党”和“绿党”——以及许多小政党。2022年联邦选举于5月21日举行，约有1500万张选票。我们感兴趣的是每个政党赢得的席位数量。
- en: ''
  id: totrans-136
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: We downloaded the results, on a seat-specific basis, from the Australian Electoral
    Commission website. We cleaned and tidied the dataset using the statistical programming
    language R ([R Core Team 2024](99-references.html#ref-citeR)) including the `tidyverse`
    ([Wickham et al. 2019](99-references.html#ref-tidyverse)) and `janitor` ([Firke
    2023](99-references.html#ref-janitor)). We then created a graph of the number
    of seats that each political party won ([Figure 2.5](#fig-canadanice)).
  id: totrans-137
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我们从澳大利亚选举委员会网站下载了按席位具体结果的数据。我们使用统计编程语言R([R Core Team 2024](99-references.html#ref-citeR))，包括`tidyverse`([Wickham
    et al. 2019](99-references.html#ref-tidyverse))和`janitor`([Firke 2023](99-references.html#ref-janitor))对数据集进行了清理和整理。然后我们创建了一个图表，显示了每个政党赢得的席位数量([图2.5](#fig-canadanice))。
- en: ''
  id: totrans-138
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'We found that the Labor Party won 77 seats, followed by the Liberal Party with
    48 seats. The minor parties won the following number of seats: the Nationals won
    10 seats and the Greens won 4 seats. Finally, there were 10 Independents elected
    as well as candidates from smaller parties.'
  id: totrans-139
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我们发现工党赢得了77个席位，其次是自由党，赢得了48个席位。小党派赢得了以下数量的席位：国家党赢得了10个席位，绿党赢得了4个席位。最后，还有10名独立候选人以及来自较小政党的候选人当选。
- en: ''
  id: totrans-140
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The distribution of seats is skewed toward the two major parties which could
    reflect relatively stable preferences on the part of Australian voters, or possibly
    inertia due to the benefits of already being a major party such a national network
    or funding. A better understanding of the reasons for this distribution are of
    interest in future work. While the dataset consists of everyone who voted, it
    worth noting that in Australia some are systematically excluded from voting, and
    it is much more difficult for some to vote than others.
  id: totrans-141
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 席位的分布倾向于两个主要政党，这可能反映了澳大利亚选民相对稳定的偏好，或者可能是由于已经是主要政党所带来的好处，如国家网络或资金等惯性。对这种分布原因的更好理解是未来工作的兴趣所在。虽然数据集包括所有投票者，但值得注意的是，在澳大利亚，有些人系统地被排除在投票之外，有些人投票比其他人更困难。
- en: One aspect to be especially concerned with is making sure that this communication
    is focused on the needs of the audience and telling a story. Data journalism provides
    some excellent examples of how analysis needs to be tailored to the audience,
    for instance, Cardoso ([2020](99-references.html#ref-biasbehindbars)) and Bronner
    ([2020](99-references.html#ref-bronnerftw)).**********  ****## 2.3 Toronto’s unhoused
    population
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 特别需要注意的一个方面是确保这次沟通专注于听众的需求并讲述一个故事。数据新闻学提供了一些优秀的例子，说明了分析如何需要根据听众进行调整，例如Cardoso
    ([2020](99-references.html#ref-biasbehindbars)) 和Bronner ([2020](99-references.html#ref-bronnerftw))。
- en: Toronto has a large unhoused population ([City of Toronto 2021](99-references.html#ref-torontohomeless)).
    Freezing winters mean it is important there are enough places in shelters. In
    this example we will make a table of shelter usage in 2021 to compare average
    use in each month. Our expectation is that there is greater usage in the colder
    months, for instance, December, compared with warmer months, for instance, July.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 多伦多拥有大量无家可归的人口([多伦多市2021](99-references.html#ref-torontohomeless))。寒冷的冬天意味着在避难所中需要有足够的地方。在这个例子中，我们将制作一个2021年避难所使用情况的表格，以比较每个月的平均使用情况。我们的预期是，在较冷的月份，例如12月，使用率会比较暖和的月份，例如7月，更高。
- en: 2.3.1 Plan
  id: totrans-144
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.3.1 计划
- en: The dataset that we are interested in would need to have the date, the shelter,
    and the number of beds that were occupied that night. A quick sketch of a dataset
    that would work is [Figure 2.6 (a)](#fig-torontohomeless-data). We are interested
    in creating a table that has the monthly average number of beds occupied each
    night. The table would probably look something like [Figure 2.6 (b)](#fig-torontohomeless-table).
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 我们感兴趣的数据集需要包含日期、避难所和那一晚被占用的床位数。一个可以工作的数据集快速草图是[图2.6 (a)](#fig-torontohomeless-data)。我们感兴趣的是创建一个表格，显示每晚每月平均被占用的床位数。这个表格可能看起来像[图2.6
    (b)](#fig-torontohomeless-table)。
- en: '![](../Images/3ee14af5b82c227a86d4723a7eaa6796.png)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/3ee14af5b82c227a86d4723a7eaa6796.png)'
- en: (a) Quick sketch of a dataset
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: (a) 数据集的快速草图
- en: '![](../Images/c527fff966b482056bc6c99fcf996bf8.png)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/c527fff966b482056bc6c99fcf996bf8.png)'
- en: (b) Quick sketch of a table of the average number of beds occupied each month
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: (b) 每月平均床位数表格的快速草图
- en: 'Figure 2.6: Sketches of a dataset and table related shelter usage in Toronto'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.6：与多伦多避难所使用相关的数据集和表格草图
- en: 2.3.2 Simulate
  id: totrans-151
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.3.2 模拟
- en: The next step is to simulate some data that could resemble our dataset. Simulation
    provides us with an opportunity to think deeply about our data generating process.
    When we turn to analysis, it will provide us with a guide. Conducting analysis
    without first using simulation can be thought of as shooting arrows without a
    target—while you are certainly doing something, it is not clear whether you are
    doing it well.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是模拟一些可能类似于我们的数据集的数据。模拟为我们提供了一个深入思考数据生成过程的机会。当我们转向分析时，它将为我们提供指导。在没有先进行模拟的情况下进行分析可以被视为没有目标地射箭——虽然你确实在做些什么，但并不清楚你是否做得好。
- en: In Posit Cloud make a new Quarto document, save it, and make a new R code chunk
    and add preamble documentation. Then install and/or load the packages that are
    needed. We will again use the `tidyverse` and `janitor`. As those were installed
    earlier, they do not need to be installed again. We will also use `lubridate`.
    That is part of the `tidyverse` and so does not need to be installed independently,
    but it does need to be loaded. We will also use `opendatatoronto`, and `knitr`
    and these will need to be installed and loaded.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 在Posit Cloud中创建一个新的Quarto文档，保存它，并创建一个新的R代码块并添加前言文档。然后安装和/或加载所需的包。我们再次使用`tidyverse`和`janitor`。由于这些包之前已经安装，因此不需要再次安装。我们还将使用`lubridate`。这是`tidyverse`的一部分，因此不需要独立安装，但需要加载。我们还将使用`opendatatoronto`和`knitr`，这些需要安装和加载。
- en: '[PRE29]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: '*To add a bit more detail to the earlier example, packages contain code that
    other people have written. There are a few common ones that you will see regularly
    in this book, especially the `tidyverse`. To use a package, we must first install
    it and then we need to load it. A package only needs to be installed once per
    computer but must be loaded every time. This means the packages that we installed
    earlier do not need to be reinstalled here.'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '*为了使前面的例子更加详细，包包含其他人编写的代码。在这本书中，你将经常看到一些常见的包，特别是`tidyverse`。要使用一个包，我们必须首先安装它，然后我们需要加载它。一个包只需要在每个计算机上安装一次，但每次都需要加载。这意味着我们之前安装的包不需要在这里重新安装。'
- en: '*Shoulders of giants* *Dr Robert Gentleman is a co-creator of R. After earning
    a PhD in Statistics from the University of Washington in 1988, he moved to the
    University of Auckland. He then went onto various roles including at 23andMe and
    is now the Executive Director of the Center for Computational Biomedicine at Harvard
    Medical School.* **Shoulders of giants* *Dr Ross Ihaka is a co-creator of R. He
    earned a PhD in Statistics from the University of California, Berkeley, in 1985\.
    He wrote a dissertation titled “Ruaumoko”, which is the Māori god of earthquakes.
    He then moved to the University of Auckland where he remained for his entire career.
    He was awarded the Pickering Medal in 2008 by the Royal Society of New Zealand
    Te Apārangi.*  *Given that people donate their time to make R and the packages
    that we use, it is important to cite them. To get the information that is needed,
    we use `citation()`. When run without any arguments, that provides the citation
    information for R itself, and when run with an argument that is the name of a
    package, it provides the citation information for that package.'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: '*巨人的肩膀* *Dr Robert Gentleman是R的联合创造者。在1988年从华盛顿大学获得统计学博士学位后，他搬到了奥克兰大学。然后他担任了包括在23andMe在内的各种角色，现在他是哈佛医学院计算生物医学中心的执行主任。*
    *巨人的肩膀* *Dr Ross Ihaka是R的联合创造者。他在1985年从加州大学伯克利分校获得统计学博士学位。他撰写了一篇题为“Ruaumoko”的论文，这是毛利人的地震之神。然后他搬到了奥克兰大学，在那里他完成了整个职业生涯。他在2008年获得了新西兰皇家学会Te
    Apārangi的Pickering奖。*  *鉴于人们捐赠他们的时间来制作R和我们所使用的包，引用它们是很重要的。为了获取所需的信息，我们使用`citation()`。在没有参数运行时，它提供R本身的引用信息，当运行带有参数时，它提供该包的引用信息。'
- en: '[PRE30]'
  id: totrans-157
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '*[PRE31]'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE31]'
- en: '[PRE32]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '*[PRE33]**  **Turning to the simulation, we need three variables: “date”, “shelter”,
    and “occupancy”. This example will build on the earlier one by adding a seed using
    `set.seed()`. A seed enables us to always generate the same random data whenever
    we run the same code. Any integer can be used as the seed. In this case the seed
    will be 853\. If you use that as your seed, then you should get the same random
    numbers as in this example. If you use a different seed, then you should expect
    different random numbers. Finally, we use `rep()` to repeat something a certain
    number of times. For instance, we repeat “Shelter 1” 365 times which accounts
    for about a year.'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE33]**  **转向模拟，我们需要三个变量：“日期”、“庇护所”和“占用率”。这个例子将在先前的例子基础上增加一个种子，使用`set.seed()`。种子使我们能够在每次运行相同代码时始终生成相同的随机数据。任何整数都可以用作种子。在这种情况下，种子将是853。如果您使用该种子，那么您应该得到与这个例子中相同的随机数。如果您使用不同的种子，那么您应该期望得到不同的随机数。最后，我们使用`rep()`重复某些内容一定次数。例如，我们重复“庇护所1”365次，这大约相当于一年。'
- en: '[PRE34]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '*[PRE35]*  *In this simulation we first create a list of all the dates in 2021\.
    We repeat that list three times. We assume data for three shelters for every day
    of the year. To simulate the number of beds that are occupied each night, we draw
    from a Poisson distribution, assuming a mean number of 30 beds occupied per shelter,
    although this is just an arbitrary choice. By way of background, a Poisson distribution
    is often used when we have count data, and we return to it in [Chapter 13](13-ijaglm.html).******  ****###
    2.3.3 Acquire'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE35]*  *在这个模拟中，我们首先创建2021年所有日期的列表。我们重复该列表三次。我们假设每年每一天都有三个庇护所的数据。为了模拟每晚占用的床位数，我们从泊松分布中抽取，假设每个庇护所平均占用30张床，尽管这只是任意的选择。作为背景，泊松分布通常用于我们拥有计数数据时，我们将在[第13章](13-ijaglm.html)中回到它。******  ****###
    2.3.3 获取'
- en: We use data made available about Toronto shelter usage by the City of Toronto.
    Shelter usage is measured by a count made each night at 4 a.m. of the number of
    occupied beds. To access the data, we use `opendatatoronto` and then save our
    own copy.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用多伦多市政府提供的多伦多庇护所使用数据。庇护所使用情况通过每晚凌晨4点对占用床位的数量进行计数来衡量。为了访问这些数据，我们使用`opendatatoronto`并保存我们自己的副本。
- en: '[PRE36]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: '*[PRE37]'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE37]'
- en: '*[PRE38]*  *Not much needs to be done to this to make it similar to the dataset
    that we were interested in ([Figure 2.6 (a)](#fig-torontohomeless-data)). We need
    to change the names to make them easier to type using `clean_names()`, and reduce
    the columns to only those that are relevant using `select()`.'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE38]*  *对此进行修改以使其类似于我们感兴趣的数据库（[图2.6 (a)](#fig-torontohomeless-data)）不需要做太多。我们需要使用`clean_names()`更改名称以使其更容易输入，并使用`select()`仅保留相关列。'
- en: '[PRE39]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: '*[PRE40]*  *All that remains is to save the cleaned dataset.'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE40]*  *剩下的只是保存清洗后的数据集。'
- en: '[PRE41]***  ***### 2.3.4 Explore'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE41]***  ***### 2.3.4 探索'
- en: First, we load the dataset that we just created.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们加载我们刚刚创建的数据集。
- en: '[PRE42]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: '*The dataset contains daily records for each shelter. We are interested in
    understanding average usage for each month. To do this, we need to add a month
    column using `month()` from `lubridate`. By default, `month()` provides the number
    of the month, and so we include two arguments—“label” and “abbr”—to get the full
    name of the month. We remove rows that do not have any data for the number of
    beds using `drop_na()` from `tidyr`, which is part of the `tidyverse`. We will
    do this here unthinkingly because our focus is on getting started, but this is
    an important decision and we talk more about missing data in [Chapter 6](06-farm.html)
    and [Chapter 11](11-eda.html). We then create a summary statistic on the basis
    of monthly groups, using `summarise()` from `dplyr`. We use `tt()` from `tinytable`
    to create [Table 2.1](#tbl-homelessoccupancyd).'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: '*该数据集包含每个避难所的每日记录。我们感兴趣的是了解每个月的平均使用情况。为此，我们需要使用 `lubridate` 中的 `month()` 函数添加一个月份列。默认情况下，`month()`
    提供月份的数字，因此我们包含两个参数——“label”和“abbr”——以获取月份的完整名称。我们使用 `tidyr` 中的 `drop_na()` 函数删除没有床位数量数据的行，`tidyr`
    是 `tidyverse` 的一部分。我们在这里不加思考地这样做，因为我们的重点是入门，但这是一个重要的决定，我们将在第 6 章 [Chapter 6](06-farm.html)
    和第 11 章 [Chapter 11](11-eda.html) 中更多地讨论缺失数据。然后，我们基于月度分组创建汇总统计，使用 `dplyr` 中的 `summarise()`
    函数。我们使用 `tinytable` 中的 `tt()` 函数创建 [表 2.1](#tbl-homelessoccupancyd)。'
- en: '[PRE43]'
  id: totrans-173
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: '*Table 2.1: Shelter usage in Toronto in 2021'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: '*表 2.1：2021 年多伦多避难所的使用情况'
- en: '| occupancy_month | number_occupied |'
  id: totrans-175
  prefs: []
  type: TYPE_TB
  zh: '| occupancy_month | number_occupied |'
- en: '| --- | --- |'
  id: totrans-176
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| January | 28.55708 |'
  id: totrans-177
  prefs: []
  type: TYPE_TB
  zh: '| 一月 | 28.55708 |'
- en: '| February | 27.73821 |'
  id: totrans-178
  prefs: []
  type: TYPE_TB
  zh: '| 二月 | 27.73821 |'
- en: '| March | 27.18521 |'
  id: totrans-179
  prefs: []
  type: TYPE_TB
  zh: '| 三月 | 27.18521 |'
- en: '| April | 26.31561 |'
  id: totrans-180
  prefs: []
  type: TYPE_TB
  zh: '| 四月 | 26.31561 |'
- en: '| May | 27.42596 |'
  id: totrans-181
  prefs: []
  type: TYPE_TB
  zh: '| 五月 | 27.42596 |'
- en: '| June | 28.88300 |'
  id: totrans-182
  prefs: []
  type: TYPE_TB
  zh: '| 六月 | 28.88300 |'
- en: '| July | 29.67137 |'
  id: totrans-183
  prefs: []
  type: TYPE_TB
  zh: '| 七月 | 29.67137 |'
- en: '| August | 30.83975 |'
  id: totrans-184
  prefs: []
  type: TYPE_TB
  zh: '| 八月 | 30.83975 |'
- en: '| September | 31.65405 |'
  id: totrans-185
  prefs: []
  type: TYPE_TB
  zh: '| 九月 | 31.65405 |'
- en: '| October | 32.32991 |'
  id: totrans-186
  prefs: []
  type: TYPE_TB
  zh: '| 十月 | 32.32991 |'
- en: '| November | 33.26980 |'
  id: totrans-187
  prefs: []
  type: TYPE_TB
  zh: '| 十一月 | 33.26980 |'
- en: '| December | 33.52426 |*  *As with before, this looks fine, and achieves what
    we set out to do. But we can make some tweaks to the defaults to make it look
    even better ([Table 2.2](#tbl-homelessoccupancy)). In particular we make the column
    names easier to read, only show an appropriate number of decimal places, and change
    the alignment (`j` is used to specify the column number of interest and `r` is
    the alignment type i.e. right).'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: '| 十二月 | 33.52426 |*  *与之前一样，这看起来不错，达到了我们设定的目标。但我们可以对默认设置进行一些调整，使其看起来更好 ([表
    2.2](#tbl-homelessoccupancy))。特别是我们使列名更容易阅读，只显示适当的小数位数，并更改对齐方式（`j` 用于指定感兴趣的列号，`r`
    是对齐类型，即右对齐）。'
- en: '[PRE44]'
  id: totrans-189
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: '*Table 2.2: Shelter usage in Toronto in 2021'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: '*表 2.2：2021 年多伦多避难所的使用情况'
- en: '| Month | Average daily number of occupied beds |'
  id: totrans-191
  prefs: []
  type: TYPE_TB
  zh: '| 月份 | 平均每日占用床位数量 |'
- en: '| --- | --- |'
  id: totrans-192
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| January | 29 |'
  id: totrans-193
  prefs: []
  type: TYPE_TB
  zh: '| 一月 | 29 |'
- en: '| February | 28 |'
  id: totrans-194
  prefs: []
  type: TYPE_TB
  zh: '| 二月 | 28 |'
- en: '| March | 27 |'
  id: totrans-195
  prefs: []
  type: TYPE_TB
  zh: '| 三月 | 27 |'
- en: '| April | 26 |'
  id: totrans-196
  prefs: []
  type: TYPE_TB
  zh: '| 四月 | 26 |'
- en: '| May | 27 |'
  id: totrans-197
  prefs: []
  type: TYPE_TB
  zh: '| 五月 | 27 |'
- en: '| June | 29 |'
  id: totrans-198
  prefs: []
  type: TYPE_TB
  zh: '| 六月 | 29 |'
- en: '| July | 30 |'
  id: totrans-199
  prefs: []
  type: TYPE_TB
  zh: '| 七月 | 30 |'
- en: '| August | 31 |'
  id: totrans-200
  prefs: []
  type: TYPE_TB
  zh: '| 八月 | 31 |'
- en: '| September | 32 |'
  id: totrans-201
  prefs: []
  type: TYPE_TB
  zh: '| 九月 | 32 |'
- en: '| October | 32 |'
  id: totrans-202
  prefs: []
  type: TYPE_TB
  zh: '| 十月 | 32 |'
- en: '| November | 33 |'
  id: totrans-203
  prefs: []
  type: TYPE_TB
  zh: '| 十一月 | 33 |'
- en: '| December | 34 |***  ***### 2.3.5 Share'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: '| 十二月 | 34 |***  ***### 2.3.5 分享'
- en: We need to write a few brief paragraphs about what we did, why we did it, and
    what we found to sum up our work. An example follows.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要写几段简短的段落来总结我们所做的工作、我们为什么这样做以及我们发现了什么。以下是一个例子。
- en: Toronto has a large unhoused population. Freezing winters mean it is critical
    there are enough places in shelters. We are interested to understand how usage
    of shelters changes in colder months, compared with warmer months.
  id: totrans-206
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 多伦多有一个庞大的无家可归人口。寒冷的冬天意味着避难所中必须有足够的地方。我们感兴趣的是了解与较暖和的月份相比，在较冷的月份避难所的使用情况如何变化。
- en: ''
  id: totrans-207
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: We use data provided by the City of Toronto about Toronto shelter bed occupancy.
    Specifically, at 4 a.m. each night a count is made of the occupied beds. We are
    interested in averaging this over the month. We cleaned, tidied, and analyzed
    the dataset using the statistical programming language R ([R Core Team 2024](99-references.html#ref-citeR))
    as well as the `tidyverse` ([Wickham 2017](99-references.html#ref-Wickham2017)),
    `janitor` ([Firke 2023](99-references.html#ref-janitor)), `opendatatoronto` ([Gelfand
    2022](99-references.html#ref-citeSharla)), `lubridate` ([Grolemund and Wickham
    2011](99-references.html#ref-GrolemundWickham2011)), and `knitr` ([Xie 2023](99-references.html#ref-citeknitr)).
    We then made a table of the average number of occupied beds each night for each
    month ([Table 2.2](#tbl-homelessoccupancy)).
  id: totrans-208
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我们使用多伦多市政府提供的关于多伦多庇护所床位占用情况的数据。具体来说，每晚4点进行一次占用床位的计数。我们感兴趣的是对整个月进行平均。我们使用统计编程语言R
    ([R Core Team 2024](99-references.html#ref-citeR)) 以及 `tidyverse` ([Wickham 2017](99-references.html#ref-Wickham2017))、`janitor`
    ([Firke 2023](99-references.html#ref-janitor))、`opendatatoronto` ([Gelfand 2022](99-references.html#ref-citeSharla))、`lubridate`
    ([Grolemund and Wickham 2011](99-references.html#ref-GrolemundWickham2011)) 和
    `knitr` ([Xie 2023](99-references.html#ref-citeknitr)) 对数据集进行了清理、整理和分析。然后我们制作了一个表格，显示每个月每晚的平均占用床位数量
    ([表2.2](#tbl-homelessoccupancy))。
- en: ''
  id: totrans-209
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: We found that the daily average number of occupied beds was higher in December
    2021 than July 2021, with 34 occupied beds in December, compared with 30 in July
    ([Table 2.2](#tbl-homelessoccupancy)). More generally, there was a steady increase
    in the daily average number of occupied beds between July and December, with a
    slight overall increase each month.
  id: totrans-210
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我们发现，2021年12月的每日平均占用床位数量高于2021年7月，12月有34张占用床位，而7月有30张 ([表2.2](#tbl-homelessoccupancy))。更普遍地说，从7月到12月，每日平均占用床位数量稳步增加，每月略有整体增加。
- en: ''
  id: totrans-211
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The dataset is on the basis of shelters, and so our results may be skewed by
    changes that are specific to especially large or small shelters. It may be that
    specific shelters are particularly attractive in colder months. Additionally,
    we were concerned with counts of the number of occupied beds, but if the supply
    of beds changes over the season, then an additional statistic of interest would
    be the proportion occupied.
  id: totrans-212
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 数据集基于庇护所，因此我们的结果可能受到特别大或特别小庇护所特定变化的影响。可能是在较冷的月份，特定的庇护所特别有吸引力。此外，我们关注占用床位的数量，但如果床位的供应在季节中发生变化，那么一个额外的感兴趣统计量将是占用比例。
- en: Although this example is only a few paragraphs, it could be reduced to form
    an abstract, or increased to form a full report, for instance, by expanding each
    paragraph into a section. The first paragraph is a general overview, the second
    focuses on the data, the third on the results, and the fourth is a discussion.
    Following the example of Hao ([2019](99-references.html#ref-hao2019)), that fourth
    paragraph is a good place to consider areas in which bias may have crept in.**********  ****##
    2.4 Neonatal mortality
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这个例子只有几段，但它可以被缩减成一个摘要，或者通过扩展每个段落成为一个完整的报告，例如，将每个段落扩展为一个章节。第一段是一个概述，第二段关注数据，第三段关注结果，第四段是讨论。遵循郝([2019](99-references.html#ref-hao2019))的例子，第四段是考虑可能存在偏差的领域的良好位置。**********  ****##
    2.4 新生儿死亡率
- en: 'Neonatal mortality refers to a death that occurs within the first month of
    life. The neonatal mortality rate (NMR) is the number of neonatal deaths per 1,000
    live births ([UN IGME 2021](99-references.html#ref-unigme)). The Third Sustainable
    Development Goal (SDG) calls for a reduction in NMR to 12\. In this example we
    will create a graph of the estimated NMR for the past 50 years for: Argentina,
    Australia, Canada, and Kenya.'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 新生儿死亡率是指出生后第一个月内发生的死亡。新生儿死亡率（NMR）是指每1000名活产新生儿中的新生儿死亡数 ([UN IGME 2021](99-references.html#ref-unigme))。第三个可持续发展目标（SDG）呼吁将NMR降低到12。在这个例子中，我们将创建过去50年阿根廷、澳大利亚、加拿大和肯尼亚估计NMR的图表。
- en: 2.4.1 Plan
  id: totrans-215
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.4.1 计划
- en: For this example, we need to think about what our dataset should look like,
    and what the graph should look like.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个例子，我们需要考虑我们的数据集应该是什么样子，以及图表应该是什么样子。
- en: The dataset needs to have variables that specify the country and the year. It
    also needs to have a variable with the NMR estimate for that year for that country.
    Roughly, it should look like [Figure 2.7 (a)](#fig-nmrexample-data).
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集需要包含指定国家和年份的变量。它还需要包含该国家该年度的NMR估计值。大致上，它应该看起来像[图2.7(a)](#fig-nmrexample-data)。
- en: '![](../Images/7c7d2fa4170e9537e182c5b01125072c.png)'
  id: totrans-218
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7c7d2fa4170e9537e182c5b01125072c.png)'
- en: (a) Quick sketch of a potentially useful NMR dataset
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: (a) 一个可能有用的NMR数据集的快速草图
- en: '![](../Images/1a45aec21bb2497fe3cbaa0a79d40791.png)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1a45aec21bb2497fe3cbaa0a79d40791.png)'
- en: (b) Quick sketch of a graph of NMR by country over time
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: (b) 随时间变化的NMR按国家分布的快速草图
- en: 'Figure 2.7: Sketches of a dataset and graph about the neonatal mortality rate
    (NMR)'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.7：关于新生儿死亡率（NMR）的数据集和图表草图
- en: We are interested to make a graph with year on the x-axis and estimated NMR
    on the y-axis. Each country should have its own series. A quick sketch of what
    we are looking for is [Figure 2.7 (b)](#fig-nmrexample-graph).
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 我们对制作一个以年份为x轴和估计的NMR为y轴的图表感兴趣。每个国家都应该有自己的序列。我们正在寻找的快速草图是[图2.7 (b)](#fig-nmrexample-graph)。
- en: 2.4.2 Simulate
  id: totrans-224
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.4.2 模拟
- en: 'We would like to simulate some data that aligns with our plan. In this case
    we will need three columns: country, year, and NMR.'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望模拟一些与我们的计划一致的数据。在这种情况下，我们需要三个列：国家、年份和NMR。
- en: Within Posit Cloud, make a new Quarto document and save it. Add preamble documentation
    and set up the workspace. We will use the `tidyverse`, `janitor`, and `lubridate`.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 在Posit Cloud中创建一个新的Quarto文档并保存。添加前言文档并设置工作区。我们将使用`tidyverse`、`janitor`和`lubridate`。
- en: '[PRE45]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: '*The code contained in packages can change from time to time as the authors
    update it and release new versions. We can see which version of a package we are
    using with `packageVersion()`. For instance, we are using version 2.0.0 of the
    `tidyverse` and version 2.2.0 of `janitor`.'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: '*包含在包中的代码可能会随着作者的更新和新版本的发布而随时改变。我们可以使用`packageVersion()`来查看我们正在使用哪个版本的包。例如，我们正在使用`tidyverse`的2.0.0版本和`janitor`的2.2.0版本。'
- en: '[PRE46]'
  id: totrans-229
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: '*[PRE47]'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE47]'
- en: '[PRE48]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: '*[PRE49]**  **To update the version of all of the packages that we have installed,
    we use `update.packages()`. We can use `tidyverse_update()` to just install the
    `tidyverse` packages. This does not need to be run, say, every day, but from time
    to time it is worth updating packages. While many packages take care to ensure
    backward compatibility, at a certain point this does not become possible. Updating
    packages could result in old code needing to be rewritten. This is not a big deal
    when you are getting started and in any case there are tools aimed at loading
    particular versions that we cover in [Chapter 3](03-workflow.html).'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE49]**  **为了更新我们已安装的所有包的版本，我们使用`update.packages()`。我们可以使用`tidyverse_update()`仅安装`tidyverse`包。这不需要每天运行，但时不时地更新包是值得的。虽然许多包会注意确保向后兼容性，但在某个点上这变得不可能。更新包可能会导致旧代码需要重写。当你刚开始时，这并不是什么大问题，而且无论如何，都有针对加载特定版本的工具，我们将在第3章中介绍。'
- en: Returning to the simulation, we repeat the name of each country 50 times with
    `rep()`, and enable the passing of 50 years. Finally, we draw from the uniform
    distribution with `runif()` to simulate an estimated NMR value for that year for
    that country.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 返回到模拟，我们使用`rep()`重复每个国家的名称50次，并启用50年的传递。最后，我们使用`runif()`从均匀分布中抽取，为该国家的该年模拟一个估计的NMR值。
- en: '[PRE50]'
  id: totrans-234
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: '*[PRE51]*  *While this simulation works, it would be time consuming and error
    prone if we decided that instead of 50 years, we were interested in simulating,
    say, 60 years. One way to improve this code is to replace all instances of 50
    with a variable.'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE51]*  *虽然这个模拟是可行的，但如果我们决定模拟的不是50年，而是比如说60年，那么这个过程将会耗时且容易出错。改进这个代码的一种方法是将所有50的实例替换为一个变量。'
- en: '[PRE52]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: '*[PRE53]*  *The result will be the same, but now if we want to change from
    50 to 60 years, we only have to make the change in one place.'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE53]*  *结果将会相同，但现在如果我们想从50年改为60年，我们只需要在一个地方进行更改。'
- en: 'We can have confidence in this simulated dataset because it is relatively straight
    forward, and we wrote the code for it. But when we turn to the real dataset, it
    is more difficult to be sure that it is what it claims to be. Even if we trust
    the data, we need to be able to share that confidence with others. One way forward
    is to establish some tests of whether our data are as they should be. For instance,
    we expect:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以对这个模拟数据集有信心，因为它相对简单，我们为其编写了代码。但是当我们转向真实数据集时，更难确保它就是它所声称的那样。即使我们信任数据，我们也需要能够与他人分享这种信心。一种前进的方法是建立一些测试，以确定我们的数据是否如我们所期望的那样。例如，我们期望：
- en: 'That “country” is exclusively one of these four: “Argentina”, “Australia”,
    “Canada”, or “Kenya”.'
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: “国家”仅限于这四个之一：“阿根廷”、“澳大利亚”、“加拿大”或“肯尼亚”。
- en: Conversely, “country” contains all those four countries.
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 相反，“国家”包含这四个国家中的所有国家。
- en: That “year” is no smaller than 1971 and no larger than 2020, and is an integer,
    not a letter or a number with decimal places.
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: “年份”不小于1971且不大于2020，并且是一个整数，不是一个字母或带有小数的数字。
- en: That “nmr” is a value somewhere between 0 and 1,000, and is a number.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: “nmr”是一个介于0和1,000之间的值，并且是一个数字。
- en: We can write a series of tests based on these features, that we expect the dataset
    to pass.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以基于这些特征编写一系列测试，我们期望数据集能够通过这些测试。
- en: '[PRE54]'
  id: totrans-244
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: '*Having passed these tests, we can have confidence in the simulated dataset.
    More importantly, we can apply these tests to the real dataset. This enables us
    to have greater confidence in that dataset and to share that confidence with others.******  ***###
    2.4.3 Acquire'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: '*通过这些测试，我们可以对模拟数据集有信心。更重要的是，我们可以将这些测试应用于实际数据集。这使得我们对该数据集有更大的信心，并且可以与他人分享这种信心。******  ***###
    2.4.3 获取'
- en: The UN Inter-agency Group for Child Mortality Estimation (IGME) [provides](https://childmortality.org/)
    NMR estimates that we can download and save.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 联合国儿童死亡率估算机构组（IGME）[提供](https://childmortality.org/)我们可以下载和保存的NMR估算。
- en: '[PRE55]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: '*With established data, such as this, it can be useful to read supporting material
    about the data. In this case, a codebook is available [here](https://childmortality.org/wp-content/uploads/2021/03/CME-Info_codebook_for_downloads.xlsx).
    After this we can take a quick look at the dataset to get a better sense of it.
    We might be interested in what the dataset looks like with `head()` and `tail()`,
    and what the names of the columns are with `names()`.'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: '*有了这样的数据，阅读有关数据的支持材料可能会有所帮助。在这种情况下，一个代码簿可在[这里](https://childmortality.org/wp-content/uploads/2021/03/CME-Info_codebook_for_downloads.xlsx)找到。之后我们可以快速查看数据集，以更好地了解它。我们可能对使用`head()`和`tail()`查看数据集的外观以及使用`names()`查看列名感兴趣。'
- en: '[PRE56]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: '*[PRE57]*  *[PRE58]'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE57]*  *[PRE58]'
- en: '*[PRE59]*  *We would like to clean up the names and only keep the rows and
    columns that we are interested in. Based on our plan, we are interested in rows
    where “Sex” is “Total”, “Series Name” is “UN IGME estimate”, “Geographic area”
    is one of “Argentina”, “Australia”, “Canada”, and “Kenya”, and the “Indicator”
    is “Neonatal mortality rate”. After this we are interested in just a few columns:
    “geographic_area”, “time_period”, and “obs_value”.'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE59]*  *我们希望清理名称，只保留我们感兴趣的行和列。根据我们的计划，我们感兴趣的行是“Sex”为“Total”，“Series Name”为“UN
    IGME estimate”，“Geographic area”为“阿根廷”、“澳大利亚”、“加拿大”和“肯尼亚”之一，“Indicator”为“新生儿死亡率”。之后我们只对以下几列感兴趣：“geographic_area”，“time_period”和“obs_value”。'
- en: '[PRE60]'
  id: totrans-252
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: '*[PRE61]*  *We need to fix two other aspects: the class of “time_period” is
    character when we need it to be a year, and the name of “obs_value” should be
    “nmr” to be more informative.'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE61]*  *我们需要修复两个其他方面：当我们需要它为年份时，“time_period”的类别是字符，而“obs_value”的名称应该是“nmr”以提供更多信息。'
- en: '[PRE62]'
  id: totrans-254
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: '*[PRE63]*  *Finally, we can check that our dataset passes the tests that we
    developed based on the simulated dataset.'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE63]*  *最后，我们可以检查我们的数据集是否通过了基于模拟数据集开发的测试。'
- en: '[PRE64]'
  id: totrans-256
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: '*[PRE65]'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE65]'
- en: '[PRE66]'
  id: totrans-258
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: '*[PRE67]'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE67]'
- en: '[PRE68]'
  id: totrans-260
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: '*[PRE69]'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE69]'
- en: '[PRE70]'
  id: totrans-262
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: '*[PRE71]'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE71]'
- en: '[PRE72]'
  id: totrans-264
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: '*[PRE73]'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE73]'
- en: '[PRE74]'
  id: totrans-266
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: '*[PRE75]'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE75]'
- en: '[PRE76]'
  id: totrans-268
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: '*[PRE77]*******  ***All that remains is to save the nicely cleaned dataset.'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE77]*******  ***所有剩下的就是保存这个整洁的清洗后的数据集。'
- en: '[PRE78]********  ***### 2.4.4 Explore'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE78]********  ***### 2.4.4 探索'
- en: We would like to make a graph of estimated NMR using the cleaned dataset. First,
    we read in the dataset.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望使用清洗后的数据集制作一个估计的NMR图表。首先，我们读取数据集。
- en: '[PRE79]'
  id: totrans-272
  prefs: []
  type: TYPE_PRE
  zh: '[PRE79]'
- en: '*We can now make a graph of how NMR has changed over time and the differences
    between countries ([Figure 2.8](#fig-nmrgraph)).'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: '*现在我们可以制作一个图表，展示NMR随时间的变化以及各国之间的差异（[图2.8](#fig-nmrgraph)）。'
- en: '[PRE80]'
  id: totrans-274
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: '*![](../Images/effa13e15a2b2df95583b1fc0119765e.png)'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/effa13e15a2b2df95583b1fc0119765e.png)'
- en: 'Figure 2.8: Neonatal Mortality Rate (NMR), for Argentina, Australia, Canada,
    and Kenya (1971-2020)**  **### 2.4.5 Share'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.8：阿根廷、澳大利亚、加拿大和肯尼亚的新生儿死亡率（NMR）（1971-2020)**  **### 2.4.5 分享
- en: To this point we downloaded some data, cleaned it, wrote some tests, and made
    a graph. We would typically need to communicate what we have done at some length.
    In this case, we will write a few paragraphs about what we did, why we did it,
    and what we found.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们下载了一些数据，对其进行了清洗，编写了一些测试，并制作了一个图表。我们通常需要详细地沟通我们所做的工作。在这种情况下，我们将写几段关于我们所做的工作、为什么这样做以及我们发现了什么。
- en: Neonatal mortality refers to a death that occurs within the first month of life.
    In particular, the neonatal mortality rate (NMR) is the number of neonatal deaths
    per 1,000 live births. We obtain estimates for NMR for four countries—Argentina,
    Australia, Canada, and Kenya—over the past 50 years.
  id: totrans-278
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 新生儿死亡率是指出生后第一个月内发生的死亡。特别是，新生儿死亡率（NMR）是指每1,000名活产婴儿中的新生儿死亡数。我们获得了过去50年中阿根廷、澳大利亚、加拿大和肯尼亚四个国家的NMR估算数据。
- en: ''
  id: totrans-279
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The UN Inter-agency Group for Child Mortality Estimation (IGME) provides estimates
    of the NMR at the website: https://childmortality.org/. We downloaded their estimates
    then cleaned and tidied the dataset using the statistical programming language
    R ([R Core Team 2024](99-references.html#ref-citeR)).'
  id: totrans-280
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 联合国儿童死亡率估算机构间小组（IGME）在网站：https://childmortality.org/上提供了NMR的估算数据。我们下载了他们的估算数据，然后使用统计编程语言R（[R
    Core Team 2024](99-references.html#ref-citeR)）对数据集进行了清洗和整理。
- en: ''
  id: totrans-281
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: We found considerable change in the estimated NMR over time and between the
    four countries of interest ([Figure 2.8](#fig-nmrgraph)). We found that the 1970s
    tended to be associated with reductions in the estimated NMR. Australia and Canada
    were estimated to have a low NMR at that point and remained there through 2020,
    with further slight reductions. The estimates for Argentina and Kenya continued
    to have substantial reductions through 2020.
  id: totrans-282
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我们发现，在时间上和四个感兴趣的国家之间，估算的NMR发生了相当大的变化（[图2.8](#fig-nmrgraph)）。我们发现，20世纪70年代通常与估算的NMR的减少有关。当时澳大利亚和加拿大的NMR估计较低，并且一直保持到2020年，略有下降。阿根廷和肯尼亚的估算数据在2020年之前持续大幅下降。
- en: ''
  id: totrans-283
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Our results suggest considerable improvements in estimated NMR over time. NMR
    estimates are based on a statistical model and underlying data. The double burden
    of data is that often high-quality data are less easily available for groups,
    in this case countries, with worse outcomes. Our conclusions are subject to the
    model that underpins the estimates and the quality of the underlying data, and
    we did not independently verify either of these.********  ***## 2.5 Concluding
    remarks
  id: totrans-284
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我们的结果表明，估算的NMR随着时间的推移有了相当大的改善。NMR估算基于统计模型和基础数据。数据的双重负担是，对于结果较差的群体，例如国家，高质量的数据往往更难获得。我们的结论受支撑估算的模型和基础数据质量的影响，我们没有独立验证这两者。********  ***##
    2.5 结论
- en: We have covered much ground in this chapter, and it is normal to have not followed
    it all. The best way to proceed is to go through each of the three case studies
    in your own time. Type all the code out yourself, rather than copy-pasting, and
    run it bit by bit, even if you do not entirely understand what it is doing. Then
    try to add your own comments to it.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们覆盖了大量的内容，没有完全跟上是很正常的。最好的做法是自行花时间逐个研究三个案例研究。亲自编写所有代码，而不是复制粘贴，逐步运行，即使你并不完全理解它在做什么。然后尝试为它添加自己的注释。
- en: It is also the case that it is not necessary to fully understand everything
    in this chapter at this point. Some students find it best to continue going through
    the next few chapters of this book, and return to this one later. Excitingly we
    have shown that with just an hour or two of work it is possible to use data to
    learn something about the world. As we develop those skills we want to also consider,
    with increasing sophistication, about the broader impacts of our work.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个阶段，没有必要完全理解本章的所有内容。一些学生发现，继续阅读本书的下一章，稍后再回到这一章是最好的做法。令人兴奋的是，我们展示了只需工作一两个小时，就有可能利用数据了解世界的一些情况。随着我们发展这些技能，我们也希望越来越深入地考虑我们工作的更广泛影响。
- en: “We shouldn’t have to think about the societal impact of our work because it’s
    hard and other people can do it for us” is a really bad argument. I stopped doing
    CV [computer vision] research because I saw the impact my work was having. I loved
    the work but the military applications and privacy concerns eventually became
    impossible to ignore. But basically all facial recognition work would not get
    published if we took Broader Impacts sections seriously. There is almost no upside
    and enormous downside risk. To be fair though I should have a lot of humility
    here. For most of grad school I bought in to the myth that science is apolitical
    and research is objectively moral and good no matter what the subject is.
  id: totrans-287
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: “我们不需要思考我们工作的社会影响，因为那很困难，其他人可以为我们做”这种论点是相当糟糕的。我停止了CV [计算机视觉]研究，因为我看到了我的工作产生的影响。我喜欢这项工作，但军事应用和隐私问题最终变得无法忽视。但基本上，如果我们认真对待更广泛的影响部分，所有面部识别工作都不会被发表。几乎没有正面影响，风险巨大。不过，公平地说，我应该有更多的谦卑。在研究生的大部分时间里，我信奉了科学无政治性和研究客观道德且无论主题如何都是好的这种神话。
- en: ''
  id: totrans-288
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Joe Redmon, 20 February 2020
  id: totrans-289
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 乔·雷德蒙，2020年2月20日
- en: Although the term “data science” is ubiquitous in academia, industry, and even
    more generally, as we have seen, it is difficult to define. One deliberately antagonistic
    definition of data science is “[t]he inhumane reduction of humanity down to what
    can be counted” ([Keyes 2019](99-references.html#ref-keyes2019)). While purposefully
    controversial, this definition highlights one reason for the increased demand
    for data science and quantitative methods over the past decade—individuals and
    their behavior are now at the heart of it. Many of the techniques have been around
    for many decades, but what makes them popular now is this human focus.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管在学术界、工业界以及更广泛的意义上，“数据科学”一词无处不在，但正如我们所看到的，它很难定义。数据科学的一个故意具有对抗性的定义是“将人性无情地降低到可以计数的东西”（[Keyes
    2019](99-references.html#ref-keyes2019)）。虽然这个定义是有意引起争议的，但它突出了过去十年对数据科学和定量方法需求增加的一个原因——个人及其行为现在是核心。许多技术已经存在了几十年，但使它们现在变得流行的是这种对人的关注。
- en: Unfortunately, even though much of the work may be focused on individuals, the
    issues of privacy and consent, and ethical concerns more broadly, rarely seem
    front of mind. While there are some exceptions, in general, even at the same time
    as claiming that AI, machine learning, and data science are going to revolutionize
    society, consideration of these types of issues appears to have been largely treated
    as something that would be nice to have, rather than something that we may like
    to think of before we embrace the revolution.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 很不幸，尽管大部分工作可能集中在个人身上，但隐私和同意问题以及更广泛的伦理问题似乎很少被放在首位。虽然有一些例外，但总的来说，即使在声称人工智能、机器学习和数据科学将改变社会的同时，对这些问题的考虑似乎被当作是一种美好的愿望，而不是在我们拥抱变革之前需要思考的事情。
- en: For the most part, these types of issues are not new. In the sciences, there
    has been extensive ethical consideration around CRISPR technology and gene editing
    ([Brokowski and Adli 2019](99-references.html#ref-brokowski2019crispr); [Marchese
    2022](99-references.html#ref-marchese2022)). And in an earlier time similar conversations
    were had, for instance, about Wernher von Braun being allowed to build rockets
    for the US despite having done the same for Nazi Germany ([Neufeld 2002](99-references.html#ref-neufeld2002wernher);
    [Wilford 1977](99-references.html#ref-wilford1977)). In medicine these concerns
    have been front-of-mind for some time ([American Medical Association and New York
    Academy of Medicine 1848](99-references.html#ref-american1848code)). Data science
    seems determined to have its own Tuskegee-moment rather than think about, and
    proactively address, these issues based on the experiences of other fields.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 在很大程度上，这些问题并不新鲜。在科学领域，围绕CRISPR技术和基因编辑已经进行了广泛的伦理考量（[Brokowski和Adli 2019](99-references.html#ref-brokowski2019crispr)；[Marchese
    2022](99-references.html#ref-marchese2022)）。在更早的时候，类似的讨论已经发生，例如，关于沃纳·冯·布劳恩被允许为美国建造火箭，尽管他之前为纳粹德国做过同样的事情（[Neufeld
    2002](99-references.html#ref-neufeld2002wernher)；[Wilford 1977](99-references.html#ref-wilford1977)）。在医学领域，这些问题已经有一段时间是关注的焦点（[美国医学协会和纽约医学院
    1848](99-references.html#ref-american1848code)）。数据科学似乎决心拥有自己的塔斯克基时刻，而不是基于其他领域的经验去思考并积极解决这些问题。
- en: That said, there is some evidence that some data scientists are beginning to
    be more concerned about the ethics surrounding the practice. For instance, NeurIPS,
    a prestigious machine learning conference, has required a statement on ethics
    to accompany all submissions since 2020.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 话虽如此，有一些证据表明，一些数据科学家开始更加关注实践中的伦理问题。例如，NeurIPS，一个享有盛誉的机器学习会议，自2020年以来要求所有提交的论文都附有伦理声明。
- en: In order to provide a balanced perspective, authors are required to include
    a statement of the potential broader impact of their work, including its ethical
    aspects and future societal consequences. Authors should take care to discuss
    both positive and negative outcomes.
  id: totrans-294
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 为了提供一个平衡的视角，作者需要包括他们工作的潜在更广泛影响声明，包括其伦理方面和未来的社会后果。作者应仔细讨论积极和消极的结果。
- en: ''
  id: totrans-295
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: NeurIPS 2020 Conference Call For Papers
  id: totrans-296
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: NeurIPS 2020 会议征稿通知
- en: The purpose of ethical consideration and concern for the broader impact of data
    science is not to prescriptively rule things in or out, but to provide an opportunity
    to raise some issues that should be paramount. The variety of data science applications,
    the relative youth of the field, and the speed of change, mean that such considerations
    are sometimes knowingly set aside, and this is acceptable to the rest of the field.
    This contrasts with fields such as science, medicine, engineering, and accounting.
    Possibly those fields are more self-aware ([Figure 2.9](#fig-personalprobability)).
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 伦理考虑和对数据科学更广泛影响的关注的目的不是为了规定性地决定哪些事情可以或不可以做，而是为了提供一个机会，提出一些应该优先考虑的问题。数据科学应用的多样性、该领域的相对年轻和变化速度，意味着这种考虑有时会被有意地置于一旁，这在其他领域是可以接受的。这与科学、医学、工程和会计等领域形成对比。可能这些领域更加自我意识([图2.9](#fig-personalprobability))。
- en: '![](../Images/d1b1096fdbefd010a3ceae19b0a20655.png)'
  id: totrans-298
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/d1b1096fdbefd010a3ceae19b0a20655.png)'
- en: 'Figure 2.9: Numbers cannot be removed from their context, as illustrated in
    “Probability” by Randall Munroe: https://xkcd.com/881/.'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.9：数字不能脱离其上下文，正如Randall Munroe在“概率”中所展示的：https://xkcd.com/881/。
- en: 2.6 Exercises
  id: totrans-300
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.6 练习
- en: Practice
  id: totrans-301
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 练习
- en: '*(Plan)* Consider the following scenario: *Every day for a year a person records
    whether they donated $1, $2, or $3.* Please sketch what a dataset could look like,
    and then sketch a graph that you could build to show all observations.'
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(计划)* 考虑以下场景：*一个人每天记录他们是否捐赠了1美元、2美元或3美元，持续一年。* 请绘制一个可能的数据集的样子，然后绘制一个图表来展示所有观察结果。'
- en: '*(Simulate)* Please further consider the scenario described and simulate the
    situation. Carefully specify an appropriate situation using `sample()`. Then write
    five tests based on the simulated data.'
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(模拟)* 进一步考虑所描述的场景，并模拟这种情况。仔细指定一个合适的场景使用`sample()`。然后根据模拟数据编写五个测试。'
- en: '*(Acquire)* Please specify a source of actual data about the amount of money
    that is donated to charity in a country that you are interested in.'
  id: totrans-304
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(获取)* 请指定一个关于您感兴趣的国家慈善捐赠金额的实际数据来源。'
- en: '*(Explore)* Load the `tidyverse` and use `geom_bar()` to make a bar chart.'
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(探索)* 加载`tidyverse`并使用`geom_bar()`制作条形图。'
- en: '*(Share)* Please write two paragraphs as if you had gathered data from the
    source you identified (rather than simulated), and if the graph that you built
    using simulated data reflected the actual situation. The exact details contained
    in the paragraphs do not have to be factual but they should be reasonable (i.e. you
    do not actually have to get the data nor create the graphs). Submit a link to
    a GitHub Gist.'
  id: totrans-306
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(分享)* 请像从您确定的数据源（而不是模拟数据）中收集数据一样，写两段话，并且如果您使用模拟数据构建的图表反映了实际情况。段落中包含的详细内容不必是事实，但应该是合理的（即，您实际上不需要获取数据或创建图表）。提交一个GitHub
    Gist链接。'
- en: Quiz
  id: totrans-307
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小测验
- en: What does Barrett ([2021](99-references.html#ref-citeBarrett)) emphasize about
    learning data science (pick one)?
  id: totrans-308
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关于学习数据科学，Barrett([2021](99-references.html#ref-citeBarrett))强调了什么（选择一个）？
- en: Rapid, intense learning sessions.
  id: totrans-309
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 快速、密集的学习会话。
- en: Learning through failure.
  id: totrans-310
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过失败学习。
- en: One-time large projects.
  id: totrans-311
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一次性大型项目。
- en: Small, consistent actions.
  id: totrans-312
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 小而一致的行动。
- en: From Chambliss ([1989](99-references.html#ref-chambliss1989mundanity)), what
    is excellence (pick one)?
  id: totrans-313
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Chambliss([1989](99-references.html#ref-chambliss1989mundanity))那里，关于卓越（选择一个），他是什么看法？
- en: Prolonged performance at world-class level.
  id: totrans-314
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在世界级水平上长期表现。
- en: All Olympic medal winners.
  id: totrans-315
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 所有奥运金牌得主。
- en: Consistent superiority of performance.
  id: totrans-316
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 性能的一致优越性。
- en: All national-level athletes.
  id: totrans-317
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 所有国家级运动员。
- en: From Chambliss ([1989](99-references.html#ref-chambliss1989mundanity)), what
    is the key factor that leads to excellence (pick one)?
  id: totrans-318
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Chambliss ([1989](99-references.html#ref-chambliss1989mundanity))，导致优秀的关键因素是什么（选择一个）？
- en: Natural talent.
  id: totrans-319
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 天赋。
- en: Access to resources.
  id: totrans-320
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 资源访问。
- en: Special training methods.
  id: totrans-321
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 特殊的训练方法。
- en: Discipline, technique, and attitude.
  id: totrans-322
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 纪律、技术和态度。
- en: Think about the following quote from Chambliss ([1989, 81](99-references.html#ref-chambliss1989mundanity))
    and list three small skills or activities that could help you achieve excellence
    in data science.
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 思考以下来自Chambliss ([1989, 81](99-references.html#ref-chambliss1989mundanity))的引言，并列出三个有助于你在数据科学中实现优秀的小技能或活动。
- en: Excellence is mundane. Superlative performance is really a confluence of dozens
    of small skills or activities, each one learned or stumbled upon, which have been
    carefully drilled into habit and then are fitted together in a synthesized whole.
    There is nothing extraordinary or super-human in any one of those actions; only
    the fact that they are done consistently and correctly, and all together, produce
    excellence.
  id: totrans-324
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 优秀是平凡的。卓越的表现实际上是一系列数十个小技能或活动的汇聚，每个都是学习或偶然发现的，经过精心训练成为习惯，然后组合成一个综合的整体。在这些行动中没有任何非凡或超凡脱俗的地方；只有它们被一致且正确地完成，并且整体上产生了优秀。
- en: What is the primary focus of Hao ([2019](99-references.html#ref-hao2019)) (pick
    one)?
  id: totrans-325
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Hao ([2019](99-references.html#ref-hao2019))的主要关注点是什么（选择一个）？
- en: Bias in hiring practices.
  id: totrans-326
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 招聘实践中的偏见。
- en: How AI models perpetuate bias.
  id: totrans-327
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 人工智能模型如何加剧偏见。
- en: The benefits of AI in decision-making.
  id: totrans-328
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 人工智能在决策中的好处。
- en: Reducing bias through coding techniques.
  id: totrans-329
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过编码技术减少偏见。
- en: What is not one of the four challenges for mitigating bias mentioned in Hao
    ([2019](99-references.html#ref-hao2019)) (pick one)?
  id: totrans-330
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不是Hao（[2019](99-references.html#ref-hao2019)）提到的四个减轻偏见挑战之一的是什么（选择一个）？
- en: Unknown unknowns.
  id: totrans-331
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 未知之未知。
- en: Imperfect processes.
  id: totrans-332
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不完善的过程。
- en: Disinterest given profit considerations.
  id: totrans-333
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在考虑利润的情况下不感兴趣。
- en: Lack of social context.
  id: totrans-334
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 社会背景的缺乏。
- en: The definitions of fairness.
  id: totrans-335
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 公平的定义。
- en: 'What is the first sentence in the help file for the `tidyverse` (hint: run
    `?tidyverse` in the console) (pick one)?'
  id: totrans-336
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`tidyverse`帮助文件中的第一句话是什么（提示：在控制台中运行`?tidyverse`）（选择一个）？'
- en: “The ‘tidyverse’ is an opinionated collection of packages designed to help with
    common tasks in data science.”
  id: totrans-337
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “‘tidyverse’是一组有偏见的包集合，旨在帮助处理数据科学中的常见任务。”
- en: “Welcome to the ‘tidyverse’.”
  id: totrans-338
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “欢迎使用‘tidyverse’。”
- en: “The ‘tidyverse’ is a set of packages that work in harmony because they share
    common data representations and ‘API’ design.”
  id: totrans-339
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “‘tidyverse’是一组协同工作的包，因为它们共享常见的数据表示和‘API’设计。”
- en: Use a help file to determine which of the following are arguments for `read_csv()`
    (select all that apply)?
  id: totrans-340
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用帮助文件确定以下哪些是`read_csv()`的参数（选择所有适用的）？
- en: “all_cols”
  id: totrans-341
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “all_cols”
- en: “file”
  id: totrans-342
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “file”
- en: “col_types”
  id: totrans-343
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “col_types”
- en: “show_col_types”
  id: totrans-344
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “show_col_types”
- en: In the *Telling Stories with Data* workflow, what is the first step of a data
    science project (pick one)?
  id: totrans-345
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在*用数据讲故事*的工作流程中，数据科学项目的第一步是什么（选择一个）？
- en: Explore.
  id: totrans-346
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 探索。
- en: Simulate.
  id: totrans-347
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模拟。
- en: Share.
  id: totrans-348
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 分享。
- en: Plan.
  id: totrans-349
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 规划。
- en: Which `R` package, within the core `tidyverse`, is mainly used for data manipulation
    (pick one)?
  id: totrans-350
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`tidyverse`的核心包中，哪个`R`包主要用于数据操作（选择一个）？
- en: '`ggplot2`'
  id: totrans-351
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`ggplot2`'
- en: '`dplyr`'
  id: totrans-352
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`dplyr`'
- en: '`janitor`'
  id: totrans-353
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`janitor`'
- en: '`lubridate`'
  id: totrans-354
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`lubridate`'
- en: Which function is used to make column names easier to work with (pick one)?
  id: totrans-355
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪个函数用于使列名更容易处理（选择一个）？
- en: '`rename()`'
  id: totrans-356
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`rename()`'
- en: '`mutate()`'
  id: totrans-357
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mutate()`'
- en: '`clean_names()`'
  id: totrans-358
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`clean_names()`'
- en: '`filter()`'
  id: totrans-359
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`filter()`'
- en: What is the main purpose of `ggplot2` (pick one)?
  id: totrans-360
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`ggplot2`的主要用途是什么（选择一个）？'
- en: Perform statistical analysis.
  id: totrans-361
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行统计分析。
- en: Create and customize data visualizations.
  id: totrans-362
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建和定制数据可视化。
- en: Clean messy data.
  id: totrans-363
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 清理杂乱的数据。
- en: Automate data entry.
  id: totrans-364
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 自动化数据录入。
- en: Which operator in `R` is used to pass the output of one function as input to
    another function (pick one)?
  id: totrans-365
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`R`中的哪个运算符用于将一个函数的输出传递给另一个函数作为输入（选择一个）？'
- en: '`|>`'
  id: totrans-366
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`|>`'
- en: '`~`'
  id: totrans-367
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`~`'
- en: '`->`'
  id: totrans-368
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`->`'
- en: '`+`'
  id: totrans-369
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`+`'
- en: What does the `mutate()` function from the `dplyr` package do (pick one)?
  id: totrans-370
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mutate()`函数来自`dplyr`包的作用是什么（选择一个）？'
- en: Filter rows.
  id: totrans-371
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 过滤行。
- en: Group data.
  id: totrans-372
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 分组数据。
- en: Create or modify columns.
  id: totrans-373
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建或修改列。
- en: Clean data.
  id: totrans-374
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 清理数据。
- en: Why is it important to use `set.seed()` during simulation (pick one)?
  id: totrans-375
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为什么在模拟期间使用`set.seed()`很重要（选择一个）？
- en: To make the process faster.
  id: totrans-376
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使过程更快。
- en: To make random results more reproducible.
  id: totrans-377
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使随机结果更具可重复性。
- en: To reduce errors in the code.
  id: totrans-378
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了减少代码中的错误。
- en: To automate data acquisition.
  id: totrans-379
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了自动化数据获取。
- en: In the *Telling Stories with Data* workflow, why do we simulate data (select
    all that apply)?
  id: totrans-380
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在*用数据讲故事*的工作流程中，为什么我们要模拟数据（选择所有适用的）？
- en: It forces us into the details of our plan and brings some specificity.
  id: totrans-381
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它迫使我们深入到计划的细节，并带来一些具体性。
- en: It provides us with an opportunity to think deeply about our data generating
    process.
  id: totrans-382
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它为我们提供了一个深入思考数据生成过程的机会。
- en: Simulation is all you need.
  id: totrans-383
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模拟就是你所需要的一切。
- en: It helps with working in teams.
  id: totrans-384
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它有助于团队合作。
- en: When using `R`’s `sample()` function, what does “replace = TRUE” do (pick one)?
  id: totrans-385
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当使用 R 的 `sample()` 函数时，“replace = TRUE” 是什么意思（选择一个）？
- en: Earlier values are replaced by later values, which helps with reproducibility.
  id: totrans-386
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 较早的值被较晚的值替换，这有助于可重复性。
- en: Each value is unique.
  id: totrans-387
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 每个值都是唯一的。
- en: The same value can be selected more than once.
  id: totrans-388
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 同一个值可以被选择多次。
- en: What distribution does `rpois()` sample from (pick one)?
  id: totrans-389
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`rpois()` 从哪个分布中抽取（选择一个）。'
- en: Normal.
  id: totrans-390
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 正态分布。
- en: Uniform.
  id: totrans-391
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 均匀分布。
- en: Poisson.
  id: totrans-392
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 泊松分布。
- en: Exponential.
  id: totrans-393
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指数分布。
- en: What distribution does `runif()` sample from (pick one)?
  id: totrans-394
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`runif()` 从哪个分布中抽取（选择一个）？'
- en: Normal.
  id: totrans-395
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 正态分布。
- en: Uniform.
  id: totrans-396
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 均匀分布。
- en: Poisson.
  id: totrans-397
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 泊松分布。
- en: Exponential.
  id: totrans-398
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指数分布。
- en: Which of the following can be used to draw from the Normal and Binomial distributions,
    respectively (pick one)?
  id: totrans-399
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪个可以分别用于从正态分布和二项分布中抽取（选择一个）？
- en: '`rnorm()` and `rbinom()`.'
  id: totrans-400
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`rnorm()` 和 `rbinom()`.'
- en: '`rnorm()` and `rbinomial()`.'
  id: totrans-401
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`rnorm()` 和 `rbinom()`.'
- en: '`rnormal()` and `rbinomial()`.'
  id: totrans-402
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`rnormal()` 和 `rbinomial()`.'
- en: '`rnormal()` and `rbinom()`.'
  id: totrans-403
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`rnormal()` 和 `rbinom()`.'
- en: What is the result of `sample(x = letters, size = 2)` when the seed is set to
    “853”? What about when the seed is set to “1234” (pick one)?
  id: totrans-404
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当种子设置为“853”时，`sample(x = letters, size = 2)` 的结果是什么？当种子设置为“1234”时呢（选择一个）？
- en: ‘“i” “q”’ and ‘“e” “r”’.
  id: totrans-405
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: ‘“i” “q”’ 和 ‘“e” “r”’。
- en: ‘“e” “l”’ and ‘“e” “r”’.
  id: totrans-406
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: ‘“e” “l”’ 和 ‘“e” “r”’。
- en: ‘“i” “q”’ and ‘“p” “v”’.
  id: totrans-407
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: ‘“i” “q”’ 和 ‘“p” “v”’。
- en: ‘“e” “l”’ and ‘“p” “v”’.
  id: totrans-408
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: ‘“e” “l”’ 和 ‘“p” “v”’。
- en: Which function provides the recommended citation to cite R (pick one)?
  id: totrans-409
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪个函数提供了引用 R 的推荐引用（选择一个）？
- en: '`cite("R")`.'
  id: totrans-410
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`cite("R")`.'
- en: '`citation()`.'
  id: totrans-411
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`citation()`.'
- en: '`citation("R")`.'
  id: totrans-412
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`citation("R")`.'
- en: '`cite()`.'
  id: totrans-413
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`cite()`.'
- en: How do we get the citation information for `opendatatoronto` (pick one)?
  id: totrans-414
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们如何获取 `opendatatoronto` 的引用信息（选择一个）？
- en: '`cite()`'
  id: totrans-415
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`cite()`'
- en: '`citation()`'
  id: totrans-416
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`citation()`'
- en: '`citation("opendatatoronto")`'
  id: totrans-417
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`citation("opendatatoronto")`'
- en: '`cite("opendatatoronto")`'
  id: totrans-418
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`cite("opendatatoronto")`'
- en: Which function is used to update packages (pick one)?
  id: totrans-419
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪个函数用于更新包（选择一个）？
- en: '`update.packages()`'
  id: totrans-420
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`update.packages()`'
- en: '`upgrade.packages()`'
  id: totrans-421
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`upgrade.packages()`'
- en: '`revise.packages()`'
  id: totrans-422
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`revise.packages()`'
- en: '`renovate.packages()`'
  id: totrans-423
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`renovate.packages()`'
- en: What are some features that we might typically expect of a column that claimed
    to be a year (select all that apply)?
  id: totrans-424
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可能期望一个声称是年份的列有哪些特征（选择所有适用的）？
- en: The class is “character”.
  id: totrans-425
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 类别是“character”。
- en: There are no negative numbers.
  id: totrans-426
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 没有负数。
- en: There are letters in the column.
  id: totrans-427
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 列中有字母。
- en: Each entry has four digits.
  id: totrans-428
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 每个条目都有四个数字。
- en: Please add a small mistake to the following code. Then add it to a GitHub Gist
    and submit the URL.
  id: totrans-429
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请在以下代码中添加一个小错误。然后将它添加到 GitHub Gist 并提交 URL。
- en: '[PRE81]'
  id: totrans-430
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: '*27.  Why do we simulate a dataset (write at least three dot points)?'
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: '*27.  为什么我们要模拟数据集（至少写三个要点）？'
- en: 'This code `library(datasauRus)` is run and results in this error “Error in
    library(datasauRus) : there is no package called ‘datasauRus’”. What is the most
    likely issue (pick one)?'
  id: totrans-432
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '这段代码 `library(datasauRus)` 运行后出现错误“Error in library(datasauRus) : there is
    no package called ‘datasauRus’”。最可能的问题是什么（选择一个）？'
- en: The ``datasauRus` package was not installed.
  id: totrans-433
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`datasauRus` 包没有被安装。'
- en: Typo in the name `datasauRus`.
  id: totrans-434
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 名称 `datasauRus` 中的错别字。
- en: There is a package conflict between `datasauRus` and another one.
  id: totrans-435
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`datasauRus` 和另一个包之间存在包冲突。'
- en: In a dataset about neonatal mortality, what is the best name for a variable
    used to store country names (pick one)?
  id: totrans-436
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在关于新生儿死亡率的数据集中，用于存储国家名称的变量最好的名称是什么（选择一个）？
- en: “ctry”
  id: totrans-437
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “ctry”
- en: “geo_area”
  id: totrans-438
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “geo_area”
- en: “country”*  *### Class activities
  id: totrans-439
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “country”*  *### 课堂活动
- en: Pick one of the `dplyr` verbs – `mutate()`, `select()`, `filter()`, `arrange()`,
    `summarize()` – and explain what it does within the context of an example that
    you simulate.
  id: totrans-440
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `simulation.R` 脚本中，选择 `dplyr` 的一个动词 – `mutate()`, `select()`, `filter()`,
    `arrange()`, `summarize()` – 并在模拟的例子中解释它所做的工作。
- en: Simulate 100 draws from the uniform distribution with mean 5 and standard deviation
    2 in the `simulation.R` script. Write one test for this dataset in the `tests.R`
    script.
  id: totrans-441
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `simulation.R` 脚本中模拟从均匀分布中抽取100个值，均值为5，标准差为2。在 `tests.R` 脚本中为这个数据集写一个测试。
- en: Simulate 50 draws from the Poisson distribution with lambda 10 in the `simulation.R`
    script. Write two tests for this dataset in the `tests.R` script.
  id: totrans-442
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `simulation.R` 脚本中模拟从泊松分布（lambda=10）中抽取50个值。在 `tests.R` 脚本中为这个数据集写两个测试。
- en: Gather some data on Marriage Licence Statistics in Toronto using Open Data Toronto
    in the `gather.R` script. Clean it in the `cleaning.R` script.[¹](#fn1) Graph
    it in the Quarto document.
  id: totrans-443
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Open Data Toronto在`gather.R`脚本中收集多伦多婚姻许可证统计数据。在`cleaning.R`脚本中清理它。[¹](#fn1)
    在Quarto文档中绘制图表。
- en: The following code produces an error. Please add it to a GitHub Gist, and then
    ask for help in an appropriate venue.
  id: totrans-444
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以下代码产生了一个错误。请将其添加到GitHub Gist中，然后在适当的场所寻求帮助。
- en: '[PRE82]'
  id: totrans-445
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: '**   The following code creates an odd-looking graph in terms of dates. Please
    identify the issue and fix it, by adding functions before `ggplot()`.'
  id: totrans-446
  prefs: []
  type: TYPE_NORMAL
  zh: '**   以下代码创建了一个在日期方面的奇形怪状的图表。请识别问题并修复它，通过在`ggplot()`之前添加函数。'
- en: '[PRE83]'
  id: totrans-447
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: '**   Consider the following code to make a graph. You want to move the legend
    to the bottom but cannot remember the `ggplot2` function to do that. Please use
    an LLM to identify the change needed. Share your prompt.'
  id: totrans-448
  prefs: []
  type: TYPE_NORMAL
  zh: '**   考虑以下代码来制作图表。你希望将图例移动到底部，但忘记了`ggplot2`函数如何做到这一点。请使用LLM来识别所需的变化。分享你的提示。'
- en: '[PRE84]**  ***### Task'
  id: totrans-449
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE84] ***### 任务'
- en: The purpose of this task is to redo the Australian Elections example, but for
    Canada. It is a chance to work in a realistic setting because the Canadian situation
    has some differences, but the Australian example provides guardrails.
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: 这个任务的目的是要重新做澳大利亚选举的例子，但针对加拿大。这是一个在现实环境中工作的机会，因为加拿大的情况有一些不同，但澳大利亚的例子提供了指导。
- en: 'By way of background, Canada’s parliament has 338 seats, also known as “ridings”,
    in the House of Commons. The main political parties are: major parties: Liberal
    and Conservative; minor parties: Bloc Québécois, New Democratic, and Green; some
    smaller parties and independents. The steps you should follow are:'
  id: totrans-451
  prefs: []
  type: TYPE_NORMAL
  zh: 作为背景，加拿大的议会共有338个席位，也称为“选区”，在众议院中。主要政党有：主要政党：自由党和保守党；小政党：魁北克人党、新民主党、绿党；一些较小的政党和无党派人士。你应该遵循的步骤是：
- en: 'Plan:'
  id: totrans-452
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计划：
- en: 'Dataset: Each observation should include the riding name and the party of the
    elected candidate.'
  id: totrans-453
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据集：每个观测值应包括选区名称和当选候选人的政党。
- en: 'Graph: The graph should show the number of ridings won by each party.'
  id: totrans-454
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 图表：图表应显示每个政党赢得的选区数量。
- en: 'Simulate:'
  id: totrans-455
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模拟：
- en: Create a Quarto document.
  id: totrans-456
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个Quarto文档。
- en: 'Load necessary packages: `tidyverse`, and `janitor`.'
  id: totrans-457
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加载必要的包：`tidyverse`和`janitor`。
- en: 'Simulate election results by randomly assigning parties to ridings: Add numbers
    for the riding, then use `sample()` to randomly choose one of six options, with
    replacement, 338 times.'
  id: totrans-458
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过随机分配政党到选区来模拟选举结果：为选区添加数字，然后使用`sample()`随机选择六个选项之一，重复338次。
- en: 'Acquire:'
  id: totrans-459
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取：
- en: Download the CSV file from Elections Canada [here](https://www.elections.ca/res/rep/off/ovr2021app/53/data_donnees/table_tableau11.csv).
  id: totrans-460
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从加拿大选举局[这里](https://www.elections.ca/res/rep/off/ovr2021app/53/data_donnees/table_tableau11.csv)下载CSV文件。
- en: 'Clean the names, and then select the two columns that are of interest: “electoral_district_name_nom_de_circonscription”,
    and “elected_candidate_candidat_elu”. Finally, rename the columns to remove the
    French and simplify the names.'
  id: totrans-461
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 清理名称，然后选择两个感兴趣的列：“electoral_district_name_nom_de_circonscription”和“elected_candidate_candidat_elu”。最后，重命名这些列以去除法语并简化名称。
- en: The column that we need is about the elected candidates. That has the surname
    of the elected candidate, followed by a comma, followed by their first name, followed
    by a space, followed by the name of the party in both English and French, separated
    by a slash. Break-up this column into its pieces using `separate()` from `tidyr`
    and then use `select()` to just keep party information (some helper code is below).
  id: totrans-462
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们需要的列是关于当选候选人的。它包含当选候选人的姓氏，后面跟着一个逗号，然后是他们的名字，后面跟着一个空格，然后是英语和法语中的政党名称，由斜杠分隔。使用`tidyr`中的`separate()`将此列拆分成各个部分，然后使用`select()`仅保留政党信息（以下是一些辅助代码）。
- en: Finally, recode the party names from French to English to match what we simulated.
  id: totrans-463
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，将政党名称从法语重编码为英语，以匹配我们模拟的内容。
- en: '[PRE85]'
  id: totrans-464
  prefs: []
  type: TYPE_PRE
  zh: '[PRE85]'
- en: '*4.  Explore:'
  id: totrans-465
  prefs: []
  type: TYPE_NORMAL
  zh: '*4.  探索：'
- en: Make a nice graph of the number of ridings won by each party in the 2021 Canadian
    Federal Election.
  id: totrans-466
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 制作一张关于2021年加拿大联邦选举中每个政党赢得的选区数量的精美图表。
- en: 'Share:'
  id: totrans-467
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 分享：
- en: Write a few paragraphs about what you did, why you did it, and what you found.
    Submit a link to a GitHub Gist.
  id: totrans-468
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 写几段关于你做了什么，为什么这样做，以及你发现了什么的文字。提交一个GitHub Gist的链接。
- en: 'American Medical Association and New York Academy of Medicine. 1848\. *Code
    of Medical Ethics*. Academy of Medicine. [https://hdl.handle.net/2027/chi.57108026](https://hdl.handle.net/2027/chi.57108026).Arel-Bundock,
    Vincent. 2024\. *tinytable: Simple and Configurable Tables in “HTML,” “LaTeX,”
    “Markdown,” “Word,” “PNG,” “PDF,” and “Typst” Formats*. [https://vincentarelbundock.github.io/tinytable/](https://vincentarelbundock.github.io/tinytable/).Barrett,
    Malcolm. 2021\. *Data Science as an Atomic Habit*. [https://malco.io/articles/2021-01-04-data-science-as-an-atomic-habit](https://malco.io/articles/2021-01-04-data-science-as-an-atomic-habit).Brokowski,
    Carolyn, and Mazhar Adli. 2019\. “CRISPR Ethics: Moral Considerations for Applications
    of a Powerful Tool.” *Journal of Molecular Biology* 431 (1): 88–101\. [https://doi.org/10.1016/j.jmb.2018.05.044](https://doi.org/10.1016/j.jmb.2018.05.044).Bronner,
    Laura. 2020\. “Why Statistics Don’t Capture the Full Extent of the Systemic Bias
    in Policing.” *FiveThirtyEight*, June. [https://fivethirtyeight.com/features/why-statistics-dont-capture-the-full-extent-of-the-systemic-bias-in-policing/](https://fivethirtyeight.com/features/why-statistics-dont-capture-the-full-extent-of-the-systemic-bias-in-policing/).Cardoso,
    Tom. 2020\. “Bias behind bars: A Globe investigation finds a prison system stacked
    against Black and Indigenous inmates.” *The Globe and Mail*, October. [https://www.theglobeandmail.com/canada/article-investigation-racial-bias-in-canadian-prison-risk-assessments/](https://www.theglobeandmail.com/canada/article-investigation-racial-bias-in-canadian-prison-risk-assessments/).Chambliss,
    Daniel. 1989\. “The Mundanity of Excellence: An Ethnographic Report on Stratification
    and Olympic Swimmers.” *Sociological Theory* 7 (1): 70–86\. [https://doi.org/10.2307/202063](https://doi.org/10.2307/202063).City
    of Toronto. 2021\. *2021 Street Needs Assessment*. [https://www.toronto.ca/city-government/data-research-maps/research-reports/housing-and-homelessness-research-and-reports/](https://www.toronto.ca/city-government/data-research-maps/research-reports/housing-and-homelessness-research-and-reports/).Firke,
    Sam. 2023\. *janitor: Simple Tools for Examining and Cleaning Dirty Data*. [https://CRAN.R-project.org/package=janitor](https://CRAN.R-project.org/package=janitor).Gelfand,
    Sharla. 2022\. *opendatatoronto: Access the City of Toronto Open Data Portal*.
    [https://CRAN.R-project.org/package=opendatatoronto](https://CRAN.R-project.org/package=opendatatoronto).Grolemund,
    Garrett, and Hadley Wickham. 2011\. “Dates and Times Made Easy with lubridate.”
    *Journal of Statistical Software* 40 (3): 1–25\. [https://doi.org/10.18637/jss.v040.i03](https://doi.org/10.18637/jss.v040.i03).Hao,
    Karen. 2019\. “This is How AI Bias Really Happens—And Why It’s So Hard To Fix.”
    *MIT Technology Review*, February. [https://www.technologyreview.com/2019/02/04/137602/this-is-how-ai-bias-really-happensand-why-its-so-hard-to-fix/](https://www.technologyreview.com/2019/02/04/137602/this-is-how-ai-bias-really-happensand-why-its-so-hard-to-fix/).Keyes,
    Os. 2019\. “Counting the Countless.” *Real Life*. [https://reallifemag.com/counting-the-countless/](https://reallifemag.com/counting-the-countless/).Marchese,
    David. 2022\. “Her Discovery Changed the World. How Does She Think We Should Use
    It?” *The New York Times*, August. [https://www.nytimes.com/interactive/2022/08/15/magazine/jennifer-doudna-crispr-interview.html](https://www.nytimes.com/interactive/2022/08/15/magazine/jennifer-doudna-crispr-interview.html).Neufeld,
    Michael. 2002\. “Wernher von Braun, the SS, and Concentration Camp Labor: Questions
    of Moral, Political, and Criminal Responsibility.” *German Studies Review* 25
    (1): 57–78\. [https://doi.org/10.2307/1433245](https://doi.org/10.2307/1433245).R
    Core Team. 2024\. *R: A Language and Environment for Statistical Computing*. Vienna,
    Austria: R Foundation for Statistical Computing. [https://www.R-project.org/](https://www.R-project.org/).UN
    IGME. 2021\. “Levels and Trends in Child Mortality, 2021.” [https://childmortality.org/wp-content/uploads/2021/12/UNICEF-2021-Child-Mortality-Report.pdf](https://childmortality.org/wp-content/uploads/2021/12/UNICEF-2021-Child-Mortality-Report.pdf).Wickham,
    Hadley. 2016\. *ggplot2: Elegant Graphics for Data Analysis*. Springer-Verlag
    New York. [https://ggplot2.tidyverse.org](https://ggplot2.tidyverse.org).———.
    2017\. *tidyverse: Easily Install and Load the “Tidyverse”*. [https://CRAN.R-project.org/package=tidyverse](https://CRAN.R-project.org/package=tidyverse).———.
    2019\. *Advanced R*. 2nd ed. Chapman; Hall/CRC. [https://adv-r.hadley.nz](https://adv-r.hadley.nz).———.
    2022\. *stringr: Simple, Consistent Wrappers for Common String Operations*. [https://CRAN.R-project.org/package=stringr](https://CRAN.R-project.org/package=stringr).Wickham,
    Hadley, Mara Averick, Jenny Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain
    François, Garrett Grolemund, et al. 2019\. “Welcome to the Tidyverse.” *Journal
    of Open Source Software* 4 (43): 1686\. [https://doi.org/10.21105/joss.01686](https://doi.org/10.21105/joss.01686).Wickham,
    Hadley, Mine Çetinkaya-Rundel, and Garrett Grolemund. (2016) 2023\. *R for Data
    Science*. 2nd ed. O’Reilly Media. [https://r4ds.hadley.nz](https://r4ds.hadley.nz).Wickham,
    Hadley, Romain François, Lionel Henry, and Kirill Müller. 2022\. *dplyr: A Grammar
    of Data Manipulation*. [https://CRAN.R-project.org/package=dplyr](https://CRAN.R-project.org/package=dplyr).Wickham,
    Hadley, Jim Hester, and Jenny Bryan. 2022\. *readr: Read Rectangular Text Data*.
    [https://CRAN.R-project.org/package=readr](https://CRAN.R-project.org/package=readr).Wickham,
    Hadley, Davis Vaughan, and Maximilian Girlich. 2023\. *tidyr: Tidy Messy Data*.
    [https://CRAN.R-project.org/package=tidyr](https://CRAN.R-project.org/package=tidyr).Wilford,
    John Noble. 1977\. “Wernher von Braun, Rocket Pioneer, Dies.” *The New York Times*,
    June. [https://www.nytimes.com/1977/06/18/archives/wernher-von-braun-rocket-pioneer-dies-wernher-von-braun-pioneer-in.html](https://www.nytimes.com/1977/06/18/archives/wernher-von-braun-rocket-pioneer-dies-wernher-von-braun-pioneer-in.html).Xie,
    Yihui. 2023\. *knitr: A General-Purpose Package for Dynamic Report Generation
    in R*. [https://yihui.org/knitr/](https://yihui.org/knitr/).***** **** * *'
  id: totrans-469
  prefs: []
  type: TYPE_NORMAL
  zh: '美国医学协会和纽约医学院。1848年。*医学伦理准则*。医学院。[https://hdl.handle.net/2027/chi.57108026](https://hdl.handle.net/2027/chi.57108026)。Arel-Bundock,
    Vincent. 2024年。*tinytable: 在“HTML”、“LaTeX”、“Markdown”、“Word”、“PNG”、“PDF”和“Typst”格式中的简单且可配置的表格*。[https://vincentarelbundock.github.io/tinytable/](https://vincentarelbundock.github.io/tinytable/).Barrett,
    Malcolm. 2021年。*数据科学作为一种原子习惯*。[https://malco.io/articles/2021-01-04-data-science-as-an-atomic-habit](https://malco.io/articles/2021-01-04-data-science-as-an-atomic-habit).Brokowski,
    Carolyn，和Mazhar Adli. 2019年。“CRISPR伦理：应用强大工具的道德考量。”*分子生物学杂志* 431 (1): 88–101。[https://doi.org/10.1016/j.jmb.2018.05.044](https://doi.org/10.1016/j.jmb.2018.05.044).Bronner,
    Laura. 2020年。“为什么统计数据无法捕捉警务系统系统性偏见的全貌。”*五三八大旗*，六月。[https://fivethirtyeight.com/features/why-statistics-dont-capture-the-full-extent-of-the-systemic-bias-in-policing/](https://fivethirtyeight.com/features/why-statistics-dont-capture-the-full-extent-of-the-systemic-bias-in-policing/).Cardoso,
    Tom. 2020年。“监狱背后的偏见：环球调查发现监狱系统对黑人原住民囚犯不利。”*环球邮报*，十月。[https://www.theglobeandmail.com/canada/article-investigation-racial-bias-in-canadian-prison-risk-assessments/](https://www.theglobeandmail.com/canada/article-investigation-racial-bias-in-canadian-prison-risk-assessments/).Chambliss,
    Daniel. 1989年。“卓越的平凡：关于分层和奥运游泳者的民族志报告。”*社会学理论* 7 (1): 70–86。[https://doi.org/10.2307/202063](https://doi.org/10.2307/202063).多伦多市政府。2021年。*2021年街道需求评估*。[https://www.toronto.ca/city-government/data-research-maps/research-reports/housing-and-homelessness-research-and-reports/](https://www.toronto.ca/city-government/data-research-maps/research-reports/housing-and-homelessness-research-and-reports/).Firke,
    Sam. 2023年。*janitor: 简单工具用于检查和清理脏数据*。[https://CRAN.R-project.org/package=janitor](https://CRAN.R-project.org/package=janitor).Gelfand,
    Sharla. 2022年。*opendatatoronto: 访问多伦多市政府开放数据门户*。[https://CRAN.R-project.org/package=opendatatoronto](https://CRAN.R-project.org/package=opendatatoronto).Grolemund,
    Garrett，和Hadley Wickham. 2011年。“使用lubridate使日期和时间变得简单。”*统计软件杂志* 40 (3): 1–25。[https://doi.org/10.18637/jss.v040.i03](https://doi.org/10.18637/jss.v040.i03).Hao,
    Karen. 2019年。“这是AI偏见真正发生的方式——以及为什么它如此难以修复。”*麻省理工学院技术评论*，二月。[https://www.technologyreview.com/2019/02/04/137602/this-is-how-ai-bias-really-happensand-why-its-so-hard-to-fix/](https://www.technologyreview.com/2019/02/04/137602/this-is-how-ai-bias-really-happensand-why-its-so-hard-to-fix/).Keyes,
    Os. 2019年。“计数无数。”*真实生活*。[https://reallifemag.com/counting-the-countless/](https://reallifemag.com/counting-the-countless/).Marchese,
    David. 2022年。“她的发现改变了世界。她认为我们应该如何使用它？”*纽约时报*，八月。[https://www.nytimes.com/interactive/2022/08/15/magazine/jennifer-doudna-crispr-interview.html](https://www.nytimes.com/interactive/2022/08/15/magazine/jennifer-doudna-crispr-interview.html).Neufeld,
    Michael. 2002年。“沃纳·冯·布劳恩、SS和集中营劳工：道德、政治和刑事责任问题。”*德国研究评论* 25 (1): 57–78。[https://doi.org/10.2307/1433245](https://doi.org/10.2307/1433245).R核心团队。2024年。*R：统计计算的语言和环境*。奥地利维也纳：R统计计算基金会。[https://www.R-project.org/](https://www.R-project.org/).联合国IGME。2021年。“2021年儿童死亡率水平和趋势。”[https://childmortality.org/wp-content/uploads/2021/12/UNICEF-2021-Child-Mortality-Report.pdf](https://childmortality.org/wp-content/uploads/2021/12/UNICEF-2021-Child-Mortality-Report.pdf).Wickham,
    Hadley. 2016年。*ggplot2：数据分析的优雅图形*。施普林格纽约。[https://ggplot2.tidyverse.org](https://ggplot2.tidyverse.org)。——。2017年。*tidyverse：轻松安装和加载“tidyverse”*。[https://CRAN.R-project.org/package=tidyverse](https://CRAN.R-project.org/package=tidyverse)。——。2019年。*高级R*。第2版。查普曼；霍尔/CRC。[https://adv-r.hadley.nz](https://adv-r.hadley.nz)。——。2022年。*stringr：常见字符串操作的简单、一致包装器*。[https://CRAN.R-project.org/package=stringr](https://CRAN.R-project.org/package=stringr)。Wickham,
    Hadley，Mara Averick，Jenny Bryan，Winston Chang，Lucy D’Agostino McGowan，Romain François，Garrett
    Grolemund等。2019年。“欢迎来到tidyverse。”*开源软件杂志* 4 (43): 1686。[https://doi.org/10.21105/joss.01686](https://doi.org/10.21105/joss.01686)。Wickham,
    Hadley，Mine Çetinkaya-Rundel，和Garrett Grolemund。2016年。2023年。*R数据科学*。第2版。奥莱利媒体。[https://r4ds.hadley.nz](https://r4ds.hadley.nz)。Wickham,
    Hadley，Romain François，Lionel Henry，和Kirill Müller。2022年。*dplyr：数据操作的语法*。[https://CRAN.R-project.org/package=dplyr](https://CRAN.R-project.org/package=dplyr)。Wickham,
    Hadley，Jim Hester，和Jenny Bryan。2022年。*readr：读取矩形文本数据*。[https://CRAN.R-project.org/package=readr](https://CRAN.R-project.org/package=readr)。Wickham,
    Hadley，Davis Vaughan，和Maximilian Girlich。2023年。*tidyr：整理混乱的数据*。[https://CRAN.R-project.org/package=tidyr](https://CRAN.R-project.org/package=tidyr)。Wilford,
    John Noble. 1977年。“火箭先驱沃纳·冯·布劳恩去世。”*纽约时报*，六月。[https://www.nytimes.com/1977/06/18/archives/wernher-von-braun-rocket-pioneer-dies-wernher-von-braun-pioneer-in.html](https://www.nytimes.com/1977/06/18/archives/wernher-von-braun-rocket-pioneer-dies-wernher-von-braun-pioneer-in.html)。Xie,
    Yihui. 2023年。*knitr：R中动态报告生成的通用包*。[https://yihui.org/knitr/](https://yihui.org/knitr/).'
- en: Consider `separate()` and then `lubridate::ymd()` for the dates.[↩︎](#fnref1)****************
  id: totrans-470
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 考虑使用 `separate()` 然后是 `lubridate::ymd()` 对日期进行处理。[↩︎](#fnref1)****************
