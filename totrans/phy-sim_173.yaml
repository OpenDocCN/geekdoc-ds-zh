- en: Continuum Mechanics-Based Constraints
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 基于连续介质力学的约束
- en: 原文：[https://phys-sim-book.github.io/lec32.5-pbd_continuum.html](https://phys-sim-book.github.io/lec32.5-pbd_continuum.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[https://phys-sim-book.github.io/lec32.5-pbd_continuum.html](https://phys-sim-book.github.io/lec32.5-pbd_continuum.html)'
- en: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
- en: While simple geometric constraints such as distance and volume are effective
    for many materials, a more physically rigorous and expressive simulation can be
    achieved by deriving constraints directly from the principles of continuum mechanics.
    This approach connects Position-Based Dynamics to the rich theoretical foundation
    of established methods like the Finite Element Method (FEM), allowing for the
    simulation of complex material behaviors including anisotropy, elastoplasticity,
    and nonlinear elasticity. The core idea is to define constraints based on the
    deformation gradient, a tensor that measures the local stretching and shearing
    of the material.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然简单的几何约束，如距离和体积，对许多材料是有效的，但通过直接从连续介质力学的原理推导约束，可以实现更物理严格和表达丰富的模拟。这种方法将基于位置的动力系统与有限元法（FEM）等已建立方法的丰富理论基础联系起来，允许模拟包括各向异性、弹塑性和非线性弹性在内的复杂材料行为。核心思想是基于变形梯度定义约束，这是一个测量材料局部拉伸和剪切的张量。
- en: 'This section will first review the necessary concepts of discretized [deformation
    and strain](./lec12-kinematics.html). It will then detail two primary methods
    for formulating continuum-based constraints: a holistic approach based on [strain
    energy](./lec13-strain_energy.html) and a more granular method that constrains
    individual components of the strain tensor directly.'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将首先回顾离散化[变形和应变](./lec12-kinematics.html)的必要概念。然后详细说明制定基于连续介质的约束的两种主要方法：一种基于[应变能](./lec13-strain_energy.html)的整体方法，以及一种更细粒度的方法，它直接约束应变张量的各个分量。
- en: '[The Strain Energy Constraint](#the-strain-energy-constraint)'
  id: totrans-5
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[应变能约束](#the-strain-energy-constraint)'
- en: The most direct way to incorporate a standard hyperelastic material model into
    PBD is to use its strain energy potential as a constraint function.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 将标准超弹性材料模型直接纳入PBD的最直接方法是将它的应变能势作为约束函数。
- en: 'In a discrete setting, such as a tetrahedral mesh, the deformation gradient
    is assumed to be constant within each element. For a tetrahedron with material-space
    vertices (P1​,P2​,P3​,P4​) and world-space vertices (p1​,p2​,p3​,p4​), we can
    define a material-space shape matrix Dm​ and a world-space shape matrix Ds​ from
    the edge vectors: Dm​Ds​​=[P1​−P4​,P2​−P4​,P3​−P4​]=[p1​−p4​,p2​−p4​,p3​−p4​]​
    The deformation gradient for the tetrahedron is then given by F=Ds​Dm−1​. Note
    that Dm−1​ is constant and can be precomputed.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在离散设置中，例如四面体网格，假设变形梯度在每个单元内是恒定的。对于一个具有材料空间顶点（P1，P2，P3，P4）和世界空间顶点（p1，p2，p3，p4）的四面体，我们可以从边向量定义一个材料空间形状矩阵Dm和世界空间形状矩阵Ds：DmDs=[P1−P4，P2−P4，P3−P4]=[p1−p4，p2−p4，p3−p4]变形梯度对于四面体由F=DsDm−1给出。注意Dm−1是恒定的，可以预先计算。
- en: 'From F, we can derive various strain measures. One of the most common is the
    **Green-St. Venant strain tensor**, ε, which is independent of rigid-body rotations:
    ε=21​(FTF−I)(33.5.1) The related **right Cauchy-Green deformation tensor**, S=FTF=2ε+I,
    will be particularly useful for formulating direct strain constraints. If there
    is no deformation, F=I, S=I, and ε=0.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 从F，我们可以推导出各种应变度量。其中最常见的是**格林-圣维南应变张量**，ε，它不依赖于刚体旋转：ε=21(FTF−I)(33.5.1)相关的**右柯西-格林变形张量**，S=FTF=2ε+I，将特别有助于制定直接应变约束。如果没有变形，F=I，S=I，且ε=0。
- en: 'By Hooke’s generalized law, we can relate stress to strain:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 通过胡克广义定律，我们可以将应力与应变联系起来：
- en: 'S=Cε where C is the elasticity tensor of the material. Recall that the energy
    of a deformed solid is defined by integrating the scalar strain energy density
    field over the whole body Ω:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: S=Cε 其中C是材料的弹性张量。回想一下，变形固体的能量是通过在整个体Ω上积分标量应变能密度场来定义的：
- en: 'Es​=∫Ω​Ψs​dP where the strain energy density can be defined in terms of stress
    and strain:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: Es=∫ΩΨs dP 其中应变能密度可以用应力应变来定义：
- en: Ψs​=21​ε:S=21​tr(ε⊤S)
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: Ψs=21ε:S=21tr(ε⊤S)
- en: 'So the total strain energy for a single tetrahedral element is its rest volume
    V0​ multiplied by the energy density. For an undeformed state, this energy is
    zero. This naturally leads to the following constraint formulation: C(p1​,...,p4​)=Es​=V0​Ψs​(F(p1​,...,p4​))=0(33.5.2)'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，单个四面体单元的总应变能是其初始体积 V0 乘以能量密度。对于未变形状态，这种能量为零。这自然导致以下约束公式的形成：C(p1,...,p4)=Es=V0Ψs(F(p1,...,p4))=0(33.5.2)。
- en: 'The PBD solver requires the gradient of the constraint with respect to the
    positions of the vertices. This gradient has a deep physical meaning, as it is
    directly related to the **first Piola-Kirchhoff stress tensor**, P, which relates
    forces in the current configuration to areas in the reference configuration. The
    stress tensor is a function of the deformation gradient, P(F). Using the chain
    rule, the gradients of the energy for the first three vertices can be computed
    in a compact matrix form: [∂p1​∂Es​​,∂p2​∂Es​​,∂p3​∂Es​​]=V0​P(F)Dm−T​(33.5.3)
    The gradient for the fourth vertex is determined by the condition of translational
    invariance (i.e., the net force on the element must be zero): ∂p4​∂Es​​=−i=1∑3​∂pi​∂Es​​(33.5.4)
    This formulation extends naturally to surface meshes composed of triangles. For
    a triangle with rest area A0​, the constraint is C(p)=A0​Ψs​(Ftri​). The gradients
    are computed analogously: [∂p1​∂Es​​,∂p2​∂Es​​]=A0​P(Ftri​)Dm−T​and∂p3​∂Es​​=−i=1∑2​∂pi​∂Es​​(33.5.5)'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: PBD求解器需要计算约束相对于顶点位置的梯度。这个梯度具有深刻的物理意义，因为它直接与**第一Piola-Kirchhoff应力张量** P 相关，P
    将当前配置中的力与参考配置中的面积联系起来。应力张量是变形梯度 P(F) 的函数。使用链式法则，可以以紧凑的矩阵形式计算前三个顶点的能量梯度：[∂p1/∂Es,
    ∂p2/∂Es, ∂p3/∂Es]=V0P(F)Dm−T(33.5.3)。第四个顶点的梯度由平移不变性条件（即元素上的净力必须为零）确定：∂p4/∂Es=−i=1∑3∂pi/∂Es(33.5.4)。这种公式自然地扩展到由三角形组成的表面网格。对于一个静面积
    A0 的三角形，约束是 C(p)=A0Ψs(Ftri)。梯度计算类似：[∂p1/∂Es, ∂p2/∂Es]=A0P(Ftri)Dm−T，且 ∂p3/∂Es=−i=1∑2∂pi/∂Es(33.5.5)。
- en: '***Remark 33.5.1 (Handling Element Inversion).*** Standard constitutive models
    are often not defined for degenerate or inverted elements (where det(F)≤0), which
    can cause instabilities in a simulation. This is a critical practical issue. This
    problem can be robustly addressed by augmenting the constitutive model with techniques
    designed for inversion handling.'
  id: totrans-15
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***备注 33.5.1（处理元素逆置）***。标准本构模型通常不适用于退化或逆置元素（其中 det(F)≤0），这可能导致模拟中的不稳定性。这是一个关键的实际问题。通过增强本构模型，并采用为逆置处理设计的技巧，可以稳健地解决这个问题。'
- en: The elegance of this strain energy constraint lies in its generality. It is
    not limited to a single material type, like the simple St. Venant-Kirchhoff model.
    More complex and physically accurate models, such as the Neo-Hookean model for
    rubber-like materials, can be readily supported by simply substituting the appropriate
    energy density function Ψs​. This allows PBD to simulate complex physical effects
    like lateral contraction (Poisson's effect), anisotropy, and elastoplasticity
    with high fidelity and efficiency.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 这种应变能约束的优雅之处在于其通用性。它不仅限于单一的材料类型，如简单的圣维南-柯西模型。更复杂且物理上更准确的模型，如用于橡胶类材料的莫尔-库仑模型，可以通过简单地替换适当的能量密度函数
    Ψs 来轻松支持。这允许PBD以高保真度和效率模拟复杂的物理效应，如横向收缩（泊松效应）、各向异性和弹塑性。
- en: '[Direct Strain-Based Constraints](#direct-strain-based-constraints)'
  id: totrans-17
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[基于直接应变的约束](#direct-strain-based-constraints)'
- en: For applications requiring more granular or intuitive control over material
    properties, particularly for simulating anisotropy, it is advantageous to define
    separate constraints for each mode of deformation. This approach operates on the
    components of the right Cauchy-Green deformation tensor, S=FTF.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 对于需要更细粒度或直观控制材料属性的应用，尤其是模拟各向异性，为每种变形模式定义单独的约束是有利的。这种方法作用于右柯西-格林变形张量的分量，S=FTF。
- en: '[Stretch Constraints](#stretch-constraints)'
  id: totrans-19
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[拉伸约束](#stretch-constraints)'
- en: 'The diagonal entries of S, Sii​, represent the squared stretch along the material''s
    reference axes. In an undeformed state, Sii​=1. To ensure the constraint projection
    is linear and converges in a single step, the stretch constraint is formulated
    based on the stretch itself, rather than its square: Cstretch,i​(x)=Sii​​−1=0(33.5.6)
    By defining one such constraint for each principal axis, one can assign independent
    stiffness parameters, which is the key to modeling anisotropic stretch resistance.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: S矩阵的对角元素Sii代表沿材料参考轴的拉伸平方。在未变形状态下，Sii=1。为确保约束投影是线性的并且单步收敛，拉伸约束是基于拉伸本身而不是其平方来制定的：Cstretch,i(x)=Sii−1=0（33.5.6）。通过为每个主轴定义一个这样的约束，可以分配独立的刚度参数，这是模拟各向异性拉伸阻力的关键。
- en: '[Shear Constraints](#shear-constraints)'
  id: totrans-21
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[剪切约束](#shear-constraints)'
- en: 'The off-diagonal entries of S, Sij​=fi​⋅fj​ (where fk​ are the column vectors
    of F), measure the shear between material axes. A naive constraint Sij​=0 problematically
    couples shearing and stretching. To isolate the shearing deformation, the constraint
    must be normalized, thus depending only on the angle between the deformed axes:
    Cshear,ij​(x)=∣fi​∣∣fj​∣fi​⋅fj​​=0(33.5.7) This formulation ensures that the shear
    constraints enforce orthogonality between the material axes without interfering
    with the stretch constraints that control their length. This decoupling is critical
    for intuitive and independent tuning of material behavior.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: S矩阵的非对角元素Sij=fk⋅fj（其中fk是F的列向量），衡量材料轴之间的剪切。一个简单的Sij=0约束问题性地耦合了剪切和拉伸。为了隔离剪切变形，约束必须归一化，因此只依赖于变形轴之间的角度：Cshear,ij(x)=|fi||fj|fi⋅fj=0（33.5.7）。这种公式确保剪切约束在不妨碍控制其长度的拉伸约束的情况下，强制材料轴之间的正交性。这种解耦对于直观且独立地调整材料行为至关重要。
