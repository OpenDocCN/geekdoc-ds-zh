- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: 原文：[https://socviz.co/index.html](https://socviz.co/index.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://socviz.co/index.html](https://socviz.co/index.html)
- en: You should look at your data. Graphs and charts let you explore and learn about
    the structure of the information you collect. Good data visualizations also make
    it easier to communicate your ideas and findings to other people. Beyond that,
    producing effective plots from your own data is the best way to develop a good
    eye for reading and understanding graphs—good and bad—made by others, whether
    presented in research articles, business slide decks, public policy advocacy,
    or media reports. This book teaches you how to do it.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该查看您的数据。图表和图表让您探索和学习您收集到的信息的结构。好的数据可视化也使您更容易将您的想法和发现传达给其他人。除此之外，从您自己的数据中制作有效的图表是培养您阅读和理解他人制作的图表——无论是研究文章、商业演示文稿、公共政策倡导还是媒体报道——的良好视觉的最佳方式。这本书教您如何做到这一点。
- en: My main goal is to introduce you to both the *ideas* and the *methods* of data
    visualization in a sensible, comprehensible, reproducible way. Some classic works
    on visualizing data, such as *The Visual Display of Quantitative Information*
    (Tufte, 1983), present numerous examples of good and bad work together with some
    general taste-based rules of thumb for constructing and assessing graphs. In what
    has now become a large and thriving field of research, more recent work provides
    excellent discussions of the cognitive underpinnings of successful and unsuccessful
    graphics, again providing many compelling and illuminating examples (Ware, 2008).
    Other books provide good advice about how to graph data under different circumstances
    (Cairo, 2013; Few, 2009; Munzer, 2014), but choose not to teach the reader about
    the tools used to produce the graphics they show. This may be because the software
    used is some (proprietary, costly) point-and-click application that requires a
    fully visual introduction of its own, such as Tableau, Microsoft Excel, or SPSS.
    Or perhaps the necessary software is freely available, but showing how to use
    it is not what the book is about (Cleveland, 1994). Conversely, there are excellent
    cookbooks that provide code “recipes” for many kinds of plot (Chang, 2013). But
    for that reason they do not take the time to introduce the beginner to the principles
    behind the output they produce. Finally, we also have thorough introductions to
    particular software tools and libraries, including the one we will use in this
    book (Wickham, 2016). These can sometimes be hard for beginners to digest, as
    they may presuppose a background that the reader does not have.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 我的主要目标是以一种合理、易懂、可复现的方式向您介绍数据可视化的**理念**和**方法**。一些关于数据可视化的经典作品，如 *《定量信息的视觉展示》*（Tufte,
    1983），一起展示了大量好与坏的例子，并提供了构建和评估图表的一些基于直觉的一般性规则。在现在已成为一个庞大且繁荣的研究领域，最近的工作提供了关于成功和失败图形的认知基础的优秀讨论，再次提供了许多引人入胜且富有启发性的例子（Ware,
    2008）。其他书籍提供了在不同情况下如何绘制数据的良好建议（Cairo, 2013; Few, 2009; Munzer, 2014），但它们选择不教读者关于他们展示的图形所使用的工具。这可能是因为所使用的软件是一些（专有、昂贵的）点选应用，需要自己的完全视觉介绍，例如Tableau、Microsoft
    Excel或SPSS。或者，必要的软件可能是免费可用的，但展示如何使用它不是这本书的主题（Cleveland, 1994）。相反，有一些优秀的食谱书提供了许多类型图表的代码“食谱”（Chang,
    2013）。但正因为如此，它们没有花时间向初学者介绍他们产生的输出背后的原则。最后，我们还有对特定软件工具和库的详尽介绍，包括我们将在本书中使用的工具（Wickham,
    2016）。这些对于初学者来说有时可能难以消化，因为它们可能预设了读者没有的背景知识。
- en: Each of the books I have just cited is well worth your time. When teaching people
    how to make graphics with data, however, I have repeatedly found the need for
    an introduction that motivates and explains *why* you are doing something but
    that does not skip the necessary details of *how* to produce the images you see
    on the page. And so this book has two main aims. First, I want you get to the
    point where you can reproduce almost every figure in the text for yourself. Second,
    I want you to understand why the code is written the way it is, such that when
    you look at data of your own you can feel confident about your ability to get
    from a rough picture in your head to a high-quality graphic on your screen or
    page.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 我刚刚引用的每一本书都值得你花时间阅读。然而，在教人们如何用数据制作图形时，我反复发现需要一本既能激励并解释你为什么要做某事，又不会跳过生产你看到页面上图像的必要细节的入门书。因此，这本书有两个主要目标。首先，我希望你能达到这样的水平，即可以自己复制文本中的几乎每一个图。其次，我希望你能理解代码为什么这样编写，这样当你查看自己的数据时，你可以对自己的能力充满信心，从你脑海中的粗略图像到屏幕或页面上的高质量图形。
- en: What you will learn
  id: totrans-5
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 你将学到什么
- en: This book is a hands-on introduction to the principles and practice of looking
    at and presenting data using R and ggplot. R is a powerful, widely used, and freely
    available programming language for data analysis. You may be interested in exploring
    ggplot after having used R before, or be entirely new to both R and ggplot and
    just want to graph your data. I do not assume you have any prior knowledge of
    R.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书是使用 R 和 ggplot 来观察和展示数据原理与实践的实战入门。R 是一种强大、广泛使用且免费的数据分析编程语言。你可能在熟悉 R 之后对 ggplot
    感兴趣，或者对 R 和 ggplot 都完全陌生，只想绘制你的数据。我并不假设你之前有任何关于 R 的知识。
- en: After installing the software we need, we begin with an overview of some basic
    principles of visualization. We focus not just on the aesthetic aspects of good
    plots, but on how their effectiveness is rooted in the way we perceive properties
    like length, absolute and relative size, orientation, shape, and color. We then
    learn how to produce and refine plots using ggplot2, a powerful, versatile, and
    widely-used visualization library for R (Wickham, 2016). The ggplot2 library implements
    a “grammar of graphics” (Wilkinson, 2005). This approach gives us a coherent way
    to produce visualizations by expressing relationships between the attributes of
    data and their graphical representation.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装我们需要的软件后，我们首先概述了一些可视化基本原理。我们不仅关注优秀图表的美学方面，还关注其有效性根植于我们对长度、绝对和相对大小、方向、形状和颜色的感知方式。然后我们学习如何使用
    ggplot2 生成和优化图表，ggplot2 是 R 的一个强大、多功能且广泛使用的可视化库（Wickham，2016）。ggplot2 库实现了“图形语法”（Wilkinson，2005）。这种方法通过表达数据属性与其图形表示之间的关系，为我们提供了一种连贯的方式来生成可视化。
- en: Through a series of worked examples, you will learn how to build plots piece
    by piece, beginning with scatterplots and summaries of single variables, then
    moving on to more complex graphics. Topics covered include plotting continuous
    and categorical variables, layering information on graphics; faceting grouped
    data to produce effective “small multiple” plots; transforming data to easily
    produce visual summaries on the graph such as trend lines, linear fits, error
    ranges, and boxplots; creating maps, and also some alternatives to maps worth
    considering when presenting country- or state-level data. We will also cover cases
    where we are not working directly with a dataset, but rather with estimates from
    a statistical model. From there, we will explore the process of refining plots
    to accomplish common tasks such as highlighting key features of the data, labeling
    particular items of interest, annotating plots, and changing their overall appearance.
    Finally we will examine some strategies for presenting graphical results in different
    formats, and to different sorts of audiences.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 通过一系列的实例，你将学习如何逐步构建图表，从散点图和单变量摘要开始，然后过渡到更复杂的图形。涵盖的主题包括绘制连续和分类变量、在图形上叠加信息；对分组数据进行分面，以产生有效的“小多图”图表；将数据转换为易于在图上生成视觉摘要，如趋势线、线性拟合、误差范围和箱线图；创建地图，以及当展示国家或州级数据时值得考虑的一些地图替代方案。我们还将涵盖那些我们不是直接与数据集工作，而是与统计模型的估计值工作的案例。从那里，我们将探讨优化图表的过程，以完成常见的任务，如突出数据的关键特征、标记感兴趣的特定项目、注释图表以及改变它们的整体外观。最后，我们将探讨在不同格式和不同类型的观众面前展示图形结果的一些策略。
- en: 'If you follow the text and examples in this book, then by the end you will:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你遵循本书中的文本和示例，那么到结束时你将：
- en: Understand the basic principles behind effective data visualization.
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解有效数据可视化的基本原理。
- en: Have a practical sense for why some graphs and figures work well, while others
    may fail to inform or actively mislead.
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对为什么有些图表和图形效果良好，而其他可能无法传达信息或积极误导的原因有一个实际的感觉。
- en: Know how to create a wide range of plots in R using ggplot2.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解如何在R中使用ggplot2创建各种图表。
- en: Know how to refine plots for effective presentation.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解如何精炼图表以进行有效的展示。
- en: Learning how to visualize data effectively is more than just knowing how to
    write code that produces figures from data. This book will teach you how to do
    that. But it will also teach you how to think about the information you want to
    show, and how to consider the audience you are showing it to—including the most
    common case, when the audience is yourself.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 学习如何有效地可视化数据不仅仅是知道如何编写代码从数据中生成图表。这本书将教会你如何做到这一点。但它也会教你如何思考你想要展示的信息，以及如何考虑你展示给谁的对象——包括最常见的情形，即观众是你自己。
- en: 'This book is not a comprehensive guide to R, or even a comprehensive survey
    of everything ggplot can do. Nor is it a cookbook containing just examples of
    specific things people commonly want to do with ggplot. (Both these sorts of books
    already exist: see the references in the Appendix.) Neither is it a rigid set
    of rules, or a sequence of beautifully finished examples that you can admire but
    not reproduce. My goal is to get you quickly up and running in R, making plots
    in a well-informed way, with a solid grasp of the core sequence of steps—taking
    your data, specifying the relationship between variables and visible elements,
    and building up images layer by layer—that is at the heart of what ggplot does.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 本书不是R的全面指南，甚至不是ggplot能做什么的全面概述。它也不是一本只包含人们常用ggplot做特定事情的示例的烹饪书。（这两种类型的书已经存在：参见附录中的参考文献。）它也不是一套僵化的规则，或一系列你可以欣赏但不能复制的精美完成的示例。我的目标是让你快速掌握R，以信息丰富的方式进行绘图，对ggplot的核心步骤有一个牢固的掌握——从你的数据开始，指定变量和可见元素之间的关系，并一层层地构建图像——这是ggplot的核心所在。
- en: Learning ggplot does mean getting used to how R works, and also understanding
    how ggplot connects to other tools in the R language. As you work your way through
    the book, you will gradually learn more about some very useful idioms, functions,
    and techniques for manipulating data in R. In particular you will learn about
    some of the tools provided by the `tidyverse` library that ggplot belongs to.
    Similarly, although this is not a cookbook, once you get past Chapter [1](lookatdata.html#lookatdata)
    you will be able to see and understand the code used to produce almost every figure
    in the book. In most cases you will also see these figures built up piece by piece,
    a step at a time. If you use the book as it is designed, by the end you will have
    the makings of a version of the book itself, containing code you have written
    out and annotated yourself. And though we do not go into great depth on the topic
    of rules or principles of visualization, the discussion in Chapter [1](lookatdata.html#lookatdata)
    and its application throughout the book gives you more to think about than just
    a list of graph types. By the end of the book you should be able to look at a
    figure and be able to see it in terms of ggplot’s grammar, understanding how the
    various layers, shapes, and data are pieced together to make a finished plot.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 学习ggplot意味着习惯R的工作方式，并理解ggplot如何与R语言中的其他工具连接。随着你通过本书的学习，你将逐渐了解一些在R中操作数据非常有用的惯用语句、函数和技术。特别是，你将了解ggplot所属的`tidyverse`库提供的一些工具。同样，尽管这不是一本烹饪书，但一旦你越过第一章[1](lookatdata.html#lookatdata)，你将能够看到并理解用于生成书中几乎每个图表的代码。在大多数情况下，你也会看到这些图表是一步一步、一点一点构建起来的。如果你按照书的设计使用这本书，到结束时，你将拥有一个包含你自己编写和注释的代码的书的雏形。尽管我们不会深入探讨可视化规则或原则的话题，但第一章[1](lookatdata.html#lookatdata)中的讨论以及全书的应用为你提供了比仅仅列出图表类型更多的思考。到书的结尾，你应该能够通过ggplot的语法来看待图表，理解各种层、形状和数据是如何拼凑在一起形成一个完成的图表。
- en: The right frame of mind
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 正确的心态
- en: It can be a little disorienting to learn a programming language like R, mostly
    because at the beginning there seem to be so many pieces to fit together in order
    for things to work properly. It can seem like you have to learn everything before
    you can do anything. The language has some possibly unfamiliar concepts that define
    how it works, like “object”, or “function”, or “class”. The syntactic rules for
    writing code are annoyingly picky. Error messages seem obscure; help pages are
    terse; other people seem to have had *not quite* the same issue as you. Beyond
    that, you sense that doing one thing often involves learning a bit about some
    other part of the language. To make a plot you need a table of data, but maybe
    you need to filter out some rows, recalculate some columns, or just get the computer
    to see it is there in the first place. And there is also a wider environment of
    supporting applications and tools that are good to know about, but involve new
    concepts of their own—editors that highlight what you write; applications that
    help you organize your code and its output; ways of writing your code that let
    you keep track of what you have done. It can all seem a bit confusing.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 学习像R这样的编程语言可能会有些令人困惑，主要是因为一开始似乎有很多部分需要组合在一起才能正常工作。它可能看起来你必须学习所有内容才能做任何事情。这种语言有一些可能不熟悉的概念，定义了它是如何工作的，比如“对象”、“函数”或“类”。编写代码的语法规则很挑剔。错误信息似乎很神秘；帮助页面简短；其他人似乎遇到了与你不完全相同的问题。除此之外，你还会感觉到做一件事通常需要了解语言的其他一些部分。要绘制一个图表，你需要一个数据表，但可能需要过滤掉一些行，重新计算一些列，或者只是让计算机看到它最初就在那里。还有更广泛的支持应用程序和工具的环境，了解这些是很好的，但它们涉及自己的一些新概念——突出显示你写的编辑器；帮助你组织代码及其输出的应用程序；让你跟踪所做工作的编写代码的方式。这一切都可能显得有些混乱。
- en: Don’t panic. You have to start somewhere. Starting with graphics is more rewarding
    than some of the other places you might begin, because you will be able to see
    the results of your efforts very quickly. As you build your confidence and ability
    in this area, you will gradually see the other tools as things that help you sort
    out some issue, or solve a problem that’s stopping you from making the picture
    you want. That makes them easier to learn. As you acquire them piecemeal—perhaps
    initially using them without completely understanding what is happening—you will
    begin to see how they fit together, and be more confident of your own ability
    to do what you need to do.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 不要慌张。你必须从某个地方开始。从图形开始比从其他可能开始的地方更有回报，因为你将能够很快看到你努力的成果。随着你在这一领域的信心和能力逐渐增强，你将逐渐看到其他工具作为帮助你解决某些问题或解决阻止你制作想要的图片的问题的工具。这使得它们更容易学习。随着你逐步获得它们——也许最初在不完全理解正在发生什么的情况下使用它们——你将开始看到它们是如何结合在一起的，并且对自己的能力更有信心去做你需要做的事情。
- en: Even better, in the past decade or so the world of data analysis and programming
    generally has opened up in a way that has made help much easier to come by. Free
    tools for coding have been around for a long time, but in recent years what you
    might call the “ecology of assistance” has gotten better. There are more resources
    available for learning the various pieces, and more of them are oriented to the
    way writing code actually happens most of the time—which is to say, iteratively,
    in an error-prone fashion, and taking account of problems other people have run
    into and solved before.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 更好的是，在过去十年左右的时间里，数据分析与编程的世界在某种程度上已经开放，这使得帮助变得更加容易获得。编码的免费工具已经存在很长时间了，但近年来，你可以称之为“辅助生态”已经变得更好。有更多资源可供学习各个部分，而且其中更多是面向实际编写代码的方式——也就是说，迭代地、容易出错地，并考虑到其他人遇到并解决的问题。
- en: How to use this book
  id: totrans-21
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何使用这本书
- en: This book can be used in any one of several ways. At a minimum, you can sit
    down and read it for a general overview of good practices in data visualization,
    together with many worked examples of graphics from their beginnings to a properly
    finished state. Even if you do not sit down and work through the code, you will
    get a good sense of how to think about visualization and a better understanding
    of the process through which good graphics are produced.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书可以用多种方式使用。至少，你可以坐下来阅读它，以获得数据可视化良好实践的概述，以及许多从图形的初始状态到完成状态的示例。即使你不坐下来逐行编写代码，你也会对如何思考可视化有一个很好的感觉，并对产生良好图形的过程有一个更深入的理解。
- en: More usefully, if you set things up as described in Chapter 2, and then work
    through the examplesOr if you bring your own data to explore instead of or alongside
    the examples, as described in Chapter 2., then you will end up with a data visualization
    book of your own. If you approach the book this way, then by the end you will
    be comfortable using ggplot in particular and also be ready to learn more about
    the R language in general.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 更有用的是，如果你按照第 2 章中描述的方式设置好一切，然后通过示例进行操作，或者如果你像第 2 章中描述的那样，带来自己的数据进行探索，那么你最终将拥有自己的数据可视化书籍。如果你以这种方式阅读本书，那么到结束时，你将能够熟练使用
    ggplot，并且也准备好学习更多关于 R 语言的通用知识。
- en: This book can also be used to teach with, either as the main focus of a course
    on data visualization or as a supplement to undergraduate or graduate courses
    in statistics or data analysis. My aim has been to make the “hidden tasks” of
    coding and polishing graphs more accessible and explicit. I want to make sure
    you are not left with the “How to Draw an Owl in Three Steps” problem common to
    many tutorials. You know the one. The first two steps are shown clearly enough.
    Sketch a few bird-shaped ovals. Make a line for a branch. But the final step,
    an owl such as John James Audubon might have drawn, is presented as a simple extension
    for readers to figure out for themselves.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书也可以用作教学材料，无论是作为数据可视化课程的主要焦点，还是作为统计学或数据分析本科或研究生课程的补充。我的目标是将编码和润色图形的“隐藏任务”变得更加易于理解和明确。我想确保你不会遇到许多教程中常见的“如何三步画一只猫头鹰”的问题。你知道的。前两步展示得足够清楚。画几个鸟形的椭圆形。画一条树枝。但最后一步，一个像约翰·詹姆斯·奥杜邦可能画出的猫头鹰，被简单地呈现为读者自己探索的简单扩展。
- en: If you have never used R or ggplot, you should start at the beginning of the
    book and work your way through to the end. If you know about R already but only
    want to learn the core of ggplot, then after installing the software descibed
    below, focus on Chapters 3 through 5. Chapter 6 (on models) necessarily incorporates
    some material on statistical modeling that the book cannot develop fully. This
    is not a statistics text. So, for example, I show generally how to fit and work
    with various kinds of model in Chapter 6, but I do not go through the important
    details of fitting, selecting, and fully understanding different approaches. I
    provide references in the text to other books that have this material as their
    main focus.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你从未使用过 R 或 ggplot，你应该从本书的开头开始阅读，并一直读到结尾。如果你已经了解 R，但只想学习 ggplot 的核心内容，那么在安装下面描述的软件后，重点关注第
    3 章至第 5 章。第 6 章（关于模型）必然包含一些关于统计模型的材料，本书无法全面展开。这不是一本统计学教材。因此，例如，我在第 6 章中展示了如何一般性地拟合和使用各种类型的模型，但并没有详细说明拟合、选择和全面理解不同方法的重要细节。我在文本中提供了其他书籍的参考文献，这些书籍将此类材料作为其主要焦点。
- en: Each chapter ends with a section suggesting where to go next (apart from continuing
    to read the book). Sometimes I suggest other books or websites to explore. I also
    ask questions or pose some challenges that extend the material covered in the
    chapter, encouraging you to use the concepts and skills you have learned.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 每章结束时都有一个部分，建议下一步去哪里（除了继续阅读本书）。有时我会建议其他书籍或网站去探索。我还提出问题或提出一些挑战，以扩展本章涵盖的内容，鼓励你使用你学到的概念和技能。
- en: Conventions
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 习惯用法
- en: 'In this book, we alternate between regular text (like this), samples of code
    that you can type and run yourself, and the output of that code. In the main text,
    references to objects or other things that exist in the R language or in your
    R project—like tables of data, variables, functions, and so on—will also appear
    in `a monospaced or "typewriter" typeface`. Code you can type directly into R
    at the console will be in gray boxes, and also monospaced. Like this:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们交替使用常规文本（如本例所示）、你可以自己输入和运行的代码样本，以及该代码的输出。在正文文本中，对存在于 R 语言或你的 R 项目中的对象或其他事物的引用——如数据表、变量、函数等——也将以`等宽或“打字机”字体`出现。可以直接在
    R 控制台中输入的代码将放在灰色框中，并且也是等宽的。就像这样：
- en: '[PRE0]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'If you type that line of code into R’s console it will create a thing called
    `my_numbers`.Additional notes and information will sometimes appear in the margin,
    like this. Doing this doesn’t produce any output, however. When we write code
    that also produces output at the console, we will first see the code (in a gray
    box) and then the output in a monospaced font against a white background. Here
    we add two numbers and see the result:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你将这一行代码输入到R的控制台中，它将创建一个名为`my_numbers`的东西。有时，边缘会出现一些额外的注释和信息，就像这样。这样做不会产生任何输出。当我们编写的代码在控制台中产生输出时，我们首先会看到代码（在灰色框中），然后是输出，以等宽字体显示在白色背景上。这里我们添加两个数字，并查看结果：
- en: '[PRE1]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[PRE2]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Two further notes about how to read this. First, by default in this book, anything
    that comes back to us at the console as the result of typing a command will be
    shown prefaced by two hash characters (`##`) at the beginning of each line of
    output. This is to help distinguish it from commands we type into the console.
    You will not see the hash characters at the console when you use R.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 关于如何阅读此内容的两个额外说明。首先，在本书中，默认情况下，作为在控制台中输入命令的结果返回到我们的任何内容，将在输出每一行的开头以两个井号字符（`##`）作为前缀。这是为了帮助区分我们输入控制台中的命令。当你使用R时，你不会在控制台中看到井号字符。
- en: 'Second, both in the book *and* at the console, if the output of what you did
    results in a series of elements (like numbers, or observations from a variable,
    and so on) you will often see output that includes some number in square brackets
    at the beginning of the line. It looks like this: `[1]`. This is not part of the
    output itself, but just a counter or index keeping track of how many items have
    been printed out so far. In the case of adding `4 + 1` we got just one, or `[1]`,
    thing back—the number five. If there are more elements returned as the result
    of some instruction or command, the counter will keep track of that on each line.
    In this next bit of code we will tell R to show us the lower-case letters of the
    alphabet:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 其次，无论是在书中还是在控制台中，如果你所做操作的结果产生了一系列元素（如数字、变量的观测值等），你通常会看到输出行开头有一些数字放在方括号中。它看起来像这样：`[1]`。这不是输出本身的一部分，而只是一个计数器或索引，用于跟踪到目前为止已打印了多少项。在添加`4
    + 1`的情况下，我们只得到了一个，即`[1]`，东西——数字五。如果有更多元素作为某些指令或命令的结果返回，计数器将在每一行上跟踪这一点。在接下来的这段代码中，我们将告诉R显示小写字母表：
- en: '[PRE3]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[PRE4]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: You can see the counter incrementing on each line as it keeps count of how many
    letters have been printed.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以看到计数器在每一行上递增，因为它在跟踪打印了多少个字母。
- en: Before you begin
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在你开始之前
- en: 'The book is designed for you to follow along in an active way, writing out
    the examples and experimenting with the code as you go. You will be able to reproduce
    almost all of the plots in the text. You will need to install some software first.
    Here is what to do:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 本书旨在让你以积极的方式跟随，在阅读过程中写下示例并尝试代码。你将能够复制文本中的几乎所有图表。首先，你需要安装一些软件。以下是你要做的：
- en: Get the most recent version of R. R is free and available for Windows, Mac,
    and Linux operating systems. Download`cloud.r-project.org` the version of R compatible
    with your operating system. If you are running Windows or MacOS, you should choose
    one of the *precompiled binary* distributions (i.e., ready-to-run applications)
    linked at the top of the R Project’s webpage.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取R的最新版本。R是免费的，并且适用于Windows、Mac和Linux操作系统。下载与你的操作系统兼容的R版本`cloud.r-project.org`。如果你正在运行Windows或MacOS，你应该选择R项目网页顶部链接的其中一个*预编译的二进制*发行版（即即点即用的应用程序）。
- en: Once`rstudio.com` R is installed, download and install R Studio. R Studio is
    an “Integrated Development Environment”, or IDE. This means it is a front-end
    for R that makes it much easier to work with. R Studio is also free, and available
    for Windows, Mac, and Linux platforms.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦安装了`rstudio.com`的R，请下载并安装R Studio。R Studio是一个“集成开发环境”，或IDE。这意味着它是R的前端，使得与R一起工作变得更加容易。R
    Studio也是免费的，并且适用于Windows、Mac和Linux平台。
- en: Install`tidyverse.org` the tidyverse library and several other add-on packages
    for R. These libraries provide useful functionality that we will take advantage
    of throughout the book. You can learn more about the tidyverse’s family of packages
    at its website.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装`tidyverse.org`的tidyverse库和几个其他R的附加包。这些库提供了有用的功能，我们将在整本书中利用这些功能。你可以在tidyverse的网站了解更多关于tidyverse包族的信息。
- en: To install the tidyverse, make sure you have an Internet connection and then
    launch R Studio. TypeI strongly recommend typing all the code examples right from
    the beginning, instead of copying and pasting. the following lines of code at
    R’s command prompt, located in the window named “Console”, and hit return. In
    the code below, the `<-` arrow is made up of two keystrokes, first `<` and then
    the short dash or minus symbol, `-`.
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要安装 tidyverse，请确保您有互联网连接，然后启动 R Studio。我强烈建议您从一开始就亲自输入所有代码示例，而不是复制粘贴。在名为“Console”的窗口中的
    R 命令提示符下输入以下代码行，然后按回车键。在下面的代码中，`<-` 箭头由两个按键组成，首先是 `<`，然后是短横线或减号 `-`。
- en: '[PRE5]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: R Studio should then download and install these packages for you. It may take
    a little while to download everything.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 然后 R Studio 应该会为您下载并安装这些包。下载所有内容可能需要一点时间。
- en: With these packages available, you can then install one last library of material
    that’s useful specifically for this book. It`github.com` is hosted on GitHub,GitHub
    is a web-based service where users can host, develop, and share code. It uses
    git, a version control system that allows projects, or repositories, to preserve
    their history and incorporate changes from contributors in an organized way. rather
    than R’s central package repository, so we use a different function to fetch it.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 在有了这些包之后，您还可以安装一个特别适用于这本书的最后一个库。`github.com` 是托管在 GitHub 上的，GitHub 是一个基于网络的平台，用户可以在此托管、开发和共享代码。它使用
    git，这是一个版本控制系统，允许项目或存储库以有组织的方式保留其历史并整合贡献者的更改。而不是使用 R 的中央包存储库，所以我们使用不同的函数来获取它。
- en: '[PRE6]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Once you’ve done that, we can get started.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这些后，我们就可以开始了。
- en: What you will learn
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 您将学到的内容
- en: This book is a hands-on introduction to the principles and practice of looking
    at and presenting data using R and ggplot. R is a powerful, widely used, and freely
    available programming language for data analysis. You may be interested in exploring
    ggplot after having used R before, or be entirely new to both R and ggplot and
    just want to graph your data. I do not assume you have any prior knowledge of
    R.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书是使用 R 和 ggplot 查看和展示数据原理与实践的实战入门。R 是一种强大、广泛使用且免费的数据分析编程语言。您可能在熟悉 R 之后对探索
    ggplot 感兴趣，或者对 R 和 ggplot 都完全陌生，只想绘制您的数据。我假设您对 R 没有任何先前的知识。
- en: After installing the software we need, we begin with an overview of some basic
    principles of visualization. We focus not just on the aesthetic aspects of good
    plots, but on how their effectiveness is rooted in the way we perceive properties
    like length, absolute and relative size, orientation, shape, and color. We then
    learn how to produce and refine plots using ggplot2, a powerful, versatile, and
    widely-used visualization library for R (Wickham, 2016). The ggplot2 library implements
    a “grammar of graphics” (Wilkinson, 2005). This approach gives us a coherent way
    to produce visualizations by expressing relationships between the attributes of
    data and their graphical representation.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装我们需要的软件之后，我们开始概述一些可视化基本原理。我们不仅关注优秀图表的美学方面，还关注其有效性根植于我们对长度、绝对和相对大小、方向、形状和颜色的感知方式。然后我们学习如何使用
    ggplot2 生成和优化图表，ggplot2 是 R 的一个强大、多功能且广泛使用的可视化库（Wickham, 2016）。ggplot2 库实现了“图形语法”（Wilkinson,
    2005）。这种方法通过表达数据属性与其图形表示之间的关系，为我们提供了一种连贯的生成可视化方法。
- en: Through a series of worked examples, you will learn how to build plots piece
    by piece, beginning with scatterplots and summaries of single variables, then
    moving on to more complex graphics. Topics covered include plotting continuous
    and categorical variables, layering information on graphics; faceting grouped
    data to produce effective “small multiple” plots; transforming data to easily
    produce visual summaries on the graph such as trend lines, linear fits, error
    ranges, and boxplots; creating maps, and also some alternatives to maps worth
    considering when presenting country- or state-level data. We will also cover cases
    where we are not working directly with a dataset, but rather with estimates from
    a statistical model. From there, we will explore the process of refining plots
    to accomplish common tasks such as highlighting key features of the data, labeling
    particular items of interest, annotating plots, and changing their overall appearance.
    Finally we will examine some strategies for presenting graphical results in different
    formats, and to different sorts of audiences.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 通过一系列的实例，你将学习如何逐步构建图表，从散点图和单变量总结开始，然后过渡到更复杂的图形。涵盖的主题包括绘制连续和分类变量，在图形上叠加信息；对分组数据进行分面，以产生有效的“小多图”图表；对数据进行转换，以便在图形上轻松生成趋势线、线性拟合、误差范围和箱线图等视觉摘要；创建地图，以及在某些情况下，当展示国家或州级数据时值得考虑的地图替代方案。我们还将涵盖我们不是直接与数据集工作，而是与统计模型的估计工作的情况。从那里，我们将探讨细化图表以完成常见任务的过程，例如突出数据的关键特征、标记感兴趣的特定项目、注释图表以及改变它们的整体外观。最后，我们将探讨在不同格式和不同类型的观众中展示图形结果的一些策略。
- en: 'If you follow the text and examples in this book, then by the end you will:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你遵循这本书中的文本和示例，那么到结束时你将：
- en: Understand the basic principles behind effective data visualization.
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解有效数据可视化的基本原理。
- en: Have a practical sense for why some graphs and figures work well, while others
    may fail to inform or actively mislead.
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对为什么某些图表和图形效果良好，而其他可能无法传达信息或主动误导有实际的认识。
- en: Know how to create a wide range of plots in R using ggplot2.
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解如何使用ggplot2在R中创建各种图表。
- en: Know how to refine plots for effective presentation.
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解如何细化图表以进行有效展示。
- en: Learning how to visualize data effectively is more than just knowing how to
    write code that produces figures from data. This book will teach you how to do
    that. But it will also teach you how to think about the information you want to
    show, and how to consider the audience you are showing it to—including the most
    common case, when the audience is yourself.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 学习如何有效地可视化数据不仅仅是知道如何编写从数据生成图形的代码。这本书将教你如何做到这一点。但它还将教你如何思考你想要展示的信息，以及如何考虑你展示给谁的对象——包括最常见的情况，即观众是你自己。
- en: 'This book is not a comprehensive guide to R, or even a comprehensive survey
    of everything ggplot can do. Nor is it a cookbook containing just examples of
    specific things people commonly want to do with ggplot. (Both these sorts of books
    already exist: see the references in the Appendix.) Neither is it a rigid set
    of rules, or a sequence of beautifully finished examples that you can admire but
    not reproduce. My goal is to get you quickly up and running in R, making plots
    in a well-informed way, with a solid grasp of the core sequence of steps—taking
    your data, specifying the relationship between variables and visible elements,
    and building up images layer by layer—that is at the heart of what ggplot does.'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书不是R的全面指南，甚至不是ggplot能做什么的全面调查。它也不是一本只包含人们常用ggplot做特定事情的示例的食谱书。（这两种类型的书已经存在：参见附录中的参考文献。）它也不是一套僵化的规则，或一系列美丽完成的示例，你可以欣赏但不能复制。我的目标是让你快速在R中运行起来，以知情的方式制作图表，牢固掌握ggplot的核心步骤序列——获取数据、指定变量和可见元素之间的关系，并逐层构建图像——这是ggplot的核心。
- en: Learning ggplot does mean getting used to how R works, and also understanding
    how ggplot connects to other tools in the R language. As you work your way through
    the book, you will gradually learn more about some very useful idioms, functions,
    and techniques for manipulating data in R. In particular you will learn about
    some of the tools provided by the `tidyverse` library that ggplot belongs to.
    Similarly, although this is not a cookbook, once you get past Chapter [1](lookatdata.html#lookatdata)
    you will be able to see and understand the code used to produce almost every figure
    in the book. In most cases you will also see these figures built up piece by piece,
    a step at a time. If you use the book as it is designed, by the end you will have
    the makings of a version of the book itself, containing code you have written
    out and annotated yourself. And though we do not go into great depth on the topic
    of rules or principles of visualization, the discussion in Chapter [1](lookatdata.html#lookatdata)
    and its application throughout the book gives you more to think about than just
    a list of graph types. By the end of the book you should be able to look at a
    figure and be able to see it in terms of ggplot’s grammar, understanding how the
    various layers, shapes, and data are pieced together to make a finished plot.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 学习ggplot确实意味着习惯R的工作方式，并理解ggplot如何与其他R语言中的工具连接。随着你通过本书的学习，你将逐渐了解一些非常有用的习惯用语、函数和技巧，这些技巧可以帮助你在R中操作数据。特别是，你将了解ggplot所属的`tidyverse`库提供的一些工具。同样，尽管这不是一本烹饪书，但一旦你越过第[1](lookatdata.html#lookatdata)章，你将能够看到并理解用于生成书中几乎每个图表的代码。在大多数情况下，你也会看到这些图表一步一步地构建起来。如果你按照设计使用这本书，到结束时，你将拥有一个包含你自己编写和注释的代码的书的版本。尽管我们没有深入探讨可视化规则或原则的话题，但第[1](lookatdata.html#lookatdata)章的讨论及其在全书中的应用，让你思考的不仅仅是图表类型列表。到书的结尾，你应该能够通过ggplot的语法来看待一个图表，理解各种层、形状和数据是如何拼凑在一起形成一个完成的图表。
- en: The right frame of mind
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 正确的心态
- en: It can be a little disorienting to learn a programming language like R, mostly
    because at the beginning there seem to be so many pieces to fit together in order
    for things to work properly. It can seem like you have to learn everything before
    you can do anything. The language has some possibly unfamiliar concepts that define
    how it works, like “object”, or “function”, or “class”. The syntactic rules for
    writing code are annoyingly picky. Error messages seem obscure; help pages are
    terse; other people seem to have had *not quite* the same issue as you. Beyond
    that, you sense that doing one thing often involves learning a bit about some
    other part of the language. To make a plot you need a table of data, but maybe
    you need to filter out some rows, recalculate some columns, or just get the computer
    to see it is there in the first place. And there is also a wider environment of
    supporting applications and tools that are good to know about, but involve new
    concepts of their own—editors that highlight what you write; applications that
    help you organize your code and its output; ways of writing your code that let
    you keep track of what you have done. It can all seem a bit confusing.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 学习像R这样的编程语言可能会有些令人困惑，主要是因为一开始似乎有很多部分需要组合在一起才能正常工作。它可能看起来你必须先学习所有内容才能做任何事情。这种语言有一些可能不熟悉的概念，这些概念定义了它是如何工作的，比如“对象”、“函数”或“类”。编写代码的语法规则很挑剔。错误信息似乎很神秘；帮助页面简短；其他人似乎遇到了与你不完全相同的问题。除此之外，你感觉到做一件事通常需要了解语言的其他部分。要绘制一个图表，你需要一个数据表，但可能需要过滤掉一些行，重新计算一些列，或者只是让计算机看到它最初就在那里。还有更广泛的支持应用程序和工具的环境，了解这些是好的，但它们涉及自己的一些新概念——突出显示你写的编辑器；帮助你组织代码及其输出的应用程序；让你跟踪所做工作的编写代码的方式。这一切都可能显得有些混乱。
- en: Don’t panic. You have to start somewhere. Starting with graphics is more rewarding
    than some of the other places you might begin, because you will be able to see
    the results of your efforts very quickly. As you build your confidence and ability
    in this area, you will gradually see the other tools as things that help you sort
    out some issue, or solve a problem that’s stopping you from making the picture
    you want. That makes them easier to learn. As you acquire them piecemeal—perhaps
    initially using them without completely understanding what is happening—you will
    begin to see how they fit together, and be more confident of your own ability
    to do what you need to do.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 不要慌张。你必须从某个地方开始。从图形开始比从其他可能的地方开始更有回报，因为你可以很快看到你努力的成果。随着你在这一领域的信心和能力逐渐增强，你将逐渐看到其他工具作为帮助你解决问题或解决阻碍你制作理想图片的问题的工具。这使得它们更容易学习。随着你逐步获得它们——也许最初使用它们而不完全理解正在发生什么——你将开始看到它们是如何相互配合的，并且对自己完成所需任务的能力更有信心。
- en: Even better, in the past decade or so the world of data analysis and programming
    generally has opened up in a way that has made help much easier to come by. Free
    tools for coding have been around for a long time, but in recent years what you
    might call the “ecology of assistance” has gotten better. There are more resources
    available for learning the various pieces, and more of them are oriented to the
    way writing code actually happens most of the time—which is to say, iteratively,
    in an error-prone fashion, and taking account of problems other people have run
    into and solved before.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 更好的是，在过去十年左右的时间里，数据分析编程的世界以使帮助变得更加容易获得的方式开放了。用于编码的免费工具已经存在很长时间了，但近年来，你可以称之为“辅助生态”的东西变得更好了。有更多资源可供学习各个部分，而且其中更多的资源是针对编写代码实际发生的方式——也就是说，迭代地、容易出错地，并考虑到其他人遇到并解决的问题。
- en: How to use this book
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何使用这本书
- en: This book can be used in any one of several ways. At a minimum, you can sit
    down and read it for a general overview of good practices in data visualization,
    together with many worked examples of graphics from their beginnings to a properly
    finished state. Even if you do not sit down and work through the code, you will
    get a good sense of how to think about visualization and a better understanding
    of the process through which good graphics are produced.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书可以用多种方式使用。至少，你可以坐下来阅读它，以获得数据可视化良好实践的概述，以及许多图形从开始到完成状态的示例。即使你不坐下来处理代码，你也会对如何思考可视化有一个很好的感觉，并对产生良好图形的过程有一个更好的理解。
- en: More usefully, if you set things up as described in Chapter 2, and then work
    through the examplesOr if you bring your own data to explore instead of or alongside
    the examples, as described in Chapter 2., then you will end up with a data visualization
    book of your own. If you approach the book this way, then by the end you will
    be comfortable using ggplot in particular and also be ready to learn more about
    the R language in general.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 更有用的是，如果你像第2章中描述的那样设置好一切，然后处理示例，或者如果你像第2章中描述的那样带来自己的数据来探索，而不是或与示例一起，那么你最终会得到一本自己的数据可视化书。如果你以这种方式接近这本书，那么到结束时，你将能够舒适地使用ggplot，并且也准备好学习更多关于R语言的一般知识。
- en: This book can also be used to teach with, either as the main focus of a course
    on data visualization or as a supplement to undergraduate or graduate courses
    in statistics or data analysis. My aim has been to make the “hidden tasks” of
    coding and polishing graphs more accessible and explicit. I want to make sure
    you are not left with the “How to Draw an Owl in Three Steps” problem common to
    many tutorials. You know the one. The first two steps are shown clearly enough.
    Sketch a few bird-shaped ovals. Make a line for a branch. But the final step,
    an owl such as John James Audubon might have drawn, is presented as a simple extension
    for readers to figure out for themselves.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书也可以用来教学，无论是作为数据可视化课程的主要焦点，还是作为统计学或数据分析本科或研究生课程的补充。我的目标是使编码和润色图形的“隐藏任务”更加易于理解和明确。我想确保你不会遇到许多教程中常见的“如何三步画一只猫头鹰”的问题。你知道的。前两步已经足够清楚地展示了。画几个鸟形的椭圆形。画一条树枝。但最后一步，一个像约翰·詹姆斯·奥杜邦可能画出的猫头鹰，被简单地呈现为读者自己思考的扩展。
- en: If you have never used R or ggplot, you should start at the beginning of the
    book and work your way through to the end. If you know about R already but only
    want to learn the core of ggplot, then after installing the software descibed
    below, focus on Chapters 3 through 5. Chapter 6 (on models) necessarily incorporates
    some material on statistical modeling that the book cannot develop fully. This
    is not a statistics text. So, for example, I show generally how to fit and work
    with various kinds of model in Chapter 6, but I do not go through the important
    details of fitting, selecting, and fully understanding different approaches. I
    provide references in the text to other books that have this material as their
    main focus.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你从未使用过R或ggplot，你应该从本书的开头开始阅读，一直读到结尾。如果你已经了解R，但只想学习ggplot的核心内容，那么在安装下面描述的软件后，重点关注第3章到第5章。第6章（关于模型）必然包含一些关于统计模型的材料，本书无法全面展开。这不是一本统计学书籍。因此，例如，我在第6章中展示了如何一般性地拟合和操作各种类型的模型，但我没有详细说明拟合、选择和全面理解不同方法的重要细节。我在文本中提供了其他书籍的参考文献，这些书籍将此内容作为其主要焦点。
- en: Each chapter ends with a section suggesting where to go next (apart from continuing
    to read the book). Sometimes I suggest other books or websites to explore. I also
    ask questions or pose some challenges that extend the material covered in the
    chapter, encouraging you to use the concepts and skills you have learned.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 每章结束时都有一个部分建议下一步去哪里（除了继续阅读本书）。有时我会建议其他书籍或网站去探索。我还提出问题或提出一些挑战，以扩展本章涵盖的内容，鼓励你使用你学到的概念和技能。
- en: Conventions
  id: totrans-71
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 习惯用法
- en: 'In this book, we alternate between regular text (like this), samples of code
    that you can type and run yourself, and the output of that code. In the main text,
    references to objects or other things that exist in the R language or in your
    R project—like tables of data, variables, functions, and so on—will also appear
    in `a monospaced or "typewriter" typeface`. Code you can type directly into R
    at the console will be in gray boxes, and also monospaced. Like this:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们交替使用常规文本（如本例所示）、你可以自己输入和运行的代码示例，以及该代码的输出。在正文文本中，对存在于R语言或你的R项目中的对象或其他事物的引用——如数据表、变量、函数等——也将以`等宽或“打字机”字体`出现。可以直接在R控制台中输入的代码将以灰色框显示，并且也是等宽的。如下所示：
- en: '[PRE7]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'If you type that line of code into R’s console it will create a thing called
    `my_numbers`.Additional notes and information will sometimes appear in the margin,
    like this. Doing this doesn’t produce any output, however. When we write code
    that also produces output at the console, we will first see the code (in a gray
    box) and then the output in a monospaced font against a white background. Here
    we add two numbers and see the result:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你将这一行代码输入到R的控制台中，它将创建一个名为`my_numbers`的东西。有时在页边空白处会出现额外的注释和信息，如下所示。这样做不会产生任何输出。当我们编写的代码在控制台产生输出时，我们首先会看到代码（在灰色框中），然后是白色背景下的等宽字体输出。在这里，我们添加两个数字并查看结果：
- en: '[PRE8]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Two further notes about how to read this. First, by default in this book, anything
    that comes back to us at the console as the result of typing a command will be
    shown prefaced by two hash characters (`##`) at the beginning of each line of
    output. This is to help distinguish it from commands we type into the console.
    You will not see the hash characters at the console when you use R.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 关于如何阅读本指南的几点说明。首先，在本指南中，默认情况下，任何在控制台输入命令后返回的结果都会以每行输出开头的两个井号字符（`##`）作为前缀显示。这是为了帮助区分我们输入控制台的命令。当你使用R时，你不会在控制台看到这些井号字符。
- en: 'Second, both in the book *and* at the console, if the output of what you did
    results in a series of elements (like numbers, or observations from a variable,
    and so on) you will often see output that includes some number in square brackets
    at the beginning of the line. It looks like this: `[1]`. This is not part of the
    output itself, but just a counter or index keeping track of how many items have
    been printed out so far. In the case of adding `4 + 1` we got just one, or `[1]`,
    thing back—the number five. If there are more elements returned as the result
    of some instruction or command, the counter will keep track of that on each line.
    In this next bit of code we will tell R to show us the lower-case letters of the
    alphabet:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 其次，无论是在书中还是在控制台，如果你所执行的操作的结果产生了一系列元素（如数字、或变量的观察结果等），你通常会看到输出行首包含一些方括号内的数字。它看起来像这样：`[1]`。这并不是输出本身的一部分，而只是一个计数器或索引，用来跟踪到目前为止已经打印了多少项。在添加
    `4 + 1` 的情况下，我们只得到了一个，即 `[1]`，东西——数字五。如果某些指令或命令的结果返回了更多元素，计数器将跟踪每一行的元素数量。在接下来的代码片段中，我们将告诉
    R 显示字母表的全部小写字母：
- en: '[PRE10]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: You can see the counter incrementing on each line as it keeps count of how many
    letters have been printed.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以看到计数器在每一行上递增，它记录了已经打印了多少个字母。
- en: Before you begin
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在开始之前
- en: 'The book is designed for you to follow along in an active way, writing out
    the examples and experimenting with the code as you go. You will be able to reproduce
    almost all of the plots in the text. You will need to install some software first.
    Here is what to do:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的设计是为了让你以积极的方式跟随，在阅读过程中写下示例并尝试代码。你将能够复制文本中的几乎所有图表。首先，你需要安装一些软件。以下是你要做的：
- en: Get the most recent version of R. R is free and available for Windows, Mac,
    and Linux operating systems. Download`cloud.r-project.org` the version of R compatible
    with your operating system. If you are running Windows or MacOS, you should choose
    one of the *precompiled binary* distributions (i.e., ready-to-run applications)
    linked at the top of the R Project’s webpage.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取 R 的最新版本。R 是免费的，并且适用于 Windows、Mac 和 Linux 操作系统。下载与你的操作系统兼容的 R 版本`cloud.r-project.org`。如果你正在运行
    Windows 或 MacOS，你应该选择 R 项目网页顶部链接的 *预编译二进制* 分发之一（即，可直接运行的应用程序）。
- en: Once`rstudio.com` R is installed, download and install R Studio. R Studio is
    an “Integrated Development Environment”, or IDE. This means it is a front-end
    for R that makes it much easier to work with. R Studio is also free, and available
    for Windows, Mac, and Linux platforms.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦安装了`rstudio.com` R，请下载并安装 R Studio。R Studio 是一个“集成开发环境”，或 IDE。这意味着它是 R 的前端，使得与
    R 的工作变得更加容易。R Studio 也是免费的，并且适用于 Windows、Mac 和 Linux 平台。
- en: Install`tidyverse.org` the tidyverse library and several other add-on packages
    for R. These libraries provide useful functionality that we will take advantage
    of throughout the book. You can learn more about the tidyverse’s family of packages
    at its website.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装`tidyverse.org` tidyverse 库和几个其他 R 的附加包。这些库提供了我们将在整本书中利用的有用功能。你可以在 tidyverse
    的网站上了解更多关于 tidyverse 包系列的信息。
- en: To install the tidyverse, make sure you have an Internet connection and then
    launch R Studio. TypeI strongly recommend typing all the code examples right from
    the beginning, instead of copying and pasting. the following lines of code at
    R’s command prompt, located in the window named “Console”, and hit return. In
    the code below, the `<-` arrow is made up of two keystrokes, first `<` and then
    the short dash or minus symbol, `-`.
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要安装 tidyverse，请确保你有互联网连接，然后启动 R Studio。在名为“控制台”的窗口中的 R 命令提示符下输入以下代码行，并按回车键。在下面的代码中，`<-`
    箭头由两个按键组成，首先是 `<`，然后是短横线或减号，`-`。我强烈建议你从一开始就亲自输入所有的代码示例，而不是复制粘贴。
- en: '[PRE12]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: R Studio should then download and install these packages for you. It may take
    a little while to download everything.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，R Studio 应该会为你下载并安装这些包。下载所有内容可能需要一些时间。
- en: With these packages available, you can then install one last library of material
    that’s useful specifically for this book. It`github.com` is hosted on GitHub,GitHub
    is a web-based service where users can host, develop, and share code. It uses
    git, a version control system that allows projects, or repositories, to preserve
    their history and incorporate changes from contributors in an organized way. rather
    than R’s central package repository, so we use a different function to fetch it.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些包可用的情况下，你可以安装最后一个专门针对这本书有用的材料库。`github.com`托管在GitHub上，GitHub是一个基于网络的平台，用户可以在其中托管、开发和共享代码。它使用git，这是一个版本控制系统，允许项目或仓库以有组织的方式保留其历史并整合贡献者的更改。而不是R的中央包仓库，所以我们使用不同的函数来获取它。
- en: '[PRE13]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Once you’ve done that, we can get started.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你完成了这些，我们就可以开始了。
