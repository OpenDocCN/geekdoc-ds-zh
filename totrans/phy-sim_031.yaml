- en: 'Case Study: Hanging Square*'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://phys-sim-book.github.io/lec5.3-hanging_square.html](https://phys-sim-book.github.io/lec5.3-hanging_square.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
  prefs: []
  type: TYPE_NORMAL
- en: We use a simple case study to end this lecture. Based on the [mass-spring system](lec4-2d_mass_spring.html)
    developed in a previous section, we implement gravitational energy and sticky
    Dirichlet boundary conditions to simulate a hanging square. The excutable Python
    project for this section can be found at [https://github.com/phys-sim-book/solid-sim-tutorial](https://github.com/phys-sim-book/solid-sim-tutorial)
    under the `2_dirichlet` folder. [MUDA](https://github.com/MuGdxy/muda) GPU implementations
    can be found at [https://github.com/phys-sim-book/solid-sim-tutorial-gpu](https://github.com/phys-sim-book/solid-sim-tutorial-gpu)
    under the `simulators/2_dirichlet` folder.
  prefs: []
  type: TYPE_NORMAL
- en: 'Gravitational energy has P(x)=−xTMg,∇P(x)=−Mg,and∇2P(x)=0, which can be trivially
    implemented:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Implementation 5.3.1 (GravityEnergy.py).**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Then we just need to make sure the gravitational energy is added into the Incremental
    Potential (IP):'
  prefs: []
  type: TYPE_NORMAL
- en: '**Implementation 5.3.2 (Adding gravity to IP, time_integrator.py).**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'For the sticky Dirichlet boundary condition, we modify the system accordingly
    when computing search direction:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Implementation 5.3.3 (DOF elimination, time_integrator.py).**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Here `is_DBC` is an array marking whether a node is Dirichlet or not as we
    store the Dirichlet node indices in `DBC`:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Implementation 5.3.4 (DBC definition, simulator.py).**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Finally, after making sure `is_DBC` is passed to the time integrator, we can
    simulate an energetic hanging square (no initial stretching) with a smaller spring
    stiffness `k=1e3` at framerate time step size `h=0.02` ([Figure 5.3.1](#fig:lec5:hanging_square_sim)).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/317ee47351ea8c28fbddd347fac640c0.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Figure 5.3.1.** From left to right: initial, intermediate, and final static
    frame of the hanging square simulation.'
  prefs: []
  type: TYPE_NORMAL
