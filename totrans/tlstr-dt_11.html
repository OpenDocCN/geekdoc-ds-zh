<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>5  Graphs, tables, and maps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>5  Graphs, tables, and maps</h1>
<blockquote>原文：<a href="https://tellingstorieswithdata.com/05-graphs_tables_maps.html">https://tellingstorieswithdata.com/05-graphs_tables_maps.html</a></blockquote>

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./04-writing_research.html">Communication</a></li><li class="breadcrumb-item"><a href="./05-graphs_tables_maps.html"><span class="chapter-number">5</span>  <span class="chapter-title">Graphs, tables, and maps</span></a></li></ol></nav>
<div class="quarto-title">

</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"/>
</div>
<div class="callout-body-container">
<p>Chapman and Hall/CRC published this book in July 2023. You can purchase that <a href="https://www.routledge.com/Telling-Stories-with-Data-With-Applications-in-R/Alexander/p/book/9781032134772">here</a>. This online version has some updates to what was printed.</p>
</div>
</div>
</div>
<p><strong>Prerequisites</strong></p>
<ul>
<li>Read <em>R for Data Science</em>, <span class="citation" data-cites="r4ds">(<a href="99-references.html#ref-r4ds" role="doc-biblioref">Wickham, Çetinkaya-Rundel, and Grolemund [2016] 2023</a>)</span>
<ul>
<li>Focus on Chapter 1 “Data visualization”, which provides an overview of <code>ggplot2</code>.</li>
</ul></li>
<li>Read <em>Data Visualization: A Practical Introduction</em>, <span class="citation" data-cites="healyviz">(<a href="99-references.html#ref-healyviz" role="doc-biblioref">Healy 2018</a>)</span>
<ul>
<li>Focus on Chapter 3 “Make a plot”, which provides an overview of <code>ggplot2</code> with different emphasis.</li>
</ul></li>
<li>Watch <em>The Glamour of Graphics</em>, <span class="citation" data-cites="chase2020">(<a href="99-references.html#ref-chase2020" role="doc-biblioref">Chase 2020</a>)</span>
<ul>
<li>This video details ideas for how to improve a plot made with <code>ggplot2</code>.</li>
</ul></li>
<li>Read <em>Testing Statistical Charts: What Makes a Good Graph?</em>, <span class="citation" data-cites="vanderplas2020testing">(<a href="99-references.html#ref-vanderplas2020testing" role="doc-biblioref">Vanderplas, Cook, and Hofmann 2020</a>)</span>
<ul>
<li>This article details best practice for making graphs.</li>
</ul></li>
<li>Read <em>Data Feminism</em>, <span class="citation" data-cites="datafeminism2020">(<a href="99-references.html#ref-datafeminism2020" role="doc-biblioref">D’Ignazio and Klein 2020</a>)</span>
<ul>
<li>Focus on Chapter 3 “On Rational, Scientific, Objective Viewpoints from Mythical, Imaginary, Impossible Standpoints”, which provides examples of why data needs to be considered within context.</li>
</ul></li>
<li>Read <em>Historical development of the graphical representation of statistical data</em>, <span class="citation" data-cites="funkhouser1937historical">(<a href="99-references.html#ref-funkhouser1937historical" role="doc-biblioref">Funkhouser 1937</a>)</span>
<ul>
<li>Focus on Chapter 2 “The Origin of the Graphic Method”, which discusses how various graphs developed.</li>
</ul></li>
<li>Read <em>Remove the legend to become one</em>, <span class="citation" data-cites="removethelegend">(<a href="99-references.html#ref-removethelegend" role="doc-biblioref">Wei 2017</a>)</span>
<ul>
<li>Goes through the process of gradually improving a graph. It is all interesting, but the graphs aspect begins with “What does this have to do with line graphs?”.</li>
</ul></li>
<li>Read <em>Geocomputation with R</em>, Chapter 2 “Geographic data in R”, <span class="citation" data-cites="lovelace2019geocomputation">(<a href="99-references.html#ref-lovelace2019geocomputation" role="doc-biblioref">Lovelace, Nowosad, and Muenchow 2019</a>)</span>
<ul>
<li>This chapter provides an overview of mapping in <code>R</code>.</li>
</ul></li>
<li>Read <em>Mastering Shiny</em>, Chapter 1 “Your first Shiny app”, <span class="citation" data-cites="wickham2021mastering">(<a href="99-references.html#ref-wickham2021mastering" role="doc-biblioref">Wickham 2021b</a>)</span>
<ul>
<li>This chapter provides a self-contained example of a Shiny app.</li>
</ul></li>
</ul>
<p><strong>Key concepts and skills</strong></p>
<ul>
<li>Visualization is one way to get a sense of our data and to communicate this to the reader. Plotting the observations in a dataset is important.</li>
<li>We need to be comfortable with a variety of graph types, including: bar charts, scatterplots, line plots, and histograms. We can even consider a map to be a type of graph, especially after geocoding our data.</li>
<li>We should also summarize data using tables. Typical use cases for this include showing part of a dataset, summary statistics, and regression results.</li>
</ul>
<p><strong>Software and packages</strong></p>
<ul>
<li><code>babynames</code> <span class="citation" data-cites="citebabynames">(<a href="99-references.html#ref-citebabynames" role="doc-biblioref">Wickham 2021a</a>)</span></li>
<li>Base R <span class="citation" data-cites="citeR">(<a href="99-references.html#ref-citeR" role="doc-biblioref">R Core Team 2024</a>)</span></li>
<li><code>carData</code> <span class="citation" data-cites="carData">(<a href="99-references.html#ref-carData" role="doc-biblioref">Fox, Weisberg, and Price 2022</a>)</span></li>
<li><code>datasauRus</code> <span class="citation" data-cites="citedatasauRus">(<a href="99-references.html#ref-citedatasauRus" role="doc-biblioref">Davies, Locke, and D’Agostino McGowan 2022</a>)</span></li>
<li><code>ggmap</code> <span class="citation" data-cites="KahleWickham2013">(<a href="99-references.html#ref-KahleWickham2013" role="doc-biblioref">Kahle and Wickham 2013</a>)</span></li>
<li><code>janitor</code> <span class="citation" data-cites="janitor">(<a href="99-references.html#ref-janitor" role="doc-biblioref">Firke 2023</a>)</span></li>
<li><code>knitr</code> <span class="citation" data-cites="citeknitr">(<a href="99-references.html#ref-citeknitr" role="doc-biblioref">Xie 2023</a>)</span></li>
<li><code>leaflet</code> <span class="citation" data-cites="ChengKarambelkarXie2017">(<a href="99-references.html#ref-ChengKarambelkarXie2017" role="doc-biblioref">Cheng, Karambelkar, and Xie 2021</a>)</span></li>
<li><code>mapdeck</code> <span class="citation" data-cites="citemapdeck">(<a href="99-references.html#ref-citemapdeck" role="doc-biblioref">Cooley 2020</a>)</span></li>
<li><code>maps</code> <span class="citation" data-cites="citemaps">(<a href="99-references.html#ref-citemaps" role="doc-biblioref">Becker et al. 2022</a>)</span></li>
<li><code>mapproj</code> <span class="citation" data-cites="mapproj">(<a href="99-references.html#ref-mapproj" role="doc-biblioref">McIlroy et al. 2023</a>)</span></li>
<li><code>modelsummary</code> <span class="citation" data-cites="citemodelsummary">(<a href="99-references.html#ref-citemodelsummary" role="doc-biblioref">Arel-Bundock 2022</a>)</span></li>
<li><code>opendatatoronto</code> <span class="citation" data-cites="citeSharla">(<a href="99-references.html#ref-citeSharla" role="doc-biblioref">Gelfand 2022</a>)</span></li>
<li><code>patchwork</code> <span class="citation" data-cites="citepatchwork">(<a href="99-references.html#ref-citepatchwork" role="doc-biblioref">Pedersen 2022</a>)</span></li>
<li><code>shiny</code> <span class="citation" data-cites="citeshiny">(<a href="99-references.html#ref-citeshiny" role="doc-biblioref">Chang et al. 2021</a>)</span></li>
<li><code>tidygeocoder</code> <span class="citation" data-cites="tidygeocoder">(<a href="99-references.html#ref-tidygeocoder" role="doc-biblioref">Cambon and Belanger 2021</a>)</span></li>
<li><code>tidyverse</code> <span class="citation" data-cites="tidyverse">(<a href="99-references.html#ref-tidyverse" role="doc-biblioref">Wickham et al. 2019</a>)</span></li>
<li><code>tinytable</code> <span class="citation" data-cites="tinytable">(<a href="99-references.html#ref-tinytable" role="doc-biblioref">Arel-Bundock 2024</a>)</span></li>
<li><code>troopdata</code> <span class="citation" data-cites="troopdata">(<a href="99-references.html#ref-troopdata" role="doc-biblioref">Flynn 2022</a>)</span></li>
<li><code>usethis</code> <span class="citation" data-cites="usethis">(<a href="99-references.html#ref-usethis" role="doc-biblioref">Wickham, Bryan, and Barrett 2022</a>)</span></li>
<li><code>WDI</code> <span class="citation" data-cites="WDI">(<a href="99-references.html#ref-WDI" role="doc-biblioref">Arel-Bundock 2021</a>)</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(babynames)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(carData)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(datasauRus)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(ggmap)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(janitor)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(knitr)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(leaflet)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(mapdeck)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(maps)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(mapproj)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(modelsummary)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(opendatatoronto)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(patchwork)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(tidygeocoder)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(tinytable)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(troopdata)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(shiny)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(usethis)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(WDI)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<section id="introduction" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">5.1</span> Introduction</h2>
<p>When telling stories with data, we would like the data to do much of the work of convincing our reader. The paper is the medium, and the data are the message. To that end, we want to show our reader the data that allowed us to come to our understanding of the story. We use graphs, tables, and maps to help achieve this.</p>
<p>Try to show the observations that underpin our analysis. For instance, if your dataset consists of 2,500 responses to a survey, then at some point in the paper you should have a plot/s that contains each of the 2,500 observations, for every variable of interest. To do this we build graphs using <code>ggplot2</code> which is part of the core <code>tidyverse</code> and so does not have to be installed or loaded separately. In this chapter we go through a variety of different options including bar charts, scatterplots, line plots, and histograms.</p>
<p>In contrast to the role of graphs, which is to show each observation, the role of tables is typically to show an extract of the dataset or to convey various summary statistics, or regression results. We will build tables primarily using <code>knitr</code>. Later we will use <code>modelsummary</code> to build tables related to regression output.</p>
<p>Finally, we cover maps as a variant of graphs that are used to show a particular type of data. We will build static maps using <code>ggmap</code> after having obtained geocoded data using <code>tidygeocoder</code>.</p>
</section>
<section id="graphs" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="graphs"><span class="header-section-number">5.2</span> Graphs</h2>
<blockquote class="blockquote">
<p>A world turning to a saner and richer civilization will be a world turning to charts.</p>
<p><span class="citation" data-cites="karsetn">Karsten (<a href="99-references.html#ref-karsetn" role="doc-biblioref">1923, 684</a>)</span></p>
</blockquote>
<p>Graphs are a critical aspect of compelling data stories. They allow us to see both broad patterns and details <span class="citation" data-cites="elementsofgraphingdata">(<a href="99-references.html#ref-elementsofgraphingdata" role="doc-biblioref">Cleveland [1985] 1994, 5</a>)</span>. Graphs enable a familiarity with our data that is hard to get from any other method. Every variable of interest should be graphed.</p>
<p>The most important objective of a graph is to convey as much of the actual data, and its context, as possible. In a way, graphing is an information encoding process where we construct a deliberate representation to convey information to our audience. The audience must decode that representation. The success of our graph depends on how much information is lost in this process so the decoding is a critical aspect <span class="citation" data-cites="elementsofgraphingdata">(<a href="99-references.html#ref-elementsofgraphingdata" role="doc-biblioref">Cleveland [1985] 1994, 221</a>)</span>. This means that we must focus on creating effective graphs that are suitable for our specific audience.</p>
<p>To see why graphing the actual data is important, after installing and loading <code>datasauRus</code> consider the <code>datasaurus_dozen</code> dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"/>datasaurus_dozen</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,846 × 3
   dataset     x     y
   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
 1 dino     55.4  97.2
 2 dino     51.5  96.0
 3 dino     46.2  94.5
 4 dino     42.8  91.4
 5 dino     40.8  88.3
 6 dino     38.7  84.9
 7 dino     35.6  79.9
 8 dino     33.1  77.6
 9 dino     29.0  74.5
10 dino     26.2  71.4
# ℹ 1,836 more rows</code></pre>
</div>
</div>
<p>The dataset consists of values for “x” and “y”, which should be plotted on the x-axis and y-axis, respectively. There are 13 different values in the variable “dataset” including: “dino”, “star”, “away”, and “bullseye”. We focus on those four and generate summary statistics for each (<a href="#tbl-datasaurussummarystats" class="quarto-xref">Table <span>5.1</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"/><span class="co"># Based on: https://juliasilge.com/blog/datasaurus-multiclass/</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"/>datasaurus_dozen <span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(dataset <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"dino"</span>, <span class="st">"star"</span>, <span class="st">"away"</span>, <span class="st">"bullseye"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">c</span>(x, y), <span class="fu">list</span>(<span class="at">mean =</span> mean, <span class="at">sd =</span> sd)),</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"/>            <span class="at">.by =</span> dataset) <span class="sc">|&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">tt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"/>  <span class="fu">style_tt</span>(<span class="at">j =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">align =</span> <span class="st">"r"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">format_tt</span>(<span class="at">digits =</span> <span class="dv">1</span>, <span class="at">num_fmt =</span> <span class="st">"decimal"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">"Dataset"</span>, <span class="st">"x mean"</span>, <span class="st">"x sd"</span>, <span class="st">"y mean"</span>, <span class="st">"y sd"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="tbl-datasaurussummarystats" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-datasaurussummarystats-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 5.1: Mean and standard deviation for four datasauRus datasets
</figcaption>
<div aria-describedby="tbl-datasaurussummarystats-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_sxbazes7xh9ptp4eogl8, .table th.tinytable_css_sxbazes7xh9ptp4eogl8 { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_pxeikkf0cgqris1a9ww6, .table th.tinytable_css_pxeikkf0cgqris1a9ww6 { text-align: right; }
      .table td.tinytable_css_m1so1ubn43tvv3f83dgm, .table th.tinytable_css_m1so1ubn43tvv3f83dgm { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_k8vdxssoghblzaytpa2u, .table th.tinytable_css_k8vdxssoghblzaytpa2u { border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_4j7xdxk8vcdfyclrkha1, .table th.tinytable_css_4j7xdxk8vcdfyclrkha1 { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_9572nbqy04owwmtt669g" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col">Dataset</th>
                <th scope="col">x mean</th>
                <th scope="col">x sd</th>
                <th scope="col">y mean</th>
                <th scope="col">y sd</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>dino</td>
                  <td>54.3</td>
                  <td>16.8</td>
                  <td>47.8</td>
                  <td>26.9</td>
                </tr>
                <tr>
                  <td>away</td>
                  <td>54.3</td>
                  <td>16.8</td>
                  <td>47.8</td>
                  <td>26.9</td>
                </tr>
                <tr>
                  <td>star</td>
                  <td>54.3</td>
                  <td>16.8</td>
                  <td>47.8</td>
                  <td>26.9</td>
                </tr>
                <tr>
                  <td>bullseye</td>
                  <td>54.3</td>
                  <td>16.8</td>
                  <td>47.8</td>
                  <td>26.9</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<p>Notice that the summary statistics are similar (<a href="#tbl-datasaurussummarystats" class="quarto-xref">Table <span>5.1</span></a>). Despite this it turns out that the different datasets are actually very different beasts. This becomes clear when we plot the data (<a href="#fig-datasaurusgraph" class="quarto-xref">Figure <span>5.1</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"/>datasaurus_dozen <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(dataset <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"dino"</span>, <span class="st">"star"</span>, <span class="st">"away"</span>, <span class="st">"bullseye"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">colour =</span> dataset)) <span class="sc">+</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(dataset), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">"Dataset"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output-display">
<div id="fig-datasaurusgraph" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-datasaurusgraph-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/a705717105909b48fb86b7a3b7c6f507.png" class="img-fluid figure-img" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-datasaurusgraph-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-datasaurusgraph-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.1: Graph of four datasauRus datasets
</figcaption>
</figure>
</div>
</div>
</div>
<p>We get a similar lesson—always plot your data—from “Anscombe’s Quartet”, created by the twentieth century statistician Frank Anscombe. The key takeaway is that it is important to plot the actual data and not rely solely on summary statistics.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"/><span class="fu">head</span>(anscombe)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x1 x2 x3 x4   y1   y2    y3   y4
1 10 10 10  8 8.04 9.14  7.46 6.58
2  8  8  8  8 6.95 8.14  6.77 5.76
3 13 13 13  8 7.58 8.74 12.74 7.71
4  9  9  9  8 8.81 8.77  7.11 8.84
5 11 11 11  8 8.33 9.26  7.81 8.47
6 14 14 14  8 9.96 8.10  8.84 7.04</code></pre>
</div>
</div>
<p>Anscombe’s Quartet consists of eleven observations for four different datasets, with x and y values for each observation. We need to manipulate this dataset with <code>pivot_longer()</code> to get it into the “tidy” format discussed in <a href="20-r_essentials.html" class="quarto-xref">Online Appendix <span>A</span></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"/><span class="co"># From: https://www.njtierney.com/post/2020/06/01/tidy-anscombe/</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"/><span class="co"># And the pivot_longer() vignette.</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"/></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"/>tidy_anscombe <span class="ot">&lt;-</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"/>  anscombe <span class="sc">|&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">pivot_longer</span>(</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"/>    <span class="fu">everything</span>(),</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"/>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">".value"</span>, <span class="st">"set"</span>),</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"/>    <span class="at">names_pattern =</span> <span class="st">"(.)(.)"</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"/>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<p>We can first create summary statistics (<a href="#tbl-anscombesummarystats" class="quarto-xref">Table <span>5.2</span></a>) and then plot the data (<a href="#fig-anscombegraph" class="quarto-xref">Figure <span>5.2</span></a>). This again illustrates the importance of graphing the actual data, rather than relying on summary statistics.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"/>tidy_anscombe <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">summarise</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"/>    <span class="fu">across</span>(<span class="fu">c</span>(x, y), <span class="fu">list</span>(<span class="at">mean =</span> mean, <span class="at">sd =</span> sd)),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"/>    <span class="at">.by =</span> set</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"/>    ) <span class="sc">|&gt;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">tt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"/>  <span class="fu">style_tt</span>(<span class="at">j =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">align =</span> <span class="st">"r"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">format_tt</span>(<span class="at">digits =</span> <span class="dv">1</span>, <span class="at">num_fmt =</span> <span class="st">"decimal"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">"Dataset"</span>, <span class="st">"x mean"</span>, <span class="st">"x sd"</span>, <span class="st">"y mean"</span>, <span class="st">"y sd"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="tbl-anscombesummarystats" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-anscombesummarystats-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 5.2: Mean and standard deviation for Anscombe’s quartet
</figcaption>
<div aria-describedby="tbl-anscombesummarystats-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_zqr36e9uirgamvqewwtv, .table th.tinytable_css_zqr36e9uirgamvqewwtv { border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_vr1v6dbkw8p0jdkhpd73, .table th.tinytable_css_vr1v6dbkw8p0jdkhpd73 { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_rpun42af1wt8yy8lkyyr, .table th.tinytable_css_rpun42af1wt8yy8lkyyr { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_qgcvzojgvs3x53nwsflp, .table th.tinytable_css_qgcvzojgvs3x53nwsflp { text-align: right; }
      .table td.tinytable_css_k6x8pmk73hkbo2o80z03, .table th.tinytable_css_k6x8pmk73hkbo2o80z03 { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_d3wpik7mnl44xaak51bs" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col">Dataset</th>
                <th scope="col">x mean</th>
                <th scope="col">x sd</th>
                <th scope="col">y mean</th>
                <th scope="col">y sd</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>1</td>
                  <td>9</td>
                  <td>3.3</td>
                  <td>7.5</td>
                  <td>2</td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>9</td>
                  <td>3.3</td>
                  <td>7.5</td>
                  <td>2</td>
                </tr>
                <tr>
                  <td>3</td>
                  <td>9</td>
                  <td>3.3</td>
                  <td>7.5</td>
                  <td>2</td>
                </tr>
                <tr>
                  <td>4</td>
                  <td>9</td>
                  <td>3.3</td>
                  <td>7.5</td>
                  <td>2</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"/>tidy_anscombe <span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">colour =</span> set)) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(set), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">colour =</span> <span class="st">"Dataset"</span>) <span class="sc">+</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output-display">
<div id="fig-anscombegraph" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-anscombegraph-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/406e2cab66a0158524a3e58ad5485d36.png" class="img-fluid figure-img" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-anscombegraph-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-anscombegraph-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.2: Recreation of Anscombe’s Quartet
</figcaption>
</figure>
</div>
</div>
</div>
<section id="bar-charts" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="bar-charts"><span class="header-section-number">5.2.1</span> Bar charts</h3>
<p>We typically use a bar chart when we have a categorical variable that we want to focus on. We saw an example of this in <a href="02-drinking_from_a_fire_hose.html" class="quarto-xref"><span>Chapter 2</span></a> when we constructed a graph of the number of occupied beds. The geometric object—a “geom”—that we primarily use is <code>geom_bar()</code>, but there are many variants to cater for specific situations. To illustrate the use of bar charts, we use a dataset from the 1997-2001 British Election Panel Study that was put together by <span class="citation" data-cites="fox2006effect">Fox and Andersen (<a href="99-references.html#ref-fox2006effect" role="doc-biblioref">2006</a>)</span> and made available with <code>BEPS</code>, after installing and loading <code>carData</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"/>beps <span class="ot">&lt;-</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"/>  BEPS <span class="sc">|&gt;</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">select</span>(age, vote, gender, political_knowledge)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<p>The dataset consists of which party the respondent supports, along with various demographic, economic, and political variables. In particular, we have the age of the respondent. We begin by creating age-groups from the ages, and making a bar chart showing the frequency of each age-group using <code>geom_bar()</code> (<a href="#fig-bepfitst-1" class="quarto-xref">Figure <span>5.3 (a)</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"/>beps <span class="ot">&lt;-</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"/>  beps <span class="sc">|&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">mutate</span>(</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"/>    <span class="at">age_group =</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"/>      <span class="fu">case_when</span>(</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"/>        age <span class="sc">&lt;</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">"&lt;35"</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"/>        age <span class="sc">&lt;</span> <span class="dv">50</span> <span class="sc">~</span> <span class="st">"35-49"</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"/>        age <span class="sc">&lt;</span> <span class="dv">65</span> <span class="sc">~</span> <span class="st">"50-64"</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"/>        age <span class="sc">&lt;</span> <span class="dv">80</span> <span class="sc">~</span> <span class="st">"65-79"</span>,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"/>        age <span class="sc">&lt;</span> <span class="dv">100</span> <span class="sc">~</span> <span class="st">"80-99"</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"/>      ),</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"/>    <span class="at">age_group =</span> </span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"/>      <span class="fu">factor</span>(age_group, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"&lt;35"</span>, <span class="st">"35-49"</span>, <span class="st">"50-64"</span>, <span class="st">"65-79"</span>, <span class="st">"80-99"</span>))</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"/>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"/>beps <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age_group)) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Age group"</span>, <span class="at">y =</span> <span class="st">"Number of observations"</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"/></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"/>beps <span class="sc">|&gt;</span> </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">count</span>(age_group) <span class="sc">|&gt;</span> </span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age_group, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Age group"</span>, <span class="at">y =</span> <span class="st">"Number of observations"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-bepfitst" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bepfitst-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-bepfitst" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-bepfitst-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-bepfitst-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/468f26472a883cd493d815bbc76d750e.png" class="img-fluid figure-img" data-ref-parent="fig-bepfitst" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-bepfitst-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-bepfitst-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Using <code>geom_bar()</code>
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-bepfitst" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-bepfitst-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-bepfitst-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/c982bc4b0658f9b5c835ebd84d40494a.png" class="img-fluid figure-img" data-ref-parent="fig-bepfitst" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-bepfitst-2.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-bepfitst-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Using <code>count()</code> and <code>geom_col()</code>
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bepfitst-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.3: Distribution of age-groups in the 1997-2001 British Election Panel Study
</figcaption>
</figure>
</div>
<p>The default axis label used by <code>ggplot2</code> is the name of the relevant variable, so it is often useful to add more detail. We do this using <code>labs()</code> by specifying a variable and a name. In the case of <a href="#fig-bepfitst-1" class="quarto-xref">Figure <span>5.3 (a)</span></a> we have specified labels for the x-axis and y-axis.</p>
<p>By default, <code>geom_bar()</code> creates a count of the number of times each age-group appears in the dataset. It does this because the default statistical transformation—a “stat”—for <code>geom_bar()</code> is “count”, which saves us from having to create that statistic ourselves. But if we had already constructed a count (for instance, with <code>beps |&gt; count(age_group)</code>), then we could specify a variable for the y-axis and then use <code>geom_col()</code> (<a href="#fig-bepfitst-2" class="quarto-xref">Figure <span>5.3 (b)</span></a>).</p>
<p>We may also like to consider various groupings of the data to get a different insight. For instance, we can use color to look at which party the respondent supports, by age-group (<a href="#fig-bepsecond-1" class="quarto-xref">Figure <span>5.4 (a)</span></a>).</p>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"/>beps <span class="sc">|&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age_group, <span class="at">fill =</span> vote)) <span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Age group"</span>, <span class="at">y =</span> <span class="st">"Number of observations"</span>, <span class="at">fill =</span> <span class="st">"Vote"</span>) <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"/></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"/>beps <span class="sc">|&gt;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age_group, <span class="at">fill =</span> vote)) <span class="sc">+</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge2"</span>) <span class="sc">+</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Age group"</span>, <span class="at">y =</span> <span class="st">"Number of observations"</span>, <span class="at">fill =</span> <span class="st">"Vote"</span>) <span class="sc">+</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-bepsecond" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bepsecond-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-bepsecond" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-bepsecond-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-bepsecond-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/80082b972e32f884e7473a3e00ba7ee5.png" class="img-fluid figure-img" data-ref-parent="fig-bepsecond" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-bepsecond-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-bepsecond-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Using <code>geom_bar()</code>
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-bepsecond" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-bepsecond-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-bepsecond-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/2ec290cdb4eed58edf1edd0c8d89a990.png" class="img-fluid figure-img" data-ref-parent="fig-bepsecond" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-bepsecond-2.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-bepsecond-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Using <code>geom_bar()</code> with dodge2
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bepsecond-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.4: Distribution of age-group, and vote preference, in the 1997-2001 British Election Panel Study
</figcaption>
</figure>
</div>
<p>By default, these different groups are stacked, but they can be placed side by side with <code>position = "dodge2"</code> (<a href="#fig-bepsecond-2" class="quarto-xref">Figure <span>5.4 (b)</span></a>). (Using “dodge2” rather than “dodge” adds a little space between the bars.)</p>
<section id="themes" class="level4" data-number="5.2.1.1">
<h4 data-number="5.2.1.1" class="anchored" data-anchor-id="themes"><span class="header-section-number">5.2.1.1</span> Themes</h4>
<p>At this point, we may like to address the general look of the graph. There are various themes that are built into <code>ggplot2</code>. These include: <code>theme_bw()</code>, <code>theme_classic()</code>, <code>theme_dark()</code>, and <code>theme_minimal()</code>. A full list is available in the <code>ggplot2</code> <a href="https://github.com/rstudio/cheatsheets/blob/main/data-visualization.pdf">cheat sheet</a>. We can use these themes by adding them as a layer (<a href="#fig-bepthemes" class="quarto-xref">Figure <span>5.5</span></a>). We could also install more themes from other packages, including <code>ggthemes</code> <span class="citation" data-cites="ggthemes">(<a href="99-references.html#ref-ggthemes" role="doc-biblioref">Arnold 2021</a>)</span>, and <code>hrbrthemes</code> <span class="citation" data-cites="hrbrthemes">(<a href="99-references.html#ref-hrbrthemes" role="doc-biblioref">Rudis 2020</a>)</span>. We could even build our own!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"/>theme_bw <span class="ot">&lt;-</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"/>  beps <span class="sc">|&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age_group)) <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_bw</span>()</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"/></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"/>theme_classic <span class="ot">&lt;-</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"/>  beps <span class="sc">|&gt;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age_group)) <span class="sc">+</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_classic</span>()</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"/></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"/>theme_dark <span class="ot">&lt;-</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"/>  beps <span class="sc">|&gt;</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age_group)) <span class="sc">+</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_dark</span>()</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"/></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"/>theme_minimal <span class="ot">&lt;-</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"/>  beps <span class="sc">|&gt;</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age_group)) <span class="sc">+</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>()</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"/></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"/>(theme_bw <span class="sc">+</span> theme_classic) <span class="sc">/</span> (theme_dark <span class="sc">+</span> theme_minimal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output-display">
<div id="fig-bepthemes" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bepthemes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/c5e52f639c7556be280af77efcdf2fd2.png" class="img-fluid figure-img" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-bepthemes-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bepthemes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.5: Distribution of age-groups, and vote preference, in the 1997-2001 British Election Panel Study, illustrating different themes and the use of <code>patchwork</code>
</figcaption>
</figure>
</div>
</div>
</div>
<p>In <a href="#fig-bepthemes" class="quarto-xref">Figure <span>5.5</span></a> we use <code>patchwork</code> to bring together multiple graphs. To do this, after installing and loading the package, we assign the graph to a variable. We then use “+” to signal which should be next to each other, “/” to signal which should be on top, and use brackets to indicate precedence</p>
</section>
<section id="facets" class="level4" data-number="5.2.1.2">
<h4 data-number="5.2.1.2" class="anchored" data-anchor-id="facets"><span class="header-section-number">5.2.1.2</span> Facets</h4>
<p>We use facets to show variation, based on one or more variables <span class="citation" data-cites="grammarofgraphics">(<a href="99-references.html#ref-grammarofgraphics" role="doc-biblioref">Wilkinson 2005, 219</a>)</span>. Facets are especially useful when we have already used color to highlight variation in some other variable. For instance, we may be interested to explain vote, by age and gender (<a href="#fig-facets" class="quarto-xref">Figure <span>5.6</span></a>). We rotate the x-axis with <code>guides(x = guide_axis(angle = 90))</code> to avoid overlapping. We also change the position of the legend with <code>theme(legend.position = "bottom")</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"/>beps <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age_group, <span class="at">fill =</span> gender)) <span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"Age-group of respondent"</span>,</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"/>    <span class="at">y =</span> <span class="st">"Number of respondents"</span>,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"/>    <span class="at">fill =</span> <span class="st">"Gender"</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">+</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"/>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(vote)) <span class="sc">+</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"/>  <span class="fu">guides</span>(<span class="at">x =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">90</span>)) <span class="sc">+</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output-display">
<div id="fig-facets" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-facets-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/0bde81f28c9cdc0b38d0ffa351dda937.png" class="img-fluid figure-img" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-facets-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-facets-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.6: Distribution of age-group by gender, and vote preference, in the 1997-2001 British Election Panel Study
</figcaption>
</figure>
</div>
</div>
</div>
<p>We could change <code>facet_wrap()</code> to wrap vertically instead of horizontally with <code>dir = "v"</code>. Alternatively, we could specify a few rows, say <code>nrow = 2</code>, or a number of columns, say <code>ncol = 2</code>.</p>
<p>By default, both facets will have the same x-axis and y-axis. We could enable both facets to have different scales with <code>scales = "free"</code>, or just the x-axis with <code>scales = "free_x"</code>, or just the y-axis with <code>scales = "free_y"</code> (<a href="#fig-facetsfancy" class="quarto-xref">Figure <span>5.7</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"/>beps <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age_group, <span class="at">fill =</span> gender)) <span class="sc">+</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"Age-group of respondent"</span>,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"/>    <span class="at">y =</span> <span class="st">"Number of respondents"</span>,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"/>    <span class="at">fill =</span> <span class="st">"Gender"</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">+</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"/>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(vote), <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"/>  <span class="fu">guides</span>(<span class="at">x =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">90</span>)) <span class="sc">+</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output-display">
<div id="fig-facetsfancy" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-facetsfancy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/c8e921250485392d9bef065a64a4bc1e.png" class="img-fluid figure-img" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-facetsfancy-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-facetsfancy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.7: Distribution of age-group by gender, and vote preference, in the 1997-2001 British Election Panel Study
</figcaption>
</figure>
</div>
</div>
</div>
<p>Finally, we can change the labels of the facets using <code>labeller()</code> (<a href="#fig-facetsfancylabels" class="quarto-xref">Figure <span>5.8</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"/>new_labels <span class="ot">&lt;-</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">c</span>(<span class="st">"0"</span> <span class="ot">=</span> <span class="st">"No knowledge"</span>, <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Low knowledge"</span>,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"/>    <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"Moderate knowledge"</span>, <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"High knowledge"</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"/></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"/>beps <span class="sc">|&gt;</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age_group, <span class="at">fill =</span> vote)) <span class="sc">+</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"Age-group of respondent"</span>,</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"/>    <span class="at">y =</span> <span class="st">"Number of respondents"</span>,</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"/>    <span class="at">fill =</span> <span class="st">"Voted for"</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">+</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"/>  <span class="fu">facet_wrap</span>(</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"/>    <span class="fu">vars</span>(political_knowledge),</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"/>    <span class="at">scales =</span> <span class="st">"free"</span>,</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"/>    <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="at">political_knowledge =</span> new_labels)</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">+</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"/>  <span class="fu">guides</span>(<span class="at">x =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">90</span>)) <span class="sc">+</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output-display">
<div id="fig-facetsfancylabels" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-facetsfancylabels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/3193b849e413bdc1ac85238e8d6722db.png" class="img-fluid figure-img" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-facetsfancylabels-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-facetsfancylabels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.8: Distribution of age-group by political knowledge, and vote preference, in the 1997-2001 British Election Panel Study
</figcaption>
</figure>
</div>
</div>
</div>
<p>We now have three ways to combine multiple graphs: sub-figures, facets, and <code>patchwork</code>. They are useful in different circumstances:</p>
<ul>
<li>sub-figures—which we covered in <a href="03-workflow.html" class="quarto-xref"><span>Chapter 3</span></a>—for when we are considering different variables;</li>
<li>facets for when we are considering a categorical variable; and</li>
<li><code>patchwork</code> for when we are interested in bringing together entirely different graphs.</li>
</ul>
</section>
<section id="colors" class="level4" data-number="5.2.1.3">
<h4 data-number="5.2.1.3" class="anchored" data-anchor-id="colors"><span class="header-section-number">5.2.1.3</span> Colors</h4>
<p>We now turn to the colors used in the graph. There are a variety of different ways to change the colors. The many palettes available from <code>RColorBrewer</code> <span class="citation" data-cites="RColorBrewer">(<a href="99-references.html#ref-RColorBrewer" role="doc-biblioref">Neuwirth 2022</a>)</span> can be specified using <code>scale_fill_brewer()</code>. In the case of <code>viridis</code> <span class="citation" data-cites="viridis">(<a href="99-references.html#ref-viridis" role="doc-biblioref">Garnier et al. 2021</a>)</span> we can specify the palettes using <code>scale_fill_viridis_d()</code>. Additionally, <code>viridis</code> is particularly focused on color-blind palettes (<a href="#fig-usecolor" class="quarto-xref">Figure <span>5.9</span></a>). Neither <code>RColorBrewer</code> nor <code>viridis</code> need to be explicitly installed or loaded because <code>ggplot2</code>, which is part of the <code>tidyverse</code>, takes care of that for us.</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"/>
</div>
<div class="callout-title-container flex-fill">
Shoulders of giants
</div>
</div>
<div class="callout-body-container callout-body">
<p>The name of the “brewer” palette refers to Cindy Brewer <span class="citation" data-cites="brewerisarealperson">(<a href="99-references.html#ref-brewerisarealperson" role="doc-biblioref">Miller 2014</a>)</span>. After earning a PhD in Geography from Michigan State University in 1991, she joined San Diego State University as an assistant professor, moving to Pennsylvania State University in 1994, where she was promoted to full professor in 2007. One of her best-known books is <em>Designing Better Maps: A Guide for GIS Users</em> <span class="citation" data-cites="brewerbook">(<a href="99-references.html#ref-brewerbook" role="doc-biblioref">Brewer 2015</a>)</span>. In 2019 she became only the ninth person to have been awarded the O. M. Miller Cartographic Medal since it was established in 1968.</p>
</div>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (a)</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"/>beps <span class="sc">|&gt;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age_group, <span class="at">fill =</span> vote)) <span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Age-group"</span>, <span class="at">y =</span> <span class="st">"Number"</span>, <span class="at">fill =</span> <span class="st">"Voted for"</span>) <span class="sc">+</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Blues"</span>)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"/></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (b)</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"/>beps <span class="sc">|&gt;</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age_group, <span class="at">fill =</span> vote)) <span class="sc">+</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Age-group"</span>, <span class="at">y =</span> <span class="st">"Number"</span>, <span class="at">fill =</span> <span class="st">"Voted for"</span>) <span class="sc">+</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"/>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>)</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"/></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (c)</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"/>beps <span class="sc">|&gt;</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age_group, <span class="at">fill =</span> vote)) <span class="sc">+</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Age-group"</span>, <span class="at">y =</span> <span class="st">"Number"</span>, <span class="at">fill =</span> <span class="st">"Voted for"</span>) <span class="sc">+</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"/>  <span class="fu">scale_fill_viridis_d</span>()</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"/></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (d)</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"/>beps <span class="sc">|&gt;</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age_group, <span class="at">fill =</span> vote)) <span class="sc">+</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Age-group"</span>, <span class="at">y =</span> <span class="st">"Number"</span>, <span class="at">fill =</span> <span class="st">"Voted for"</span>) <span class="sc">+</span></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"/>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">"magma"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-usecolor" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-usecolor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-usecolor" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-usecolor-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-usecolor-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/c4e805832c5b49286f1dfb4c9f4dc033.png" class="img-fluid figure-img" data-ref-parent="fig-usecolor" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-usecolor-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-usecolor-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Brewer palette ‘Blues’
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-usecolor" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-usecolor-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-usecolor-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/2af12edbe1660a06c4357c9c0e9e32b3.png" class="img-fluid figure-img" data-ref-parent="fig-usecolor" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-usecolor-2.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-usecolor-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Brewer palette ‘Set1’
</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-usecolor" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-usecolor-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-usecolor-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/d1ef03a50221113ca7e57f6eedb06226.png" class="img-fluid figure-img" data-ref-parent="fig-usecolor" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-usecolor-3.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-usecolor-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) Viridis palette default
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-usecolor" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-usecolor-4" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-usecolor-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/3bd4649135344730f1da1fcea31edaaa.png" class="img-fluid figure-img" data-ref-parent="fig-usecolor" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-usecolor-4.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-usecolor-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(d) Viridis palette ‘magma’
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-usecolor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.9: Distribution of age-group and vote preference, in the 1997-2001 British Election Panel Study, illustrating different colors
</figcaption>
</figure>
</div>
<p>In addition to using pre-built palettes, we could build our own palette. That said, color is something to be considered with care. It should be used to increase the amount of information that is communicated <span class="citation" data-cites="elementsofgraphingdata">(<a href="99-references.html#ref-elementsofgraphingdata" role="doc-biblioref">Cleveland [1985] 1994</a>)</span>. Color should not be added to graphs unnecessarily—that is to say, it should play some role. Typically, that role is to distinguish different groups, which implies making the colors dissimilar. Color may also be appropriate if there is some relationship between the color and the variable. For instance, if making a graph of the price of mangoes and raspberries, then it could help the reader decode the information if the colors were yellow and red, respectively <span class="citation" data-cites="franconeri2021science">(<a href="99-references.html#ref-franconeri2021science" role="doc-biblioref">Franconeri et al. 2021, 121</a>)</span>.</p>
</section>
</section>
<section id="scatterplots" class="level3" data-number="5.2.2">
<h3 data-number="5.2.2" class="anchored" data-anchor-id="scatterplots"><span class="header-section-number">5.2.2</span> Scatterplots</h3>
<p>We are often interested in the relationship between two numeric or continuous variables. We can use scatterplots to show this. A scatterplot may not always be the best choice, but it is rarely a bad one <span class="citation" data-cites="weissgerber2015beyond">(<a href="99-references.html#ref-weissgerber2015beyond" role="doc-biblioref">Weissgerber et al. 2015</a>)</span>. Some consider it the most versatile and useful graph option <span class="citation" data-cites="historyofdataviz">(<a href="99-references.html#ref-historyofdataviz" role="doc-biblioref">Friendly and Wainer 2021, 121</a>)</span>. To illustrate scatterplots, we install and load <code>WDI</code> and then use that to download some economic indicators from the World Bank. In particular, we use <code>WDIsearch()</code> to find the unique key that we need to pass to <code>WDI()</code> to facilitate the download.</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"/>
</div>
<div class="callout-title-container flex-fill">
Oh, you think we have good data on that!
</div>
</div>
<div class="callout-body-container callout-body">
<p>From <span class="citation" data-cites="EssentialMacroAggregates">OECD (<a href="99-references.html#ref-EssentialMacroAggregates" role="doc-biblioref">2014, 15</a>)</span> Gross Domestic Product (GDP) “combines in a single figure, and with no double counting, all the output (or production) carried out by all the firms, non-profit institutions, government bodies and households in a given country during a given period, regardless of the type of goods and services produced, provided that the production takes place within the country’s economic territory.” The modern concept was developed by the twentieth century economist Simon Kuznets and is widely used and reported. There is a certain comfort in having a definitive and concrete single number to describe something as complicated as the economic activity of a country. It is useful and informative that we have such summary statistics. But as with any summary statistic, its strength is also its weakness. A single number necessarily loses information about constituent components, and disaggregated differences can be important <span class="citation" data-cites="Moyer2020Measuring">(<a href="99-references.html#ref-Moyer2020Measuring" role="doc-biblioref">Moyer and Dunn 2020</a>)</span>. It highlights short term economic progress over longer term improvements. And “the quantitative definiteness of the estimates makes it easy to forget their dependence upon imperfect data and the consequently wide margins of possible error to which both totals and components are liable” <span class="citation" data-cites="NationalIncomeAndItsComposition">(<a href="99-references.html#ref-NationalIncomeAndItsComposition" role="doc-biblioref">Kuznets, Epstein, and Jenks 1941, xxvi</a>)</span>. Summary measures of economic performance shows only one side of a country’s economy. While there are many strengths there are also well-known areas where GDP is weak.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"/><span class="fu">WDIsearch</span>(<span class="st">"gdp growth"</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"/><span class="fu">WDIsearch</span>(<span class="st">"inflation"</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"/><span class="fu">WDIsearch</span>(<span class="st">"population, total"</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"/><span class="fu">WDIsearch</span>(<span class="st">"Unemployment, total"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="ot">&lt;-</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">WDI</span>(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"/>    <span class="at">indicator =</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"/>      <span class="fu">c</span>(<span class="st">"FP.CPI.TOTL.ZG"</span>, <span class="st">"NY.GDP.MKTP.KD.ZG"</span>, <span class="st">"SP.POP.TOTL"</span>,<span class="st">"SL.UEM.TOTL.NE.ZS"</span>),</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"/>    <span class="at">country =</span> <span class="fu">c</span>(<span class="st">"AU"</span>, <span class="st">"ET"</span>, <span class="st">"IN"</span>, <span class="st">"US"</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"/>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<p>We may like to change the variable names to be more meaningful, and only keep those that we need.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="ot">&lt;-</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"/>  world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">rename</span>(</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"/>    <span class="at">inflation =</span> FP.CPI.TOTL.ZG,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"/>    <span class="at">gdp_growth =</span> NY.GDP.MKTP.KD.ZG,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"/>    <span class="at">population =</span> SP.POP.TOTL,</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"/>    <span class="at">unem_rate =</span> SL.UEM.TOTL.NE.ZS</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">|&gt;</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">select</span>(country, year, inflation, gdp_growth, population, unem_rate)</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"/></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"/><span class="fu">head</span>(world_bank_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  country    year inflation gdp_growth population unem_rate
  &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;
1 Australia  1960     3.73       NA      10276477        NA
2 Australia  1961     2.29        2.48   10483000        NA
3 Australia  1962    -0.319       1.29   10742000        NA
4 Australia  1963     0.641       6.22   10950000        NA
5 Australia  1964     2.87        6.98   11167000        NA
6 Australia  1965     3.41        5.98   11388000        NA</code></pre>
</div>
</div>
<p>To get started we can use <code>geom_point()</code> to make a scatterplot showing GDP growth and inflation, by country (<a href="#fig-scattorplot-1" class="quarto-xref">Figure <span>5.10 (a)</span></a>).</p>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (a)</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdp_growth, <span class="at">y =</span> inflation, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>()</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"/></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (b)</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdp_growth, <span class="at">y =</span> inflation, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"GDP growth"</span>, <span class="at">y =</span> <span class="st">"Inflation"</span>, <span class="at">color =</span> <span class="st">"Country"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-scattorplot" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scattorplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-scattorplot" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-scattorplot-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-scattorplot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/cb188a92541a00be061ba1b16ef34f37.png" class="img-fluid figure-img" data-ref-parent="fig-scattorplot" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-scattorplot-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-scattorplot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Default settings
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-scattorplot" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-scattorplot-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-scattorplot-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/e8c0b143f0dca09da1a95f47163c6397.png" class="img-fluid figure-img" data-ref-parent="fig-scattorplot" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-scattorplot-2.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-scattorplot-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) With the addition of a theme and labels
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scattorplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.10: Relationship between inflation and GDP growth for Australia, Ethiopia, India, and the United States
</figcaption>
</figure>
</div>
<p>As with bar charts, we can change the theme, and update the labels (<a href="#fig-scattorplot-2" class="quarto-xref">Figure <span>5.10 (b)</span></a>).</p>
<p>For scatterplots we use “color” instead of “fill”, as we did for bar charts, because they use dots rather than bars. This also then slightly affects how we change the palette (<a href="#fig-scatterplotnicercolor" class="quarto-xref">Figure <span>5.11</span></a>). That said, with particular types of dots, for instance <code>shape = 21</code>, it is possible to have both <code>fill</code> and <code>color</code> aesthetics.</p>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (a)</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth, <span class="at">y =</span> inflation, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"GDP growth"</span>, <span class="at">y =</span> <span class="st">"Inflation"</span>, <span class="at">color =</span> <span class="st">"Country"</span>) <span class="sc">+</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Blues"</span>)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"/></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (b)</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth, <span class="at">y =</span> inflation, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"GDP growth"</span>,  <span class="at">y =</span> <span class="st">"Inflation"</span>, <span class="at">color =</span> <span class="st">"Country"</span>) <span class="sc">+</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"/>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>)</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"/></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (c)</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth, <span class="at">y =</span> inflation, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"GDP growth"</span>,  <span class="at">y =</span> <span class="st">"Inflation"</span>, <span class="at">color =</span> <span class="st">"Country"</span>) <span class="sc">+</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"/>  <span class="fu">scale_colour_viridis_d</span>()</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"/></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (d)</span></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth, <span class="at">y =</span> inflation, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"GDP growth"</span>,  <span class="at">y =</span> <span class="st">"Inflation"</span>, <span class="at">color =</span> <span class="st">"Country"</span>) <span class="sc">+</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"/>  <span class="fu">scale_colour_viridis_d</span>(<span class="at">option =</span> <span class="st">"magma"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-scatterplotnicercolor" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatterplotnicercolor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-scatterplotnicercolor" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-scatterplotnicercolor-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-scatterplotnicercolor-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/265f31eac29d3928ede5623d80b3a559.png" class="img-fluid figure-img" data-ref-parent="fig-scatterplotnicercolor" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-scatterplotnicercolor-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-scatterplotnicercolor-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Brewer palette ‘Blues’
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-scatterplotnicercolor" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-scatterplotnicercolor-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-scatterplotnicercolor-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/6a5205e554a5f7ba5bab636f56058ea7.png" class="img-fluid figure-img" data-ref-parent="fig-scatterplotnicercolor" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-scatterplotnicercolor-2.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-scatterplotnicercolor-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Brewer palette ‘Set1’
</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-scatterplotnicercolor" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-scatterplotnicercolor-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-scatterplotnicercolor-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/763bdba285cf529762589eb5ec69df35.png" class="img-fluid figure-img" data-ref-parent="fig-scatterplotnicercolor" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-scatterplotnicercolor-3.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-scatterplotnicercolor-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) Viridis palette default
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-scatterplotnicercolor" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-scatterplotnicercolor-4" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-scatterplotnicercolor-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/222d9bd4ff8ed0ce76dc64da1b89b50c.png" class="img-fluid figure-img" data-ref-parent="fig-scatterplotnicercolor" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-scatterplotnicercolor-4.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-scatterplotnicercolor-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(d) Viridis palette ‘magma’
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatterplotnicercolor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.11: Relationship between inflation and GDP growth for Australia, Ethiopia, India, and the United States
</figcaption>
</figure>
</div>
<p>The points of a scatterplot sometimes overlap. We can address this situation in a variety of ways (<a href="#fig-alphajitter" class="quarto-xref">Figure <span>5.12</span></a>):</p>
<ol type="1">
<li>Adding a degree of transparency to our dots with “alpha” (<a href="#fig-alphajitter-1" class="quarto-xref">Figure <span>5.12 (a)</span></a>). The value for “alpha” can vary between 0, which is fully transparent, and 1, which is completely opaque.</li>
<li>Adding a small amount of noise, which slightly moves the points, using <code>geom_jitter()</code> (<a href="#fig-alphajitter-2" class="quarto-xref">Figure <span>5.12 (b)</span></a>). By default, the movement is uniform in both directions, but we can specify which direction movement occurs with “width” or “height”. The decision between these two options turns on the degree to which accuracy matters, and the number of points: it is often useful to use <code>geom_jitter()</code> when you want to highlight the relative density of points and not necessarily the exact value of individual points. When using <code>geom_jitter()</code> it is a good idea to set a seed, as introduced in <a href="02-drinking_from_a_fire_hose.html" class="quarto-xref"><span>Chapter 2</span></a>, for reproducibility.</li>
</ol>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"/><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"/></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (a)</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth, <span class="at">y =</span> inflation, <span class="at">color =</span> country )) <span class="sc">+</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"GDP growth"</span>, <span class="at">y =</span> <span class="st">"Inflation"</span>, <span class="at">color =</span> <span class="st">"Country"</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"/></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (b)</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth, <span class="at">y =</span> inflation, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">height =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"GDP growth"</span>, <span class="at">y =</span> <span class="st">"Inflation"</span>, <span class="at">color =</span> <span class="st">"Country"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-alphajitter" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-alphajitter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-alphajitter" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-alphajitter-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-alphajitter-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/acbdeb9fb54adea08768e8af06d76fb6.png" class="img-fluid figure-img" data-ref-parent="fig-alphajitter" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-alphajitter-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-alphajitter-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Changing the alpha setting
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-alphajitter" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-alphajitter-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-alphajitter-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/b8a02858a47ed693fcf55001827e8e82.png" class="img-fluid figure-img" data-ref-parent="fig-alphajitter" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-alphajitter-2.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-alphajitter-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Using jitter
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-alphajitter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.12: Relationship between inflation and GDP growth for Australia, Ethiopia, India, and the United States
</figcaption>
</figure>
</div>
<p>We often use scatterplots to illustrate a relationship between two continuous variables. It can be useful to add a “summary” line using <code>geom_smooth()</code> (<a href="#fig-scattorplottwo" class="quarto-xref">Figure <span>5.13</span></a>). We can specify the relationship using “method”, change the color with “color”, and add or remove standard errors with “se”. A commonly used “method” is <code>lm</code>, which computes and plots a simple linear regression line similar to using the <code>lm()</code> function. Using <code>geom_smooth()</code> adds a layer to the graph, and so it inherits aesthetics from <code>ggplot()</code>. For instance, that is why we have one line for each country in <a href="#fig-scattorplottwo-1" class="quarto-xref">Figure <span>5.13 (a)</span></a> and <a href="#fig-scattorplottwo-2" class="quarto-xref">Figure <span>5.13 (b)</span></a>. We could overwrite that by specifying a particular color (<a href="#fig-scattorplottwo-3" class="quarto-xref">Figure <span>5.13 (c)</span></a>). There are situation where other types of fitted lines such as splines might be preferred.</p>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (a)</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth, <span class="at">y =</span> inflation, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"GDP growth"</span>, <span class="at">y =</span> <span class="st">"Inflation"</span>, <span class="at">color =</span> <span class="st">"Country"</span>)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"/></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (b)</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth, <span class="at">y =</span> inflation, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"GDP growth"</span>, <span class="at">y =</span> <span class="st">"Inflation"</span>, <span class="at">color =</span> <span class="st">"Country"</span>)</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"/></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (c)</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth, <span class="at">y =</span> inflation, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"GDP growth"</span>, <span class="at">y =</span> <span class="st">"Inflation"</span>, <span class="at">color =</span> <span class="st">"Country"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-scattorplottwo" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scattorplottwo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-scattorplottwo" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-scattorplottwo-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-scattorplottwo-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/0a1eebae05b9a3eb783bc50cd526bd18.png" class="img-fluid figure-img" data-ref-parent="fig-scattorplottwo" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-scattorplottwo-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-scattorplottwo-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Default line of best fit
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-scattorplottwo" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-scattorplottwo-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-scattorplottwo-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/a6ac877a23621d6b7d06df525d04ba93.png" class="img-fluid figure-img" data-ref-parent="fig-scattorplottwo" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-scattorplottwo-2.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-scattorplottwo-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Specifying a linear relationship
</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-scattorplottwo" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-scattorplottwo-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-scattorplottwo-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/7ba4571d0574f4371c0fb723ee127bb6.png" class="img-fluid figure-img" data-ref-parent="fig-scattorplottwo" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-scattorplottwo-3.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-scattorplottwo-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) Specifying only one color
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scattorplottwo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.13: Relationship between inflation and GDP growth for Australia, Ethiopia, India, and the United States
</figcaption>
</figure>
</div>
</section>
<section id="line-plots" class="level3" data-number="5.2.3">
<h3 data-number="5.2.3" class="anchored" data-anchor-id="line-plots"><span class="header-section-number">5.2.3</span> Line plots</h3>
<p>We can use a line plot when we have variables that should be joined together, for instance, an economic time series. We will continue with the dataset from the World Bank and focus on GDP growth in the United States using <code>geom_line()</code> (<a href="#fig-lineplot-1" class="quarto-xref">Figure <span>5.14 (a)</span></a>). The source of the data can be added to the graph using “caption” within <code>labs()</code>.</p>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (a)</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"United States"</span>) <span class="sc">|&gt;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> gdp_growth)) <span class="sc">+</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"GDP growth"</span>, <span class="at">caption =</span> <span class="st">"Data source: World Bank."</span>)</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"/></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (b)</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"United States"</span>) <span class="sc">|&gt;</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> gdp_growth)) <span class="sc">+</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_step</span>() <span class="sc">+</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Year"</span>,<span class="at">y =</span> <span class="st">"GDP growth"</span>, <span class="at">caption =</span> <span class="st">"Data source: World Bank."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-lineplot" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-lineplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-lineplot" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-lineplot-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-lineplot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/c9da66aa49a284a7c7f3cd4eda7bbcee.png" class="img-fluid figure-img" data-ref-parent="fig-lineplot" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-lineplot-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-lineplot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Using a line plot
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-lineplot" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-lineplot-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-lineplot-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/16b714ae763782ddcd594c0cb80b4bc0.png" class="img-fluid figure-img" data-ref-parent="fig-lineplot" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-lineplot-2.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-lineplot-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Using a stairstep line plot
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-lineplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.14: United States GDP growth (1961-2020)
</figcaption>
</figure>
</div>
<p>We can use <code>geom_step()</code>, a slight variant of <code>geom_line()</code>, to focus attention on the change from year to year (<a href="#fig-lineplot-2" class="quarto-xref">Figure <span>5.14 (b)</span></a>).</p>
<p>The Phillips curve is the name given to plot of the relationship between unemployment and inflation over time. An inverse relationship is sometimes found in the data, for instance in the United Kingdom between 1861 and 1957 <span class="citation" data-cites="phillips1958relation">(<a href="99-references.html#ref-phillips1958relation" role="doc-biblioref">Phillips 1958</a>)</span>. We have a variety of ways to investigate this relationship in our data, including:</p>
<ol type="1">
<li>Adding a second line to our graph. For instance, we could add inflation (<a href="#fig-notphillips-1" class="quarto-xref">Figure <span>5.15 (a)</span></a>). This requires us to use <code>pivot_longer()</code>, which is discussed in <a href="20-r_essentials.html" class="quarto-xref">Online Appendix <span>A</span></a>, to ensure that the data are in a tidy format.</li>
<li>Using <code>geom_path()</code> to link values in the order they appear in the dataset. In <a href="#fig-notphillips-2" class="quarto-xref">Figure <span>5.15 (b)</span></a> we show a Phillips curve for the United States between 1960 and 2020. <a href="#fig-notphillips-2" class="quarto-xref">Figure <span>5.15 (b)</span></a> does not appear to show any clear relationship between unemployment and inflation.</li>
</ol>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"United States"</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">select</span>(<span class="sc">-</span>population, <span class="sc">-</span>gdp_growth) <span class="sc">|&gt;</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">pivot_longer</span>(</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"/>    <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"inflation"</span>, <span class="st">"unem_rate"</span>),</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"/>    <span class="at">names_to =</span> <span class="st">"series"</span>,</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"/>    <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> value, <span class="at">color =</span> series)) <span class="sc">+</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Value"</span>, <span class="at">color =</span> <span class="st">"Economic indicator"</span>,</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"/>    <span class="at">caption =</span> <span class="st">"Data source: World Bank."</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">+</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"/>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Inflation"</span>, <span class="st">"Unemployment"</span>)) <span class="sc">+</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"/></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"United States"</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> unem_rate, <span class="at">y =</span> inflation)) <span class="sc">+</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_path</span>() <span class="sc">+</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"Unemployment rate"</span>, <span class="at">y =</span> <span class="st">"Inflation"</span>,</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"/>    <span class="at">caption =</span> <span class="st">"Data source: World Bank."</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"/>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-notphillips" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-notphillips-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-notphillips" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-notphillips-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-notphillips-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/94fdf6c7a8a76afbdc38818d9d942363.png" class="img-fluid figure-img" data-ref-parent="fig-notphillips" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-notphillips-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-notphillips-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Comparing the two time series over time
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-notphillips" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-notphillips-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-notphillips-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/3d88ab46e515f08ecc421c43374d18f1.png" class="img-fluid figure-img" data-ref-parent="fig-notphillips" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-notphillips-2.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-notphillips-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Plotting the two time series against each other
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-notphillips-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.15: Unemployment and inflation for the United States (1960-2020)
</figcaption>
</figure>
</div>
</section>
<section id="histograms" class="level3" data-number="5.2.4">
<h3 data-number="5.2.4" class="anchored" data-anchor-id="histograms"><span class="header-section-number">5.2.4</span> Histograms</h3>
<p>A histogram is useful to show the shape of the distribution of a continuous variable. The full range of the data values is split into intervals called “bins” and the histogram counts how many observations fall into which bin. In <a href="#fig-hisogramone" class="quarto-xref">Figure <span>5.16</span></a> we examine the distribution of GDP in Ethiopia.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Ethiopia"</span>) <span class="sc">|&gt;</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth)) <span class="sc">+</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"GDP growth"</span>,</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"/>    <span class="at">y =</span> <span class="st">"Number of occurrences"</span>,</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"/>    <span class="at">caption =</span> <span class="st">"Data source: World Bank."</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"/>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output-display">
<div id="fig-hisogramone" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hisogramone-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/82d4310517a453478fbcb8338b0b095f.png" class="img-fluid figure-img" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-hisogramone-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-hisogramone-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.16: Distribution of GDP growth in Ethiopia (1960-2020)
</figcaption>
</figure>
</div>
</div>
</div>
<p>The key component that determines the shape of a histogram is the number of bins. This can be specified in one of two ways (<a href="#fig-hisogrambins" class="quarto-xref">Figure <span>5.17</span></a>):</p>
<ol type="1">
<li>specifying the number of “bins” to include; or</li>
<li>specifying their “binwidth”.</li>
</ol>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (a)</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Ethiopia"</span>) <span class="sc">|&gt;</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth)) <span class="sc">+</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"GDP growth"</span>,</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"/>    <span class="at">y =</span> <span class="st">"Number of occurrences"</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"/>  )</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"/></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (b)</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Ethiopia"</span>) <span class="sc">|&gt;</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth)) <span class="sc">+</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"GDP growth"</span>,</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"/>    <span class="at">y =</span> <span class="st">"Number of occurrences"</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"/>  )</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"/></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (c)</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Ethiopia"</span>) <span class="sc">|&gt;</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth)) <span class="sc">+</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"GDP growth"</span>,</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"/>    <span class="at">y =</span> <span class="st">"Number of occurrences"</span></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"/>  )</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"/></span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (d)</span></span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Ethiopia"</span>) <span class="sc">|&gt;</span></span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth)) <span class="sc">+</span></span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"GDP growth"</span>,</span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"/>    <span class="at">y =</span> <span class="st">"Number of occurrences"</span></span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"/>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-hisogrambins" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hisogrambins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-hisogrambins" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-hisogrambins-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-hisogrambins-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/9986f13fa26b89dbddb3fd7522175428.png" class="img-fluid figure-img" data-ref-parent="fig-hisogrambins" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-hisogrambins-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-hisogrambins-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Five bins
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-hisogrambins" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-hisogrambins-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-hisogrambins-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/d1aeb73a3f29fb72d63875cc05b6ad86.png" class="img-fluid figure-img" data-ref-parent="fig-hisogrambins" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-hisogrambins-2.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-hisogrambins-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) 20 bins
</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-hisogrambins" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-hisogrambins-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-hisogrambins-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/6367471591699b41c4dc5dd23083de2d.png" class="img-fluid figure-img" data-ref-parent="fig-hisogrambins" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-hisogrambins-3.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-hisogrambins-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) Binwidth of two
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-hisogrambins" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-hisogrambins-4" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-hisogrambins-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/54ac6c06e10d4e2c2eb6ddb52684882d.png" class="img-fluid figure-img" data-ref-parent="fig-hisogrambins" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-hisogrambins-4.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-hisogrambins-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(d) Binwidth of five
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-hisogrambins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.17: Distribution of GDP growth in Ethiopia (1960-2020)
</figcaption>
</figure>
</div>
<p>Histograms can be thought of as locally averaging data, and the number of bins affects how much of this occurs. When there are only two bins then there is considerable smoothing, but we lose a lot of accuracy. Too few bins results in more bias, while too many bins results in more variance <span class="citation" data-cites="wasserman">(<a href="99-references.html#ref-wasserman" role="doc-biblioref">Wasserman 2005, 303</a>)</span>. Our decision as to the number of bins, or their width, is concerned with trying to balance bias and variance. This will depend on a variety of concerns including the subject matter and the goal <span class="citation" data-cites="elementsofgraphingdata">(<a href="99-references.html#ref-elementsofgraphingdata" role="doc-biblioref">Cleveland [1985] 1994, 135</a>)</span>. This is one of the reasons that <span class="citation" data-cites="Denby2009">Denby and Mallows (<a href="99-references.html#ref-Denby2009" role="doc-biblioref">2009</a>)</span> consider histograms to be especially valuable as exploratory tools.</p>
<p>Finally, while we can use “fill” to distinguish between different types of observations, it can get quite messy. It is usually better to:</p>
<ol type="1">
<li>trace the outline of the distribution with <code>geom_freqpoly()</code> (<a href="#fig-different-obs-1" class="quarto-xref">Figure <span>5.18 (a)</span></a>)</li>
<li>build stack of dots with <code>geom_dotplot()</code> (<a href="#fig-different-obs-2" class="quarto-xref">Figure <span>5.18 (b)</span></a>); or</li>
<li>add transparency, especially if the differences are more stark (<a href="#fig-different-obs-3" class="quarto-xref">Figure <span>5.18 (c)</span></a>).</li>
</ol>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (a)</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_freqpoly</span>() <span class="sc">+</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"GDP growth"</span>, <span class="at">y =</span> <span class="st">"Number of occurrences"</span>,</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"/>    <span class="at">color =</span> <span class="st">"Country"</span>,</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"/>    <span class="at">caption =</span> <span class="st">"Data source: World Bank."</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">+</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"/>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>)</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"/></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (b)</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp_growth, <span class="at">group =</span> country, <span class="at">fill =</span> country)) <span class="sc">+</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_dotplot</span>(<span class="at">method =</span> <span class="st">"histodot"</span>) <span class="sc">+</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"GDP growth"</span>, <span class="at">y =</span> <span class="st">"Number of occurrences"</span>,</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"/>    <span class="at">fill =</span> <span class="st">"Country"</span>,</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"/>    <span class="at">caption =</span> <span class="st">"Data source: World Bank."</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">+</span></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"/>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>)</span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"/></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"/><span class="co"># Panel (c)</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"India"</span>, <span class="st">"United States"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdp_growth, <span class="at">fill =</span> country)) <span class="sc">+</span></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_histogram</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">position =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"GDP growth"</span>, <span class="at">y =</span> <span class="st">"Number of occurrences"</span>,</span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"/>    <span class="at">fill =</span> <span class="st">"Country"</span>,</span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"/>    <span class="at">caption =</span> <span class="st">"Data source: World Bank."</span></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">+</span></span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"/>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-different-obs" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-different-obs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-different-obs" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-different-obs-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-different-obs-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/02144b59c88b7acd71d13effeed19f50.png" class="img-fluid figure-img" data-ref-parent="fig-different-obs" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-different-obs-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-different-obs-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Tracing the outline
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-different-obs" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-different-obs-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-different-obs-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/5f6ba655ce86980c2e2c80fd707a347f.png" class="img-fluid figure-img" data-ref-parent="fig-different-obs" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-different-obs-2.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-different-obs-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Using dots
</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-different-obs" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-different-obs-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-different-obs-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/81b9410addb57e4bc4185727763d2f5a.png" class="img-fluid figure-img" data-ref-parent="fig-different-obs" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-different-obs-3.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-different-obs-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) Adding transparency
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-different-obs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.18: Distribution of GDP growth across various countries (1960-2020)
</figcaption>
</figure>
</div>
<p>An interesting alternative to a histogram is the empirical cumulative distribution function (ECDF). The choice between this and a histogram is tends to be audience-specific. It may not appropriate for less-sophisticated audiences, but if the audience is quantitatively comfortable, then it can be a great choice because it does less smoothing than a histogram. We can build an ECDF with <code>stat_ecdf()</code>. For instance, <a href="#fig-ecdfismyfavohidonthavefavs" class="quarto-xref">Figure <span>5.19</span></a> shows an ECDF equivalent to <a href="#fig-hisogramone" class="quarto-xref">Figure <span>5.16</span></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdp_growth, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">stat_ecdf</span>(<span class="at">geom =</span> <span class="st">"point"</span>) <span class="sc">+</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"GDP growth"</span>, <span class="at">y =</span> <span class="st">"Proportion"</span>, <span class="at">color =</span> <span class="st">"Country"</span>,</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"/>    <span class="at">caption =</span> <span class="st">"Data source: World Bank."</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">+</span> </span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output-display">
<div id="fig-ecdfismyfavohidonthavefavs" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ecdfismyfavohidonthavefavs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/87477d4f0a237a2e468a957fb1e1b603.png" class="img-fluid figure-img" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-ecdfismyfavohidonthavefavs-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ecdfismyfavohidonthavefavs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.19: Distribution of GDP growth in four countries (1960-2020)
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="boxplots" class="level3" data-number="5.2.5">
<h3 data-number="5.2.5" class="anchored" data-anchor-id="boxplots"><span class="header-section-number">5.2.5</span> Boxplots</h3>
<p>A boxplot typically shows five aspects: 1) the median, 2) the 25th, and 3) 75th percentiles. The fourth and fifth elements differ depending on specifics. One option is the minimum and maximum values. Another option is to determine the difference between the 75th and 25th percentiles, which is the interquartile range (IQR). The fourth and fifth elements are then the extreme observations within <span class="math inline">\(1.5\times\mbox{IQR}\)</span> from the 25th and 75th percentiles. That latter approach is used, by default, in <code>geom_boxplot</code> from <code>ggplot2</code>. <span class="citation" data-cites="chartingstatistics">Spear (<a href="99-references.html#ref-chartingstatistics" role="doc-biblioref">1952, 166</a>)</span> introduced the notion of a chart that focused on the range and various summary statistics including the median and the range, while <span class="citation" data-cites="tukeyeda">Tukey (<a href="99-references.html#ref-tukeyeda" role="doc-biblioref">1977</a>)</span> focused on which summary statistics and popularized it <span class="citation" data-cites="anotherhadleyreferencelol">(<a href="99-references.html#ref-anotherhadleyreferencelol" role="doc-biblioref">Wickham and Stryjewski 2011</a>)</span>.</p>
<p>One reason for using graphs is that they help us understand and embrace how complex our data are, rather than trying to hide and smooth it away <span class="citation" data-cites="armstrongembracecomplexity">(<a href="99-references.html#ref-armstrongembracecomplexity" role="doc-biblioref">Armstrong 2022</a>)</span>. One appropriate use case for boxplots is to compare the summary statistics of many variables at once, such as in <span class="citation" data-cites="Bethlehem2022">Bethlehem et al. (<a href="99-references.html#ref-Bethlehem2022" role="doc-biblioref">2022</a>)</span>. But boxplots alone are rarely the best choice because they hide the distribution of data, rather than show it. The same boxplot can apply to very different distributions. To see this, consider some simulated data from the beta distribution of two types. The first contains draws from two beta distributions: one that is right skewed and another that is left skewed. The second contains draws from a beta distribution with no skew, noting that <span class="math inline">\(\mbox{Beta}(1, 1)\)</span> is equivalent to <span class="math inline">\(\mbox{Uniform}(0, 1)\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"/><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"/></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"/>number_of_draws <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"/></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"/>both_left_and_right_skew <span class="ot">&lt;-</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">c</span>(</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"/>    <span class="fu">rbeta</span>(number_of_draws <span class="sc">/</span> <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">2</span>),</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"/>    <span class="fu">rbeta</span>(number_of_draws <span class="sc">/</span> <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"/>  )</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"/></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"/>no_skew <span class="ot">&lt;-</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"/>  <span class="fu">rbeta</span>(number_of_draws, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"/></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"/>beta_distributions <span class="ot">&lt;-</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"/>  <span class="fu">tibble</span>(</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"/>    <span class="at">observation =</span> <span class="fu">c</span>(both_left_and_right_skew, no_skew),</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"/>    <span class="at">source =</span> <span class="fu">c</span>(</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"/>      <span class="fu">rep</span>(<span class="st">"Left and right skew"</span>, number_of_draws),</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"/>      <span class="fu">rep</span>(<span class="st">"No skew"</span>, number_of_draws)</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"/>    )</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"/>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<p>We can first compare the boxplots of the two series (<a href="#fig-boxplotfirst-1" class="quarto-xref">Figure <span>5.20 (a)</span></a>). But if we plot the actual data then we can see how different they are (<a href="#fig-boxplotfirst-2" class="quarto-xref">Figure <span>5.20 (b)</span></a>).</p>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"/>beta_distributions <span class="sc">|&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> source, <span class="at">y =</span> observation)) <span class="sc">+</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_classic</span>()</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"/></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"/>beta_distributions <span class="sc">|&gt;</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> observation, <span class="at">color =</span> source)) <span class="sc">+</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="fl">0.05</span>) <span class="sc">+</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-boxplotfirst" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-boxplotfirst-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-boxplotfirst" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-boxplotfirst-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-boxplotfirst-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/7bf1c8209e394081cbf620abf946af3d.png" class="img-fluid figure-img" data-ref-parent="fig-boxplotfirst" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-boxplotfirst-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-boxplotfirst-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Illustrated with a boxplot
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-boxplotfirst" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-boxplotfirst-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-boxplotfirst-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/09fa40d0531cb1983a539fd07305bc0f.png" class="img-fluid figure-img" data-ref-parent="fig-boxplotfirst" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-boxplotfirst-2.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-boxplotfirst-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Actual data
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-boxplotfirst-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.20: Data drawn from beta distributions with different parameters
</figcaption>
</figure>
</div>
<p>One way forward, if a boxplot is to be used, is to include the actual data as a layer on top of the boxplot. For instance, in <a href="#fig-bloxplotandoverlay" class="quarto-xref">Figure <span>5.21</span></a> we show the distribution of inflation across the four countries. The reason that this works well is that it shows the actual observations, as well as the summary statistics.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> country, <span class="at">y =</span> inflation)) <span class="sc">+</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">width =</span> <span class="fl">0.15</span>, <span class="at">height =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"Country"</span>,</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"/>    <span class="at">y =</span> <span class="st">"Inflation"</span>,</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"/>    <span class="at">caption =</span> <span class="st">"Data source: World Bank."</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"/>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output-display">
<div id="fig-bloxplotandoverlay" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bloxplotandoverlay-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/b5bb77f40492482ccfed5ef8edf8b069.png" class="img-fluid figure-img" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-bloxplotandoverlay-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bloxplotandoverlay-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.21: Distribution of inflation data for four countries (1960-2020)
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="interactive-graphs" class="level3" data-number="5.2.6">
<h3 data-number="5.2.6" class="anchored" data-anchor-id="interactive-graphs"><span class="header-section-number">5.2.6</span> Interactive graphs</h3>
<p><code>shiny</code> <span class="citation" data-cites="citeshiny">(<a href="99-references.html#ref-citeshiny" role="doc-biblioref">Chang et al. 2021</a>)</span> is a way of making interactive web applications using R. It is fun, but can be a little fiddly. Here we are going to step through one way to take advantage of <code>shiny</code>, which is to quickly add some interactivity to our graphs. This sounds like a small thing, but a great example of why it is so powerful is provided by <span class="citation" data-cites="theeconomistforecasts">The Economist (<a href="99-references.html#ref-theeconomistforecasts" role="doc-biblioref">2022a</a>)</span> where they show how their forecasts of the 2022 French Presidential Election changed over time.</p>
<p>We are going to make an interactive graph based on the “babynames” dataset from <code>babynames</code> <span class="citation" data-cites="citebabynames">(<a href="99-references.html#ref-citebabynames" role="doc-biblioref">Wickham 2021a</a>)</span>. First, we will build a static version (<a href="#fig-babynames" class="quarto-xref">Figure <span>5.22</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"/>top_five_names_by_year <span class="ot">&lt;-</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"/>  babynames <span class="sc">|&gt;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">by =</span> <span class="fu">c</span>(year, sex))</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"/></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"/>top_five_names_by_year <span class="sc">|&gt;</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> n, <span class="at">fill =</span> sex)) <span class="sc">+</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_histogram</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"/>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>) <span class="sc">+</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"Babies with that name"</span>,</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"/>    <span class="at">y =</span> <span class="st">"Occurrences"</span>,</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"/>    <span class="at">fill =</span> <span class="st">"Sex"</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"/>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output-display">
<div id="fig-babynames" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-babynames-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/c65cab153ddf2848b5ac046b4f75dced.png" class="img-fluid figure-img" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-babynames-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-babynames-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.22: Popular baby names
</figcaption>
</figure>
</div>
</div>
</div>
<p>One thing that we might be interested in is how the effect of the “bins” parameter shapes what we see. We might like to use interactivity to explore different values.</p>
<p>To get started, create a new <code>shiny</code> app (“File” -&gt; “New File” -&gt; “Shiny Web App”). Give it a name, such as “not_my_first_shiny” and then leave all the other options as the default. A new file “app.R” will open and we click “Run app” to see what it looks like.</p>
<p>Now replace the content in that file, “app.R”, with the content below, and then again click “Run app”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"/><span class="fu">library</span>(shiny)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"/></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"/><span class="co"># Define UI for application that draws a histogram</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"/>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"/>  <span class="co"># Application title</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">titlePanel</span>(<span class="st">"Count of names for five most popular names each year."</span>),</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"/></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"/>  <span class="co"># Sidebar with a slider input for number of bins</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"/>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"/>      <span class="fu">sliderInput</span>(</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"/>        <span class="at">inputId =</span> <span class="st">"number_of_bins"</span>,</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"/>        <span class="at">label =</span> <span class="st">"Number of bins:"</span>,</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"/>        <span class="at">min =</span> <span class="dv">1</span>,</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"/>        <span class="at">max =</span> <span class="dv">50</span>,</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"/>        <span class="at">value =</span> <span class="dv">30</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"/>      )</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"/>    ),</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"/></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"/>    <span class="co"># Show a plot of the generated distribution</span></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"/>    <span class="fu">mainPanel</span>(<span class="fu">plotOutput</span>(<span class="st">"distPlot"</span>))</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"/>  )</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"/>)</span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"/></span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"/><span class="co"># Define server logic required to draw a histogram</span></span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"/>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"/>  output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"/>    <span class="co"># Draw the histogram with the specified number of bins</span></span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"/>    top_five_names_by_year <span class="sc">|&gt;</span></span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"/>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> n, <span class="at">fill =</span> sex)) <span class="sc">+</span></span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"/>      <span class="fu">geom_histogram</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">bins =</span> input<span class="sc">$</span>number_of_bins) <span class="sc">+</span></span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"/>      <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"/>      <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>) <span class="sc">+</span></span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"/>      <span class="fu">labs</span>(</span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"/>        <span class="at">x =</span> <span class="st">"Babies with that name"</span>,</span>
<span id="cb38-36"><a href="#cb38-36" aria-hidden="true" tabindex="-1"/>        <span class="at">y =</span> <span class="st">"Occurrences"</span>,</span>
<span id="cb38-37"><a href="#cb38-37" aria-hidden="true" tabindex="-1"/>        <span class="at">fill =</span> <span class="st">"Sex"</span></span>
<span id="cb38-38"><a href="#cb38-38" aria-hidden="true" tabindex="-1"/>      )</span>
<span id="cb38-39"><a href="#cb38-39" aria-hidden="true" tabindex="-1"/>  })</span>
<span id="cb38-40"><a href="#cb38-40" aria-hidden="true" tabindex="-1"/>}</span>
<span id="cb38-41"><a href="#cb38-41" aria-hidden="true" tabindex="-1"/></span>
<span id="cb38-42"><a href="#cb38-42" aria-hidden="true" tabindex="-1"/><span class="co"># Run the application</span></span>
<span id="cb38-43"><a href="#cb38-43" aria-hidden="true" tabindex="-1"/><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<p>We have just build an interactive graph where the number of bins can be changed. It should look like <a href="#fig-shinyone" class="quarto-xref">Figure <span>5.23</span></a>.</p>
<div id="fig-shinyone" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-shinyone-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/a8f2f2339dcde154ff14df52c4bdf5e7.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%" data-original-src="https://tellingstorieswithdata.com/figures/22-shiny_one.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-shinyone-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.23: Example of Shiny app where the user controls the number of bins
</figcaption>
</figure>
</div>
</section>
</section>
<section id="tables" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="tables"><span class="header-section-number">5.3</span> Tables</h2>
<p>Tables are an important part of telling a compelling story. Tables can communicate less information than a graph, but they do so at a high fidelity. They are especially useful to highlight a few specific values <span class="citation" data-cites="andersen2021presenting">(<a href="99-references.html#ref-andersen2021presenting" role="doc-biblioref">Andersen and Armstrong 2021</a>)</span>. In this book, we primarily use tables in three ways:</p>
<ol type="1">
<li>To show an extract of the dataset.</li>
<li>To communicate summary statistics.</li>
<li>To display regression results.</li>
</ol>
<section id="showing-part-of-a-dataset" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="showing-part-of-a-dataset"><span class="header-section-number">5.3.1</span> Showing part of a dataset</h3>
<p>We illustrate showing part of a dataset using <code>tt()</code> from <code>tinytable</code>. We use the World Bank dataset that we downloaded earlier and focus on inflation, GDP growth, and population as unemployment data are not available for every year for every country.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="ot">&lt;-</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"/>  world_bank_data <span class="sc">|&gt;</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">select</span>(<span class="sc">-</span>unem_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<p>To begin, after installing and loading <code>tinytable</code>, we can display the first ten rows with the default <code>tt()</code> settings.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">tt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output-display">
<!-- preamble start -->

    

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_i29quxbzhlntx3kiix2l, .table th.tinytable_css_i29quxbzhlntx3kiix2l { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_34igob8e3cd3x5mgua1e, .table th.tinytable_css_34igob8e3cd3x5mgua1e { border-bottom: solid #d3d8dc 0.1em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_dgfx4yv9zhbtmncs4ume" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col">country</th>
                <th scope="col">year</th>
                <th scope="col">inflation</th>
                <th scope="col">gdp_growth</th>
                <th scope="col">population</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>Australia</td>
                  <td>1960</td>
                  <td> 3.7288136</td>
                  <td>      NA</td>
                  <td>10276477</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1961</td>
                  <td> 2.2875817</td>
                  <td>2.482656</td>
                  <td>10483000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1962</td>
                  <td>-0.3194888</td>
                  <td>1.294611</td>
                  <td>10742000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1963</td>
                  <td> 0.6410256</td>
                  <td>6.216107</td>
                  <td>10950000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1964</td>
                  <td> 2.8662420</td>
                  <td>6.980061</td>
                  <td>11167000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1965</td>
                  <td> 3.4055728</td>
                  <td>5.980438</td>
                  <td>11388000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1966</td>
                  <td> 3.2934132</td>
                  <td>2.379040</td>
                  <td>11651000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1967</td>
                  <td> 3.4782609</td>
                  <td>6.304945</td>
                  <td>11799000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1968</td>
                  <td> 2.5210084</td>
                  <td>5.094034</td>
                  <td>12009000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1969</td>
                  <td> 3.2786885</td>
                  <td>7.045584</td>
                  <td>12263000</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
<p>To be able to cross-reference a table in the text, we need to add a table caption and label to the R chunk as shown in <a href="03-workflow.html#sec-quartocrossreferences" class="quarto-xref"><span>Section 3.2.7</span></a> of <a href="03-workflow.html" class="quarto-xref"><span>Chapter 3</span></a>. We can also make the column names more informative with <code>setNames</code> and specify the number of digits to be displayed (<a href="#tbl-gdpfirst" class="quarto-xref">Table <span>5.3</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"/><span class="in">```{r}</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"/><span class="in">#| label: tbl-gdpfirst</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"/><span class="in">#| message: false</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"/><span class="in">#| tbl-cap: "A dataset of economic indicators for four countries"</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"/></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"/><span class="in">world_bank_data |&gt;</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"/><span class="in">  slice(1:10) |&gt;</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"/><span class="in">  tt() |&gt; </span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"/><span class="in">  style_tt(j = 2:5, align = "r") |&gt; </span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"/><span class="in">  format_tt(digits = 1, num_fmt = "decimal") |&gt; </span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"/><span class="in">  setNames(c("Country", "Year", "Inflation", "GDP growth", "Population"))</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"/><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="tbl-gdpfirst" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-gdpfirst-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 5.3: A dataset of economic indicators for four countries
</figcaption>
<div aria-describedby="tbl-gdpfirst-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_xsyjmzna974kxpmilr2g, .table th.tinytable_css_xsyjmzna974kxpmilr2g { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_naemzrmqzh19gwl4ufja, .table th.tinytable_css_naemzrmqzh19gwl4ufja { text-align: right; }
      .table td.tinytable_css_bphvjviifriv73hgpoaw, .table th.tinytable_css_bphvjviifriv73hgpoaw { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_70okvx3qfwzxuz4sej9p, .table th.tinytable_css_70okvx3qfwzxuz4sej9p { border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_6hceuii1ovtlazfgunsu, .table th.tinytable_css_6hceuii1ovtlazfgunsu { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_oy8t6yc121mzuigt513s" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col">Country</th>
                <th scope="col">Year</th>
                <th scope="col">Inflation</th>
                <th scope="col">GDP growth</th>
                <th scope="col">Population</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>Australia</td>
                  <td>1960</td>
                  <td>3.7</td>
                  <td/>
                  <td>10276477</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1961</td>
                  <td>2.3</td>
                  <td>2.5</td>
                  <td>10483000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1962</td>
                  <td>-0.3</td>
                  <td>1.3</td>
                  <td>10742000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1963</td>
                  <td>0.6</td>
                  <td>6.2</td>
                  <td>10950000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1964</td>
                  <td>2.9</td>
                  <td>7</td>
                  <td>11167000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1965</td>
                  <td>3.4</td>
                  <td>6</td>
                  <td>11388000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1966</td>
                  <td>3.3</td>
                  <td>2.4</td>
                  <td>11651000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1967</td>
                  <td>3.5</td>
                  <td>6.3</td>
                  <td>11799000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1968</td>
                  <td>2.5</td>
                  <td>5.1</td>
                  <td>12009000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1969</td>
                  <td>3.3</td>
                  <td>7</td>
                  <td>12263000</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="improving-the-formatting" class="level3" data-number="5.3.2">
<h3 data-number="5.3.2" class="anchored" data-anchor-id="improving-the-formatting"><span class="header-section-number">5.3.2</span> Improving the formatting</h3>
<p>We can specify the alignment of the columns using <code>style_tt()</code> and a character vector of “l” (left), “c” (center), and “r” (right) (<a href="#tbl-gdpalign" class="quarto-xref">Table <span>5.4</span></a>). We specify which columns this applies to by using <code>j</code> and specifying the column number. Additionally, we can change the formatting. For instance, we could specify groupings for numbers that are at least 1,000 using <code>num_mark_big = ","</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.factor</span>(year)) <span class="sc">|&gt;</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">tt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">style_tt</span>(<span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">align =</span> <span class="st">"lccrr"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">format_tt</span>(<span class="at">digits =</span> <span class="dv">1</span>, <span class="at">num_mark_big =</span> <span class="st">","</span>, <span class="at">num_fmt =</span> <span class="st">"decimal"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"/>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">"Country"</span>, <span class="st">"Year"</span>, <span class="st">"Inflation"</span>, <span class="st">"GDP growth"</span>, <span class="st">"Population"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="tbl-gdpalign" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-gdpalign-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 5.4: First ten rows of a dataset of economic indicators for Australia, Ethiopia, India, and the United States
</figcaption>
<div aria-describedby="tbl-gdpalign-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_z1bs3mgmp0lubagemmjb, .table th.tinytable_css_z1bs3mgmp0lubagemmjb { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_ppwvaktvvzk0dx12fg0f, .table th.tinytable_css_ppwvaktvvzk0dx12fg0f { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_ntwmcb6flwh4756raxvg, .table th.tinytable_css_ntwmcb6flwh4756raxvg { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_new8o2fi7worulme85ts, .table th.tinytable_css_new8o2fi7worulme85ts { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_khy932xgmf9k6m0bmo35, .table th.tinytable_css_khy932xgmf9k6m0bmo35 { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_khxdgq4an5i4w2snyt7c, .table th.tinytable_css_khxdgq4an5i4w2snyt7c { text-align: center; }
      .table td.tinytable_css_59s2wjvz74bmihze6wus, .table th.tinytable_css_59s2wjvz74bmihze6wus { text-align: right; }
      .table td.tinytable_css_4en94gq1ygqhknl1r7ls, .table th.tinytable_css_4en94gq1ygqhknl1r7ls { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_055i9bfzn3ihh8ctv1ul, .table th.tinytable_css_055i9bfzn3ihh8ctv1ul { text-align: left; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_3r37hve555fs9jfxs0iy" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col">Country</th>
                <th scope="col">Year</th>
                <th scope="col">Inflation</th>
                <th scope="col">GDP growth</th>
                <th scope="col">Population</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>Australia</td>
                  <td>1960</td>
                  <td>3.7</td>
                  <td/>
                  <td>10,276,477</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1961</td>
                  <td>2.3</td>
                  <td>2.5</td>
                  <td>10,483,000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1962</td>
                  <td>-0.3</td>
                  <td>1.3</td>
                  <td>10,742,000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1963</td>
                  <td>0.6</td>
                  <td>6.2</td>
                  <td>10,950,000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1964</td>
                  <td>2.9</td>
                  <td>7</td>
                  <td>11,167,000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1965</td>
                  <td>3.4</td>
                  <td>6</td>
                  <td>11,388,000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1966</td>
                  <td>3.3</td>
                  <td>2.4</td>
                  <td>11,651,000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1967</td>
                  <td>3.5</td>
                  <td>6.3</td>
                  <td>11,799,000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1968</td>
                  <td>2.5</td>
                  <td>5.1</td>
                  <td>12,009,000</td>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>1969</td>
                  <td>3.3</td>
                  <td>7</td>
                  <td>12,263,000</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="communicating-summary-statistics" class="level3" data-number="5.3.3">
<h3 data-number="5.3.3" class="anchored" data-anchor-id="communicating-summary-statistics"><span class="header-section-number">5.3.3</span> Communicating summary statistics</h3>
<p>After installing and loading <code>modelsummary</code> we can use <code>datasummary_skim()</code> to create tables of summary statistics from our dataset.</p>
<p>We can use this to get a table such as <a href="#tbl-testdatasummarynormal" class="quarto-xref">Table <span>5.5</span></a>. That might be useful for exploratory data analysis, which we cover in <a href="11-eda.html" class="quarto-xref"><span>Chapter 11</span></a>. (Here we remove population to save space and do not include a histogram of each variable.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">select</span>(<span class="sc">-</span>population) <span class="sc">|&gt;</span> </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">datasummary_skim</span>(<span class="at">histogram =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="tbl-testdatasummarynormal" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-testdatasummarynormal-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 5.5: Summary of economic indicator variables for four countries
</figcaption>
<div aria-describedby="tbl-testdatasummarynormal-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_us7xmcifb9k559hydpod, .table th.tinytable_css_us7xmcifb9k559hydpod { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_j9c00ls5p9m6j8tw80wj, .table th.tinytable_css_j9c00ls5p9m6j8tw80wj { border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_g02m3z1m5hp62cibl8d1, .table th.tinytable_css_g02m3z1m5hp62cibl8d1 { border-top: solid black 0.1em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_g85bovxknhmpx6urobjk" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">Unique</th>
                <th scope="col">Missing Pct.</th>
                <th scope="col">Mean</th>
                <th scope="col">SD</th>
                <th scope="col">Min</th>
                <th scope="col">Median</th>
                <th scope="col">Max</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>year</td>
                  <td>62</td>
                  <td>0</td>
                  <td>1990.5</td>
                  <td>17.9</td>
                  <td>1960.0</td>
                  <td>1990.5</td>
                  <td>2021.0</td>
                </tr>
                <tr>
                  <td>inflation</td>
                  <td>243</td>
                  <td>2</td>
                  <td>6.1</td>
                  <td>6.5</td>
                  <td>-9.8</td>
                  <td>4.3</td>
                  <td>44.4</td>
                </tr>
                <tr>
                  <td>gdp_growth</td>
                  <td>224</td>
                  <td>10</td>
                  <td>4.2</td>
                  <td>3.7</td>
                  <td>-11.1</td>
                  <td>3.9</td>
                  <td>13.9</td>
                </tr>
                <tr>
                  <td>country</td>
                  <td>N</td>
                  <td>%</td>
                  <td/>
                  <td/>
                  <td/>
                  <td/>
                  <td/>
                </tr>
                <tr>
                  <td>Australia</td>
                  <td>62</td>
                  <td>25.0</td>
                  <td/>
                  <td/>
                  <td/>
                  <td/>
                  <td/>
                </tr>
                <tr>
                  <td>Ethiopia</td>
                  <td>62</td>
                  <td>25.0</td>
                  <td/>
                  <td/>
                  <td/>
                  <td/>
                  <td/>
                </tr>
                <tr>
                  <td>India</td>
                  <td>62</td>
                  <td>25.0</td>
                  <td/>
                  <td/>
                  <td/>
                  <td/>
                  <td/>
                </tr>
                <tr>
                  <td>United States</td>
                  <td>62</td>
                  <td>25.0</td>
                  <td/>
                  <td/>
                  <td/>
                  <td/>
                  <td/>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<p>By default, <code>datasummary_skim()</code> summarizes the numeric variables, but we can ask for the categorical variables (<a href="#tbl-testdatasummary" class="quarto-xref">Table <span>5.6</span></a>). Additionally we can add cross-references in the same way as <code>kable()</code>, that is, include a “tbl-cap” entry and then cross-reference the name of the R chunk.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">datasummary_skim</span>(<span class="at">type =</span> <span class="st">"categorical"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="tbl-testdatasummary" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-testdatasummary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 5.6: Summary of categorical economic indicator variables for four countries
</figcaption>
<div aria-describedby="tbl-testdatasummary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_t594plbk8t7xwjfncee3, .table th.tinytable_css_t594plbk8t7xwjfncee3 { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_sql4bxbsepbg1jlevgj5, .table th.tinytable_css_sql4bxbsepbg1jlevgj5 { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_s6o0imvx1qnnnox0l4w5, .table th.tinytable_css_s6o0imvx1qnnnox0l4w5 { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_aw32yl2897elb80hmtiw, .table th.tinytable_css_aw32yl2897elb80hmtiw { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_1aiwx8otcmx89digtpb6, .table th.tinytable_css_1aiwx8otcmx89digtpb6 { text-align: left; }
      .table td.tinytable_css_0984sv72goxmw7f7y11j, .table th.tinytable_css_0984sv72goxmw7f7y11j { text-align: right; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_a65hzvpxzx8krwgqwhs6" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col">country</th>
                <th scope="col">N</th>
                <th scope="col">%</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>Australia    </td>
                  <td>62</td>
                  <td>25.0</td>
                </tr>
                <tr>
                  <td>Ethiopia     </td>
                  <td>62</td>
                  <td>25.0</td>
                </tr>
                <tr>
                  <td>India        </td>
                  <td>62</td>
                  <td>25.0</td>
                </tr>
                <tr>
                  <td>United States</td>
                  <td>62</td>
                  <td>25.0</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<p>We can create a table that shows the correlation between variables using <code>datasummary_correlation()</code> (<a href="#tbl-correlationtable" class="quarto-xref">Table <span>5.7</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"/>world_bank_data <span class="sc">|&gt;</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">datasummary_correlation</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="tbl-correlationtable" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-correlationtable-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 5.7: Correlation between the economic indicator variables for four countries (Australia, Ethiopia, India, and the United States)
</figcaption>
<div aria-describedby="tbl-correlationtable-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_sr2rp9oteyn3norq7fky, .table th.tinytable_css_sr2rp9oteyn3norq7fky { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_pikimm4zdqfjsz00oeym, .table th.tinytable_css_pikimm4zdqfjsz00oeym { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_m5mxdotbtt5pw4wdflkp, .table th.tinytable_css_m5mxdotbtt5pw4wdflkp { text-align: right; }
      .table td.tinytable_css_jlk47l3qvbzcmfqdwj7q, .table th.tinytable_css_jlk47l3qvbzcmfqdwj7q { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_5w1fgv4vg8n991wez6zv, .table th.tinytable_css_5w1fgv4vg8n991wez6zv { text-align: left; }
      .table td.tinytable_css_0ji4f58pfcgicq98xpp9, .table th.tinytable_css_0ji4f58pfcgicq98xpp9 { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_16uxpmphjvtjyxy6wqz3" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">year</th>
                <th scope="col">inflation</th>
                <th scope="col">gdp_growth</th>
                <th scope="col">population</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>year      </td>
                  <td>1  </td>
                  <td>.  </td>
                  <td>.  </td>
                  <td>.</td>
                </tr>
                <tr>
                  <td>inflation </td>
                  <td>.03</td>
                  <td>1  </td>
                  <td>.  </td>
                  <td>.</td>
                </tr>
                <tr>
                  <td>gdp_growth</td>
                  <td>.11</td>
                  <td>.01</td>
                  <td>1  </td>
                  <td>.</td>
                </tr>
                <tr>
                  <td>population</td>
                  <td>.25</td>
                  <td>.06</td>
                  <td>.16</td>
                  <td>1</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<p>We typically need a table of descriptive statistics that we could add to our paper (<a href="#tbl-descriptivestats" class="quarto-xref">Table <span>5.8</span></a>). This contrasts with <a href="#tbl-testdatasummary" class="quarto-xref">Table <span>5.6</span></a> which would likely not be included in the main section of a paper, and is more to help us understand the data. We can add a note about the source of the data using <code>notes</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"/><span class="fu">datasummary_balance</span>(</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"/>  <span class="at">formula =</span> <span class="sc">~</span>country,</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"/>  <span class="at">data =</span> world_bank_data <span class="sc">|&gt;</span> </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"/>    <span class="fu">filter</span>(country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Australia"</span>, <span class="st">"Ethiopia"</span>)),</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"/>  <span class="at">dinm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"/>  <span class="at">notes =</span> <span class="st">"Data source: World Bank."</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"/>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="tbl-descriptivestats" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-descriptivestats-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 5.8: Descriptive statistics for the inflation and GDP dataset
</figcaption>
<div aria-describedby="tbl-descriptivestats-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_z1b16ce44w7hxubavfc1, .table th.tinytable_css_z1b16ce44w7hxubavfc1 { text-align: right; text-align: center; border-top: solid #d3d8dc 0.1em; text-align: center; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_y06a8bmuqdqm075fey67, .table th.tinytable_css_y06a8bmuqdqm075fey67 { text-align: left; text-align: center; border-top: solid #d3d8dc 0.1em; text-align: center; }
      .table td.tinytable_css_v2sxo10vqvhes839lywp, .table th.tinytable_css_v2sxo10vqvhes839lywp { text-align: left; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_tu0pnkp3ereebqn8v8bx, .table th.tinytable_css_tu0pnkp3ereebqn8v8bx { text-align: right; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_ragvxn44hrxi8s0124gf, .table th.tinytable_css_ragvxn44hrxi8s0124gf { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_ezy4bbsh6obazoad7d59, .table th.tinytable_css_ezy4bbsh6obazoad7d59 { text-align: right; }
      .table td.tinytable_css_5fhn2mmex2dubqcxai75, .table th.tinytable_css_5fhn2mmex2dubqcxai75 { text-align: right; text-align: center; border-top: solid #d3d8dc 0.1em; text-align: center; }
      .table td.tinytable_css_50gu0zkks2jtmpqpq4yu, .table th.tinytable_css_50gu0zkks2jtmpqpq4yu { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_0esmgydy45a49zp7hfmi, .table th.tinytable_css_0esmgydy45a49zp7hfmi { text-align: left; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_khytpbk4kie88nsbu893" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
<tr>
<th scope="col" align="center" colspan="1"> </th>
<th scope="col" align="center" colspan="2">Australia (N=62)</th>
<th scope="col" align="center" colspan="2">Ethiopia (N=62)</th>
</tr>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">Mean</th>
                <th scope="col">Std. Dev.</th>
                <th scope="col">Mean</th>
                <th scope="col">Std. Dev.</th>
              </tr>
        </thead>
        <tfoot><tr><td colspan="5">Data source: World Bank.</td></tr></tfoot>
        <tbody>
                <tr>
                  <td>year      </td>
                  <td>1990.5    </td>
                  <td>18.0     </td>
                  <td>1990.5    </td>
                  <td>18.0      </td>
                </tr>
                <tr>
                  <td>inflation </td>
                  <td>4.7       </td>
                  <td>3.8      </td>
                  <td>9.1       </td>
                  <td>10.6      </td>
                </tr>
                <tr>
                  <td>gdp_growth</td>
                  <td>3.4       </td>
                  <td>1.8      </td>
                  <td>5.9       </td>
                  <td>6.4       </td>
                </tr>
                <tr>
                  <td>population</td>
                  <td>17351313.1</td>
                  <td>4407899.0</td>
                  <td>57185292.0</td>
                  <td>29328845.8</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="display-regression-results" class="level3" data-number="5.3.4">
<h3 data-number="5.3.4" class="anchored" data-anchor-id="display-regression-results"><span class="header-section-number">5.3.4</span> Display regression results</h3>
<p>We can report regression results using <code>modelsummary()</code> from <code>modelsummary</code>. For instance, we could display the estimates from a few different models (<a href="#tbl-twomodels" class="quarto-xref">Table <span>5.9</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"/>first_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"/>  <span class="at">formula =</span> gdp_growth <span class="sc">~</span> inflation,</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"/>  <span class="at">data =</span> world_bank_data</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"/>)</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"/></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"/>second_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"/>  <span class="at">formula =</span> gdp_growth <span class="sc">~</span> inflation <span class="sc">+</span> country,</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"/>  <span class="at">data =</span> world_bank_data</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"/>)</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"/></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"/>third_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"/>  <span class="at">formula =</span> gdp_growth <span class="sc">~</span> inflation <span class="sc">+</span> country <span class="sc">+</span> population,</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"/>  <span class="at">data =</span> world_bank_data</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"/>)</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"/></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"/><span class="fu">modelsummary</span>(<span class="fu">list</span>(first_model, second_model, third_model))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="tbl-twomodels" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-twomodels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 5.9: Explaining GDP as a function of inflation
</figcaption>
<div aria-describedby="tbl-twomodels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_zvnuqetx4qeu7kyy8yj3, .table th.tinytable_css_zvnuqetx4qeu7kyy8yj3 { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_u4re20vibgsua68tsxuw, .table th.tinytable_css_u4re20vibgsua68tsxuw { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_u1r0mrroovb17f5t2v5p, .table th.tinytable_css_u1r0mrroovb17f5t2v5p { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_t9mh8v8qqnlrwcxefkin, .table th.tinytable_css_t9mh8v8qqnlrwcxefkin { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_s7s8n01p1k9sggthwvas, .table th.tinytable_css_s7s8n01p1k9sggthwvas { text-align: center; }
      .table td.tinytable_css_id6wpl0l9irygdiqu81a, .table th.tinytable_css_id6wpl0l9irygdiqu81a { text-align: left; }
      .table td.tinytable_css_coje453bwhsdiue88i7r, .table th.tinytable_css_coje453bwhsdiue88i7r { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_65y36ox3wmotbqvo2dea, .table th.tinytable_css_65y36ox3wmotbqvo2dea { text-align: left; border-bottom: solid black 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_y1pg5401gwp21crf52tw" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
                <th scope="col">(2)</th>
                <th scope="col">(3)</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>(Intercept)         </td>
                  <td>4.147   </td>
                  <td>3.676   </td>
                  <td>3.611   </td>
                </tr>
                <tr>
                  <td>                    </td>
                  <td>(0.343) </td>
                  <td>(0.484) </td>
                  <td>(0.482) </td>
                </tr>
                <tr>
                  <td>inflation           </td>
                  <td>0.006   </td>
                  <td>-0.068  </td>
                  <td>-0.065  </td>
                </tr>
                <tr>
                  <td>                    </td>
                  <td>(0.039) </td>
                  <td>(0.040) </td>
                  <td>(0.039) </td>
                </tr>
                <tr>
                  <td>countryEthiopia     </td>
                  <td>        </td>
                  <td>2.896   </td>
                  <td>2.716   </td>
                </tr>
                <tr>
                  <td>                    </td>
                  <td>        </td>
                  <td>(0.740) </td>
                  <td>(0.740) </td>
                </tr>
                <tr>
                  <td>countryIndia        </td>
                  <td>        </td>
                  <td>1.916   </td>
                  <td>-0.730  </td>
                </tr>
                <tr>
                  <td>                    </td>
                  <td>        </td>
                  <td>(0.642) </td>
                  <td>(1.465) </td>
                </tr>
                <tr>
                  <td>countryUnited States</td>
                  <td>        </td>
                  <td>-0.436  </td>
                  <td>-1.145  </td>
                </tr>
                <tr>
                  <td>                    </td>
                  <td>        </td>
                  <td>(0.633) </td>
                  <td>(0.722) </td>
                </tr>
                <tr>
                  <td>population          </td>
                  <td>        </td>
                  <td>        </td>
                  <td>0.000   </td>
                </tr>
                <tr>
                  <td>                    </td>
                  <td>        </td>
                  <td>        </td>
                  <td>(0.000) </td>
                </tr>
                <tr>
                  <td>Num.Obs.            </td>
                  <td>223     </td>
                  <td>223     </td>
                  <td>223     </td>
                </tr>
                <tr>
                  <td>R2                  </td>
                  <td>0.000   </td>
                  <td>0.111   </td>
                  <td>0.127   </td>
                </tr>
                <tr>
                  <td>R2 Adj.             </td>
                  <td>-0.004  </td>
                  <td>0.095   </td>
                  <td>0.107   </td>
                </tr>
                <tr>
                  <td>AIC                 </td>
                  <td>1217.7  </td>
                  <td>1197.5  </td>
                  <td>1195.4  </td>
                </tr>
                <tr>
                  <td>BIC                 </td>
                  <td>1227.9  </td>
                  <td>1217.9  </td>
                  <td>1219.3  </td>
                </tr>
                <tr>
                  <td>Log.Lik.            </td>
                  <td>-605.861</td>
                  <td>-592.752</td>
                  <td>-590.704</td>
                </tr>
                <tr>
                  <td>F                   </td>
                  <td>0.024   </td>
                  <td>6.806   </td>
                  <td>        </td>
                </tr>
                <tr>
                  <td>RMSE                </td>
                  <td>3.66    </td>
                  <td>3.45    </td>
                  <td>3.42    </td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<p>The number of significant digits can be adjusted with “fmt” (<a href="#tbl-twomodelstwo" class="quarto-xref">Table <span>5.10</span></a>). To help establish credibility you should generally not add as many significant digits as possible <span class="citation" data-cites="howes2022representing">(<a href="99-references.html#ref-howes2022representing" role="doc-biblioref">Howes 2022</a>)</span>. Instead, you should think carefully about the data-generating process and adjust based on that.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"/><span class="fu">modelsummary</span>(</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">list</span>(first_model, second_model, third_model),</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"/>  <span class="at">fmt =</span> <span class="dv">1</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"/>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="tbl-twomodelstwo" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-twomodelstwo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 5.10: Three models of GDP as a function of inflation
</figcaption>
<div aria-describedby="tbl-twomodelstwo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_xpr3fnnnmhdxmix97c3x, .table th.tinytable_css_xpr3fnnnmhdxmix97c3x { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_qid3s1skii3p17jr7fle, .table th.tinytable_css_qid3s1skii3p17jr7fle { text-align: center; }
      .table td.tinytable_css_oxklrzqoria9h93fmmbf, .table th.tinytable_css_oxklrzqoria9h93fmmbf { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_jlq1y81d6lhmsb74h7ah, .table th.tinytable_css_jlq1y81d6lhmsb74h7ah { text-align: left; }
      .table td.tinytable_css_dl637ii7kwjibnjoi47u, .table th.tinytable_css_dl637ii7kwjibnjoi47u { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_89ndubxdqstcr7um4vsu, .table th.tinytable_css_89ndubxdqstcr7um4vsu { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_6k8m7ppf5xb0hus60bkz, .table th.tinytable_css_6k8m7ppf5xb0hus60bkz { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_1572ik8a7u10kwe9ihd8, .table th.tinytable_css_1572ik8a7u10kwe9ihd8 { text-align: left; border-bottom: solid black 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_k5x3y9hr21dc6vi2xmmh" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
                <th scope="col">(2)</th>
                <th scope="col">(3)</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>(Intercept)         </td>
                  <td>4.1     </td>
                  <td>3.7     </td>
                  <td>3.6     </td>
                </tr>
                <tr>
                  <td>                    </td>
                  <td>(0.3)   </td>
                  <td>(0.5)   </td>
                  <td>(0.5)   </td>
                </tr>
                <tr>
                  <td>inflation           </td>
                  <td>0.0     </td>
                  <td>-0.1    </td>
                  <td>-0.1    </td>
                </tr>
                <tr>
                  <td>                    </td>
                  <td>(0.0)   </td>
                  <td>(0.0)   </td>
                  <td>(0.0)   </td>
                </tr>
                <tr>
                  <td>countryEthiopia     </td>
                  <td>        </td>
                  <td>2.9     </td>
                  <td>2.7     </td>
                </tr>
                <tr>
                  <td>                    </td>
                  <td>        </td>
                  <td>(0.7)   </td>
                  <td>(0.7)   </td>
                </tr>
                <tr>
                  <td>countryIndia        </td>
                  <td>        </td>
                  <td>1.9     </td>
                  <td>-0.7    </td>
                </tr>
                <tr>
                  <td>                    </td>
                  <td>        </td>
                  <td>(0.6)   </td>
                  <td>(1.5)   </td>
                </tr>
                <tr>
                  <td>countryUnited States</td>
                  <td>        </td>
                  <td>-0.4    </td>
                  <td>-1.1    </td>
                </tr>
                <tr>
                  <td>                    </td>
                  <td>        </td>
                  <td>(0.6)   </td>
                  <td>(0.7)   </td>
                </tr>
                <tr>
                  <td>population          </td>
                  <td>        </td>
                  <td>        </td>
                  <td>0.0     </td>
                </tr>
                <tr>
                  <td>                    </td>
                  <td>        </td>
                  <td>        </td>
                  <td>(0.0)   </td>
                </tr>
                <tr>
                  <td>Num.Obs.            </td>
                  <td>223     </td>
                  <td>223     </td>
                  <td>223     </td>
                </tr>
                <tr>
                  <td>R2                  </td>
                  <td>0.000   </td>
                  <td>0.111   </td>
                  <td>0.127   </td>
                </tr>
                <tr>
                  <td>R2 Adj.             </td>
                  <td>-0.004  </td>
                  <td>0.095   </td>
                  <td>0.107   </td>
                </tr>
                <tr>
                  <td>AIC                 </td>
                  <td>1217.7  </td>
                  <td>1197.5  </td>
                  <td>1195.4  </td>
                </tr>
                <tr>
                  <td>BIC                 </td>
                  <td>1227.9  </td>
                  <td>1217.9  </td>
                  <td>1219.3  </td>
                </tr>
                <tr>
                  <td>Log.Lik.            </td>
                  <td>-605.861</td>
                  <td>-592.752</td>
                  <td>-590.704</td>
                </tr>
                <tr>
                  <td>F                   </td>
                  <td>0.024   </td>
                  <td>6.806   </td>
                  <td>        </td>
                </tr>
                <tr>
                  <td>RMSE                </td>
                  <td>3.66    </td>
                  <td>3.45    </td>
                  <td>3.42    </td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="maps" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="maps"><span class="header-section-number">5.4</span> Maps</h2>
<p>In many ways maps can be thought of as another type of graph, where the x-axis is latitude, the y-axis is longitude, and there is some outline or background image. It is possible that they are the oldest and best understood type of chart <span class="citation" data-cites="karsetn">(<a href="99-references.html#ref-karsetn" role="doc-biblioref">Karsten 1923, 1</a>)</span>. We can generate a map in a straight-forward manner. That said, it is not to be taken lightly; things quickly get complicated!</p>
<p>The first step is to get some data. There is some geographic data built into <code>ggplot2</code> that we can access with <code>map_data()</code>. There are additional variables in the <code>world.cities</code> dataset from <code>maps</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"/>france <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="at">map =</span> <span class="st">"france"</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"/></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"/><span class="fu">head</span>(france)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      long      lat group order region subregion
1 2.557093 51.09752     1     1   Nord      &lt;NA&gt;
2 2.579995 51.00298     1     2   Nord      &lt;NA&gt;
3 2.609101 50.98545     1     3   Nord      &lt;NA&gt;
4 2.630782 50.95073     1     4   Nord      &lt;NA&gt;
5 2.625894 50.94116     1     5   Nord      &lt;NA&gt;
6 2.597699 50.91967     1     6   Nord      &lt;NA&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"/>french_cities <span class="ot">&lt;-</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"/>  world.cities <span class="sc">|&gt;</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(country.etc <span class="sc">==</span> <span class="st">"France"</span>)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"/></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"/><span class="fu">head</span>(french_cities)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             name country.etc    pop   lat long capital
1       Abbeville      France  26656 50.12 1.83       0
2         Acheres      France  23219 48.97 2.06       0
3            Agde      France  23477 43.33 3.46       0
4            Agen      France  34742 44.20 0.62       0
5 Aire-sur-la-Lys      France  10470 50.64 2.39       0
6 Aix-en-Provence      France 148622 43.53 5.44       0</code></pre>
</div>
</div>
<p>Using that information you can create a map of France that shows the larger cities (<a href="#fig-heyitsfrance" class="quarto-xref">Figure <span>5.24</span></a>). Use <code>geom_polygon()</code> from <code>ggplot2</code> to draw shapes by connecting points within groups. And <code>coord_map()</code> adjusts for the fact that we are making a 2D map to represent a world that is 3D.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"/><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_polygon</span>(</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"/>    <span class="at">data =</span> france,</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"/>    <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group),</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"/>    <span class="at">fill =</span> <span class="st">"white"</span>,</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"/>    <span class="at">colour =</span> <span class="st">"grey"</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">+</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">coord_map</span>() <span class="sc">+</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>(</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"/>    <span class="fu">aes</span>(<span class="at">x =</span> french_cities<span class="sc">$</span>long, <span class="at">y =</span> french_cities<span class="sc">$</span>lat),</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"/>    <span class="at">alpha =</span> <span class="fl">0.3</span>,</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"/>    <span class="at">color =</span> <span class="st">"black"</span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">+</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Longitude"</span>, <span class="at">y =</span> <span class="st">"Latitude"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output-display">
<div id="fig-heyitsfrance" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-heyitsfrance-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/d8a5b96ca8dd4d58fec6e533131d4227.png" class="img-fluid figure-img" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-heyitsfrance-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-heyitsfrance-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.24: Map of France showing the largest cities
</figcaption>
</figure>
</div>
</div>
</div>
<p>As is often the case with R, there are many ways to get started creating static maps. We have seen how they can be built using only <code>ggplot2</code>, but <code>ggmap</code> brings additional functionality.</p>
<p>There are two essential components to a map:</p>
<ol type="1">
<li>a border or background image (sometimes called a tile); and</li>
<li>something of interest within that border, or on top of that tile.</li>
</ol>
<p>In <code>ggmap</code>, we use an open-source option for our tile, Stamen Maps. And we use plot points based on latitude and longitude.</p>
<section id="static-maps" class="level3" data-number="5.4.1">
<h3 data-number="5.4.1" class="anchored" data-anchor-id="static-maps"><span class="header-section-number">5.4.1</span> Static maps</h3>
<section id="australian-polling-places" class="level4" data-number="5.4.1.1">
<h4 data-number="5.4.1.1" class="anchored" data-anchor-id="australian-polling-places"><span class="header-section-number">5.4.1.1</span> Australian polling places</h4>
<p>In Australia, people have to go to “booths” in order to vote. Because the booths have coordinates (latitude and longitude), we can plot them. One reason we may like to do that is to notice spatial voting patterns.</p>
<p>To get started we need to get a tile. We are going to use <code>ggmap</code> to get a tile from Stamen Maps, which builds on <a href="openstreetmap.org">OpenStreetMap</a>. The main argument to this function is to specify a bounding box. A bounding box is the coordinates of the edges that you are interested in. This requires two latitudes and two longitudes.</p>
<p>It can be useful to use Google Maps, or other mapping platform, to find the coordinate values that you need. In this case we have provided it with coordinates such that it will be centered around Australia’s capital Canberra.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"/>bbox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">left =</span> <span class="fl">148.95</span>, <span class="at">bottom =</span> <span class="sc">-</span><span class="fl">35.5</span>, <span class="at">right =</span> <span class="fl">149.3</span>, <span class="at">top =</span> <span class="sc">-</span><span class="fl">35.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<p>It is free, but we need to register in order to get a map. To do this go to https://client.stadiamaps.com/signup/ and create an account. Then create a new property, then “Add API Key”. Copy the key and run (replacing PUT-KEY-HERE with the key) <code>register_stadiamaps(key = "PUT-KEY-HERE", write = TRUE)</code>. Then once you have defined the bounding box, the function <code>get_stadiamap()</code> will get the tiles in that area (<a href="#fig-heyitscanberra" class="quarto-xref">Figure <span>5.25</span></a>). The number of tiles that it needs depends on the zoom, and the type of tiles that it gets depends on the type of map. We have used “toner-lite”, which is black and white, but there are others including: “terrain”, “toner”, and “toner-lines”. We pass the tiles to <code>ggmap()</code> which will plot it. An internet connection is needed for this to work as <code>get_stadiamap()</code> downloads the tiles.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"/>canberra_stamen_map <span class="ot">&lt;-</span> <span class="fu">get_stadiamap</span>(bbox, <span class="at">zoom =</span> <span class="dv">11</span>, <span class="at">maptype =</span> <span class="st">"stamen_toner_lite"</span>)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"/></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"/><span class="fu">ggmap</span>(canberra_stamen_map)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output-display">
<div id="fig-heyitscanberra" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-heyitscanberra-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/3f0671de221e975e1e093d5814338ac9.png" class="img-fluid figure-img" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-heyitscanberra-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-heyitscanberra-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.25: Map of Canberra, Australia
</figcaption>
</figure>
</div>
</div>
</div>
<p>Once we have a map then we can use <code>ggmap()</code> to plot it. Now we want to get some data that we plot on top of our tiles. We will plot the location of the polling place based on its “division”. This is available <a href="https://results.aec.gov.au/20499/Website/Downloads/HouseTppByPollingPlaceDownload-20499.csv">from the Australian Electoral Commission (AEC)</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"/>booths <span class="ot">&lt;-</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">read_csv</span>(</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"/>    <span class="st">"https://results.aec.gov.au/24310/Website/Downloads/GeneralPollingPlacesDownload-24310.csv"</span>,</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"/>    <span class="at">skip =</span> <span class="dv">1</span>,</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"/>    <span class="at">guess_max =</span> <span class="dv">10000</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"/>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<p>This dataset is for the whole of Australia, but as we are only plotting the area around Canberra, we will filter the data to only booths with a geography close to Canberra.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"/>booths_reduced <span class="ot">&lt;-</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"/>  booths <span class="sc">|&gt;</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"ACT"</span>) <span class="sc">|&gt;</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">select</span>(PollingPlaceID, DivisionNm, Latitude, Longitude) <span class="sc">|&gt;</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Longitude)) <span class="sc">|&gt;</span> <span class="co"># Remove rows without geography</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(Longitude <span class="sc">&lt;</span> <span class="dv">165</span>) <span class="co"># Remove Norfolk Island</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<p>Now we can use <code>ggmap</code> in the same way as before to plot our underlying tiles, and then build on that using <code>geom_point()</code> to add our points of interest.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"/><span class="fu">ggmap</span>(canberra_stamen_map, <span class="at">extent =</span> <span class="st">"normal"</span>, <span class="at">maprange =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>(<span class="at">data =</span> booths_reduced,</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"/>             <span class="fu">aes</span>(<span class="at">x =</span> Longitude, <span class="at">y =</span> Latitude, <span class="at">colour =</span> DivisionNm),</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"/>             <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">scale_color_brewer</span>(<span class="at">name =</span> <span class="st">"2019 Division"</span>, <span class="at">palette =</span> <span class="st">"Set1"</span>) <span class="sc">+</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"/>  <span class="fu">coord_map</span>(</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"/>    <span class="at">projection =</span> <span class="st">"mercator"</span>,</span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"/>    <span class="at">xlim =</span> <span class="fu">c</span>(<span class="fu">attr</span>(map, <span class="st">"bb"</span>)<span class="sc">$</span>ll.lon, <span class="fu">attr</span>(map, <span class="st">"bb"</span>)<span class="sc">$</span>ur.lon),</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"/>    <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fu">attr</span>(map, <span class="st">"bb"</span>)<span class="sc">$</span>ll.lat, <span class="fu">attr</span>(map, <span class="st">"bb"</span>)<span class="sc">$</span>ur.lat)</span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">+</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Longitude"</span>,</span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"/>       <span class="at">y =</span> <span class="st">"Latitude"</span>) <span class="sc">+</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"/>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output-display">
<div id="fig-heyitscanberrapolling" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-heyitscanberrapolling-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/aebca0b880bcba8f31bf34cc303c7c08.png" class="img-fluid figure-img" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-heyitscanberrapolling-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-heyitscanberrapolling-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.26: Map of Canberra, Australia, with polling places
</figcaption>
</figure>
</div>
</div>
</div>
<p>We may like to save the map so that we do not have to create it every time, and we can do that in the same way as any other graph, using <code>ggsave()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"/><span class="fu">ggsave</span>(<span class="st">"map.pdf"</span>, <span class="at">width =</span> <span class="dv">20</span>, <span class="at">height =</span> <span class="dv">10</span>, <span class="at">units =</span> <span class="st">"cm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<p>Finally, the reason that we used Stamen Maps and OpenStreetMap is because they are open source, but we could have also used Google Maps. This requires you to first register a credit card with Google, and specify a key, but with low usage the service should be free. Using Google Maps—by using <code>get_googlemap()</code> within <code>ggmap</code>—brings some advantages over <code>get_stadiamap()</code>. For instance it will attempt to find a place name rather than needing to specify a bounding box.</p>
</section>
<section id="united-states-military-bases" class="level4" data-number="5.4.1.2">
<h4 data-number="5.4.1.2" class="anchored" data-anchor-id="united-states-military-bases"><span class="header-section-number">5.4.1.2</span> United States military bases</h4>
<p>To see another example of a static map we will plot some United States military bases after installing and loading <code>troopdata</code>. We can access data about United States overseas military bases back to the start of the Cold War using <code>get_basedata()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"/>bases <span class="ot">&lt;-</span> <span class="fu">get_basedata</span>()</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"/></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"/><span class="fu">head</span>(bases)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 9
  countryname ccode iso3c basename            lat   lon  base lilypad fundedsite
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
1 Afghanistan   700 AFG   Bagram AB          34.9  69.3     1       0          0
2 Afghanistan   700 AFG   Kandahar Airfield  31.5  65.8     1       0          0
3 Afghanistan   700 AFG   Mazar-e-Sharif     36.7  67.2     1       0          0
4 Afghanistan   700 AFG   Gardez             33.6  69.2     1       0          0
5 Afghanistan   700 AFG   Kabul              34.5  69.2     1       0          0
6 Afghanistan   700 AFG   Herat              34.3  62.2     1       0          0</code></pre>
</div>
</div>
<p>We will look at the locations of United States military bases in Germany, Japan, and Australia. The <code>troopdata</code> dataset already has the latitude and longitude of each base, and we will use that as our item of interest. The first step is to define a bounding box for each country.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"/><span class="co"># Use: https://data.humdata.org/dataset/bounding-boxes-for-countries</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"/>bbox_germany <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">left =</span> <span class="fl">5.867</span>, <span class="at">bottom =</span> <span class="fl">45.967</span>, <span class="at">right =</span> <span class="fl">15.033</span>, <span class="at">top =</span> <span class="fl">55.133</span>)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"/></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"/>bbox_japan <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">left =</span> <span class="dv">127</span>, <span class="at">bottom =</span> <span class="dv">30</span>, <span class="at">right =</span> <span class="dv">146</span>, <span class="at">top =</span> <span class="dv">45</span>)</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"/></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"/>bbox_australia <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">left =</span> <span class="fl">112.467</span>, <span class="at">bottom =</span> <span class="sc">-</span><span class="dv">45</span>, <span class="at">right =</span> <span class="dv">155</span>, <span class="at">top =</span> <span class="sc">-</span><span class="fl">9.133</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<p>Then we need to get the tiles using <code>get_stadiamap()</code> from <code>ggmap</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"/>german_stamen_map <span class="ot">&lt;-</span> <span class="fu">get_stadiamap</span>(bbox_germany, <span class="at">zoom =</span> <span class="dv">6</span>, <span class="at">maptype =</span> <span class="st">"stamen_toner_lite"</span>)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"/></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"/>japan_stamen_map <span class="ot">&lt;-</span> <span class="fu">get_stadiamap</span>(bbox_japan, <span class="at">zoom =</span> <span class="dv">6</span>, <span class="at">maptype =</span> <span class="st">"stamen_toner_lite"</span>)</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"/></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"/>aus_stamen_map <span class="ot">&lt;-</span> <span class="fu">get_stadiamap</span>(bbox_australia, <span class="at">zoom =</span> <span class="dv">5</span>, <span class="at">maptype =</span> <span class="st">"stamen_toner_lite"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<p>And finally, we can bring it all together with maps showing United States military bases in Germany (<a href="#fig-mapbasesin-1" class="quarto-xref">Figure <span>5.27 (a)</span></a>), Japan (<a href="#fig-mapbasesin-2" class="quarto-xref">Figure <span>5.27 (b)</span></a>), and Australia (<a href="#fig-mapbasesin-3" class="quarto-xref">Figure <span>5.27 (c)</span></a>).</p>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"/><span class="fu">ggmap</span>(german_stamen_map) <span class="sc">+</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>(<span class="at">data =</span> bases, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat)) <span class="sc">+</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Longitude"</span>,</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"/>       <span class="at">y =</span> <span class="st">"Latitude"</span>) <span class="sc">+</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>()</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"/></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"/><span class="fu">ggmap</span>(japan_stamen_map) <span class="sc">+</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>(<span class="at">data =</span> bases, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat)) <span class="sc">+</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Longitude"</span>,</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"/>       <span class="at">y =</span> <span class="st">"Latitude"</span>) <span class="sc">+</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>()</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"/></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"/><span class="fu">ggmap</span>(aus_stamen_map) <span class="sc">+</span></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>(<span class="at">data =</span> bases, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat)) <span class="sc">+</span></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Longitude"</span>,</span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"/>       <span class="at">y =</span> <span class="st">"Latitude"</span>) <span class="sc">+</span></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-mapbasesin" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mapbasesin-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-mapbasesin" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-mapbasesin-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-mapbasesin-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/95b757979cf41d8f472c88f4d5b5195a.png" class="img-fluid figure-img" data-ref-parent="fig-mapbasesin" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-mapbasesin-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-mapbasesin-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Germany
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-mapbasesin" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-mapbasesin-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-mapbasesin-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/d669cc48db87bd986118097a5e26f746.png" class="img-fluid figure-img" data-ref-parent="fig-mapbasesin" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-mapbasesin-2.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-mapbasesin-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Japan
</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-mapbasesin" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-mapbasesin-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-mapbasesin-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/5d676b56bbe0aaca8d713e5a2fdfce00.png" class="img-fluid figure-img" data-ref-parent="fig-mapbasesin" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-mapbasesin-3.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-mapbasesin-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) Australia
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mapbasesin-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.27: Map of United States military bases in various parts of the world
</figcaption>
</figure>
</div>
</section>
</section>
<section id="geocoding" class="level3" data-number="5.4.2">
<h3 data-number="5.4.2" class="anchored" data-anchor-id="geocoding"><span class="header-section-number">5.4.2</span> Geocoding</h3>
<p>So far we have assumed that we already have geocoded data. This means that we have latitude and longitude coordinates for each place. But sometimes we only have place names, such as “Sydney, Australia”, “Toronto, Canada”, “Accra, Ghana”, and “Guayaquil, Ecuador”. Before we can plot them, we need to get the latitude and longitude coordinates for each case. The process of going from names to coordinates is called geocoding.</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"/>
</div>
<div class="callout-title-container flex-fill">
Oh, you think we have good data on that!
</div>
</div>
<div class="callout-body-container callout-body">
<p>While you almost surely know where you live, it can be surprisingly difficult to specifically define the boundaries of many places. And this is made especially difficult when different levels of government have different definitions. <span class="citation" data-cites="bronnerquantediting">Bronner (<a href="99-references.html#ref-bronnerquantediting" role="doc-biblioref">2021</a>)</span> illustrates this in the case of Atlanta, Georgia, where there are (at least) three official different definitions:</p>
<ol type="1">
<li>the metropolitan statistical area;</li>
<li>the urbanized area; and</li>
<li>the census place.</li>
</ol>
<p>Which definition is used can have a substantial effect on the analysis, or even the data that are available, even though they are all “Atlanta”.</p>
</div>
</div>
<p>There are a range of options to geocode data in R, but <code>tidygeocoder</code> is especially useful. We first need a dataframe of locations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"/>place_names <span class="ot">&lt;-</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">tibble</span>(</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"/>    <span class="at">city =</span> <span class="fu">c</span>(<span class="st">"Sydney"</span>, <span class="st">"Toronto"</span>, <span class="st">"Accra"</span>, <span class="st">"Guayaquil"</span>),</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"/>    <span class="at">country =</span> <span class="fu">c</span>(<span class="st">"Australia"</span>, <span class="st">"Canada"</span>, <span class="st">"Ghana"</span>, <span class="st">"Ecuador"</span>)</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"/>  )</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"/></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"/>place_names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  city      country  
  &lt;chr&gt;     &lt;chr&gt;    
1 Sydney    Australia
2 Toronto   Canada   
3 Accra     Ghana    
4 Guayaquil Ecuador  </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"/>place_names <span class="ot">&lt;-</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">geo</span>(</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"/>    <span class="at">city =</span> place_names<span class="sc">$</span>city,</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"/>    <span class="at">country =</span> place_names<span class="sc">$</span>country,</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"/>    <span class="at">method =</span> <span class="st">"osm"</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"/>  )</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"/></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"/>place_names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  city      country      lat    long
  &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;
1 Sydney    Australia -33.9  151.   
2 Toronto   Canada     43.7  -79.4  
3 Accra     Ghana       5.56  -0.201
4 Guayaquil Ecuador    -2.19 -79.9  </code></pre>
</div>
</div>
<p>And we can now plot and label these cities (<a href="#fig-mynicemap" class="quarto-xref">Figure <span>5.28</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"/>world <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="at">map =</span> <span class="st">"world"</span>)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"/></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"/><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_polygon</span>(</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"/>    <span class="at">data =</span> world,</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"/>    <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group),</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"/>    <span class="at">fill =</span> <span class="st">"white"</span>,</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"/>    <span class="at">colour =</span> <span class="st">"grey"</span></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">+</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>(</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"/>    <span class="fu">aes</span>(<span class="at">x =</span> place_names<span class="sc">$</span>long, <span class="at">y =</span> place_names<span class="sc">$</span>lat),</span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"/>    <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_text</span>(</span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"/>    <span class="fu">aes</span>(<span class="at">x =</span> place_names<span class="sc">$</span>long, <span class="at">y =</span> place_names<span class="sc">$</span>lat, <span class="at">label =</span> place_names<span class="sc">$</span>city),</span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"/>    <span class="at">nudge_y =</span> <span class="sc">-</span><span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Longitude"</span>,</span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"/>       <span class="at">y =</span> <span class="st">"Latitude"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div class="cell-output-display">
<div id="fig-mynicemap" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mynicemap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../Images/3734132803b4f1d66297d784c0725f83.png" class="img-fluid figure-img" width="672" data-original-src="https://tellingstorieswithdata.com/05-graphs_tables_maps_files/figure-html/fig-mynicemap-1.png"/>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mynicemap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.28: Map of Accra, Sydney, Toronto, and Guayaquil after geocoding to obtain their locations
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="interactive-maps" class="level3" data-number="5.4.3">
<h3 data-number="5.4.3" class="anchored" data-anchor-id="interactive-maps"><span class="header-section-number">5.4.3</span> Interactive maps</h3>
<p>The nice thing about interactive maps is that we can let our user decide what they are interested in. For instance, in the case of a map, some people will be interested in, say, Toronto, while others will be interested in Chennai or even Auckland. But it would be difficult to present a map that focused on all of those, so an interactive map is a way to allow users to focus on what they want.</p>
<p>That said, we should be cognizant of what we are doing when we build maps, and more broadly, what is being done at scale to enable us to be able to build our own maps. For instance, with regard to Google, <span class="citation" data-cites="mcquire2019one">McQuire (<a href="99-references.html#ref-mcquire2019one" role="doc-biblioref">2019</a>)</span> says:</p>
<blockquote class="blockquote">
<p>Google began life in 1998 as a company famously dedicated to organising the vast amounts of data on the Internet. But over the last two decades its ambitions have changed in a crucial way. Extracting data such as words and numbers from the physical world is now merely a stepping-stone towards apprehending and organizing the physical world as data. Perhaps this shift is not surprising at a moment when it has become possible to comprehend human identity as a form of (genetic) ‘code’. However, apprehending and organizing the world as data under current settings is likely to take us well beyond Heidegger’s ‘standing reserve’ in which modern technology enframed ‘nature’ as productive resource. In the 21st century, it is the stuff of human life itself—from genetics to bodily appearances, mobility, gestures, speech, and behaviour—that is being progressively rendered as productive resource that can not only be harvested continuously but subject to modulation over time.</p>
</blockquote>
<p>Does this mean that we should not use or build interactive maps? Of course not. But it is important to be aware of the fact that this is a frontier, and the boundaries of appropriate use are still being determined. Indeed, the literal boundaries of the maps themselves are being consistently determined and updated. The move to digital maps, compared with physical printed maps, means that it is possible for different users to be presented with different realities. For instance, “…Google routinely takes sides in border disputes. Take, for instance, the representation of the border between Ukraine and Russia. In Russia, the Crimean Peninsula is represented with a hard-line border as Russian-controlled, whereas Ukrainians and others see a dotted-line border. The strategically important peninsula is claimed by both nations and was violently seized by Russia in 2014, one of many skirmishes over control” <span class="citation" data-cites="washingtonpostmaps">(<a href="99-references.html#ref-washingtonpostmaps" role="doc-biblioref">Bensinger 2020</a>)</span>.</p>
<section id="leaflet" class="level4" data-number="5.4.3.1">
<h4 data-number="5.4.3.1" class="anchored" data-anchor-id="leaflet"><span class="header-section-number">5.4.3.1</span> Leaflet</h4>
<p>We can use <code>leaflet</code> <span class="citation" data-cites="ChengKarambelkarXie2017">(<a href="99-references.html#ref-ChengKarambelkarXie2017" role="doc-biblioref">Cheng, Karambelkar, and Xie 2021</a>)</span> to make interactive maps. The essentials are similar to <code>ggmap</code> <span class="citation" data-cites="KahleWickham2013">(<a href="99-references.html#ref-KahleWickham2013" role="doc-biblioref">Kahle and Wickham 2013</a>)</span>, but there are many additional aspects beyond that. We can redo the US military deployments map from <a href="#sec-static-communication" class="quarto-xref"><span>Chapter 5</span></a> that used <code>troopdata</code> <span class="citation" data-cites="troopdata">(<a href="99-references.html#ref-troopdata" role="doc-biblioref">Flynn 2022</a>)</span>. The advantage with an interactive map is that we can plot all the bases and allow the user to focus on which area they want, in comparison with <a href="#sec-static-communication" class="quarto-xref"><span>Chapter 5</span></a> where we just picked a few particular countries. A great example of why this might be useful is provided by <span class="citation" data-cites="theeconomistmaps">The Economist (<a href="99-references.html#ref-theeconomistmaps" role="doc-biblioref">2022b</a>)</span> where they are able to show 2022 French Presidential results for the entire country by commune.</p>
<p>In the same way as a graph in <code>ggplot2</code> begins with <code>ggplot()</code>, a map in <code>leaflet</code> begins with <code>leaflet()</code>. Here we can specify data, and other options such as width and height. After this, we add “layers” in the same way that we added them in <code>ggplot2</code>. The first layer that we add is a tile, using <code>addTiles()</code>. In this case, the default is from OpenStreeMap. After that we add markers with <code>addMarkers()</code> to show the location of each base (<a href="#fig-canhasbase" class="quarto-xref">Figure <span>5.29</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"/>bases <span class="ot">&lt;-</span> <span class="fu">get_basedata</span>()</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"/></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"/><span class="co"># Some of the bases include unexpected characters which we need to address</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"/><span class="fu">Encoding</span>(bases<span class="sc">$</span>basename) <span class="ot">&lt;-</span> <span class="st">"latin1"</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"/></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"/><span class="fu">leaflet</span>(<span class="at">data =</span> bases) <span class="sc">|&gt;</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"/>  <span class="fu">addTiles</span>() <span class="sc">|&gt;</span> <span class="co"># Add default OpenStreetMap map tiles</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">addMarkers</span>(</span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"/>    <span class="at">lng =</span> bases<span class="sc">$</span>lon,</span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"/>    <span class="at">lat =</span> bases<span class="sc">$</span>lat,</span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"/>    <span class="at">popup =</span> bases<span class="sc">$</span>basename,</span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"/>    <span class="at">label =</span> bases<span class="sc">$</span>countryname</span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"/>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-canhasbase" class="cell-output-display quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-canhasbase-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-a236952f6f53150d0018" style="width:100%;height:464px;"/>

</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-canhasbase-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.29: Interactive map of US bases
</figcaption>
</figure>
</div>
</div>
<p>There are two new arguments, compared with <code>ggmap</code>. The first is “popup”, which is the behavior that occurs when the user clicks on the marker. In this case, the name of the base is provided. The second is “label”, which is what happens when the user hovers on the marker. In this case it is the name of the country.</p>
<p>We can try another example, this time of the amount spent building those bases. We will introduce a different type of marker here, which is circles. This will allow us to use different colors for the outcomes of each type. There are four possible outcomes: “More than $100,000,000”, “More than $10,000,000”, “More than $1,000,000”, “$1,000,000 or less” <a href="#fig-canhasbaseandmoney" class="quarto-xref">Figure <span>5.30</span></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"/>build <span class="ot">&lt;-</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">get_builddata</span>(<span class="at">startyear =</span> <span class="dv">2008</span>, <span class="at">endyear =</span> <span class="dv">2019</span>) <span class="sc">|&gt;</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(lon)) <span class="sc">|&gt;</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">mutate</span>(</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"/>    <span class="at">cost =</span> <span class="fu">case_when</span>(</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"/>      spend_construction <span class="sc">&gt;</span> <span class="dv">100000</span> <span class="sc">~</span> <span class="st">"More than $100,000,000"</span>,</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"/>      spend_construction <span class="sc">&gt;</span> <span class="dv">10000</span> <span class="sc">~</span> <span class="st">"More than $10,000,000"</span>,</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"/>      spend_construction <span class="sc">&gt;</span> <span class="dv">1000</span> <span class="sc">~</span> <span class="st">"More than $1,000,000"</span>,</span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"/>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"$1,000,000 or less"</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"/>    )</span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"/>  )</span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"/></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"/>pal <span class="ot">&lt;-</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"/>  <span class="fu">colorFactor</span>(<span class="st">"Dark2"</span>, <span class="at">domain =</span> build<span class="sc">$</span>cost <span class="sc">|&gt;</span> <span class="fu">unique</span>())</span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"/></span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"/><span class="fu">leaflet</span>() <span class="sc">|&gt;</span></span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"/>  <span class="fu">addTiles</span>() <span class="sc">|&gt;</span> <span class="co"># Add default OpenStreetMap map tiles</span></span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"/>  <span class="fu">addCircleMarkers</span>(</span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"/>    <span class="at">data =</span> build,</span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"/>    <span class="at">lng =</span> build<span class="sc">$</span>lon,</span>
<span id="cb71-21"><a href="#cb71-21" aria-hidden="true" tabindex="-1"/>    <span class="at">lat =</span> build<span class="sc">$</span>lat,</span>
<span id="cb71-22"><a href="#cb71-22" aria-hidden="true" tabindex="-1"/>    <span class="at">color =</span> <span class="fu">pal</span>(build<span class="sc">$</span>cost),</span>
<span id="cb71-23"><a href="#cb71-23" aria-hidden="true" tabindex="-1"/>    <span class="at">popup =</span> <span class="fu">paste</span>(</span>
<span id="cb71-24"><a href="#cb71-24" aria-hidden="true" tabindex="-1"/>      <span class="st">"&lt;b&gt;Location:&lt;/b&gt;"</span>,</span>
<span id="cb71-25"><a href="#cb71-25" aria-hidden="true" tabindex="-1"/>      <span class="fu">as.character</span>(build<span class="sc">$</span>location),</span>
<span id="cb71-26"><a href="#cb71-26" aria-hidden="true" tabindex="-1"/>      <span class="st">"&lt;br&gt;"</span>,</span>
<span id="cb71-27"><a href="#cb71-27" aria-hidden="true" tabindex="-1"/>      <span class="st">"&lt;b&gt;Amount:&lt;/b&gt;"</span>,</span>
<span id="cb71-28"><a href="#cb71-28" aria-hidden="true" tabindex="-1"/>      <span class="fu">as.character</span>(build<span class="sc">$</span>spend_construction),</span>
<span id="cb71-29"><a href="#cb71-29" aria-hidden="true" tabindex="-1"/>      <span class="st">"&lt;br&gt;"</span></span>
<span id="cb71-30"><a href="#cb71-30" aria-hidden="true" tabindex="-1"/>    )</span>
<span id="cb71-31"><a href="#cb71-31" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">|&gt;</span></span>
<span id="cb71-32"><a href="#cb71-32" aria-hidden="true" tabindex="-1"/>  <span class="fu">addLegend</span>(</span>
<span id="cb71-33"><a href="#cb71-33" aria-hidden="true" tabindex="-1"/>    <span class="st">"bottomright"</span>,</span>
<span id="cb71-34"><a href="#cb71-34" aria-hidden="true" tabindex="-1"/>    <span class="at">pal =</span> pal,</span>
<span id="cb71-35"><a href="#cb71-35" aria-hidden="true" tabindex="-1"/>    <span class="at">values =</span> build<span class="sc">$</span>cost <span class="sc">|&gt;</span> <span class="fu">unique</span>(),</span>
<span id="cb71-36"><a href="#cb71-36" aria-hidden="true" tabindex="-1"/>    <span class="at">title =</span> <span class="st">"Type"</span>,</span>
<span id="cb71-37"><a href="#cb71-37" aria-hidden="true" tabindex="-1"/>    <span class="at">opacity =</span> <span class="dv">1</span></span>
<span id="cb71-38"><a href="#cb71-38" aria-hidden="true" tabindex="-1"/>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-canhasbaseandmoney" class="cell-output-display quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-canhasbaseandmoney-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-a1c6a21485648592cd1a" style="width:100%;height:464px;"/>

</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-canhasbaseandmoney-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.30: Interactive map of US bases with colored circules to indicate spend
</figcaption>
</figure>
</div>
</div>
</section>
<section id="mapdeck" class="level4" data-number="5.4.3.2">
<h4 data-number="5.4.3.2" class="anchored" data-anchor-id="mapdeck"><span class="header-section-number">5.4.3.2</span> Mapdeck</h4>
<p><code>mapdeck</code> <span class="citation" data-cites="citemapdeck">(<a href="99-references.html#ref-citemapdeck" role="doc-biblioref">Cooley 2020</a>)</span> is based on WebGL. This means the web browser will do a lot of work for us. This enables us to accomplish things with <code>mapdeck</code> that <code>leaflet</code> struggles with, such as larger datasets.</p>
<p>To this point we have used “stamen maps” as our underlying tile, but <code>mapdeck</code> uses <a href="https://www.mapbox.com/">Mapbox</a>. This requires registering an account and obtaining a token. This is free and only needs to be done once. Once we have that token we add it to our R environment (the details of this process are covered in <a href="07-gather.html" class="quarto-xref"><span>Chapter 7</span></a>) by running <code>edit_r_environ()</code>, which will open a text file, which is where we should add our Mapbox secret token.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"/>MAPBOX_TOKEN <span class="ot">&lt;-</span> <span class="st">"PUT_YOUR_MAPBOX_SECRET_HERE"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<p>We then save this “.Renviron” file, and restart R (“Session” -&gt; “Restart R”).</p>
<p>Having obtained a token, we can create a plot of our base spend data from earlier (<a href="#fig-canhasbaseandmoneymapdeck" class="quarto-xref">Figure <span>5.31</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"/><span class="fu">mapdeck</span>(<span class="at">style =</span> <span class="fu">mapdeck_style</span>(<span class="st">"light"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">add_scatterplot</span>(</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"/>    <span class="at">data =</span> build,</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"/>    <span class="at">lat =</span> <span class="st">"lat"</span>,</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"/>    <span class="at">lon =</span> <span class="st">"lon"</span>,</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"/>    <span class="at">layer_id =</span> <span class="st">"scatter_layer"</span>,</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"/>    <span class="at">radius =</span> <span class="dv">10</span>,</span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"/>    <span class="at">radius_min_pixels =</span> <span class="dv">5</span>,</span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"/>    <span class="at">radius_max_pixels =</span> <span class="dv">100</span>,</span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"/>    <span class="at">tooltip =</span> <span class="st">"location"</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"/>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
<div id="fig-canhasbaseandmoneymapdeck" class="cell-output-display quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-canhasbaseandmoneymapdeck-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="mapdeck html-widget html-fill-item" id="htmlwidget-7e912bf9455affa7923f" style="width:100%;height:464px;"/>

</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-canhasbaseandmoneymapdeck-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.31: Interactive map of US bases using Mapdeck
</figcaption>
</figure>
</div>
</div>
</section>
</section>
</section>
<section id="concluding-remarks" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="concluding-remarks"><span class="header-section-number">5.5</span> Concluding remarks</h2>
<p>In this chapter we considered many ways of communicating data. We spent substantial time on graphs, because of their ability to convey a large amount of information in an efficient way. We then turned to tables because of how they can specifically convey information. Finally, we discussed maps, which allow us to display geographic information. The most important task is to show the observations to the full extent possible.</p>
</section>
<section id="exercises" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="exercises"><span class="header-section-number">5.6</span> Exercises</h2>
<section id="practice" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="practice">Practice</h3>
<ol type="1">
<li><em>(Plan)</em> Consider the following scenario: <em>Three friends—Edward, Hugo, and Lucy—each measure the height of 20 of their friends. Each of the three use a slightly different approach to measurement and so make slightly different errors.</em> Please sketch what that dataset could look like and then sketch a graph that you could build to show all observations.</li>
<li><em>(Simulate)</em> Please further consider the scenario described and simulate the situation with every variable independent of each other. Please include three tests based on the simulated data.</li>
<li><em>(Acquire)</em> Please specify a source of actual data about human height that you are interested in.</li>
<li><em>(Explore)</em> Build a graph and table using the simulated data.</li>
<li><em>(Communicate)</em> Please write some text to accompany the graph and table, as if they reflected the actual situation. The exact details contained in the paragraphs do not have to be factual but they should be reasonable (i.e. you do not actually have to get the data nor create the graphs). Separate the code appropriately into <code>R</code> files and a Quarto doc. Submit a link to a GitHub repo with a README.</li>
</ol>
</section>
<section id="quiz" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="quiz">Quiz</h3>
<ol type="1">
<li>What is the primary reason for always plotting data (pick one)?
<ol type="a">
<li>To better understand our data.</li>
<li>To ensure the data are normal.</li>
<li>To check for missing values.</li>
</ol></li>
<li>From <span class="citation" data-cites="r4ds">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="99-references.html#ref-r4ds" role="doc-biblioref">[2016] 2023</a>)</span>, which of the following best describes tidy data (pick one)?
<ol type="a">
<li>Each variable is in its own column, and each observation in its own row.</li>
<li>All data in a single row.</li>
<li>Multiple values per cell.</li>
<li>Data are stored in one cell.</li>
</ol></li>
<li>From <span class="citation" data-cites="healyviz">Healy (<a href="99-references.html#ref-healyviz" role="doc-biblioref">2018</a>)</span>, what does <code>ggplot()</code> require as its first argument (pick one)?
<ol type="a">
<li>A dataframe.</li>
<li>A geom function.</li>
<li>A legend.</li>
<li>An aesthetic mapping.</li>
</ol></li>
<li>From <span class="citation" data-cites="healyviz">Healy (<a href="99-references.html#ref-healyviz" role="doc-biblioref">2018</a>)</span>, in <code>ggplot2</code>, what does the <code>+</code> operator do (pick one)?
<ol type="a">
<li>Saves the plot.</li>
<li>Adds data to the plot.</li>
<li>Combines layers of the plot.</li>
<li>Removes elements from the plot.</li>
</ol></li>
<li>From <span class="citation" data-cites="r4ds">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="99-references.html#ref-r4ds" role="doc-biblioref">[2016] 2023</a>)</span>, what is an “aesthetic” in the context of <code>ggplot2</code> (pick one)?
<ol type="a">
<li>The type of chart used.</li>
<li>The axis labels.</li>
<li>The color of the plot.</li>
<li>How variables in the dataset are mapped to visual properties.</li>
</ol></li>
<li>From <span class="citation" data-cites="r4ds">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="99-references.html#ref-r4ds" role="doc-biblioref">[2016] 2023</a>)</span>, in <code>ggplot2</code>, what is a “geom” (pick one)?
<ol type="a">
<li>A data transformation function.</li>
<li>The geometrical object that a plot uses to represent data.</li>
<li>A plot title.</li>
<li>A statistical transformation.</li>
</ol></li>
<li>Which geom should be used to make a scatter plot (pick one)?
<ol type="a">
<li><code>geom_dotplot()</code></li>
<li><code>geom_bar()</code></li>
<li><code>geom_smooth()</code></li>
<li><code>geom_point()</code></li>
</ol></li>
<li>Which should be used to create bar charts (when you have already computed counts) (pick one)?
<ol type="a">
<li><code>geom_line()</code></li>
<li><code>geom_bar()</code></li>
<li><code>geom_histogram()</code></li>
<li><code>geom_col()</code></li>
</ol></li>
<li>Which <code>ggplot2</code> geom would you use to create a histogram (pick one)?
<ol type="a">
<li><code>geom_col()</code></li>
<li><code>geom_bar()</code></li>
<li><code>geom_density()</code></li>
<li><code>geom_histogram()</code></li>
</ol></li>
<li>Assume the <code>tidyverse</code> and <code>datasauRus</code> are installed and loaded. What would be the outcome of the following code (pick one)?
<ol type="a">
<li>Two vertical lines.</li>
<li>Three vertical lines.</li>
<li>Four vertical lines.</li>
<li>Five vertical lines.</li>
</ol></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"/>datasaurus_dozen <span class="sc">|&gt;</span> </span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">filter</span>(dataset <span class="sc">==</span> <span class="st">"v_lines"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y)) <span class="sc">+</span> </span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<ol start="11" type="1">
<li>From <span class="citation" data-cites="r4ds">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="99-references.html#ref-r4ds" role="doc-biblioref">[2016] 2023</a>)</span>, what happens when you map a variable to the <code>color</code> aesthetic in <code>ggplot2</code> (select all that apply)?
<ol type="a">
<li>The points get different colors based on the variable.</li>
<li>A legend is automatically created.</li>
<li>The size of points changes based on the variable.</li>
</ol></li>
<li>From <span class="citation" data-cites="healyviz">Healy (<a href="99-references.html#ref-healyviz" role="doc-biblioref">2018</a>)</span>, what is the difference between <code>color</code> and <code>fill</code> aesthetics in <code>ggplot2</code> (pick one)?
<ol type="a">
<li>Both terms are used interchangeably.</li>
<li><code>color</code> applies to points and lines, while <code>fill</code> applies to area elements.</li>
<li><code>color</code> controls font color, while <code>fill</code> controls plot title.</li>
<li><code>color</code> applies to the background, while <code>fill</code> applies to text.</li>
</ol></li>
<li>How do you add some transparency to the points when using <code>geom_point()</code> (pick one)?
<ol type="a">
<li>By setting <code>alpha</code> to a value between 0 and 1.</li>
<li>By removing <code>geom_point()</code> from the plot.</li>
<li>By using <code>color = NULL</code> in <code>aes()</code></li>
</ol></li>
<li>What does <code>labs()</code> do in <code>ggplot2</code> (pick one)?
<ol type="a">
<li>Changes the background color of the plot.</li>
<li>Adds labels like legend and axis labels.</li>
<li>Adds a line of best fit.</li>
<li>Modifies the plot layout.</li>
</ol></li>
<li>In the code below, what should be added to <code>labs()</code> to change the text of the legend (pick one)?
<ol type="a">
<li><code>scale = "Voted for"</code></li>
<li><code>legend = "Voted for"</code></li>
<li><code>color = "Voted for"</code></li>
<li><code>fill = "Voted for"</code></li>
</ol></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"/>beps <span class="sc">|&gt;</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">fill =</span> vote)) <span class="sc">+</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Age of respondent"</span>, <span class="at">y =</span> <span class="st">"Number of respondents"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<ol start="16" type="1">
<li>Based on the help file for <code>scale_colour_brewer()</code> which palette diverges (pick one)?
<ol type="a">
<li>“GnBu”</li>
<li>“Set1”</li>
<li>“Accent”</li>
<li>“RdBu”</li>
</ol></li>
<li>Which theme does not have solid lines along the x and y axes (pick one)?
<ol type="a">
<li><code>theme_minimal()</code></li>
<li><code>theme_classic()</code></li>
<li><code>theme_bw()</code></li>
</ol></li>
<li>Which argument to <code>position</code> should be added to <code>geom_bar()</code> to make the bars be next to each other rather than on top of each other (pick one)?
<ol type="a">
<li><code>position = "adjacent"</code></li>
<li><code>position = "side_by_side"</code></li>
<li><code>position = "closest"</code></li>
<li><code>position = "dodge2"</code></li>
</ol></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"/>beps <span class="sc">|&gt;</span> </span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">fill =</span> vote)) <span class="sc">+</span> </span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<ol start="19" type="1">
<li>Based on <span class="citation" data-cites="vanderplas2020testing">Vanderplas, Cook, and Hofmann (<a href="99-references.html#ref-vanderplas2020testing" role="doc-biblioref">2020</a>)</span>, which cognitive principle should be considered when creating graphs (pick one)?
<ol type="a">
<li>Proximity.</li>
<li>Volume estimation.</li>
<li>Relative motion.</li>
<li>Axial positioning.</li>
</ol></li>
<li>Based on <span class="citation" data-cites="vanderplas2020testing">Vanderplas, Cook, and Hofmann (<a href="99-references.html#ref-vanderplas2020testing" role="doc-biblioref">2020</a>)</span>, color can be used to (pick one)?
<ol type="a">
<li>Improve chart design aesthetics.</li>
<li>Encode categorical and continuous variables and group plot elements.</li>
<li>Identify magnitude.</li>
</ol></li>
<li>Which of these would result in the largest number of bins (pick one)?
<ol type="a">
<li><code>geom_histogram(binwidth = 2)</code></li>
<li><code>geom_histogram(binwidth = 5)</code></li>
</ol></li>
<li>Suppose there is a dataset that contains the heights of 100 birds, each from one of three different species. If we are interested in understanding the distribution of these heights, then in a paragraph or two, please explain which type of graph should be used and why.</li>
<li>Would this code <code>data |&gt; ggplot(aes(x = col_one)) |&gt; geom_point()</code> work if we assume the libraries are loaded and the dataset and columns exist (pick one)?
<ol type="a">
<li>No.</li>
<li>Yes.</li>
</ol></li>
<li>In <code>ggplot2</code>, what is the purpose of using facets in a plot (pick one)?
<ol type="a">
<li>To adjust the transparency of the points.</li>
<li>To add labels to data points.</li>
<li>To create multiple plots split by the values of one or more variables.</li>
<li>To change the color scheme of the plot.</li>
</ol></li>
<li>When creating a bar chart with <code>ggplot2</code>, which aesthetic is typically mapped to a categorical variable to fill bars with different colors (pick one)?
<ol type="a">
<li><code>fill</code></li>
<li><code>x</code></li>
<li><code>y</code></li>
<li><code>size</code></li>
</ol></li>
<li>What is the effect of adding <code>position = "dodge"</code> or <code>position = "dodge2"</code> to a <code>geom_bar()</code> in <code>ggplot2</code> (pick one)?
<ol type="a">
<li>It adds transparency to the bars.</li>
<li>It places the bars side by side for each group.</li>
<li>It stacks the bars on top of each other.</li>
<li>It changes the bar colors to grayscale.</li>
</ol></li>
<li>In the context of <code>ggplot2</code>, what is the primary difference between <code>geom_point()</code> and <code>geom_jitter()</code> (pick one)?
<ol type="a">
<li><code>geom_jitter()</code> adds random noise to points to reduce overplotting.</li>
<li><code>geom_jitter()</code> is used for continuous data, <code>geom_point()</code> for categorical data.</li>
<li><code>geom_point()</code> adds transparency, <code>geom_jitter()</code> does not.</li>
<li><code>geom_point()</code> plots points, <code>geom_jitter()</code> plots lines.</li>
</ol></li>
<li>Which <code>ggplot2</code> geom would you use to add a line of best fit to a scatterplot (pick one)?
<ol type="a">
<li><code>geom_histogram()</code></li>
<li><code>geom_smooth()</code></li>
<li><code>geom_bar()</code></li>
<li><code>geom_line()</code></li>
</ol></li>
<li>What argument would you use in geom_smooth() to specify a linear model without standard errors (pick one)?
<ol type="a">
<li><code>fit = lm, show_se = FALSE</code></li>
<li><code>type = "linear", ci = FALSE</code></li>
<li><code>model = linear, error = FALSE</code></li>
<li><code>method = lm, se = FALSE</code></li>
</ol></li>
<li>What does adjusting the number of bins, or changing the binwidth, affect for a histogram (pick one)?
<ol type="a">
<li>The labels on the x-axis.</li>
<li>The size of the data points.</li>
<li>The colors used in the plot.</li>
<li>How smooth the distribution will appear.</li>
</ol></li>
<li>What is one disadvantage of using boxplots (pick one)?
<ol type="a">
<li>They cannot show outliers.</li>
<li>They take too long to compute.</li>
<li>They hide the underlying distribution of the data.</li>
<li>They are too colorful.</li>
</ol></li>
<li>How can you deal with that disadvantage (pick one)?
<ol type="a">
<li>Remove the whiskers from the boxplot.</li>
<li>Add colors for each category.</li>
<li>Overlay the actual data points using <code>geom_jitter()</code>.</li>
<li>Increase the box width.</li>
</ol></li>
<li>What does <code>stat_ecdf()</code> compute (pick one)?
<ol type="a">
<li>A cumulative distribution function.</li>
<li>A scatterplot with error bars.</li>
<li>A boxplot.</li>
<li>A histogram.</li>
</ol></li>
<li>Which function from <code>modelsummary</code> could we use to create a table of descriptive statistics (pick one)?
<ol type="a">
<li><code>datasummary_balance()</code></li>
<li><code>datasummary_skim()</code></li>
<li><code>datasummary_descriptive()</code></li>
<li><code>datasummary_crosstab()</code></li>
</ol></li>
<li>What is geocoding (pick one)?
<ol type="a">
<li>Converting latitude and longitude into place names.</li>
<li>Drawing map boundaries.</li>
<li>Picking a map projection.</li>
<li>Converting place names into latitude and longitude.</li>
</ol></li>
<li>From <span class="citation" data-cites="lovelace2019geocomputation">Lovelace, Nowosad, and Muenchow (<a href="99-references.html#ref-lovelace2019geocomputation" role="doc-biblioref">2019</a>)</span>, please explain in a paragraph or two, what is the difference between vector data and raster data in the context of geographic data?</li>
<li>Which argument to <code>addMarkers()</code> is used to specify the behavior that occurs after a marker is clicked (pick one)?
<ol type="a">
<li><code>layerId</code></li>
<li><code>icon</code></li>
<li><code>popup</code></li>
<li><code>label</code></li>
</ol></li>
</ol>
</section>
<section id="class-activities" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="class-activities">Class activities</h3>
<ul>
<li>Use the <a href="https://github.com/RohanAlexander/starter_folder">starter folder</a> and create a new repo. Add a link to the GitHub repo in the class’s shared Google Doc. Do all the following in <code>paper.qmd</code>.</li>
<li>The following produces a scatterplot showing the level, in feet, of Lake Huron between 1875 and 1972. Please improve it.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"/><span class="fu">tibble</span>(<span class="at">year =</span> <span class="dv">1875</span><span class="sc">:</span><span class="dv">1972</span>,</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"/>       <span class="at">level =</span> <span class="fu">as.numeric</span>(datasets<span class="sc">::</span>LakeHuron)) <span class="sc">|&gt;</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> level)) <span class="sc">+</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<ul>
<li>The following produces a bar chart of the height of 31 Black Cherry Trees. Please improve it.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"/>datasets<span class="sc">::</span>trees <span class="sc">|&gt;</span> </span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Height)) <span class="sc">+</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<ul>
<li>The following produces a line plot showing the weight of chicks, in grams, by how many days old they were. Please improve it.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"/>datasets<span class="sc">::</span>ChickWeight <span class="sc">|&gt;</span> </span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Time, <span class="at">y =</span> weight, <span class="at">group =</span> Chick)) <span class="sc">+</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<ul>
<li>The following produces a histogram showing the annual number of sunspots between 1700 and 1988. Please improve it.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"/><span class="fu">tibble</span>(<span class="at">year =</span> <span class="dv">1700</span><span class="sc">:</span><span class="dv">1988</span>,</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"/>       <span class="at">sunspots =</span> <span class="fu">as.numeric</span>(datasets<span class="sc">::</span>sunspot.year) <span class="sc">|&gt;</span> <span class="fu">round</span>(<span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"/>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sunspots)) <span class="sc">+</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<ul>
<li>Please follow <a href="https://github.com/saloni-nd/misc/blob/main/Mortality%20rates%20by%20age%20-%20HMD.R">this code</a> from Saloni Dattani, and make a graph for two countries of interest to you.</li>
<li>The following code, taken from the <code>palmerpenguins</code> <a href="https://allisonhorst.github.io/palmerpenguins/articles/examples.html">vignette</a>, produces a beautiful graph. Please modify it to create the ugliest graph that you can.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"/><span class="fu">ggplot</span>(<span class="at">data =</span> penguins,</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"/>       <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm,</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"/>           <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"/>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species,</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"/>                 <span class="at">shape =</span> species),</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"/>             <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"/>             <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"/>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"darkorange"</span>, <span class="st">"purple"</span>, <span class="st">"cyan4"</span>)) <span class="sc">+</span></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"/>  <span class="fu">labs</span>(</span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"/>    <span class="at">title =</span> <span class="st">"Penguin size, Palmer Station LTER"</span>,</span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"/>    <span class="at">subtitle =</span> <span class="st">"Flipper length and body mass for Adelie, Chinstrap and Gentoo Penguins"</span>,</span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"/>    <span class="at">x =</span> <span class="st">"Flipper length (mm)"</span>,</span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"/>    <span class="at">y =</span> <span class="st">"Body mass (g)"</span>,</span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"/>    <span class="at">color =</span> <span class="st">"Penguin species"</span>,</span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true" tabindex="-1"/>    <span class="at">shape =</span> <span class="st">"Penguin species"</span></span>
<span id="cb81-16"><a href="#cb81-16" aria-hidden="true" tabindex="-1"/>  ) <span class="sc">+</span></span>
<span id="cb81-17"><a href="#cb81-17" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb81-18"><a href="#cb81-18" aria-hidden="true" tabindex="-1"/>  <span class="fu">theme</span>(</span>
<span id="cb81-19"><a href="#cb81-19" aria-hidden="true" tabindex="-1"/>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.7</span>),</span>
<span id="cb81-20"><a href="#cb81-20" aria-hidden="true" tabindex="-1"/>    <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb81-21"><a href="#cb81-21" aria-hidden="true" tabindex="-1"/>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">face =</span> <span class="st">"italic"</span>),</span>
<span id="cb81-22"><a href="#cb81-22" aria-hidden="true" tabindex="-1"/>    <span class="at">plot.caption.position =</span> <span class="st">"plot"</span></span>
<span id="cb81-23"><a href="#cb81-23" aria-hidden="true" tabindex="-1"/>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
<ul>
<li>The following code provides estimates for the speed of light, from three experiments, each of 20 runs. Please create an average speed of light, per experiment, then use <code>knitr::kable()</code> to create a cross-referenced table, with specified column names, and no significant digits.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"/>datasets<span class="sc">::</span>morley <span class="sc">|&gt;</span> </span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"/>  <span class="fu">tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"/></button></pre></div>
</div>
</section>
<section id="task-i" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="task-i">Task I</h3>
<p>Please create a graph using <code>ggplot2</code> and a map using <code>ggmap</code> and add explanatory text to accompany both. Be sure to include cross-references and captions, etc. Each of these should take about a page.</p>
<p>Then, with regard the graph you created, please reflect on <span class="citation" data-cites="vanderplas2020testing">Vanderplas, Cook, and Hofmann (<a href="99-references.html#ref-vanderplas2020testing" role="doc-biblioref">2020</a>)</span>. Add a few paragraphs about the different options that you considered to make the graph more effective.</p>
<p>And finally, with regard to the map that you created, please reflect on the following quote from Heather Krause, founder of <a href="https://weallcount.com">We All Count</a>: “maps only show people who aren’t invisible to the makers” as well as Chapter 3 from <span class="citation" data-cites="datafeminism2020">D’Ignazio and Klein (<a href="99-references.html#ref-datafeminism2020" role="doc-biblioref">2020</a>)</span> and add a few paragraphs related to this.</p>
<p>Submit a link to a high-quality GitHub repo.</p>
</section>
<section id="task-ii" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="task-ii">Task II</h3>
<p>Please obtain data on the ethnic origins and number of Holocaust victims killed at Auschwitz concentration camp. Then use <code>shiny</code> to create an interactive graph and an interactive table. These should show the number of people murdered by nationality/category and should allow the user to specify the groups they are interested in seeing data for. Publish them using the free tier of shinyapps.io.</p>
<p>Then, based on the themes brought up in <span class="citation" data-cites="americaslavery">Bouie (<a href="99-references.html#ref-americaslavery" role="doc-biblioref">2022</a>)</span>, discuss your work in at least two pages. The expectation is that, similar to <span class="citation" data-cites="kieranskitchen">Healy (<a href="99-references.html#ref-kieranskitchen" role="doc-biblioref">2020</a>)</span>, you use your work as a foundation to build on and discuss what it means to use data about such a horror.</p>
<p>Use the starter folder, and submit a PDF created using the Quarto doc provided there. Ensure that your essay contains links to both your app and the GitHub repo that contains all code and data. As well as extensive citations to relevant literature that you reflected on.</p>
</section>
<section id="paper" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="paper">Paper</h3>
<p>At about this point the <em>Mawson</em> Paper from <a href="25-papers.html" class="quarto-xref">Online Appendix <span>F</span></a> would be appropriate.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-andersen2021presenting" class="csl-entry" role="listitem">
Andersen, Robert, and David Armstrong. 2021. <em>Presenting Statistical Results Effectively</em>. London: Sage.
</div>
<div id="ref-WDI" class="csl-entry" role="listitem">
Arel-Bundock, Vincent. 2021. <em><span class="nocase">WDI: World Development Indicators and Other World Bank Data</span></em>. <a href="https://CRAN.R-project.org/package=WDI">https://CRAN.R-project.org/package=WDI</a>.
</div>
<div id="ref-citemodelsummary" class="csl-entry" role="listitem">
———. 2022. <span>“<span class="nocase">modelsummary</span>: Data and Model Summaries in <span>R</span>.”</span> <em>Journal of Statistical Software</em> 103 (1): 1–23. <a href="https://doi.org/10.18637/jss.v103.i01">https://doi.org/10.18637/jss.v103.i01</a>.
</div>
<div id="ref-tinytable" class="csl-entry" role="listitem">
———. 2024. <em><span class="nocase">tinytable: Simple and Configurable Tables in <span>“HTML,”</span> <span>“LaTeX,”</span> <span>“Markdown,”</span> <span>“Word,”</span> <span>“PNG,”</span> <span>“PDF,”</span> and <span>“Typst”</span> Formats</span></em>. <a href="https://vincentarelbundock.github.io/tinytable/">https://vincentarelbundock.github.io/tinytable/</a>.
</div>
<div id="ref-armstrongembracecomplexity" class="csl-entry" role="listitem">
Armstrong, Zan. 2022. <span>“Stop Aggregating Away the Signal in Your Data.”</span> <em>The Overflow</em>, March. <a href="https://stackoverflow.blog/2022/03/03/stop-aggregating-away-the-signal-in-your-data/">https://stackoverflow.blog/2022/03/03/stop-aggregating-away-the-signal-in-your-data/</a>.
</div>
<div id="ref-ggthemes" class="csl-entry" role="listitem">
Arnold, Jeffrey. 2021. <em><span class="nocase">ggthemes: Extra Themes, Scales and Geoms for <span>“ggplot2”</span></span></em>. <a href="https://CRAN.R-project.org/package=ggthemes">https://CRAN.R-project.org/package=ggthemes</a>.
</div>
<div id="ref-citemaps" class="csl-entry" role="listitem">
Becker, Richard, Allan Wilks, Ray Brownrigg, Thomas Minka, and Alex Deckmyn. 2022. <em><span class="nocase">maps: Draw Geographical Maps</span></em>. <a href="https://CRAN.R-project.org/package=maps">https://CRAN.R-project.org/package=maps</a>.
</div>
<div id="ref-washingtonpostmaps" class="csl-entry" role="listitem">
Bensinger, Greg. 2020. <span>“Google Redraws the Borders on Maps Depending on Who’s Looking.”</span> <em>The Washington Post</em>, February. <a href="https://www.washingtonpost.com/technology/2020/02/14/google-maps-political-borders/">https://www.washingtonpost.com/technology/2020/02/14/google-maps-political-borders/</a>.
</div>
<div id="ref-Bethlehem2022" class="csl-entry" role="listitem">
Bethlehem, R. A. I., J. Seidlitz, S. R. White, J. W. Vogel, K. M. Anderson, C. Adamson, S. Adler, et al. 2022. <span>“Brain Charts for the Human Lifespan.”</span> <em>Nature</em> 604 (7906): 525–33. <a href="https://doi.org/10.1038/s41586-022-04554-y">https://doi.org/10.1038/s41586-022-04554-y</a>.
</div>
<div id="ref-americaslavery" class="csl-entry" role="listitem">
Bouie, Jamelle. 2022. <span>“We Still Can’t See American Slavery for What It Was.”</span> <em>The New York Times</em>, January. <a href="https://www.nytimes.com/2022/01/28/opinion/slavery-voyages-data-sets.html">https://www.nytimes.com/2022/01/28/opinion/slavery-voyages-data-sets.html</a>.
</div>
<div id="ref-brewerbook" class="csl-entry" role="listitem">
Brewer, Cynthia. 2015. <em>Designing Better Maps: A Guide for GIS Users</em>. 2nd ed.
</div>
<div id="ref-bronnerquantediting" class="csl-entry" role="listitem">
Bronner, Laura. 2021. <span>“Quantitative Editing.”</span> <em>YouTube</em>, June. <a href="https://youtu.be/LI5m9RzJgWc">https://youtu.be/LI5m9RzJgWc</a>.
</div>
<div id="ref-tidygeocoder" class="csl-entry" role="listitem">
Cambon, Jesse, and Christopher Belanger. 2021. <span>“<span class="nocase">tidygeocoder: Geocoding Made Easy</span>.”</span> Zenodo. <a href="https://doi.org/10.5281/zenodo.3981510">https://doi.org/10.5281/zenodo.3981510</a>.
</div>
<div id="ref-citeshiny" class="csl-entry" role="listitem">
Chang, Winston, Joe Cheng, JJ Allaire, Carson Sievert, Barret Schloerke, Yihui Xie, Jeff Allen, Jonathan McPherson, Alan Dipert, and Barbara Borges. 2021. <em><span class="nocase">shiny: Web Application Framework for R</span></em>. <a href="https://CRAN.R-project.org/package=shiny">https://CRAN.R-project.org/package=shiny</a>.
</div>
<div id="ref-chase2020" class="csl-entry" role="listitem">
Chase, William. 2020. <span>“The Glamour of Graphics.”</span> <em>RStudio Conference</em>, January. <a href="https://posit.co/resources/videos/the-glamour-of-graphics/">https://posit.co/resources/videos/the-glamour-of-graphics/</a>.
</div>
<div id="ref-ChengKarambelkarXie2017" class="csl-entry" role="listitem">
Cheng, Joe, Bhaskar Karambelkar, and Yihui Xie. 2021. <em><span class="nocase">leaflet: Create Interactive Web Maps with the JavaScript <span>“Leaflet”</span> Library</span></em>. <a href="https://CRAN.R-project.org/package=leaflet">https://CRAN.R-project.org/package=leaflet</a>.
</div>
<div id="ref-elementsofgraphingdata" class="csl-entry" role="listitem">
Cleveland, William. (1985) 1994. <em>The Elements of Graphing Data</em>. 2nd ed. New Jersey: Hobart Press.
</div>
<div id="ref-citemapdeck" class="csl-entry" role="listitem">
Cooley, David. 2020. <em><span class="nocase">mapdeck: Interactive Maps Using <span>“Mapbox GL JS”</span> and <span>“Deck.gl”</span></span></em>. <a href="https://CRAN.R-project.org/package=mapdeck">https://CRAN.R-project.org/package=mapdeck</a>.
</div>
<div id="ref-datafeminism2020" class="csl-entry" role="listitem">
D’Ignazio, Catherine, and Lauren Klein. 2020. <em>Data Feminism</em>. Massachusetts: The MIT Press. <a href="https://data-feminism.mitpress.mit.edu">https://data-feminism.mitpress.mit.edu</a>.
</div>
<div id="ref-citedatasauRus" class="csl-entry" role="listitem">
Davies, Rhian, Steph Locke, and Lucy D’Agostino McGowan. 2022. <em><span class="nocase">datasauRus: Datasets from the Datasaurus Dozen</span></em>. <a href="https://CRAN.R-project.org/package=datasauRus">https://CRAN.R-project.org/package=datasauRus</a>.
</div>
<div id="ref-Denby2009" class="csl-entry" role="listitem">
Denby, Lorraine, and Colin Mallows. 2009. <span>“Variations on the Histogram.”</span> <em>Journal of Computational and Graphical Statistics</em> 18 (1): 21–31. <a href="https://doi.org/10.1198/jcgs.2009.0002">https://doi.org/10.1198/jcgs.2009.0002</a>.
</div>
<div id="ref-janitor" class="csl-entry" role="listitem">
Firke, Sam. 2023. <em><span class="nocase">janitor: Simple Tools for Examining and Cleaning Dirty Data</span></em>. <a href="https://CRAN.R-project.org/package=janitor">https://CRAN.R-project.org/package=janitor</a>.
</div>
<div id="ref-troopdata" class="csl-entry" role="listitem">
Flynn, Michael. 2022. <em><span class="nocase">troopdata: Tools for Analyzing Cross-National Military Deployment and Basing Data</span></em>. <a href="https://CRAN.R-project.org/package=troopdata">https://CRAN.R-project.org/package=troopdata</a>.
</div>
<div id="ref-fox2006effect" class="csl-entry" role="listitem">
Fox, John, and Robert Andersen. 2006. <span>“Effect Displays for Multinomial and Proportional-Odds Logit Models.”</span> <em>Sociological Methodology</em> 36 (1): 225–55. <a href="https://doi.org/10.1111/j.1467-9531.2006.00180">https://doi.org/10.1111/j.1467-9531.2006.00180</a>.
</div>
<div id="ref-carData" class="csl-entry" role="listitem">
Fox, John, Sanford Weisberg, and Brad Price. 2022. <em>carData: Companion to Applied Regression Data Sets</em>. <a href="https://CRAN.R-project.org/package=carData">https://CRAN.R-project.org/package=carData</a>.
</div>
<div id="ref-franconeri2021science" class="csl-entry" role="listitem">
Franconeri, Steven, Lace Padilla, Priti Shah, Jeffrey Zacks, and Jessica Hullman. 2021. <span>“The Science of Visual Data Communication: What Works.”</span> <em>Psychological Science in the Public Interest</em> 22 (3): 110–61. <a href="https://doi.org/10.1177/15291006211051956">https://doi.org/10.1177/15291006211051956</a>.
</div>
<div id="ref-historyofdataviz" class="csl-entry" role="listitem">
Friendly, Michael, and Howard Wainer. 2021. <em>A History of Data Visualization and Graphic Communication</em>. 1st ed. Massachusetts: Harvard University Press.
</div>
<div id="ref-funkhouser1937historical" class="csl-entry" role="listitem">
Funkhouser, Gray. 1937. <span>“Historical Development of the Graphical Representation of Statistical Data.”</span> <em>Osiris</em> 3: 269–404. <a href="https://doi.org/10.1086/368480">https://doi.org/10.1086/368480</a>.
</div>
<div id="ref-viridis" class="csl-entry" role="listitem">
Garnier, Simon, Noam Ross, Robert Rudis, Antônio Camargo, Marco Sciaini, and Cédric Scherer. 2021. <em><span class="nocase">viridis – Colorblind-Friendly Color Maps for R</span></em>. <a href="https://doi.org/10.5281/zenodo.4679424">https://doi.org/10.5281/zenodo.4679424</a>.
</div>
<div id="ref-citeSharla" class="csl-entry" role="listitem">
Gelfand, Sharla. 2022. <em><span class="nocase">opendatatoronto: Access the City of Toronto Open Data Portal</span></em>. <a href="https://CRAN.R-project.org/package=opendatatoronto">https://CRAN.R-project.org/package=opendatatoronto</a>.
</div>
<div id="ref-healyviz" class="csl-entry" role="listitem">
Healy, Kieran. 2018. <em>Data Visualization</em>. New Jersey: Princeton University Press. <a href="https://socviz.co">https://socviz.co</a>.
</div>
<div id="ref-kieranskitchen" class="csl-entry" role="listitem">
———. 2020. <span>“The Kitchen Counter Observatory,”</span> May. <a href="https://kieranhealy.org/blog/archives/2020/05/21/the-kitchen-counter-observatory/">https://kieranhealy.org/blog/archives/2020/05/21/the-kitchen-counter-observatory/</a>.
</div>
<div id="ref-howes2022representing" class="csl-entry" role="listitem">
Howes, Adam. 2022. <span>“Representing Uncertainty Using Significant Figures,”</span> April. <a href="https://athowes.github.io/posts/2022-04-24-representing-uncertainty-using-significant-figures/">https://athowes.github.io/posts/2022-04-24-representing-uncertainty-using-significant-figures/</a>.
</div>
<div id="ref-KahleWickham2013" class="csl-entry" role="listitem">
Kahle, David, and Hadley Wickham. 2013. <span>“<span class="nocase">ggmap: Spatial Visualization with ggplot2</span>.”</span> <em>The R Journal</em> 5 (1): 144–61. <a href="http://journal.r-project.org/archive/2013-1/kahle-wickham.pdf">http://journal.r-project.org/archive/2013-1/kahle-wickham.pdf</a>.
</div>
<div id="ref-karsetn" class="csl-entry" role="listitem">
Karsten, Karl. 1923. <em>Charts and Graphs</em>. New York: Prentice-Hall.
</div>
<div id="ref-NationalIncomeAndItsComposition" class="csl-entry" role="listitem">
Kuznets, Simon, Lillian Epstein, and Elizabeth Jenks. 1941. <em><span class="nocase">National Income and Its Composition, 1919-1938</span></em>. National Bureau of Economic Research.
</div>
<div id="ref-lovelace2019geocomputation" class="csl-entry" role="listitem">
Lovelace, Robin, Jakub Nowosad, and Jannes Muenchow. 2019. <em><span class="nocase">Geocomputation with R</span></em>. 1st ed. Chapman; Hall/CRC. <a href="https://geocompr.robinlovelace.net">https://geocompr.robinlovelace.net</a>.
</div>
<div id="ref-mapproj" class="csl-entry" role="listitem">
McIlroy, Doug, Ray Brownrigg, Thomas Minka, and Roger Bivand. 2023. <em><span class="nocase">mapproj: Map Projections</span></em>. <a href="https://CRAN.R-project.org/package=mapproj">https://CRAN.R-project.org/package=mapproj</a>.
</div>
<div id="ref-mcquire2019one" class="csl-entry" role="listitem">
McQuire, Scott. 2019. <span>“One Map to Rule Them All? Google Maps as Digital Technical Object.”</span> <em>Communication and the Public</em> 4 (2): 150–65. <a href="https://doi.org/10.1177/2057047319850192">https://doi.org/10.1177/2057047319850192</a>.
</div>
<div id="ref-brewerisarealperson" class="csl-entry" role="listitem">
Miller, Greg. 2014. <span>“<span class="nocase">The Cartographer Who’s Transforming Map Design</span>.”</span> <em>Wired</em>, October. <a href="https://www.wired.com/2014/10/cindy-brewer-map-design/">https://www.wired.com/2014/10/cindy-brewer-map-design/</a>.
</div>
<div id="ref-Moyer2020Measuring" class="csl-entry" role="listitem">
Moyer, Brian, and Abe Dunn. 2020. <span>“Measuring the <span>Gross</span> <span>Domestic</span> <span>Product</span> (<span>GDP</span>): The <span>Ultimate</span> <span>Data</span> <span>Science</span> <span>Project</span>.”</span> <em>Harvard Data Science Review</em> 2 (1). <a href="https://doi.org/10.1162/99608f92.414caadb">https://doi.org/10.1162/99608f92.414caadb</a>.
</div>
<div id="ref-RColorBrewer" class="csl-entry" role="listitem">
Neuwirth, Erich. 2022. <em><span>RColorBrewer: ColorBrewer Palettes</span></em>. <a href="https://CRAN.R-project.org/package=RColorBrewer">https://CRAN.R-project.org/package=RColorBrewer</a>.
</div>
<div id="ref-EssentialMacroAggregates" class="csl-entry" role="listitem">
OECD. 2014. <span>“The Essential Macroeconomic Aggregates.”</span> In <em>Understanding National Accounts</em>, 13–46. <span>OECD</span>. <a href="https://doi.org/10.1787/9789264214637-2-en">https://doi.org/10.1787/9789264214637-2-en</a>.
</div>
<div id="ref-citepatchwork" class="csl-entry" role="listitem">
Pedersen, Thomas Lin. 2022. <em><span class="nocase">patchwork: The Composer of Plots</span></em>. <a href="https://CRAN.R-project.org/package=patchwork">https://CRAN.R-project.org/package=patchwork</a>.
</div>
<div id="ref-phillips1958relation" class="csl-entry" role="listitem">
Phillips, Alban. 1958. <span>“The Relation Between Unemployment and the Rate of Change of Money Wage Rates in the United Kingdom, 1861-1957.”</span> <em>Economica</em> 25 (100): 283–99. <a href="https://doi.org/10.1111/j.1468-0335.1958.tb00003.x">https://doi.org/10.1111/j.1468-0335.1958.tb00003.x</a>.
</div>
<div id="ref-citeR" class="csl-entry" role="listitem">
R Core Team. 2024. <em>R: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>.
</div>
<div id="ref-hrbrthemes" class="csl-entry" role="listitem">
Rudis, Bob. 2020. <em><span class="nocase">hrbrthemes: Additional Themes, Theme Components and Utilities for <span>“ggplot2”</span></span></em>. <a href="https://CRAN.R-project.org/package=hrbrthemes">https://CRAN.R-project.org/package=hrbrthemes</a>.
</div>
<div id="ref-chartingstatistics" class="csl-entry" role="listitem">
Spear, Mary Eleanor. 1952. <em>Charting Statistics</em>. <a href="https://archive.org/details/ChartingStatistics_201801/">https://archive.org/details/ChartingStatistics_201801/</a>.
</div>
<div id="ref-theeconomistforecasts" class="csl-entry" role="listitem">
The Economist. 2022a. <span>“Will Emmanuel Macron Win a Second Term?”</span> April. <a href="https://www.economist.com/interactive/france-2022/forecast">https://www.economist.com/interactive/france-2022/forecast</a>.
</div>
<div id="ref-theeconomistmaps" class="csl-entry" role="listitem">
———. 2022b. <span>“France’s Presidential Election: The Second Round in Detail,”</span> April. <a href="https://www.economist.com/interactive/france-2022/results-round-two">https://www.economist.com/interactive/france-2022/results-round-two</a>.
</div>
<div id="ref-tukeyeda" class="csl-entry" role="listitem">
Tukey, John. 1977. <em>Exploratory Data Analysis</em>.
</div>
<div id="ref-vanderplas2020testing" class="csl-entry" role="listitem">
Vanderplas, Susan, Dianne Cook, and Heike Hofmann. 2020. <span>“Testing Statistical Charts: What Makes a Good Graph?”</span> <em>Annual Review of Statistics and Its Application</em> 7: 61–88. <a href="https://doi.org/10.1146/annurev-statistics-031219-041252">https://doi.org/10.1146/annurev-statistics-031219-041252</a>.
</div>
<div id="ref-wasserman" class="csl-entry" role="listitem">
Wasserman, Larry. 2005. <em>All of Statistics</em>. Springer.
</div>
<div id="ref-removethelegend" class="csl-entry" role="listitem">
Wei, Eugene. 2017. <em>Remove the Legend to Become One</em>. <a href="https://www.eugenewei.com/blog/2017/11/13/remove-the-legend">https://www.eugenewei.com/blog/2017/11/13/remove-the-legend</a>.
</div>
<div id="ref-weissgerber2015beyond" class="csl-entry" role="listitem">
Weissgerber, Tracey, Natasa Milic, Stacey Winham, and Vesna Garovic. 2015. <span>“Beyond Bar and Line Graphs: Time for a New Data Presentation Paradigm.”</span> <em>PLoS Biology</em> 13 (4): e1002128. <a href="https://doi.org/10.1371/journal.pbio.1002128">https://doi.org/10.1371/journal.pbio.1002128</a>.
</div>
<div id="ref-citebabynames" class="csl-entry" role="listitem">
Wickham, Hadley. 2021a. <em><span class="nocase">babynames: US Baby Names 1880-2017</span></em>. <a href="https://CRAN.R-project.org/package=babynames">https://CRAN.R-project.org/package=babynames</a>.
</div>
<div id="ref-wickham2021mastering" class="csl-entry" role="listitem">
———. 2021b. <em>Mastering Shiny</em>. 1st ed. O’Reilly Media. <a href="https://mastering-shiny.org">https://mastering-shiny.org</a>.
</div>
<div id="ref-tidyverse" class="csl-entry" role="listitem">
Wickham, Hadley, Mara Averick, Jenny Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. <span>“<span class="nocase">Welcome to the Tidyverse</span>.”</span> <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-usethis" class="csl-entry" role="listitem">
Wickham, Hadley, Jennifer Bryan, and Malcolm Barrett. 2022. <em><span class="nocase">usethis: Automate Package and Project Setup</span></em>. <a href="https://CRAN.R-project.org/package=usethis">https://CRAN.R-project.org/package=usethis</a>.
</div>
<div id="ref-r4ds" class="csl-entry" role="listitem">
Wickham, Hadley, Mine Çetinkaya-Rundel, and Garrett Grolemund. (2016) 2023. <em>R for Data Science</em>. 2nd ed. O’Reilly Media. <a href="https://r4ds.hadley.nz">https://r4ds.hadley.nz</a>.
</div>
<div id="ref-anotherhadleyreferencelol" class="csl-entry" role="listitem">
Wickham, Hadley, and Lisa Stryjewski. 2011. <span>“40 Years of Boxplots,”</span> November. <a href="https://vita.had.co.nz/papers/boxplots.pdf">https://vita.had.co.nz/papers/boxplots.pdf</a>.
</div>
<div id="ref-grammarofgraphics" class="csl-entry" role="listitem">
Wilkinson, Leland. 2005. <em>The Grammar of Graphics</em>. 2nd ed. Springer.
</div>
<div id="ref-citeknitr" class="csl-entry" role="listitem">
Xie, Yihui. 2023. <em><span class="nocase">knitr: A General-Purpose Package for Dynamic Report Generation in R</span></em>. <a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a>.
</div>
</div>
</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr/>
<ol>
<li id="fn1"><p>The idea for this exercise is from Liza Bolton.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

    
</body>
</html>