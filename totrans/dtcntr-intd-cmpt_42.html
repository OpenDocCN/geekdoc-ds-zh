<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>13.2Â Mutable ListsğŸ”—</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>13.2Â Mutable ListsğŸ”—</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://dcic-world.org/2025-08-27/mutable-lists.html">https://dcic-world.org/2025-08-27/mutable-lists.html</a></blockquote><table cellspacing="0" cellpadding="0"><tr><td/></tr></table><p>Letâ€™s expand our study of updates yet again, this time looking at
updating lists. Weâ€™ll start with lists.</p><p>Imagine that Shaunae wants to use a program to maintain her shopping
list. She creates an initial list with two items:</p><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">shaunae_list = ["bread", "coffee"]</code></pre></div></div><blockquote class="Incercise"><p class="IncerciseHeader">Do Now!</p><blockquote class="IncerciseBody"><p>Shaunae wants to add eggs to her list. Write a line of code to
accomplish this.</p></blockquote></blockquote><p>There are two ways you could have done this:</p><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode"># approach 1
shaunae_list = shaunae_list + ["eggs"]

#approach 2
shaunae_list.append("eggs")</code></pre></div></div><p/><div class="SIntrapara">What is the difference between these two approaches? The difference
lies in the impact on the heap.
</div><div class="SIntrapara"><ul><li><p>The first version creates a new list containing <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"eggs"</code></span>,
then puts the elements of the two lists together in a new list.</p></li><li><p>The second version inserts <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"eggs"</code></span> into the existing
list in the heap.</p></li></ul></div><p>Letâ€™s look at the directories for each version. Hereâ€™s the final directory
for the first version:</p><p/><div class="SIntrapara"><div class="HeapExpr"><div class="EnvPart"><p>Directory</p><ul><li><p/><div class="SIntrapara"><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">shaunae_list</code></pre></div></div></div><div class="SIntrapara"><span class="hspace">Â </span>â†’<span class="hspace">Â </span><span class="heapref sink">1010</span></div></li></ul></div><div class="HeapPart"><p>Heap</p><ul><li><p><span class="heapref source">1005</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">List(len:2)</code></span></p></li><li><p><span class="heapref source">1006</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"bread"</code></span></p></li><li><p><span class="heapref source">1007</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"coffee"</code></span></p></li><li><p><span class="heapref source">1008</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">List(len:1)</code></span></p></li><li><p><span class="heapref source">1009</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"eggs"</code></span></p></li><li><p><span class="heapref source">1010</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">List(len:3)</code></span></p></li><li><p><span class="heapref source">1011</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"bread"</code></span></p></li><li><p><span class="heapref source">1012</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"coffee"</code></span></p></li><li><p><span class="heapref source">1013</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"eggs"</code></span></p></li></ul></div><p/><div class="clear"/></div></div><div class="SIntrapara">The original version of <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">shaunae_list</code></span> is in address
<span class="heapref sink">1005</span>, the list with <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"eggs"</code></span> is in <span class="heapref sink">1008</span>, and
the combined list is in <span class="heapref sink">1010</span>.</div><p>In contrast, the final directory for the second version would look like:</p><p/><div class="SIntrapara"><div class="HeapExpr"><div class="EnvPart"><p>Directory</p><ul><li><p/><div class="SIntrapara"><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">shaunae_list</code></pre></div></div></div><div class="SIntrapara"><span class="hspace">Â </span>â†’<span class="hspace">Â </span><span class="heapref sink">1010</span></div></li></ul></div><div class="HeapPart"><p>Heap</p><ul><li><p><span class="heapref source">1005</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">List(len:3)</code></span></p></li><li><p><span class="heapref source">1006</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"bread"</code></span></p></li><li><p><span class="heapref source">1007</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"coffee"</code></span></p></li><li><p><span class="heapref source">1008</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"eggs"</code></span></p></li></ul></div><p/><div class="clear"/></div></div><div class="SIntrapara">Notice here that the length and contents of the original list are
changed to include the newly-appended <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"eggs"</code></span>.</div><blockquote class="Incercise"><p class="IncerciseHeader">Do Now!</p><blockquote class="IncerciseBody"><p>Which approach do you think is better? Why?</p></blockquote></blockquote><p>At first glance, the second approach might seem better because it
doesnâ€™t create additional unnecessary lists. Both approaches result in
the same contents in <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">shaunae_List</code></span>, so there seems little
benefit to using the additional space.</p><p>Unless, of course, we want to still have access to the old version of
<span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">shaunae_list</code></span> later on. The old list is still in the heap
(though our current program has no name through which to access that
old list). What if we instead had written the program this way?</p><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">shaunae_list = ["bread", "coffee"]
prev_list = shaunae_list
shaunae_list = ["paint", "brushes"] + shaunae_list</code></pre></div></div><p>Now, if Shaunae realizes she goofed and put her art supply shopping on
the grocery list on that last update, she could â€œundoâ€ the update by
resetting her list variable to the previous list:</p><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">shaunae_list = prev_list</code></pre></div></div><p>Undoing a modification (just like the undo feature in document-editing
tools) is just one example of where it can help to hang on to older
versions of data for a little while. The point here is not to give a
sophisticated treatment of undoing computations, but more to motivate
that there are situations in which creating a new list is preferable
to updating the old one.</p><p>When might we want to update, rather than preserve, the existing list?</p><p>Remember our discussion of aliasing? We wanted two people, Elena and
Jorge to share access to a common bank account. Might we ever want a
shared shopping list? Sure, Shaunae and her roommate Jonella do share
a shopping list, so that they can both add items while letting either
one go to the store.</p><blockquote class="Incercise"><p class="IncerciseHeader">Do Now!</p><blockquote class="IncerciseBody"><p>Set up a shared shopping list that is accessible through two names,
<span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">shaunae_list</code></span> and <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">jonella_list</code></span>. Then, add an item to
the list via one of these names and check that the item appears under
the other name.</p></blockquote></blockquote><p>You might have written something like the following:</p><p/><div class="SIntrapara"><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">shaunae_list = ["bread", "coffee"]
jonella_list = shaunae_list
jonella_list.append("eggs")</code></pre></div></div></div><div class="SIntrapara">If you load this code at the prompt and look at both lists at the end,
youâ€™ll see they have the same values.</div><p>In contrast, had we written the code as follows, only one of them
would see the new item:</p><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">&gt;&gt;&gt; jonella_list = ["apples"] + jonella_list
&gt;&gt;&gt; jonella_list
["apples", "bread", "coffee", "eggs"]
&gt;&gt;&gt; shaunae_list
["bread", "coffee", "eggs"]</code></pre></div></div><blockquote class="Incercise"><p class="IncerciseHeader">Do Now!</p><blockquote class="IncerciseBody"><p>Draw the memory diagram for the above program.</p></blockquote></blockquote><section class="SsectionLevel4" id="section 0"><h4 class="heading"><a name="(part._.Exercise__.Creating_.Lists_of_.Accounts)"/>Exercise: Creating Lists of Accounts<span class="button-group"><a href="#(part._.Exercise__.Creating_.Lists_of_.Accounts)" class="heading-anchor" title="Link to here">ğŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>In <a href="mutating-variables.html#%28part._mut-top-level-vars-in-func%29" data-pltdoc="x">Mutating Top-Level Variables within Functions</a>, we wrote a function to create new accounts for the
bank. That function returned each new account as it was created. That
meant that every newly-created account had to be associated with a
name in the directory (otherwise we would not be able to access it
from the heap).</p><p>Maintaining either a list or a dictionary of all the created accounts
makes much more sense. Weâ€™d need only a single name for the collection
of accounts, but could still access individual accounts as needed. For
example, we might want an <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">all_accts</code></span> list that looks something
like the following:</p><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">all_accts = [Account(8623, 100),
             Account(8624, 300),
             Account(8625, 225),
             ...
             ]</code></pre></div></div><blockquote class="Incercise"><p class="IncerciseHeader">Do Now!</p><blockquote class="IncerciseBody"><p>Write a program that creates an empty <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">all_accts</code></span> list, then
adds a new <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">Account</code></span> to it each time <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">create_acct</code></span> is called. You
will need to modify <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">create_acct</code></span> in order to do this. Here is
the existing code as a starting point.</p><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">next_id = 1

def create_acct(init_bal: float) -&gt; Account:
  global next_id
  new_acct = Account(next_id, init_bal, [])
  next_id = next_id + 1
  return new_acct</code></pre></div></div></blockquote></blockquote><blockquote class="Incercise"><p class="IncerciseHeader">Do Now!</p><blockquote class="IncerciseBody"><p>Did you include a line like <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">global all_accts</code></span> in your code?
Why or why not?</p></blockquote></blockquote><p>If you used <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">append</code></span> to update the <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">all_accts</code></span> list,
then you would <span class="emph">not</span> need to include <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">global all_accts</code></span>. Recall
that <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">global</code></span> is needed to tell Python to update a variable in
the top-level directory rather than the local directory. If you use
<span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">all_accts.append</code></span>, however, you are modifying the heap instead
of the directory. There is no need for <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">global</code></span> if your code is
only modifying heap contents.</p></section>&#13;
<h4 class="heading"><a name="(part._.Exercise__.Creating_.Lists_of_.Accounts)"/>Exercise: Creating Lists of Accounts<span class="button-group"><a href="#(part._.Exercise__.Creating_.Lists_of_.Accounts)" class="heading-anchor" title="Link to here">ğŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>In <a href="mutating-variables.html#%28part._mut-top-level-vars-in-func%29" data-pltdoc="x">Mutating Top-Level Variables within Functions</a>, we wrote a function to create new accounts for the
bank. That function returned each new account as it was created. That
meant that every newly-created account had to be associated with a
name in the directory (otherwise we would not be able to access it
from the heap).</p><p>Maintaining either a list or a dictionary of all the created accounts
makes much more sense. Weâ€™d need only a single name for the collection
of accounts, but could still access individual accounts as needed. For
example, we might want an <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">all_accts</code></span> list that looks something
like the following:</p><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">all_accts = [Account(8623, 100),
             Account(8624, 300),
             Account(8625, 225),
             ...
             ]</code></pre></div></div><blockquote class="Incercise"><p class="IncerciseHeader">Do Now!</p><blockquote class="IncerciseBody"><p>Write a program that creates an empty <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">all_accts</code></span> list, then
adds a new <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">Account</code></span> to it each time <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">create_acct</code></span> is called. You
will need to modify <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">create_acct</code></span> in order to do this. Here is
the existing code as a starting point.</p><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">next_id = 1

def create_acct(init_bal: float) -&gt; Account:
  global next_id
  new_acct = Account(next_id, init_bal, [])
  next_id = next_id + 1
  return new_acct</code></pre></div></div></blockquote></blockquote><blockquote class="Incercise"><p class="IncerciseHeader">Do Now!</p><blockquote class="IncerciseBody"><p>Did you include a line like <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">global all_accts</code></span> in your code?
Why or why not?</p></blockquote></blockquote><p>If you used <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">append</code></span> to update the <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">all_accts</code></span> list,
then you would <span class="emph">not</span> need to include <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">global all_accts</code></span>. Recall
that <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">global</code></span> is needed to tell Python to update a variable in
the top-level directory rather than the local directory. If you use
<span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">all_accts.append</code></span>, however, you are modifying the heap instead
of the directory. There is no need for <span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">global</code></span> if your code is
only modifying heap contents.</p>    
</body>
</html>