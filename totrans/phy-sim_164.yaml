- en: Constraint Formulation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://phys-sim-book.github.io/lec31.3-formulation.html](https://phys-sim-book.github.io/lec31.3-formulation.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
  prefs: []
  type: TYPE_NORMAL
- en: The main loop, described in the previous chapter, relies on the solver to correct
    the predicted particle positions p so that they satisfy all defined constraints.
    We will begin by framing the problem as a large, non-linear system of equations
    and inequalities. Then, we will derive the core mathematical machinery used to
    solve this system, which involves linearizing the constraint functions and applying
    a Gauss-Seidel-type iterative scheme. The derivation will show how to compute
    the position correction for a single constraint while accounting for particle
    masses.
  prefs: []
  type: TYPE_NORMAL
- en: '[Problem Formulation](#problem-formulation)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'The central task of the solver is to find a set of position corrections Δpi​
    that move the predicted positions pi​ to a new state pi​+Δpi​ where all M constraints
    are satisfied. If we concatenate all particle positions into a single state vector
    p=[p1T​,...,pNT​]T∈R3N, the problem is to solve the following system of mixed
    equalities and inequalities: C1​(p)C2​(p)⋮CM​(p)​≻0≻0≻0​(32.3.1)'
  prefs: []
  type: TYPE_NORMAL
- en: where each Cj​(p) may represent an equality (=0) or an inequality (≥0). This
    system presents a significant challenge. The problem comprises of a set of M equations
    for 3N unknown position components. If M≥3N, then the system is over-determined,
    else if M≤3N, then the system is under-determined. Additionally, the system is
    typically non-linear, as constraint functions often involve distances or angles.
    Solving such a system globally and simultaneously is computationally intractable
    for real-time applications.
  prefs: []
  type: TYPE_NORMAL
- en: PBD circumvents this complexity by adopting a local and iterative approach.
    Instead of solving the entire system at once, it processes one constraint at a
    time in a sequential manner, similar to the Gauss-Seidel method for solving linear
    systems. Each constraint is solved independently, and the position updates are
    applied immediately, influencing the solution of subsequent constraints in the
    same iteration. We repeatedly iterate through all the constraints and project
    the particles to valid locations with respect to the given constraint alone.
  prefs: []
  type: TYPE_NORMAL
