- en: Constraint Formulation
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 约束表述
- en: 原文：[https://phys-sim-book.github.io/lec31.3-formulation.html](https://phys-sim-book.github.io/lec31.3-formulation.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://phys-sim-book.github.io/lec31.3-formulation.html](https://phys-sim-book.github.io/lec31.3-formulation.html)
- en: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
- en: The main loop, described in the previous chapter, relies on the solver to correct
    the predicted particle positions p so that they satisfy all defined constraints.
    We will begin by framing the problem as a large, non-linear system of equations
    and inequalities. Then, we will derive the core mathematical machinery used to
    solve this system, which involves linearizing the constraint functions and applying
    a Gauss-Seidel-type iterative scheme. The derivation will show how to compute
    the position correction for a single constraint while accounting for particle
    masses.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 前一章中描述的主循环依赖于解算器来纠正预测的粒子位置p，使其满足所有定义的约束。我们首先将问题表述为一个大型非线性方程和不等式系统。然后，我们将推导出解决这个系统的核心数学工具，这涉及到线性化约束函数并应用Gauss-Seidel类型的迭代方案。推导将展示如何在考虑粒子质量的同时计算单个约束的位置修正。
- en: '[Problem Formulation](#problem-formulation)'
  id: totrans-4
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[问题表述](#problem-formulation)'
- en: 'The central task of the solver is to find a set of position corrections Δpi​
    that move the predicted positions pi​ to a new state pi​+Δpi​ where all M constraints
    are satisfied. If we concatenate all particle positions into a single state vector
    p=[p1T​,...,pNT​]T∈R3N, the problem is to solve the following system of mixed
    equalities and inequalities: C1​(p)C2​(p)⋮CM​(p)​≻0≻0≻0​(32.3.1)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 解算器的核心任务是找到一个位置修正集Δpi，将预测位置pi移动到新的状态pi+Δpi，使得所有M个约束都得到满足。如果我们把所有粒子位置连接成一个单一的状态向量p=[p1T,...,pNT]T∈R3N，那么问题就是求解以下混合等式和不等式系统：C1(p)C2(p)⋮CM(p)≻0≻0≻0(32.3.1)
- en: where each Cj​(p) may represent an equality (=0) or an inequality (≥0). This
    system presents a significant challenge. The problem comprises of a set of M equations
    for 3N unknown position components. If M≥3N, then the system is over-determined,
    else if M≤3N, then the system is under-determined. Additionally, the system is
    typically non-linear, as constraint functions often involve distances or angles.
    Solving such a system globally and simultaneously is computationally intractable
    for real-time applications.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 其中每个Cj(p)可能代表一个等式(=0)或一个不等式(≥0)。这个系统提出了一个重大挑战。问题包括一组M个方程，对应于3N个未知的位置分量。如果M≥3N，那么系统是超定的；如果M≤3N，那么系统是欠定的。此外，系统通常是非线性的，因为约束函数通常涉及距离或角度。对于实时应用来说，全局和同时解决这样的系统在计算上是不可行的。
- en: PBD circumvents this complexity by adopting a local and iterative approach.
    Instead of solving the entire system at once, it processes one constraint at a
    time in a sequential manner, similar to the Gauss-Seidel method for solving linear
    systems. Each constraint is solved independently, and the position updates are
    applied immediately, influencing the solution of subsequent constraints in the
    same iteration. We repeatedly iterate through all the constraints and project
    the particles to valid locations with respect to the given constraint alone.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: PBD通过采用局部和迭代的方法来规避这种复杂性。它不是一次性解决整个系统，而是逐个顺序处理一个约束，类似于求解线性系统的Gauss-Seidel方法。每个约束都是独立解决的，并且位置更新立即应用，影响同一迭代中后续约束的解。我们反复迭代所有约束，并将粒子投影到仅相对于给定约束的有效位置。
