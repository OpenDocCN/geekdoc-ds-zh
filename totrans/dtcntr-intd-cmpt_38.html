<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>12.3Â Arrays and Lists in MemoryğŸ”—</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>12.3Â Arrays and Lists in MemoryğŸ”—</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://dcic-world.org/2025-08-27/unified-lists-memory.html">https://dcic-world.org/2025-08-27/unified-lists-memory.html</a></blockquote><table cellspacing="0" cellpadding="0"><tr><td/></tr></table><p>In <a href="unified-equality.html" data-pltdoc="x">Understanding Equality</a>, we drew memory diagrams to show how
values appear in the heap. At that time, we looked only at structured
data. Now we will look at aggregate data: lists in Python and <span style="font-style: italic">arrays</span>
in Pyret.</p><p/><div class="SIntrapara">Both Python lists and Pyret arrays are stored in memory with a
starting value that indicates how many values there are, followed by
the actual elements in subsequent addresses. For instance, suppose we
write the following value:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="TwoColumnAsRows"><tr><td><p><span style="font-weight: bold">Python</span></p></td><td><p/></td></tr><tr><td><p/></td><td><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">sl = ['bread', 'coffee', 'eggs']</code></pre></div></div></td></tr><tr><td><p><span style="font-weight: bold">Pyret</span></p></td><td><p/></td></tr><tr><td><p/></td><td><p/><div class="sourceCodeWrapper"><span data-label="Pyret" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">sl = [array: 'bread', 'coffee', 'eggs']</code></pre></div></div></td></tr></table></div><div class="SIntrapara">Hereâ€™s what memory might look like:
</div><div class="SIntrapara"><div class="HeapExpr"><div class="EnvPart"><p>Directory</p><ul><li><p/><div class="SIntrapara"><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">sl</code></pre></div></div></div><div class="SIntrapara"><span class="hspace">Â </span>â†’<span class="hspace">Â </span><span class="heapref sink">1001</span></div></li></ul></div><div class="HeapPart"><p>Heap</p><ul><li><p><span class="heapref source">1001</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">(length:3)</code></span></p></li><li><p><span class="heapref source">1002</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"bread"</code></span></p></li><li><p><span class="heapref source">1003</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"coffee"</code></span></p></li><li><p><span class="heapref source">1004</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"eggs"</code></span></p></li></ul></div><p/><div class="clear"/></div></div><div class="SIntrapara"><span class="refelem"><span class="refcolumn"><span class="refcontent">If these terms mean anything to you: Pythonâ€™s default list
implementation is array-based, not a linked list.</span></span></span>
So at <span class="heapref sink">1001</span> thereâ€™s an indication of how many entries follow,
and the next memory locations have those values. There are no
directory entries for the individual elements, but they can be reached
by referring to <span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">sl</code></span> followed by an offset: for instance,
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="TwoColumn"><tr><td><p><span style="font-weight: bold">Python</span></p></td><td><p><span style="font-weight: bold">Pyret</span></p></td></tr><tr><td><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">sl[2]</code></pre></div></div></td><td><p/><div class="sourceCodeWrapper"><span data-label="Pyret" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">sl.get-now(2)</code></pre></div></div></td></tr></table></div><div class="SIntrapara">Internally, this turns into: â€œobtain the address of <span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">sl</code></span>, then
add 1 and the offset <span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">2</code></span> to itâ€. This produces the address
<span class="heapref sink">1001</span> + 1 + 2 = <span class="heapref sink">1004</span>. Looking up the value stored
at address <span class="heapref sink">1004</span>, in both languages, produces
<span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">'eggs'</code></span>.<span class="refelem"><span class="refcolumn"><span class="refcontent">You may find it odd that the offsets begin
at 0. While it is indeed confusingâ€”<wbr/>the â€œfirstâ€ value is at offset
<span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">0</code></span>, the â€œthirdâ€ value at offset <span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">2</code></span>, and so onâ€”<wbr/>this is
a convention both Python and Pyret chose to be consistent with most
other programming languages.</span></span></span></div><p/><div class="SIntrapara">Similarly, suppose we try to change the shopping listâ€™s content to
replace the second value with <span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">'tea'</code></span>. Recall that the second
value is at offset <span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">1</code></span>:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="TwoColumn"><tr><td><p><span style="font-weight: bold">Python</span></p></td><td><p><span style="font-weight: bold">Pyret</span></p></td></tr><tr><td><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">sl[1] = 'tea'</code></pre></div></div></td><td><p/><div class="sourceCodeWrapper"><span data-label="Pyret" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">sl.set-now(1, 'tea')</code></pre></div></div></td></tr></table></div><div class="SIntrapara">Again, we obtain the address of <span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">sl</code></span>, which is <span class="heapref sink">1001</span>; add
1 and the offset (<span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">1</code></span>) to it; this gives us the address
<span class="heapref sink">1003</span>. Now, we modify the value at <span class="heapref sink">1003</span> to be the new
value:
</div><div class="SIntrapara"><div class="HeapExpr"><div class="EnvPart"><p>Directory</p><ul><li><p/><div class="SIntrapara"><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">sl</code></pre></div></div></div><div class="SIntrapara"><span class="hspace">Â </span>â†’<span class="hspace">Â </span><span class="heapref sink">1001</span></div></li></ul></div><div class="HeapPart"><p>Heap</p><ul><li><p><span class="heapref source">1001</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">(length:3)</code></span></p></li><li><p><span class="heapref source">1002</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"bread"</code></span></p></li><li><p><span class="heapref source">1003</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"tea"</code></span></p></li><li><p><span class="heapref source">1004</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"eggs"</code></span></p></li></ul></div><p/><div class="clear"/></div></div><div class="SIntrapara">If we now ask the language for the list as a whole, we see the change:
in Python,</div><p/><table cellspacing="0" cellpadding="0" class="PyretReplInteraction"><tr><td><table cellspacing="0" cellpadding="0" class="PyretReplInteraction"><tr><td><blockquote class="PyretRepl"><p class="PyretReplPrompt"/><p/><div class="sourceCodeWrapper"><span data-label="Pyret" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">sl</code></pre></div></div></blockquote></td></tr></table></td></tr><tr><td><p/><div class="sourceCodeWrapper"><span data-label="Pyret" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">['bread', 'tea', 'eggs']</code></pre></div></div></td></tr></table><p>and in Pyret,</p><p/><table cellspacing="0" cellpadding="0" class="PyretReplInteraction"><tr><td><table cellspacing="0" cellpadding="0" class="PyretReplInteraction"><tr><td><blockquote class="PyretRepl"><p class="PyretReplPrompt"/><p/><div class="sourceCodeWrapper"><span data-label="Pyret" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">sl</code></pre></div></div></blockquote></td></tr></table></td></tr><tr><td><p/><div class="sourceCodeWrapper"><span data-label="Pyret" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">[array: "bread", "tea", "eggs"]</code></pre></div></div></td></tr></table><p/><div class="SIntrapara">Observe that what we have learned about aliasing applies here,
too. Suppose Shaunae and Jonella share a shopping list, where
<span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">sl</code></span> is Shaunaeâ€™s and Jonella writes:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="TwoColumn"><tr><td><p><span style="font-weight: bold">Python</span></p></td><td><p><span style="font-weight: bold">Pyret</span></p></td></tr><tr><td><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">jl = sl</code></pre></div></div></td><td><p/><div class="sourceCodeWrapper"><span data-label="Pyret" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">jl = sl</code></pre></div></div></td></tr></table></div><div class="SIntrapara">Now <span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">jl</code></span> and <span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">sl</code></span> are aliases for the same data in the heap:
</div><div class="SIntrapara"><div class="HeapExpr"><div class="EnvPart"><p>Directory</p><ul><li><p/><div class="SIntrapara"><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">sl</code></pre></div></div></div><div class="SIntrapara"><span class="hspace">Â </span>â†’<span class="hspace">Â </span><span class="heapref sink">1001</span></div></li><li><p/><div class="SIntrapara"><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">jl</code></pre></div></div></div><div class="SIntrapara"><span class="hspace">Â </span>â†’<span class="hspace">Â </span><span class="heapref sink">1001</span></div></li></ul></div><div class="HeapPart"><p>Heap</p><ul><li><p><span class="heapref source">1001</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">(length:3)</code></span></p></li><li><p><span class="heapref source">1002</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"bread"</code></span></p></li><li><p><span class="heapref source">1003</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"tea"</code></span></p></li><li><p><span class="heapref source">1004</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"eggs"</code></span></p></li></ul></div><p/><div class="clear"/></div></div><div class="SIntrapara">Thus, modifying the list <span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">jl</code></span> has the same impact as modifying it
via <span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">sl</code></span>:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="TwoColumn"><tr><td><p><span style="font-weight: bold">Python</span></p></td><td><p><span style="font-weight: bold">Pyret</span></p></td></tr><tr><td><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">jl[0] = 'butter'</code></pre></div></div></td><td><p/><div class="sourceCodeWrapper"><span data-label="Pyret" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">jl.set-now(0, 'butter')</code></pre></div></div></td></tr></table></div><div class="SIntrapara">means the memory looks like
</div><div class="SIntrapara"><div class="HeapExpr"><div class="EnvPart"><p>Directory</p><ul><li><p/><div class="SIntrapara"><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">sl</code></pre></div></div></div><div class="SIntrapara"><span class="hspace">Â </span>â†’<span class="hspace">Â </span><span class="heapref sink">1001</span></div></li><li><p/><div class="SIntrapara"><p/><div class="sourceCodeWrapper"><span data-label="Python" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="text/x-python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">jl</code></pre></div></div></div><div class="SIntrapara"><span class="hspace">Â </span>â†’<span class="hspace">Â </span><span class="heapref sink">1001</span></div></li></ul></div><div class="HeapPart"><p>Heap</p><ul><li><p><span class="heapref source">1001</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">(length:3)</code></span></p></li><li><p><span class="heapref source">1002</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"butter"</code></span></p></li><li><p><span class="heapref source">1003</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"tea"</code></span></p></li><li><p><span class="heapref source">1004</span>:<span class="hspace">Â </span><span title="Python" class="sourceCode"><code data-lang="text/x-python" class="sourceCode">"eggs"</code></span></p></li></ul></div><p/><div class="clear"/></div></div><div class="SIntrapara">Thus, if we ask for the value of <span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">sl</code></span>, we will see in Python:</div><p/><table cellspacing="0" cellpadding="0" class="PyretReplInteraction"><tr><td><table cellspacing="0" cellpadding="0" class="PyretReplInteraction"><tr><td><blockquote class="PyretRepl"><p class="PyretReplPrompt"/><p/><div class="sourceCodeWrapper"><span data-label="Pyret" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">sl</code></pre></div></div></blockquote></td></tr></table></td></tr><tr><td><p/><div class="sourceCodeWrapper"><span data-label="Pyret" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">['butter', 'tea', 'eggs']</code></pre></div></div></td></tr></table><p>and in Pyret:</p><p/><table cellspacing="0" cellpadding="0" class="PyretReplInteraction"><tr><td><table cellspacing="0" cellpadding="0" class="PyretReplInteraction"><tr><td><blockquote class="PyretRepl"><p class="PyretReplPrompt"/><p/><div class="sourceCodeWrapper"><span data-label="Pyret" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">sl</code></pre></div></div></blockquote></td></tr></table></td></tr><tr><td><p/><div class="sourceCodeWrapper"><span data-label="Pyret" class="sourceLangLabel"/><div class="sourceCode"><pre data-lang="pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">[array: "butter", "tea", "eggs"]</code></pre></div></div></td></tr></table><p>even though we did not make a modification through the name <span title="Pyret" class="sourceCode"><code data-lang="pyret" class="sourceCode">sl</code></span>.</p>    
</body>
</html>