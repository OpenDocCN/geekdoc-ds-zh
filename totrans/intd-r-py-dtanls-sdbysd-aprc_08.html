<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Chapter 5 R’s lists Versus Python’s lists and dicts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Chapter 5 R’s lists Versus Python’s lists and dicts</h1>
<blockquote>原文：<a href="https://randpythonbook.netlify.app/rs-lists-versus-pythons-lists-and-dicts">https://randpythonbook.netlify.app/rs-lists-versus-pythons-lists-and-dicts</a></blockquote>
<div id="rs-lists-versus-pythons-lists-and-dicts" class="section level1 hasAnchor">

<p>When you need to store elements in a container, but you can’t guarantee that these elements all have the same type, or you can’t guarantee that they all have the same size, then you need a <code>list</code> in R. In Python, you might need a <code>list</code> or <code>dict</code>  (short for dictionary) <span class="citation">(Lutz <a href="#ref-Lutz13">2013</a>)</span>.</p>
<div id="lists-in-r" class="section level2 hasAnchor">
<h2><span class="header-section-number">5.1</span> <code>list</code>s In R<a aria-label="Anchor link to header" class="anchor-section" href="/rs-lists-versus-pythons-lists-and-dicts#lists-in-r"/></h2>
<p><code>list</code>s are one of the most flexible data types in R. You can access individual elements in many different ways, each element can be of different size, and each element can be of a different type.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" title="1">myList &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="st">"May 5th, 2021"</span>, <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>))</a>
<a class="sourceLine" id="cb81-2" title="2">myList[<span class="dv">1</span>] <span class="co"># length-1 list; first element is length 3 vector</span></a>
<a class="sourceLine" id="cb81-3" title="3"><span class="co">## [[1]]</span></a>
<a class="sourceLine" id="cb81-4" title="4"><span class="co">## [1] 1 2 3</span></a>
<a class="sourceLine" id="cb81-5" title="5">myList[[<span class="dv">1</span>]] <span class="co"># length-3 vector</span></a>
<a class="sourceLine" id="cb81-6" title="6"><span class="co">## [1] 1 2 3</span></a></code></pre></div>
<p>If you want to extract an element, you need to decide between using single square brackets or double square brackets. The former returns a <code>list</code>, while the second returns the type of the individual element.</p>
<p>You can also name the elements of a list. This can lead to more readable code. To see why, examine the example below that makes use of spme data about cars <span class="citation">(“SAS<sup/> Viya<sup/> Example Data Sets” <a href="#ref-sas_cars">2021</a>)</span>. The <code>lm()</code> function estimates a linear regression model. It returns a <code>list</code> with plenty of components.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" title="1">dataSet &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">"data/cars.csv"</span>)</a>
<a class="sourceLine" id="cb82-2" title="2">results &lt;-<span class="st"> </span><span class="kw">lm</span>(<span class="kw">log</span>(Horsepower) <span class="op">~</span><span class="st"> </span>Type, <span class="dt">data =</span> dataSet)</a>
<a class="sourceLine" id="cb82-3" title="3"><span class="kw">length</span>(results)</a>
<a class="sourceLine" id="cb82-4" title="4"><span class="co">## [1] 13</span></a>
<a class="sourceLine" id="cb82-5" title="5"><span class="co"># names(results) # try this &lt;-</span></a>
<a class="sourceLine" id="cb82-6" title="6">results<span class="op">$</span>contrasts</a>
<a class="sourceLine" id="cb82-7" title="7"><span class="co">## $Type</span></a>
<a class="sourceLine" id="cb82-8" title="8"><span class="co">## [1] "contr.treatment"</span></a>
<a class="sourceLine" id="cb82-9" title="9">results[<span class="st">'rank'</span>]</a>
<a class="sourceLine" id="cb82-10" title="10"><span class="co">## $rank</span></a>
<a class="sourceLine" id="cb82-11" title="11"><span class="co">## [1] 6</span></a></code></pre></div>
<div class="rmd-caution">
<p><code>results</code> is a <code>list</code> (because <code>is.list(results)</code> returns <code>TRUE</code>), but to be more specific, it is an S3 object of class <code>lm</code>. If you do not know what this means, do not worry! S3 classes are discussed more in a later chapter. Why is this important? For one, I mention it so that you aren’t confused if you type <code>class(results)</code> and see <code>lm</code> instead of <code>list</code>. Second, the fact that the authors of <code>lm()</code> wrote code that returns <code>result</code> as a “fancy list” suggests that they are encouraging another way to access elements of the <code>results</code>: to use specialized functions! For example, you can use <code>residuals(results)</code>, <code>coefficients(results)</code>, and <code>fitted.values(results)</code>. These functions do not work for all lists in R, but when they do work (for <code>lm</code> and <code>glm</code> objects only), you can be sure you are writing the kind of code that is encouraged by the authors of <code>lm()</code>.</p>
</div>
</div>
<div id="lists-in-python" class="section level2 hasAnchor">
<h2><span class="header-section-number">5.2</span> <code>list</code>s In Python<a aria-label="Anchor link to header" class="anchor-section" href="/rs-lists-versus-pythons-lists-and-dicts#lists-in-python"/></h2>
<p><a href="https://docs.python.org/3/library/stdtypes.html#lists">Python <code>list</code>s</a> are very flexible, too. There are fewer choices for accessing and modifying elements of lists in Python–you’ll most likely end up using the square bracket operator. Elements can be different sizes and types, just like they were with R’s lists.</p>
<p>Unlike in R, however, you cannot name elements of lists. If you want a container that allows you to access elements by name, look into Python <a href="https://docs.python.org/3/library/stdtypes.html#mapping-types-dict">dictionaries</a> (see section <a href="/rs-lists-versus-pythons-lists-and-dicts#dictionaries-in-python">5.3</a>) or Pandas’ <code>Series</code> objects (see section <a href="/r-vectors-versus-numpy-arrays-and-pandas-series#overview-of-python">3.2</a>).</p>
<p>From the example below, you can see that we’ve been introduced to lists already. We have been constructing Numpy arrays from them.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb83-1" title="1"><span class="im">import</span> numpy <span class="im">as</span> np</a>
<a class="sourceLine" id="cb83-2" title="2">another_list <span class="op">=</span> [np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]), <span class="st">"May 5th, 2021"</span>, <span class="va">True</span>, [<span class="dv">42</span>,<span class="dv">42</span>]]</a>
<a class="sourceLine" id="cb83-3" title="3">another_list[<span class="dv">2</span>]</a>
<a class="sourceLine" id="cb83-4" title="4"><span class="co">## True</span></a>
<a class="sourceLine" id="cb83-5" title="5">another_list[<span class="dv">2</span>] <span class="op">=</span> <span class="dv">100</span></a>
<a class="sourceLine" id="cb83-6" title="6">another_list</a>
<a class="sourceLine" id="cb83-7" title="7"><span class="co">## [array([1, 2, 3]), 'May 5th, 2021', 100, [42, 42]]</span></a></code></pre></div>
<p>Python lists have <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">methods attached to them</a>, which can come in handy.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb84-1" title="1">another_list</a>
<a class="sourceLine" id="cb84-2" title="2"><span class="co">## [array([1, 2, 3]), 'May 5th, 2021', 100, [42, 42]]</span></a>
<a class="sourceLine" id="cb84-3" title="3">another_list.append(<span class="st">'new element'</span>)</a>
<a class="sourceLine" id="cb84-4" title="4">another_list</a>
<a class="sourceLine" id="cb84-5" title="5"><span class="co">## [array([1, 2, 3]), 'May 5th, 2021', 100, [42, 42], 'new element']</span></a></code></pre></div>
<p>Creating lists can be done as above, with the square bracket operators. They can also be created with the <code>list()</code> function, and by creating a <em>list comprehension</em>. List comprehensions are discussed more in <a href="/control-flow#loops">11.2</a>.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb85-1" title="1">my_list <span class="op">=</span> <span class="bu">list</span>((<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>)) <span class="co"># converting a tuple to a list</span></a>
<a class="sourceLine" id="cb85-2" title="2">your_list <span class="op">=</span> [i<span class="op">**</span><span class="dv">2</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>)] <span class="co"># list comprehension</span></a>
<a class="sourceLine" id="cb85-3" title="3">my_list</a>
<a class="sourceLine" id="cb85-4" title="4"><span class="co">## ['a', 'b', 'c']</span></a>
<a class="sourceLine" id="cb85-5" title="5">your_list</a>
<a class="sourceLine" id="cb85-6" title="6"><span class="co">## [0, 1, 4]</span></a></code></pre></div>
<p>The code above makes reference to a type that is not extensively discussed in this text: <a href="https://docs.python.org/3.3/library/stdtypes.html?highlight=tuple#tuple"><code>tuple</code>s</a>.</p>
</div>
<div id="dictionaries-in-python" class="section level2 hasAnchor">
<h2><span class="header-section-number">5.3</span> Dictionaries In Python<a aria-label="Anchor link to header" class="anchor-section" href="/rs-lists-versus-pythons-lists-and-dicts#dictionaries-in-python"/></h2>
<p><a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries"><strong>Dictionaries</strong></a> in Python provide a container of key-value pairs. The keys are <em>unique</em>, and they must be <em>immutable</em>. <code>string</code>s are the most common key type, but <code>int</code>s can be used as well.</p>
<p>Here is an example of creating a <code>dict</code> with curly braces (i.e. <code>{}</code>). This <code>dict</code> stores the current price of a few popular cryptocurrencies. Accessing an individual element’s value using its key is done with the square bracket operator (i.e. <code>[]</code>), and deleting elements is done with the <code>del</code> keyword.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb86-1" title="1">crypto_prices <span class="op">=</span> {<span class="st">'BTC'</span>: <span class="fl">38657.14</span>, <span class="st">'ETH'</span>: <span class="fl">2386.54</span>, <span class="st">'DOGE'</span>: <span class="fl">.308122</span>}</a>
<a class="sourceLine" id="cb86-2" title="2">crypto_prices[<span class="st">'DOGE'</span>] <span class="co"># get the current price of Dogecoin</span></a>
<a class="sourceLine" id="cb86-3" title="3"><span class="co">## 0.308122</span></a>
<a class="sourceLine" id="cb86-4" title="4"><span class="kw">del</span> crypto_prices[<span class="st">'BTC'</span>] <span class="co"># remove the current price of Bitcoin</span></a>
<a class="sourceLine" id="cb86-5" title="5">crypto_prices.keys()</a>
<a class="sourceLine" id="cb86-6" title="6"><span class="co">## dict_keys(['ETH', 'DOGE'])</span></a>
<a class="sourceLine" id="cb86-7" title="7">crypto_prices.values()</a>
<a class="sourceLine" id="cb86-8" title="8"><span class="co">## dict_values([2386.54, 0.308122])</span></a></code></pre></div>
<p>You can also create <code>dict</code>s using <strong>dictionary comprehensions</strong>. Just like list comprehensions, these are discussed more in <a href="/control-flow#loops">11.2</a>.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb87-1" title="1">incr_cryptos <span class="op">=</span> {key:val<span class="op">*</span><span class="fl">1.1</span> <span class="cf">for</span> (key,val) <span class="kw">in</span> crypto_prices.items()}</a>
<a class="sourceLine" id="cb87-2" title="2">incr_cryptos</a>
<a class="sourceLine" id="cb87-3" title="3"><span class="co">## {'ETH': 2625.194, 'DOGE': 0.3389342}</span></a></code></pre></div>
<p>Personally, I don’t use dictionaries as much as lists. If I have a dictionary, I usually convert it to a Pandas data frame (more information on those in <a href="/data-frames#data-frames-in-python">8.2</a>).</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb88-1" title="1"><span class="im">import</span> pandas <span class="im">as</span> pd</a>
<a class="sourceLine" id="cb88-2" title="2">a_dict <span class="op">=</span> { <span class="st">'col1'</span>: [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="st">'col2'</span> : [<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>]}</a>
<a class="sourceLine" id="cb88-3" title="3">df_from_dict <span class="op">=</span> pd.DataFrame(a_dict)</a>
<a class="sourceLine" id="cb88-4" title="4">df_from_dict</a>
<a class="sourceLine" id="cb88-5" title="5"><span class="co">##    col1 col2</span></a>
<a class="sourceLine" id="cb88-6" title="6"><span class="co">## 0     1    a</span></a>
<a class="sourceLine" id="cb88-7" title="7"><span class="co">## 1     2    b</span></a>
<a class="sourceLine" id="cb88-8" title="8"><span class="co">## 2     3    c</span></a></code></pre></div>
</div>
<div id="exercises-3" class="section level2 hasAnchor">
<h2><span class="header-section-number">5.4</span> Exercises<a aria-label="Anchor link to header" class="anchor-section" href="/rs-lists-versus-pythons-lists-and-dicts#exercises-3"/></h2>
<div id="r-questions-3" class="section level3 hasAnchor">
<h3><span class="header-section-number">5.4.1</span> R Questions<a aria-label="Anchor link to header" class="anchor-section" href="/rs-lists-versus-pythons-lists-and-dicts#r-questions-3"/></h3>
<ol style="list-style-type: decimal">
<li/>
</ol>
<p>Consider the data sets <code>"adult.data"</code>, <code>"car.data"</code>, <code>"hungarian.data"</code>, <code>"iris.data"</code>, <code>"long-beach-va.data"</code> and <code>"switzerland.data"</code> <span class="citation">(Janosi et al. <a href="#ref-misc_heart_disease_45">1988</a>)</span>, <span class="citation">(Fisher <a href="#ref-misc_iris_53">1988</a>)</span>, <span class="citation">(“Adult” <a href="#ref-misc_adult_2">1996</a>)</span> and <span class="citation">(“Car Evaluation” <a href="#ref-misc_car_evaluation_19">1997</a>)</span> hosted by <span class="citation">(Dua and Graff <a href="#ref-uci_data">2017</a>)</span>. Read all of these in and store them all as a <code>list</code> of <code>data.frame</code>s. Call the list <code>listDfs</code>.</p>
<ol start="2" style="list-style-type: decimal">
<li/>
</ol>
<p>Here are two lists in R:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" title="1">l1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">first=</span><span class="st">"a"</span>, <span class="dt">second=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb89-2" title="2">l2 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">first=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">second =</span> <span class="st">"statistics"</span>)</a></code></pre></div>
<ol style="list-style-type: lower-alpha">
<li><p>Make a new <code>list</code> that is these two lists above “squished together.” It has to be length <span class="math inline">\(4\)</span>, and each element is one of the elements of <code>l1</code> and <code>l2</code>. Call this list <code>l3</code>. Make sure to delete all the “tags” or “names” of these four elements.</p></li>
<li><p>Extract the third element of <code>l3</code> as a length one <code>list</code> and assign it to the name <code>l4</code>.</p></li>
<li><p>Extract the third element of <code>l3</code> as a <code>vector</code> and assign it to the name <code>v1</code>.</p></li>
</ol>
</div>
<div id="python-questions-3" class="section level3 hasAnchor">
<h3><span class="header-section-number">5.4.2</span> Python Questions<a aria-label="Anchor link to header" class="anchor-section" href="/rs-lists-versus-pythons-lists-and-dicts#python-questions-3"/></h3>
<ol style="list-style-type: decimal">
<li/>
</ol>
<p>Read in <code>car.data</code> with <code>pd.read_csv()</code>, and use a <code>DataFrame</code> method to convert that to a <code>dict</code>. Store your answer as <code>car_dict</code>.</p>
<ol start="2" style="list-style-type: decimal">
<li/>
</ol>
<p>Here are two <code>dict</code>s in Python:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb90-1" title="1">d1 <span class="op">=</span> { <span class="st">"first"</span> : <span class="st">"a"</span>, <span class="st">"second"</span> : <span class="dv">1</span>}</a>
<a class="sourceLine" id="cb90-2" title="2">d2 <span class="op">=</span> { <span class="st">"first"</span> : [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="st">"second"</span> : <span class="st">"statistics"</span>}</a></code></pre></div>
<ol style="list-style-type: lower-alpha">
<li><p>Make a new <code>list</code> that is these two <code>dict</code>s above “squished together” (why can’t it be another <code>dict</code>?) It has to be length <span class="math inline">\(4\)</span>, and each value is one of the values of <span class="math inline">\(d1\)</span> and <span class="math inline">\(d2\)</span>. Call this list <code>my_list</code>.</p></li>
<li><p>Use a list comprehension to create a list called <code>special_list</code> of all numbers starting from zero, up to (and including) one million, but don’t include numbers that are divisible by any prime number less than seven.</p></li>
<li><p>Assign the average of all elements in the above list to the variable <code>special_ave</code>.</p></li>
</ol>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-misc_adult_2">
<p>“Adult.” 1996. UCI Machine Learning Repository.</p>
</div>
<div id="ref-misc_car_evaluation_19">
<p>“Car Evaluation.” 1997. UCI Machine Learning Repository.</p>
</div>
<div id="ref-uci_data">
<p>Dua, Dheeru, and Casey Graff. 2017. “UCI Machine Learning Repository.” University of California, Irvine, School of Information; Computer Sciences. <a href="http://archive.ics.uci.edu/ml">http://archive.ics.uci.edu/ml</a>.</p>
</div>
<div id="ref-misc_iris_53">
<p>Fisher, Test, R.A. &amp; Creator. 1988. “Iris.” UCI Machine Learning Repository.</p>
</div>
<div id="ref-misc_heart_disease_45">
<p>Janosi, Andras, William Steinbrunn, Matthias Pfisterer, and Robert Detrano. 1988. “Heart Disease.” UCI Machine Learning Repository.</p>
</div>
<div id="ref-Lutz13">
<p>Lutz, Mark. 2013. <em>Learning Python</em>. 5th ed. Beijing: O’Reilly. <a href="https://www.safaribooksonline.com/library/view/learning-python-5th/9781449355722/">https://www.safaribooksonline.com/library/view/learning-python-5th/9781449355722/</a>.</p>
</div>
<div id="ref-sas_cars">
<p>“SAS<sup/> Viya<sup/> Example Data Sets.” 2021. <a href="https://support.sas.com/documentation/onlinedoc/viya/examples.htm">https://support.sas.com/documentation/onlinedoc/viya/examples.htm</a>.</p>
</div>
</div>
                
</body>
</html>