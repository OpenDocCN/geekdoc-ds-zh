["```py\ndata Element<T>:\n  | elt(val :: T, parent :: Option<Element>)\nend\n```", "```py\nfun is-same-element(e1, e2): e1.val <=> e2.val end\n```", "```py\nfun is-in-same-set(e1 :: Element, e2 :: Element, s :: Sets)\n    -> Boolean:\n  s1 = fynd(e1, s)\n  s2 = fynd(e2, s)\n  identical(s1, s2)\nend\n```", "```py\ntype Sets = List<Element>\n```", "```py\nfun fynd(e :: Element, s :: Sets) -> Element:\n  cases (List) s:\n    | empty => raise(\"fynd: shouldn't have gotten here\")\n    | link(f, r) =>\n      if is-same-element(f, e):\n        cases (Option) f.parent:\n          | none => f\n          | some(p) => fynd(p, s)\n        end\n      else:\n        fynd(e, r)\n      end\n  end\nend\n```", "```py\nfun union(e1 :: Element, e2 :: Element, s :: Sets) -> Sets:\n  s1 = fynd(e1, s)\n  s2 = fynd(e2, s)\n  if identical(s1, s2):\n    s\n  else:\n    update-set-with(s, s1, s2)\n  end\nend\n```", "```py\nfun update-set-with(s :: Sets, child :: Element, parent :: Element)\n    -> Sets:\n  cases (List) s:\n    | empty => raise(\"update: shouldn't have gotten here\")\n    | link(f, r) =>\n      if is-same-element(f, child):\n        link(elt(f.val, some(parent)), r)\n      else:\n        link(f, update-set-with(r, child, parent))\n      end\n  end\nend\n```", "```py\ncheck:\n  s0 = map(elt(_, none), [list: 0, 1, 2, 3, 4, 5, 6, 7])\n  s1 = union(get(s0, 0), get(s0, 2), s0)\n  s2 = union(get(s1, 0), get(s1, 3), s1)\n  s3 = union(get(s2, 3), get(s2, 5), s2)\n  print(s3)\n  is-same-element(fynd(get(s0, 0), s3), fynd(get(s0, 5), s3)) is true\n  is-same-element(fynd(get(s0, 2), s3), fynd(get(s0, 5), s3)) is true\n  is-same-element(fynd(get(s0, 3), s3), fynd(get(s0, 5), s3)) is true\n  is-same-element(fynd(get(s0, 5), s3), fynd(get(s0, 5), s3)) is true\n  is-same-element(fynd(get(s0, 7), s3), fynd(get(s0, 7), s3)) is true\nend\n```", "```py\ndata Element<T>:\n  | elt(val :: T, parent :: Option<Element>)\nend\n```", "```py\nfun is-same-element(e1, e2): e1.val <=> e2.val end\n```", "```py\nfun is-in-same-set(e1 :: Element, e2 :: Element, s :: Sets)\n    -> Boolean:\n  s1 = fynd(e1, s)\n  s2 = fynd(e2, s)\n  identical(s1, s2)\nend\n```", "```py\ntype Sets = List<Element>\n```", "```py\nfun fynd(e :: Element, s :: Sets) -> Element:\n  cases (List) s:\n    | empty => raise(\"fynd: shouldn't have gotten here\")\n    | link(f, r) =>\n      if is-same-element(f, e):\n        cases (Option) f.parent:\n          | none => f\n          | some(p) => fynd(p, s)\n        end\n      else:\n        fynd(e, r)\n      end\n  end\nend\n```", "```py\nfun union(e1 :: Element, e2 :: Element, s :: Sets) -> Sets:\n  s1 = fynd(e1, s)\n  s2 = fynd(e2, s)\n  if identical(s1, s2):\n    s\n  else:\n    update-set-with(s, s1, s2)\n  end\nend\n```", "```py\nfun update-set-with(s :: Sets, child :: Element, parent :: Element)\n    -> Sets:\n  cases (List) s:\n    | empty => raise(\"update: shouldn't have gotten here\")\n    | link(f, r) =>\n      if is-same-element(f, child):\n        link(elt(f.val, some(parent)), r)\n      else:\n        link(f, update-set-with(r, child, parent))\n      end\n  end\nend\n```", "```py\ncheck:\n  s0 = map(elt(_, none), [list: 0, 1, 2, 3, 4, 5, 6, 7])\n  s1 = union(get(s0, 0), get(s0, 2), s0)\n  s2 = union(get(s1, 0), get(s1, 3), s1)\n  s3 = union(get(s2, 3), get(s2, 5), s2)\n  print(s3)\n  is-same-element(fynd(get(s0, 0), s3), fynd(get(s0, 5), s3)) is true\n  is-same-element(fynd(get(s0, 2), s3), fynd(get(s0, 5), s3)) is true\n  is-same-element(fynd(get(s0, 3), s3), fynd(get(s0, 5), s3)) is true\n  is-same-element(fynd(get(s0, 5), s3), fynd(get(s0, 5), s3)) is true\n  is-same-element(fynd(get(s0, 7), s3), fynd(get(s0, 7), s3)) is true\nend\n```"]