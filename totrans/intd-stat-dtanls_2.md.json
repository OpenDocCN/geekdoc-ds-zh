["```r\n[library](https://rdrr.io/r/base/library.html)([readxl](https://readxl.tidyverse.org)) # This command loads the package \"readxl\". In the markdown document, all required packages are installed in the background using the command \"install.packages('packagename')\". In the downloadable script files, the installation and activation of the packages is automated. \n data_nrw <- [read_excel](https://readxl.tidyverse.org/reference/read_excel.html)(\"data/inkar_nrw.xls\") # Reads data from Excel format; the directory where the data is to be found can be changed (e.g., \"C:/user/documents/folderxyz/inkar_nrw.xls\")\n```", "```r\nkable([head](https://rdrr.io/r/utils/head.html)(data_nrw, 10), format = \"html\", caption = \"Selected social indicators NRW\") %>%\n kable_paper() %>% #Font scheme of the table\n scroll_box(width = \"100%\", height = \"100%\") #Scrollable box\n```", "```r\n# Read a so-called shape file for NRW which contains the polygones (e.g., district boundaries) necessary to build maps and merging with structural data\nnrw_shp <- st_read(\"data/dvg2krs_nw.shp\")\n```", "```r\n## Reading layer `dvg2krs_nw' from data source \n##   `C:\\Users\\ziller\\OneDrive - Universitaet Duisburg-Essen\\Statistik Bookdown\\IntroStats\\IS\\data\\dvg2krs_nw.shp' \n##   using driver `ESRI Shapefile'\n## Simple feature collection with 53 features and 8 fields\n## Geometry type: MULTIPOLYGON\n## Dimension:     XY\n## Bounding box:  xmin: 280375 ymin: 5577680 xmax: 531791.2 ymax: 5820212\n## Projected CRS: ETRS89 / UTM zone 32N\n```", "```r\nnrw_shp$KN <- [as.numeric](https://rdrr.io/r/base/numeric.html)([as.character](https://rdrr.io/r/base/character.html)(nrw_shp$KN))\nnrw_shp <- nrw_shp %>%\n right_join(data_nrw, by = [c](https://rdrr.io/r/base/c.html)(\"KN\"))\n # Building the map using the \"ggplot2\" package\n ggplot() + \n geom_sf(data = nrw_shp, aes(fill = unemp), color = 'gray', size = 0.1) + \nggtitle(\"North-Rhine Westphalia, Germany\") +\n guides(fill=guide_colorbar(title=\"Unemployment in %\")) + \n scale_fill_gradientn(colours=[rev](https://rdrr.io/r/base/rev.html)(magma(3)),\n na.value = \"grey100\", \n ) \n```", "```r\n[library](https://rdrr.io/r/base/library.html)([lattice](https://lattice.r-forge.r-project.org/))\n data_nrw$popdens <- data_nrw$population/data_nrw$flaeche # This generates the variable for the population density\n [histogram](https://rdrr.io/pkg/lattice/man/histogram.html)( ~ popdens + unemp + avage + crimerate,\n breaks = 10, \n type = \"percent\", \n xlab = \"\",\n ylab = \"Percent of observations\", \n layout = [c](https://rdrr.io/r/base/c.html)(2,1),\n scales = [list](https://rdrr.io/r/base/list.html)(relation=\"free\"),\n col = 'grey',\n data = data_nrw)\n```", "```r\n## Alternative approach with the \"hist\"-function\n#hist(data_nrw$unemp)\n#hist(data_nrw$avage)\n#hist(data_nrw$crimerate)\n```", "```r\n[summary](https://rdrr.io/r/base/summary.html)(data_nrw)\n```", "```r\n##     kkziff              area             aggregat          nonnational   \n##  Length:53          Length:53          Length:53          Min.   : 6.05  \n##  Class :character   Class :character   Class :character   1st Qu.: 9.82  \n##  Mode  :character   Mode  :character   Mode  :character   Median :12.19  \n##                                                           Mean   :13.45  \n##                                                           3rd Qu.:16.87  \n##                                                           Max.   :21.86  \n##    population         flaeche           unemp            avage      \n##  Min.   : 111516   Min.   :  51.0   Min.   : 3.110   Min.   :40.97  \n##  1st Qu.: 226844   1st Qu.: 170.0   1st Qu.: 5.740   1st Qu.:43.33  \n##  Median : 308335   Median : 543.0   Median : 6.950   Median :44.15  \n##  Mean   : 338218   Mean   : 643.6   Mean   : 7.432   Mean   :44.01  \n##  3rd Qu.: 408662   3rd Qu.:1112.0   3rd Qu.: 8.850   3rd Qu.:44.62  \n##  Max.   :1083498   Max.   :1960.0   Max.   :14.870   Max.   :45.81  \n##    crimerate           KN             popdens      \n##  Min.   : 3718   Min.   :5111000   Min.   : 116.3  \n##  1st Qu.: 4906   1st Qu.:5166000   1st Qu.: 278.5  \n##  Median : 5636   Median :5512000   Median : 784.7  \n##  Mean   : 6244   Mean   :5506094   Mean   :1072.0  \n##  3rd Qu.: 7568   3rd Qu.:5770000   3rd Qu.:1768.8  \n##  Max.   :10500   Max.   :5978000   Max.   :3077.3\n```", "```r\ns_unemp <- ggplot(data=data_nrw, aes(y=unemp, x=[reorder](https://rdrr.io/r/stats/reorder.factor.html)(area, area), color=area)) +\n geom_jitter(height = 0) + \n ggtitle(\"Unemployment rate 2020 in %\")\ns_unemp + geom_hline(yintercept=7.432, linetype=\"solid\", color = \"red\", size=0.1) + theme(legend.position=\"bottom\") + theme(legend.text = element_text(size=5)) + theme(axis.title.x=element_blank(),        axis.text.x=element_blank(),        axis.ticks.x=element_blank())\n```", "```r\ns_crime <- ggplot(data=data_nrw, aes(y=crimerate, x=[reorder](https://rdrr.io/r/stats/reorder.factor.html)(area, area), color=area)) +\n geom_jitter(height = 0) + \n ggtitle(\"Crime rate 2020\")\n s_crime + geom_hline(yintercept=6244, linetype=\"solid\", color = \"red\", size=0.1)  + theme(legend.position=\"bottom\") + theme(legend.text = element_text(size=5)) + theme(axis.title.x=element_blank(),        axis.text.x=element_blank(),        axis.ticks.x=element_blank())\n```", "```r\n[sd](https://rdrr.io/r/stats/sd.html)(data_nrw$unemp)\n```", "```r\n## [1] 2.477591\n```", "```r\nrange <- [max](https://rdrr.io/r/base/Extremes.html)(data_nrw$unemp, na.rm=TRUE) - [min](https://rdrr.io/r/base/Extremes.html)(data_nrw$unemp, na.rm=TRUE)\nrange \n```", "```r\n## [1] 11.76\n```", "```r\nvarcoef <- [sd](https://rdrr.io/r/stats/sd.html)(data_nrw$unemp) / [mean](https://rdrr.io/r/base/mean.html)(data_nrw$unemp) * 100 #how much percent of the mean is the standard deviation?\nvarcoef\n```", "```r\n## [1] 33.33815\n```", "```r\n[sd](https://rdrr.io/r/stats/sd.html)(data_nrw$crimerate)\n```", "```r\n## [1] 1775.389\n```", "```r\nrange <- [max](https://rdrr.io/r/base/Extremes.html)(data_nrw$crimerate, na.rm=TRUE) - [min](https://rdrr.io/r/base/Extremes.html)(data_nrw$crimerate, na.rm=TRUE)\nrange \n```", "```r\n## [1] 6782.056\n```", "```r\nvarcoef <- [sd](https://rdrr.io/r/stats/sd.html)(data_nrw$crimerate) / [mean](https://rdrr.io/r/base/mean.html)(data_nrw$crimerate) * 100\nvarcoef\n```", "```r\n## [1] 28.43261\n```", "```r\n[quantile](https://rdrr.io/r/stats/quantile.html)(data_nrw$unemp)\n```", "```r\n##    0%   25%   50%   75%  100% \n##  3.11  5.74  6.95  8.85 14.87\n```", "```r\nunemp.score.quart <- [quantile](https://rdrr.io/r/stats/quantile.html)(data_nrw$unemp, names = FALSE)\nunemp.score.quart[4] - unemp.score.quart[2]\n```", "```r\n## [1] 3.11\n```", "```r\n[quantile](https://rdrr.io/r/stats/quantile.html)(data_nrw$crimerate)\n```", "```r\n##        0%       25%       50%       75%      100% \n##  3718.411  4906.122  5635.991  7568.376 10500.467\n```", "```r\ncrimerate.score.quart <- [quantile](https://rdrr.io/r/stats/quantile.html)(data_nrw$crimerate, names = FALSE)\ncrimerate.score.quart[4] - crimerate.score.quart[2]\n```", "```r\n## [1] 2662.254\n```", "```r\n[boxplot](https://rdrr.io/r/graphics/boxplot.html)(data_nrw$unemp, \n col = 'blue', \n horizontal = FALSE,\n ylab = 'in %', \n main = 'Unemployment rate')\n```", "```r\n[boxplot](https://rdrr.io/r/graphics/boxplot.html)(data_nrw$crimerate, \n col = 'orange', \n horizontal = FALSE,\n ylab = 'in cases per 100.000 inhab.', \n main = 'Crime rate')\n```", "```r\nsc1 <- ggplot(data=data_nrw, aes(x = unemp, y = crimerate)) + \n geom_point() + \n xlab(\"Unemployment rate 2020 in %\") +\n ylab(\"Crime rate\")\nsc1\n```", "```r\nsc1 <- ggplot(data=data_nrw, aes(x = unemp, y = crimerate)) + \n geom_point() + \n geom_smooth(method = lm, se = FALSE) +\n xlab(\"Unemployment rate in %\") +\n ylab(\"Crime rate\")\nsc1\n```", "```r\nvars <- [c](https://rdrr.io/r/base/c.html)(\"unemp\", \"crimerate\")\ncor.vars <- data_nrw[vars]\nrcorr([as.matrix](https://rdrr.io/r/base/matrix.html)(cor.vars))\n```", "```r\n##           unemp crimerate\n## unemp      1.00      0.72\n## crimerate  0.72      1.00\n## \n## n= 53 \n## \n## \n## P\n##           unemp crimerate\n## unemp            0       \n## crimerate  0\n```", "```r\nmodel1 <- [lm](https://rdrr.io/r/stats/lm.html)(crimerate ~ 1 + unemp, data = data_nrw)\nmodel2 <- [lm](https://rdrr.io/r/stats/lm.html)(crimerate ~ 1 + unemp + popdens, data = data_nrw)\n stargazer(model1, model2, type = \"text\")\n```", "```r\n## \n## =================================================================\n##                                  Dependent variable:             \n##                     ---------------------------------------------\n##                                       crimerate                  \n##                              (1)                    (2)          \n## -----------------------------------------------------------------\n## unemp                     517.460***             215.409**       \n##                            (69.412)              (100.125)       \n##                                                                  \n## popdens                                           1.054***       \n##                                                   (0.275)        \n##                                                                  \n## Constant                 2,398.594***           3,513.062***     \n##                           (543.248)              (563.493)       \n##                                                                  \n## -----------------------------------------------------------------\n## Observations                  53                     53          \n## R2                          0.521                  0.630         \n## Adjusted R2                 0.512                  0.615         \n## Residual Std. Error  1,240.129 (df = 51)    1,101.398 (df = 50)  \n## F Statistic         55.575*** (df = 1; 51) 42.557*** (df = 2; 50)\n## =================================================================\n## Note:                                 *p<0.1; **p<0.05; ***p<0.01\n```"]