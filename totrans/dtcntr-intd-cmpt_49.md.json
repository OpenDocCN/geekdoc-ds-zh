["```py\ndata BT:\n  | mt\n  | nd(v :: Number, l :: BT, r :: BT)\nend\n\nfun size-1(b :: BT) -> Number:\n  cases (BT) b:\n    | mt => 0\n    | nd(v, l, r) => 1 + size-1(l) + size-1(r)\n  end\nend\n```", "```py\n#|\n     4\n    / \\\n   2   3\n    \\ /\n     1\n|#\n\nn1 = nd(1, mt, mt)\nn2 = nd(2, mt, n1)\nn3 = nd(3, n1, mt)\nn4 = nd(4, n2, n3)\n```", "```py\ncheck:\n  size-1(n1) is 1\n  size-1(n2) is 2\n  size-1(n3) is 2\n  size-1(n4) is 4\nend\n```", "```py\nfun size-2-h(b :: BT, seen :: List<BT>) -> Number:\n  if member-identical(seen, b):\n    0\n  else:\n    cases (BT) b:\n      | mt => 0\n      | nd(v, l, r) =>\n        new-seen = link(b, seen)\n        1 + size-2-h(l, new-seen) + size-2-h(r, new-seen)\n    end\n  end\nend\n```", "```py\nfun size-2(b :: BT): size-2-h(b, empty) end\n```", "```py\ncheck:\n  size-2(n1) is 1\n  size-2(n2) is 2\n  size-2(n3) is 2\n  size-2(n4) is 4\nend\n```", "```py\ndata Ret: ret(sz :: Number, sn :: List<BT>) end\n```", "```py\nfun size-3-h(b :: BT, seen :: List<BT>) -> Ret:\n  if member-identical(seen, b):\n    ret(0, seen)\n  else:\n    cases (BT) b:\n      | mt => ret(0, seen)\n      | nd(v, l, r) =>\n        new-seen = link(b, seen)\n        rl = size-3-h(l, new-seen)\n        rr = size-3-h(r, rl.sn)\n        ret(1 + rl.sz + rr.sz, rr.sn)\n    end\n  end\nend\n```", "```py\nfun size-3(b :: BT): size-3-h(b, empty).sz end\n\ncheck:\n  size-3(n1) is 1\n  size-3(n2) is 2\n  size-3(n3) is 2\n  size-3(n4) is 4\nend\n```", "```py\nfun size-4-h(b :: BT, seen :: List<BT>) -> {Number; List<BT>}:\n  if member-identical(seen, b):\n    {0; seen}\n  else:\n    cases (BT) b:\n      | mt => {0; seen}\n      | nd(v, l, r) =>\n        new-seen = link(b, seen)\n        {lsz; lsn} = size-4-h(l, new-seen)\n        {rsz; rsn} = size-4-h(r, lsn)\n        {1 + lsz + rsz; rsn}\n    end\n  end\nend\n\nfun size-4(b :: BT): size-4-h(b, empty).{0} end\n\ncheck:\n  size-4(n1) is 1\n  size-4(n2) is 2\n  size-4(n3) is 2\n  size-4(n4) is 4\nend\n```", "```py\n#|\n    10\n    / \\\n   11 12\n  / \\ /\n 13<--\n|#\n\nn13 = nd(13, mt, mt)\nn11 = nd(11, n13, n13)\nn12 = nd(12, n13, mt)\nn10 = nd(10, n11, n12)\n\ncheck:\n  size-4(n10) is 4\nend\n```", "```py\ncheck:\n  size-1(n1) is 1\n  size-1(n2) is 2\n  size-1(n3) is 2\n  size-1(n4) is 4\nend\n```", "```py\nfun size-2-h(b :: BT, seen :: List<BT>) -> Number:\n  if member-identical(seen, b):\n    0\n  else:\n    cases (BT) b:\n      | mt => 0\n      | nd(v, l, r) =>\n        new-seen = link(b, seen)\n        1 + size-2-h(l, new-seen) + size-2-h(r, new-seen)\n    end\n  end\nend\n```", "```py\nfun size-2(b :: BT): size-2-h(b, empty) end\n```", "```py\ncheck:\n  size-2(n1) is 1\n  size-2(n2) is 2\n  size-2(n3) is 2\n  size-2(n4) is 4\nend\n```", "```py\ndata Ret: ret(sz :: Number, sn :: List<BT>) end\n```", "```py\nfun size-3-h(b :: BT, seen :: List<BT>) -> Ret:\n  if member-identical(seen, b):\n    ret(0, seen)\n  else:\n    cases (BT) b:\n      | mt => ret(0, seen)\n      | nd(v, l, r) =>\n        new-seen = link(b, seen)\n        rl = size-3-h(l, new-seen)\n        rr = size-3-h(r, rl.sn)\n        ret(1 + rl.sz + rr.sz, rr.sn)\n    end\n  end\nend\n```", "```py\nfun size-3(b :: BT): size-3-h(b, empty).sz end\n\ncheck:\n  size-3(n1) is 1\n  size-3(n2) is 2\n  size-3(n3) is 2\n  size-3(n4) is 4\nend\n```", "```py\nfun size-4-h(b :: BT, seen :: List<BT>) -> {Number; List<BT>}:\n  if member-identical(seen, b):\n    {0; seen}\n  else:\n    cases (BT) b:\n      | mt => {0; seen}\n      | nd(v, l, r) =>\n        new-seen = link(b, seen)\n        {lsz; lsn} = size-4-h(l, new-seen)\n        {rsz; rsn} = size-4-h(r, lsn)\n        {1 + lsz + rsz; rsn}\n    end\n  end\nend\n\nfun size-4(b :: BT): size-4-h(b, empty).{0} end\n\ncheck:\n  size-4(n1) is 1\n  size-4(n2) is 2\n  size-4(n3) is 2\n  size-4(n4) is 4\nend\n```", "```py\n#|\n    10\n    / \\\n   11 12\n  / \\ /\n 13<--\n|#\n\nn13 = nd(13, mt, mt)\nn11 = nd(11, n13, n13)\nn12 = nd(12, n13, mt)\nn10 = nd(10, n11, n12)\n\ncheck:\n  size-4(n10) is 4\nend\n```"]