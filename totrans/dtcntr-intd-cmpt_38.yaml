- en: 12.3¬†Arrays and Lists in Memoryüîó
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: ÂéüÊñáÔºö[https://dcic-world.org/2025-08-27/unified-lists-memory.html](https://dcic-world.org/2025-08-27/unified-lists-memory.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs: []
  type: TYPE_TB
- en: 'In [Understanding Equality](unified-equality.html), we drew memory diagrams
    to show how values appear in the heap. At that time, we looked only at structured
    data. Now we will look at aggregate data: lists in Python and arrays in Pyret.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Both Python lists and Pyret arrays are stored in memory with a starting value
    that indicates how many values there are, followed by the actual elements in subsequent
    addresses. For instance, suppose we write the following value:'
  prefs: []
  type: TYPE_NORMAL
- en: '| Python |  |'
  prefs: []
  type: TYPE_TB
- en: '|  |'
  prefs: []
  type: TYPE_TB
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '| Pyret |  |'
  prefs: []
  type: TYPE_TB
- en: '|  |'
  prefs: []
  type: TYPE_TB
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: 'Here‚Äôs what memory might look like:'
  prefs: []
  type: TYPE_NORMAL
- en: Directory
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs:
  - PREF_UL
  type: TYPE_PRE
- en: ‚Üí¬†1001
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Heap
  prefs: []
  type: TYPE_NORMAL
- en: 1001:¬†`(length:3)`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1002:¬†`"bread"`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1003:¬†`"coffee"`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1004:¬†`"eggs"`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'If these terms mean anything to you: Python‚Äôs default list implementation is
    array-based, not a linked list. So at 1001 there‚Äôs an indication of how many entries
    follow, and the next memory locations have those values. There are no directory
    entries for the individual elements, but they can be reached by referring to `sl`
    followed by an offset: for instance,'
  prefs: []
  type: TYPE_NORMAL
- en: '| Python | Pyret |'
  prefs: []
  type: TYPE_TB
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: 'Internally, this turns into: ‚Äúobtain the address of `sl`, then add 1 and the
    offset `2` to it‚Äù. This produces the address 1001 + 1 + 2 = 1004\. Looking up
    the value stored at address 1004, in both languages, produces `''eggs''`.You may
    find it odd that the offsets begin at 0\. While it is indeed confusing‚Äî<wbr>the
    ‚Äúfirst‚Äù value is at offset `0`, the ‚Äúthird‚Äù value at offset `2`, and so on‚Äî<wbr>this
    is a convention both Python and Pyret chose to be consistent with most other programming
    languages.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Similarly, suppose we try to change the shopping list‚Äôs content to replace
    the second value with `''tea''`. Recall that the second value is at offset `1`:'
  prefs: []
  type: TYPE_NORMAL
- en: '| Python | Pyret |'
  prefs: []
  type: TYPE_TB
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: 'Again, we obtain the address of `sl`, which is 1001; add 1 and the offset (`1`)
    to it; this gives us the address 1003\. Now, we modify the value at 1003 to be
    the new value:'
  prefs: []
  type: TYPE_NORMAL
- en: Directory
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs:
  - PREF_UL
  type: TYPE_PRE
- en: ‚Üí¬†1001
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Heap
  prefs: []
  type: TYPE_NORMAL
- en: 1001:¬†`(length:3)`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1002:¬†`"bread"`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1003:¬†`"tea"`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1004:¬†`"eggs"`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'If we now ask the language for the list as a whole, we see the change: in Python,'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '&#124;'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs:
  - PREF_BQ
  type: TYPE_PRE
- en: '&#124;'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: and in Pyret,
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '&#124;'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs:
  - PREF_BQ
  type: TYPE_PRE
- en: '&#124;'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: 'Observe that what we have learned about aliasing applies here, too. Suppose
    Shaunae and Jonella share a shopping list, where `sl` is Shaunae‚Äôs and Jonella
    writes:'
  prefs: []
  type: TYPE_NORMAL
- en: '| Python | Pyret |'
  prefs: []
  type: TYPE_TB
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: 'Now `jl` and `sl` are aliases for the same data in the heap:'
  prefs: []
  type: TYPE_NORMAL
- en: Directory
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs:
  - PREF_UL
  type: TYPE_PRE
- en: ‚Üí¬†1001
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs:
  - PREF_UL
  type: TYPE_PRE
- en: ‚Üí¬†1001
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Heap
  prefs: []
  type: TYPE_NORMAL
- en: 1001:¬†`(length:3)`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1002:¬†`"bread"`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1003:¬†`"tea"`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1004:¬†`"eggs"`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Thus, modifying the list `jl` has the same impact as modifying it via `sl`:'
  prefs: []
  type: TYPE_NORMAL
- en: '| Python | Pyret |'
  prefs: []
  type: TYPE_TB
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: means the memory looks like
  prefs: []
  type: TYPE_NORMAL
- en: Directory
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs:
  - PREF_UL
  type: TYPE_PRE
- en: ‚Üí¬†1001
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs:
  - PREF_UL
  type: TYPE_PRE
- en: ‚Üí¬†1001
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Heap
  prefs: []
  type: TYPE_NORMAL
- en: 1001:¬†`(length:3)`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1002:¬†`"butter"`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1003:¬†`"tea"`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1004:¬†`"eggs"`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Thus, if we ask for the value of `sl`, we will see in Python:'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '&#124;'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs:
  - PREF_BQ
  type: TYPE_PRE
- en: '&#124;'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: 'and in Pyret:'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '&#124;'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs:
  - PREF_BQ
  type: TYPE_PRE
- en: '&#124;'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs: []
  type: TYPE_PRE
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: even though we did not make a modification through the name `sl`.
  prefs: []
  type: TYPE_NORMAL
