- en: '7.5\. Application: random walks on graphs and PageRank#'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 7.5\. 应用：图上的随机游走和PageRank#
- en: 原文：[https://mmids-textbook.github.io/chap07_rwmc/05_pagerank/roch-mmids-rwmc-pagerank.html](https://mmids-textbook.github.io/chap07_rwmc/05_pagerank/roch-mmids-rwmc-pagerank.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://mmids-textbook.github.io/chap07_rwmc/05_pagerank/roch-mmids-rwmc-pagerank.html](https://mmids-textbook.github.io/chap07_rwmc/05_pagerank/roch-mmids-rwmc-pagerank.html)
- en: As we mentioned earlier in this chapter, a powerful way to extract information
    about the structure of a network is to analyze the behavior of a walker randomly
    “diffusing” on it.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在本章前面提到的，分析随机“扩散”在网络上行走的行者的行为，是一种提取网络结构信息的有力方式。
- en: 7.5.1\. Random walk on a graph[#](#random-walk-on-a-graph "Link to this heading")
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.5.1\. 图上的随机游走[#](#random-walk-on-a-graph "链接到本标题")
- en: We first specialize the theory of the previous section to random walks on graphs.
    We start with the case of digraphs. The undirected case leads to useful simplifications.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先将上一节的理论专门化到图上的随机游走。我们从有向图的情况开始。无向情况导致有用的简化。
- en: '**Directed case** We first define a random walk on a digraph.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '**有向情况** 我们首先定义有向图上的随机游走。'
- en: '**DEFINITION** **(Random Walk on a Digraph)** \(\idx{random walk on a graph}\xdi\)
    Let \(G = (V,E)\) be a directed graph. If a vertex does not have an outgoing edge
    (i.e., an edge with it as its source), add a self-loop to it. A random walk on
    \(G\) is a time-homogeneous Markov chain \((X_t)_{t \geq 0}\) with state space
    \(\mathcal{S} = V\) and transition probabilities'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '**定义** **(有向图上的随机游走)** \(\idx{random walk on a graph}\xdi\) 设 \(G = (V,E)\)
    为一个有向图。如果一个顶点没有出边（即以它为起点的边），则向其添加一个自环。\(G\) 上的随机游走是一个时间齐次的马尔可夫链 \((X_t)_{t \geq
    0}\)，其状态空间为 \(\mathcal{S} = V\)，转移概率为'
- en: \[ p_{i,j} = \P[X_{t+1} = j\,|\,X_{t} = i] = \frac{1}{\delta^+(i)}, \qquad \forall
    i \in V, j \in N^+(i), \]
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: \[ p_{i,j} = \P[X_{t+1} = j\,|\,X_{t} = i] = \frac{1}{\delta^+(i)}, \qquad \forall
    i \in V, j \in N^+(i), \]
- en: where \(\delta^+(i)\) is the out-degree of \(i\), i.e., the number of outgoing
    edges and \(N^+(i) = \{j \in V:(i,j) \in E\}\). \(\natural\)
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 \(\delta^+(i)\) 是 \(i\) 的出度，即出边的数量，且 \(N^+(i) = \{j \in V:(i,j) \in E\}\)。\(\natural\)
- en: In words, at each step, we choose an outgoing edge from the current state uniformly
    at random. Choosing a self-loop (i.e., an edge of the form \((i,i)\)) means staying
    where we are.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 用话来说，在每一步，我们均匀随机地从当前状态选择一个出边。选择一个自环（即形式为 \((i,i)\) 的边）意味着停留在原地。
- en: Let \(G = (V,E)\) be a digraph with \(n = |V|\) vertices. Without loss of generality,
    we let the vertex set be \([n] = \{1,\ldots,n\}\). The adjacency matrix of \(G\)
    is denoted as \(A = (a_{i,j})_{i,j}\). We define the out-degree matrix \(D\) as
    the diagonal matrix with diagonal entries \(\delta^+(i)\), \(i=1,\ldots,n\). That
    is,
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 设 \(G = (V,E)\) 为一个有 \(n = |V|\) 个顶点的有向图。不失一般性，我们让顶点集为 \([n] = \{1,\ldots,n\}\)。\(G\)
    的邻接矩阵表示为 \(A = (a_{i,j})_{i,j}\)。我们定义出度矩阵 \(D\) 为对角矩阵，其对角线元素为 \(\delta^+(i)\)，\(i=1,\ldots,n\)。即，
- en: \[ D = \mathrm{diag}(A \mathbf{1}). \]
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: \[ D = \mathrm{diag}(A \mathbf{1}). \]
- en: '**LEMMA** **(Transition Matrix in Terms of Adjacency)** \(\idx{transition matrix
    in terms of adjacency}\xdi\) The transition matrix of random walk on \(G\) satisfying
    the conditions of the definition above is'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '**引理** **(关于邻接矩阵的转移矩阵)** \(\idx{transition matrix in terms of adjacency}\xdi\)
    满足上述定义条件的 \(G\) 上随机游走的转移矩阵是'
- en: \[ P = D^{-1} A. \]
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: \[ P = D^{-1} A. \]
- en: \(\flat\)
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: \(\flat\)
- en: '*Proof:* The formula follows immediately from the definition. \(\square\)'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '*证明:* 该公式立即从定义中得出。\(\square\)'
- en: We specialize irreducibility to the case of random walk on a digraph.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将不可约性专门化到有向图上的随机游走的情况。
- en: '**LEMMA** **(Irreducibility)** \(\idx{irreducibility lemma}\xdi\) Let \(G =
    (V,E)\) be a digraph. Random walk on \(G\) is irreducible if and only if \(G\)
    is strongly connected. \(\flat\)'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '**引理** **(不可约性)** \(\idx{irreducibility lemma}\xdi\) 设 \(G = (V,E)\) 为一个有向图。\(G\)
    上的随机游走是不可约的当且仅当 \(G\) 是强连通的。\(\flat\)'
- en: '*Proof:* Simply note that the transition graph of the walk is \(G\) itself.
    We have seen previously that irreducibility is equivalent to the transition graph
    being strongly connected. \(\square\)'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '*证明:* 简单地指出，游走的转移图就是 \(G\) 本身。我们之前已经看到，不可约性与转移图是强连通的是等价的。\(\square\)'
- en: In the undirected case, more structure emerges as we detail next.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在无向情况中，随着我们接下来的详细说明，更多的结构会显现出来。
- en: '**Undirected case** Specializing the previous definitions and observations
    to undirected graphs, we get the following.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '**无向情况** 将之前的定义和观察专门化到无向图，我们得到以下结果。'
- en: It will be convenient to allow self-loops, i.e., entry \(a_{i,i}\) of the adjacency
    matrix can be \(1\) for some \(i\).
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 允许自环将会很方便，即邻接矩阵中的 \(a_{i,i}\) 可以对某些 \(i\) 为 \(1\)。
- en: '**DEFINITION** **(Random Walk on a Graph)** \(\idx{random walk on a graph}\xdi\)
    Let \(G = (V,E)\) be a graph. If a vertex is isolated, add a self-loop to it.
    A random walk on \(G\) is a time-homogeneous Markov chain \((X_t)_{t \geq 0}\)
    with state space \(\mathcal{S} = V\) and transition probabilities'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '**定义** **(图上的随机游走)** \(\idx{random walk on a graph}\xdi\) 设 \(G = (V,E)\) 为一个图。如果一个顶点是孤立的，则向其添加一个自环。\(G\)
    上的随机游走是一个时间齐次的马尔可夫链 \((X_t)_{t \geq 0}\)，其状态空间为 \(\mathcal{S} = V\)，转移概率为'
- en: \[ p_{i,j} = \P[X_{t+1} = j\,|\,X_{t} = i] = \frac{1}{\delta(i)}, \qquad \forall
    i \in V, j \in N(i) \]
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: \[ p_{i,j} = \P[X_{t+1} = j\,|\,X_{t} = i] = \frac{1}{\delta(i)}, \qquad \forall
    i \in V, j \in N(i) \]
- en: 'where \(\delta(i)\) is the degree of \(i\) and \(N(i) = \{j \in V: \{i,j\}
    \in E\}\). \(\natural\)'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '其中 \(\delta(i)\) 是 \(i\) 的度，\(N(i) = \{j \in V: \{i,j\} \in E\}\)。\(\natural\)'
- en: As we have seen previously, the transition matrix of random walk on \(G\) satisfying
    the conditions of the definition above is \(P = D^{-1} A\), where \(D = \mathrm{diag}(A
    \mathbf{1})\) is the degree matrix.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们之前所看到的，满足上述定义条件的 \(G\) 上随机游走的转移矩阵是 \(P = D^{-1} A\)，其中 \(D = \mathrm{diag}(A
    \mathbf{1})\) 是度矩阵。
- en: For instance, we have previously derived the transition matrix for random walk
    on the Petersen graph.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我们之前已经推导出了在 Petersen 图上随机游走的转移矩阵。
- en: We specialize irreducibility to the case of random walk on a graph.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将不可约性专门化到图上随机游走的情况。
- en: '**LEMMA** **(Irreducibility)** \(\idx{irreducibility lemma}\xdi\) Let \(G =
    (V,E)\) be a graph. Random walk on \(G\) is irreducible if and only if \(G\) is
    connected. \(\flat\)'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '**引理** **(不可约性)** \(\idx{irreducibility lemma}\xdi\) 设 \(G = (V,E)\) 为一个图。在
    \(G\) 上的随机游走是不可约的，当且仅当 \(G\) 是连通的。\(\flat\)'
- en: '*Proof:* We only prove one direction. Suppose \(G\) is connected. Then between
    any two vertices \(i\) and \(j\) there is a sequence of vertices \(z_0 = i, z_1,
    \ldots, z_r = j\) such that \(\{z_{\ell-1},z_\ell\} \in E\) for all \(\ell = 1,\ldots,r\).
    In particular, \(a_{z_{\ell-1},z_\ell} > 0\) which implies \(p_{z_{\ell-1},z_\ell}
    > 0\). That proves irreducibility. \(\square\)'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '**证明**：我们只证明一个方向。假设 \(G\) 是连通的。那么在任意两个顶点 \(i\) 和 \(j\) 之间存在一个顶点序列 \(z_0 = i,
    z_1, \ldots, z_r = j\)，使得对于所有 \(\ell = 1,\ldots,r\)，\(\{z_{\ell-1},z_\ell\} \in
    E\)。特别是，\(a_{z_{\ell-1},z_\ell} > 0\)，这表明 \(p_{z_{\ell-1},z_\ell} > 0\)。这证明了不可约性。\(\square\)'
- en: By the previous lemma and the *Existence of a Stationary Distribution*, provided
    \(G\) is connected, it has a unique stationary distribution. It turns out to be
    straightforward to compute it as we see in the next subsection.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 根据前面的引理和**平稳分布的存在性**，如果 \(G\) 是连通的，它就有一个唯一的平稳分布。实际上，我们将在下一小节中看到，计算它是直接的。
- en: '**Reversible chains** A Markov chain is said to be reversible if it satisfies
    the detailed balance conditions.'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '**可逆链** 一个马尔可夫链被称为可逆的，如果它满足详细平衡条件。'
- en: '**DEFINITION** **(Reversibility)** \(\idx{reversible}\xdi\) A transition matrix
    \(P = (p_{i,j})_{i,j=1}^n\) is reversible with respect to a probability distribution
    \(\bpi = (\pi_i)_{i=1}^n\) if it satisfies the so-called detailed balance conditions'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '**定义** **(可逆性)** \(\idx{reversible}\xdi\) 一个转移矩阵 \(P = (p_{i,j})_{i,j=1}^n\)
    相对于概率分布 \(\bpi = (\pi_i)_{i=1}^n\) 是可逆的，如果它满足所谓的详细平衡条件'
- en: \[ \pi_i p_{i,j} = \pi_j p_{j,i}, \qquad \forall i,j. \]
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \pi_i p_{i,j} = \pi_j p_{j,i}, \qquad \forall i,j. \]
- en: \(\natural\)
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: \(\natural\)
- en: The next theorem explains why this definition is useful to us.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个定理解释了为什么这个定义对我们来说是有用的。
- en: '**THEOREM** **(Reversibility and Stationarity)** \(\idx{reversibility and stationarity
    theorem}\xdi\) Let \(P = (p_{i,j})_{i,j=1}^n\) be a transition matrix reversible
    with respect to a probability distribution \(\bpi = (\pi_i)_{i=1}^n\). Then \(\bpi\)
    is a stationary distribution of \(P\). \(\sharp\)'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '**定理** **(可逆性和平稳性)** \(\idx{reversibility and stationarity theorem}\xdi\) 设
    \(P = (p_{i,j})_{i,j=1}^n\) 是相对于概率分布 \(\bpi = (\pi_i)_{i=1}^n\) 可逆的转移矩阵。那么 \(\bpi\)
    是 \(P\) 的平稳分布。\(\sharp\)'
- en: '*Proof idea:* Just check the definition.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '**证明思路**：只需检查定义。'
- en: '*Proof:* For any \(j\), by the definition of reversibility,'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '**证明**：对于任何 \(j\)，根据可逆性的定义，'
- en: \[ \sum_{i} \pi_i p_{i,j} = \sum_{i} \pi_j p_{j,i} = \pi_j \sum_{i} p_{j,i}
    = \pi_j, \]
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \sum_{i} \pi_i p_{i,j} = \sum_{i} \pi_j p_{j,i} = \pi_j \sum_{i} p_{j,i}
    = \pi_j, \]
- en: where we used that \(P\) is stochastic in the last equality. \(\square\)
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 其中我们在最后一个等式中使用了 \(P\) 是随机的。\(\square\)
- en: We return to random walk on a graph. We show that it is reversible and derive
    the stationary dsitribution.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 我们回到图上的随机游走。我们证明它是可逆的，并推导出平稳分布。
- en: '**THEOREM** **(Stationary Distribution on a Graph)** \(\idx{stationary distribution
    on a graph}\xdi\) Let \(G = (V,E)\) be a graph. Assume further that \(G\) is connected.
    Then the unique stationary distribution of random walk on \(G\) is given by'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '**定理** **（图上的平稳分布）** \(\idx{图上的平稳分布}\xdi\) 设\(G = (V,E)\)为一个图。进一步假设\(G\)是连通的。那么\(G\)上随机游走的唯一平稳分布由'
- en: \[ \pi_i = \frac{\delta(i)}{\sum_{i \in V} \delta(i)}, \qquad \forall i \in
    V. \]
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \pi_i = \frac{\delta(i)}{\sum_{i \in V} \delta(i)}, \qquad \forall i \in
    V. \]
- en: \(\sharp\)
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: \(\sharp\)
- en: '*Proof idea:* We prove this in two parts. We first argue that \(\bpi = (\pi_i)_{i
    \in V}\) is indeed a probability distribution. Then we show that the transition
    matrix \(P\) is reversible with respect to \(\bpi\).'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '*证明思路:* 我们分两部分来证明。首先，我们论证\(\bpi = (\pi_i)_{i \in V}\)确实是一个概率分布。然后我们展示转移矩阵\(P\)相对于\(\bpi\)是可逆的。'
- en: '*Proof:* We first show that \(\bpi = (\pi_v)_{v \in V}\) is a probability distribution.
    Its entries are non-negative by definition. Further'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '*证明:* 我们首先证明\(\bpi = (\pi_v)_{v \in V}\)是一个概率分布。它的条目根据定义是非负的。进一步'
- en: \[ \sum_{i \in V} \pi_i = \sum_{i \in V}\frac{\delta(i)}{\sum_{i \in V} \delta(i)}
    = \frac{\sum_{i \in V} \delta(i)}{\sum_{i \in V} \delta(i)} = 1. \]
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \sum_{i \in V} \pi_i = \sum_{i \in V}\frac{\delta(i)}{\sum_{i \in V} \delta(i)}
    = \frac{\sum_{i \in V} \delta(i)}{\sum_{i \in V} \delta(i)} = 1. \]
- en: It remains to establish reversibility. For any \(i, j\), by definition,
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 剩下的工作是建立可逆性。对于任何\(i, j\)，根据定义，
- en: \[\begin{align*} \pi_i p_{i,j} &= \frac{\delta(i)}{\sum_{i \in V} \delta(i)}
    \frac{a_{i,j}}{\sum_{k} a_{i,k}}\\ &= \frac{\delta(i)}{\sum_{i \in V} \delta(i)}
    \frac{a_{i,j}}{\delta(i)}\\ &= \frac{1}{\sum_{i \in V} \delta(i)} a_{i,j}. \end{align*}\]
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{align*} \pi_i p_{i,j} &= \frac{\delta(i)}{\sum_{i \in V} \delta(i)}
    \frac{a_{i,j}}{\sum_{k} a_{i,k}}\\ &= \frac{\delta(i)}{\sum_{i \in V} \delta(i)}
    \frac{a_{i,j}}{\delta(i)}\\ &= \frac{1}{\sum_{i \in V} \delta(i)} a_{i,j}. \end{align*}\]
- en: Changing the roles of \(i\) and \(j\) gives the same expression since \(a_{j,i}
    = a_{i,j}\). \(\square\)
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 由于\(a_{j,i} = a_{i,j}\)，改变\(i\)和\(j\)的角色给出相同的表达式。\(\square\)
- en: 7.5.2\. PageRank[#](#pagerank "Link to this heading")
  id: totrans-51
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.5.2\. PageRank[#](#pagerank "链接到这个标题")
- en: One is often interested in identifying central nodes in a network. Intuitively,
    they should correspond to entities (e.g., individuals or webpages depending on
    the network) that are particularly influential or authoritative. There are many
    ways of uncovering such nodes. Formally one defines a notion of [node centrality](https://en.wikipedia.org/wiki/Centrality)\(\idx{node
    centrality}\xdi\), which ranks nodes by importance. Here we focus on one important
    such notion, PageRank. We will see that it is closely related to random walks
    on graphs.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 人们通常对识别网络中的中心节点感兴趣。直观上，它们应该对应于特别有影响力或权威性的实体（例如，根据网络是个人或网页）。有许多方法可以揭示这样的节点。形式上，我们定义了一个[节点中心性](https://en.wikipedia.org/wiki/Centrality)\(\idx{node
    centrality}\xdi\)的概念，它根据重要性对节点进行排序。在这里，我们关注一个重要的此类概念，PageRank。我们将看到它与图上的随机游走密切相关。
- en: '**A notion of centrality for directed graphs** We start with the directed case.'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '**有向图的中心性概念** 我们从有向情况开始。'
- en: Let \(G = (V,E)\) be a digraph on \(n\) vertices. We seek to associate a measure
    of importance to each vertex. We will denote this (row) vector by
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 设\(G = (V,E)\)为一个有\(n\)个顶点的有向图。我们试图为每个顶点关联一个重要性度量。我们将用这个（行）向量表示：
- en: \[ \mathbf{PR} = (\mathrm{PR}_1, \ldots, \mathrm{PR}_n)^T, \]
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \mathbf{PR} = (\mathrm{PR}_1, \ldots, \mathrm{PR}_n)^T, \]
- en: where \(\mathrm{PR}\) stands for PageRank\(\idx{PageRank}\xdi\).
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 其中\(\mathrm{PR}\)代表PageRank\(\idx{PageRank}\xdi\)。
- en: We posit that each vertex has a certain amount of influence associated to it
    and that it distributes that influence equally among the neighbors it points to.
    We seek a (row) vector \(\mathbf{z} = (z_1,\ldots,z_n)^T\) that satisfies an equation
    of the form
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 我们假设每个顶点都与它相关联一定量的影响力，并且它将这种影响力平均分配给它指向的邻居。我们寻求一个满足形式方程的（行）向量\(\mathbf{z} =
    (z_1,\ldots,z_n)^T\)：
- en: \[ z_i = \sum_{j \in N^-(i)} z_j \frac{1}{\delta^+(j)}, \]
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: \[ z_i = \sum_{j \in N^-(i)} z_j \frac{1}{\delta^+(j)}, \]
- en: where \(\delta^+(j) = |N^+(j)|\) is the out-degree of \(j\) and \(N^-(i)\) is
    the set of vertices \(j\) with an edge \((j,i)\). Observe that we explicitly take
    into account the direction of the edges. We think of an edge \((j,i)\) as an indication
    that \(j\) values \(i\).
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 其中\(\delta^+(j) = |N^+(j)|\)是\(j\)的出度，\(N^-(i)\)是具有边\((j,i)\)的顶点\(j\)的集合。注意，我们明确考虑了边的方向。我们认为边\((j,i)\)是\(j\)认为\(i\)有价值的指示。
- en: 'On the web for instance, a link towards a page indicates that the destination
    page has information of value. Quoting [Wikipedia](https://en.wikipedia.org/wiki/PageRank):'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在网络上，例如，一个指向页面的链接表示目标页面有有价值的信息。引用[Wikipedia](https://en.wikipedia.org/wiki/PageRank)：
- en: PageRank works by counting the number and quality of links to a page to determine
    a rough estimate of how important the website is. The underlying assumption is
    that more important websites are likely to receive more links from other websites.
  id: totrans-61
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: PageRank 通过计算指向一个页面的链接数量和质量来确定一个粗略的估计，即该网站的重要性。其基本假设是，更重要的网站更有可能从其他网站获得更多链接。
- en: On X (formerly known as Twitter), following an account is an indication that
    the latter is of interest.
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 X（以前称为 Twitter）上，关注一个账户表明后者是有趣的。
- en: We have already encountered this set of equations. Consider random walk on the
    directed graph \(G\) (where a self-loop is added to each vertex without an outgoing
    edge). That is, at every step, we pick an outgoing edge of the current state uniformly
    at random. Then the transition matrix is
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经遇到了这组方程。考虑有向图 \(G\) 上的随机游走（在每个没有出边的顶点上添加一个自环）。也就是说，在每一步，我们随机均匀地选择当前状态的一个出边。然后转移矩阵是
- en: \[ P = D^{-1} A, \]
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: \[ P = D^{-1} A, \]
- en: where \(D\) is the diagonal matrix with the out-degrees on its diagonal.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 \(D\) 是对角矩阵，其对角线上的元素是出度。
- en: A stationary distribution \(\bpi = (\pi_1,\ldots,\pi_n)^T\) is a row vector
    satisfying in this case
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 一个平稳分布 \(\bpi = (\pi_1,\ldots,\pi_n)^T\) 是一个行向量，满足在这种情况下
- en: \[ \pi_i = \sum_{j=1}^n \pi_j p_{j,i} = \sum_{j \in N^-(i)} \pi_j \frac{1}{\delta^+(j)}.
    \]
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \pi_i = \sum_{j=1}^n \pi_j p_{j,i} = \sum_{j \in N^-(i)} \pi_j \frac{1}{\delta^+(j)}.
    \]
- en: So \(\mathbf{z}\) is stationary distribution of random walk on \(G\).
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，\(\mathbf{z}\) 是 \(G\) 上随机游走的平稳分布。
- en: If the graph \(G\) is strongly connected, we know that there is a unique stationary
    distribution by the *Existence of a Stationary Distribution*. In many real-world
    digraphs, however, that assumption is not satisfied. To ensure that a meaningful
    solution can still be found, we modify the walk slightly.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 如果图 \(G\) 是强连通的，根据**存在一个平稳分布**，我们知道存在一个唯一的平稳分布。然而，在许多现实世界的有向图中，这个假设并不成立。为了确保仍然可以找到一个有意义的解，我们稍微修改了行走方式。
- en: To make the walk irreducible, we add a small probability at each step of landing
    at a uniformly chosen node. This is sometimes referred to as *teleporting*. That
    is, we define the transition matrix
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使行走不可约，我们在每一步添加一个小的概率，以均匀选择一个节点着陆。这有时被称为 *传送*。也就是说，我们定义转移矩阵
- en: \[ Q = \alpha P + (1-\alpha) \frac{1}{n} \mathbf{1} \mathbf{1}^T, \]
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: \[ Q = \alpha P + (1-\alpha) \frac{1}{n} \mathbf{1} \mathbf{1}^T, \]
- en: for some \(\alpha \in (0,1)\) known as the damping factor (or teleporting parameter).
    A typical choice is \(\alpha = 0.85\).
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 对于某个 \(\alpha \in (0,1)\)，称为阻尼因子（或传送参数）。一个典型的选择是 \(\alpha = 0.85\)。
- en: Note that \(\frac{1}{n} \mathbf{1} \mathbf{1}^T\) is a stochastic matrix. Indeed,
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 注意到 \(\frac{1}{n} \mathbf{1} \mathbf{1}^T\) 是一个随机矩阵。确实，
- en: \[ \frac{1}{n} \mathbf{1} \mathbf{1}^T \mathbf{1} = \frac{1}{n} \mathbf{1} n
    = \mathbf{1}. \]
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \frac{1}{n} \mathbf{1} \mathbf{1}^T \mathbf{1} = \frac{1}{n} \mathbf{1} n
    = \mathbf{1}. \]
- en: Hence, \(Q\) is a stochastic matrix (as a convex combination of stochastic matrices).
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，\(Q\) 是一个随机矩阵（作为随机矩阵的凸组合）。
- en: Moreover, \(Q\) is clearly irreducible since it is strictly positive. That is,
    for any \(x, y \in [n]\), one can reach \(y\) from \(x\) in a single step
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，\(Q\) 显然是不可约的，因为它严格为正。也就是说，对于任何 \(x, y \in [n]\)，都可以在一步之内从 \(x\) 到达 \(y\)。
- en: \[ Q_{x,y} = \alpha P_{x,y} + (1-\alpha) \frac{1}{n} > 0. \]
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: \[ Q_{x,y} = \alpha P_{x,y} + (1-\alpha) \frac{1}{n} > 0. \]
- en: This also holds for \(x = y\) so the chain is lazy.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 这也适用于 \(x = y\)，因此链是懒惰的。
- en: Finally, we define \(\mathbf{PR}\) as the unique stationary distribution of
    \(Q = (q_{i,j})_{i,j=1}^n\), that is, the solution to
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们定义 \(\mathbf{PR}\) 为 \(Q = (q_{i,j})_{i,j=1}^n\) 的唯一平稳分布，即该方程的解
- en: \[ \mathrm{PR}_i = \sum_{j=1}^n \mathrm{PR}_j \, q_{j,i}, \]
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \mathrm{PR}_i = \sum_{j=1}^n \mathrm{PR}_j \, q_{j,i}, \]
- en: with \(\mathbf{PR} \geq 0\)
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: \(\mathbf{PR} \geq 0\)
- en: \[ \sum_{i=1}^n \mathrm{PR}_i = 1. \]
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \sum_{i=1}^n \mathrm{PR}_i = 1. \]
- en: 'Quoting [Wikipedia](https://en.wikipedia.org/wiki/PageRank):'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 引用[维基百科](https://en.wikipedia.org/wiki/PageRank)：
- en: The formula uses a model of a random surfer who reaches their target site after
    several clicks, then switches to a random page. The PageRank value of a page reflects
    the chance that the random surfer will land on that page by clicking on a link.
    It can be understood as a Markov chain in which the states are pages, and the
    transitions are the links between pages – all of which are all equally probable.
  id: totrans-84
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 该公式使用了一个随机漫游者的模型，该漫游者在几次点击后到达目标网站，然后切换到随机页面。一个页面的PageRank值反映了随机漫游者通过点击链接而停留在该页面的概率。它可以理解为一种马尔可夫链，其中状态是页面，转换是页面之间的链接——所有这些都具有相同的概率。
- en: Here is an implementation of the PageRank algorithm. We will need a function
    that takes as input an adjacency matrix \(A\) and returns the corresponding transition
    matrix \(P\). Some vertices have no outgoing links. To avoid dividing by \(0\),
    we add a self-loop to *all vertices with out-degree \(0\)*. We [`numpy.fill_diagonal`](https://numpy.org/doc/stable/reference/generated/numpy.fill_diagonal.html)
    for this purpose. (The boolean values in `sinks` below automatically convert to
    `0.0` and `1.0` when used in the numerical matrix context. So this effectively
    adds self-loops only to sink nodes – nodes that had no outgoing edges now have
    a single outgoing edge pointing back to themselves.)
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是PageRank算法的实现。我们需要一个函数，它接受邻接矩阵 \(A\) 作为输入，并返回相应的转移矩阵 \(P\)。一些顶点没有出边。为了避免除以
    \(0\)，我们为所有出度为 \(0\) 的顶点添加一个自环。我们使用 `numpy.fill_diagonal` 来实现这个目的。（下面的 `sinks`
    中的布尔值在数值矩阵上下文中使用时自动转换为 `0.0` 和 `1.0`。因此，这实际上只为汇点添加自环——现在没有出边的节点现在有一个指向自己的出边。）
- en: Also, because the adjacency matrix and the vector of out-degrees have different
    shapes, we turn `out_deg` into a column vector using [`numpy.newaxis`](https://numpy.org/doc/stable/reference/constants.html#numpy.newaxis)
    to ensure that the division is [done one column at a time](https://numpy.org/doc/stable/user/basics.broadcasting.html#broadcastable-arrays).
    (There are many ways of doing this, [but some are slower than others](https://stackoverflow.com/questions/18522216/multiplying-across-in-a-numpy-array).)
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，因为邻接矩阵和出度向量具有不同的形状，我们使用 `numpy.newaxis` 将 `out_deg` 转换为列向量，以确保逐列进行除法。（有许多这样做的方法，[但有些比其他方法慢](https://stackoverflow.com/questions/18522216/multiplying-across-in-a-numpy-array)。）
- en: '[PRE0]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The following function adds the damping factor. Here `mu` will be the uniform
    distribution. It gets added (after scaling by `1-alpha`) one row at a time to
    `P` (again after scaling by `alpha`). This time we do not need to reshape `mu`
    as the sum is done one row at a time.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 以下函数添加了阻尼因子。这里 `mu` 将是均匀分布。它将逐行添加到 `P` 中（再次在 `alpha` 缩放后），这次我们不需要重塑 `mu`，因为求和是逐行进行的。
- en: '[PRE1]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: When computing PageRank, we multiply from the left.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 当计算PageRank时，我们从左乘。
- en: '[PRE2]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '**NUMERICAL CORNER:** Let’s try a star with edges pointing out. Along the way,
    we check that our functions work how we expect them to.'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '**数值角落：** 让我们尝试一个指向外的星形。在这个过程中，我们检查我们的函数是否按预期工作。'
- en: '[PRE3]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '![../../_images/660932284bae2affdddf5662aeec676a1cf3903af81ef0cecb91e479b6585e26.png](../Images/ff153b67326802af34ceb69f23f4985b.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![../../_images/660932284bae2affdddf5662aeec676a1cf3903af81ef0cecb91e479b6585e26.png](../Images/ff153b67326802af34ceb69f23f4985b.png)'
- en: '[PRE4]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[PRE5]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: We compute the matrices \(P\) and \(Q\). We use [`numpy.set_printoptions`](https://numpy.org/doc/stable/reference/generated/numpy.set_printoptions.html)
    to condense the output.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 我们计算矩阵 \(P\) 和 \(Q\)。我们使用 `numpy.set_printoptions` 来压缩输出。
- en: '[PRE6]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[PRE7]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[PRE8]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: While it is tempting to guess that \(1\) is the most central node of the network,
    no edge actually points to it. In this case, the center of the star has a low
    PageRank value.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然猜测 \(1\) 是网络中最中心的节点很有诱惑力，但实际上没有边指向它。在这种情况下，星形的中心具有较低的PageRank值。
- en: '[PRE10]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: We then try a star with edges pointing in.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 我们然后尝试一个指向内的星形。
- en: '[PRE12]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '![../../_images/a2444432691b17ff6593a677e80f8c88415d65748ccba7a1b3b861b173f655f2.png](../Images/d644ec50527bfb74965fed98a96f2683.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![../../_images/a2444432691b17ff6593a677e80f8c88415d65748ccba7a1b3b861b173f655f2.png](../Images/d644ec50527bfb74965fed98a96f2683.png)'
- en: '[PRE13]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '[PRE14]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '[PRE15]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[PRE16]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '[PRE17]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '[PRE18]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: In this case, the center of the star does indeed have a high PageRank value.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，星形的中心确实具有很高的PageRank值。
- en: '[PRE19]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '[PRE20]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: \(\unlhd\)
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: \(\unlhd\)
- en: '**A notion of centrality for undirected graphs** We can apply PageRank\(\idx{PageRank}\xdi\)
    in the undirected case as well.'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: '**无向图的中枢性概念** 我们也可以在无向情况下应用PageRank\(\idx{PageRank}\xdi\)。'
- en: Consider random walk on the undirected graph \(G\). That is, at every step,
    we pick a neighbor of the current state uniformly at random. If needed, add a
    self-loop to any isolated vertex. Then the transition matrix is
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑无向图 \(G\) 上的随机游走。也就是说，在每一步，我们随机均匀地选择当前状态的一个邻居。如果需要，为任何孤立顶点添加一个自环。然后转移矩阵是
- en: \[ P = D^{-1} A, \]
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: \[ P = D^{-1} A, \]
- en: where \(D\) is the degree matrix and \(A\) is the adjacency matrix. A stationary
    distribution \(\bpi = (\pi_1,\ldots,\pi_n)^T\) is a row vector satisfying in this
    case
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 \(D\) 是度矩阵，\(A\) 是邻接矩阵。一个稳态分布 \(\bpi = (\pi_1,\ldots,\pi_n)^T\) 是一个行向量，满足在这种情况下
- en: \[ \pi_i = \sum_{j=1}^n \pi_j p_{j,i} = \sum_{j \in N(i)} \pi_j \frac{1}{\delta(j)}.
    \]
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \pi_i = \sum_{j=1}^n \pi_j p_{j,i} = \sum_{j \in N(i)} \pi_j \frac{1}{\delta(j)}.
    \]
- en: We already know the solution to this system of equations. In the connected case
    without damping, the unique stationary distribution of random walk on \(G\) is
    given by
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经知道这个方程组的解。在无阻尼的连通情况下，\(G\)上随机游走的唯一平稳分布由下式给出
- en: \[ \pi_i = \frac{\delta(i)}{\sum_{i \in V} \delta(i)}, \qquad \forall i \in
    V. \]
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \pi_i = \frac{\delta(i)}{\sum_{i \in V} \delta(i)}, \qquad \forall i \in
    V. \]
- en: In words, the centrality of a node is directly proportional to its degree, i.e.,
    how many neighbors it has. Up to the scaling factor, this is known as [degree
    centrality](https://en.wikipedia.org/wiki/Centrality#Degree_centrality)\(\idx{degree
    centrality}\xdi\).
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 也就是说，一个节点的中心性与其度数成正比，即它有多少个邻居。考虑到缩放因子，这被称为[度中心性](https://en.wikipedia.org/wiki/Centrality#Degree_centrality)\(\idx{度中心性}\xdi\)。
- en: For a general undirected graph that may not be connected, we can use a damping
    factor to enforce irreducibility. We add a small probability at each step of landing
    at a uniformly chosen node. That is, we define the transition matrix
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 对于一个可能不连通的一般无向图，我们可以使用阻尼因子来强制不可约性。我们在每一步添加一个小的概率，使得节点均匀选择。也就是说，我们定义转移矩阵
- en: \[ Q = \alpha P + (1-\alpha) \frac{1}{n} \mathbf{1} \mathbf{1}^T, \]
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: \[ Q = \alpha P + (1-\alpha) \frac{1}{n} \mathbf{1} \mathbf{1}^T, \]
- en: for some \(\alpha \in (0,1)\) known as the damping factor. We define the PageRank
    vector \(\mathbf{PR}\) as the unique stationary distribution of \(Q = (q_{i,j})_{i,j=1}^n\),
    that is, the solution to
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 对于某个\(\alpha \in (0,1)\)（称为阻尼因子）。我们定义PageRank向量\(\mathbf{PR}\)为\(Q = (q_{i,j})_{i,j=1}^n\)的唯一平稳分布，即
- en: \[ \mathrm{PR}_i = \sum_{j=1}^n \mathrm{PR}_j \, q_{j,i}, \]
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \mathrm{PR}_i = \sum_{j=1}^n \mathrm{PR}_j \, q_{j,i}, \]
- en: with \(\mathbf{PR} \geq 0\)
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 有 \(\mathbf{PR} \geq 0\)
- en: \[ \sum_{i=1}^n \mathrm{PR}_i = 1. \]
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \sum_{i=1}^n \mathrm{PR}_i = 1. \]
- en: '**NUMERICAL CORNER:** We revisit the star example in the undirected case.'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '**数值角落：** 我们再次回顾无向情况下的星形示例。'
- en: '[PRE21]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '![../../_images/c7f2056453edc830e099413bfdb90e0047d36da8030c2b8abf8be4198801e5fc.png](../Images/2d0d2764fb0069741155c9c91833c00b.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![../../_images/c7f2056453edc830e099413bfdb90e0047d36da8030c2b8abf8be4198801e5fc.png](../Images/2d0d2764fb0069741155c9c91833c00b.png)'
- en: We first compute the PageRank vector without damping. Here the random walk is
    periodic (Why?) so power iteration may fail (Try it!). Instead, we use a small
    amount of damping and increase the number of iterations.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先计算不带阻尼的PageRank向量。在这里，随机游走是周期性的（为什么？），因此幂迭代可能会失败（试一试！）。相反，我们使用少量阻尼并增加迭代次数。
- en: '[PRE22]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '[PRE23]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '[PRE24]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '[PRE25]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: The PageRank value for the center node is indeed roughly \(7\) times larger
    than the other ones, as can be expected from the ratio of their degrees.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 中心节点的PageRank值确实大约是其他节点的\(7\)倍，正如从它们度数的比例中可以预期的那样。
- en: We try again with more damping. This time the ratio of PageRank values is not
    quite the same as the ratio of degrees, but the center node continues to have
    a higher value than the other nodes.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 我们再次尝试，这次增加了更多的阻尼。这次PageRank值的比率并不完全等于度数的比率，但中心节点仍然比其他节点具有更高的值。
- en: '[PRE26]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '[PRE27]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: \(\unlhd\)
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: \(\unlhd\)
- en: '**CHAT & LEARN** There are many other centrality measures besides PageRank,
    such as betweenness centrality, closeness centrality, and eigenvector centrality.
    Ask your favorite AI chatbot to explain these measures and discuss their similarities
    and differences with PageRank. \(\ddagger\)'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '**聊天与学习：** 除了PageRank之外，还有许多其他中心性度量，例如中介中心性、接近中心性和特征向量中心性。请你的AI聊天机器人解释这些度量，并讨论它们与PageRank的相似之处和不同之处。\(\ddagger\)'
- en: 7.5.3\. Personalized PageRank[#](#personalized-pagerank "Link to this heading")
  id: totrans-146
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.5.3\. 个性化PageRank[#](#personalized-pagerank "链接到这个标题")
- en: We return to [MathWorld](https://mathworld.wolfram.com) dataset. Recall that
    each page of MathWorld concerns a particular mathematical concept. In a section
    entitled “SEE ALSO”, other related mathematical concepts are listed with a link
    to their MathWorld page. Our goal is to identify “central” vertices in the resulting
    graph.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 我们回到[MathWorld](https://mathworld.wolfram.com)数据集。回想一下，MathWorld的每一页都涉及一个特定的数学概念。在一个名为“SEE
    ALSO”的部分中，列出了其他相关的数学概念，并附有链接到它们的MathWorld页面。我们的目标是识别结果图中的“中心”顶点。
- en: '**Figure:** Platonic solids (*Credit:* Made with [Midjourney](https://www.midjourney.com/))'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: '**图：** 柏拉图立体（*来源：[Midjourney](https://www.midjourney.com/)*）'
- en: '![Platonic solids](../Images/4393ac7f9684a7e62d5f82de15668d37.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![柏拉图立体](../Images/4393ac7f9684a7e62d5f82de15668d37.png)'
- en: \(\bowtie\)
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: \(\bowtie\)
- en: '**NUMERICAL CORNER:** We load the dataset again.'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '**数值角落：** 我们再次加载数据集。'
- en: '[PRE28]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '|  | from | to |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '|  | 来自 | 到 |'
- en: '| --- | --- | --- |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| 0 | 0 | 2 |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '| 0 | 0 | 2 |'
- en: '| 1 | 1 | 47 |'
  id: totrans-156
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 1 | 47 |'
- en: '| 2 | 1 | 404 |'
  id: totrans-157
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 1 | 404 |'
- en: '| 3 | 1 | 2721 |'
  id: totrans-158
  prefs: []
  type: TYPE_TB
  zh: '| 3 | 1 | 2721 |'
- en: '| 4 | 2 | 0 |'
  id: totrans-159
  prefs: []
  type: TYPE_TB
  zh: '| 4 | 2 | 0 |'
- en: The second file contains the titles of the pages.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个文件包含页面的标题。
- en: '[PRE29]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: '|  | title |'
  id: totrans-162
  prefs: []
  type: TYPE_TB
  zh: '|  | 标题 |'
- en: '| --- | --- |'
  id: totrans-163
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| 0 | Alexander''s Horned Sphere |'
  id: totrans-164
  prefs: []
  type: TYPE_TB
  zh: '| 0 | 亚历山大的角形球体 |'
- en: '| 1 | Exotic Sphere |'
  id: totrans-165
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 异域球体 |'
- en: '| 2 | Antoine''s Horned Sphere |'
  id: totrans-166
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 安托万角形球体 |'
- en: '| 3 | Flat |'
  id: totrans-167
  prefs: []
  type: TYPE_TB
  zh: '| 3 | 平面 |'
- en: '| 4 | Poincaré Manifold |'
  id: totrans-168
  prefs: []
  type: TYPE_TB
  zh: '| 4 | 普通曲率流形 |'
- en: We construct the graph by adding the edges one by one. We first convert `df_edges`
    into a NumPy array.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 我们通过逐个添加边来构建图。我们首先将`df_edges`转换为NumPy数组。
- en: '[PRE30]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '[PRE31]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '[PRE32]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: To apply PageRank, we construct the adjacency matric of the graph. We also define
    a vector of title pages.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 要应用PageRank，我们构建图的邻接矩阵。我们还定义了一个标题页面向量。
- en: '[PRE33]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: We use [`numpy.argsort`](https://numpy.org/doc/stable/reference/generated/numpy.argsort.html)
    to identify the pages with highest scores. We apply it to `-pr_mw` to sort from
    the highest to lowest value.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用`numpy.argsort`来识别得分最高的页面。我们将其应用于`-pr_mw`以从高到低排序。
- en: '[PRE34]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'The top 25 topics are:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 排名前25个主题是：
- en: '[PRE35]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: '[PRE36]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: We indeed get a list of central concepts in mathematics – including several
    we have encountered previously such as `Normal Distribution`, `Tree`, `Vector`
    or `Derivative`.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 我们确实得到了数学中的核心概念列表——包括我们之前遇到的一些，例如`正态分布`、`树`、`向量`或`导数`。
- en: \(\unlhd\)
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: \(\unlhd\)
- en: There is a variant of PageRank, referred to as Personalized PageRank (PPR)\(\idx{Personalized
    PageRank}\xdi\), which aims to tailor the outcome to specific interests. This
    is accomplished from a simple change to the algorithm. When teleporting, rather
    than jumping to a uniformly random page, we instead jump to an arbitrary distribution
    which is meant to capture some specific interests. In the context of the web for
    instance, this distribution might be uniform over someone’s bookmarks.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 有一种PageRank的变体，称为个性化PageRank（PPR）\(\idx{个性化PageRank}\xdi\)，旨在根据特定兴趣定制结果。这是通过简单修改算法来实现的。在随机跳跃时，我们不是跳转到均匀随机的页面，而是跳转到任意分布，旨在捕捉某些特定兴趣。例如，在网络的上下文中，这种分布可能是在某人的书签上均匀分布。
- en: 'We adapt `pagerank` as follows:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 我们如下调整`pagerank`：
- en: '[PRE37]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: '**NUMERICAL CORNER:** To test PPR, consider the distribution concentrated on
    a single topic `Normal Distribution`. This is topic number `1270`.'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '**数值角**：为了测试PPR，考虑集中在单个主题`正态分布`上的分布。这是主题编号`1270`。'
- en: '[PRE38]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: '[PRE39]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: '[PRE40]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: We now run PPR and list the top 25 pages.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在运行PPR并列出前25个页面。
- en: '[PRE41]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'The top 25 topics are:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 排名前25个主题是：
- en: '[PRE42]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: '[PRE43]'
  id: totrans-193
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: This indeed returns various statistical concepts, particularly related to the
    normal dsitribution.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 这确实返回了各种统计概念，尤其是与正态分布相关。
- en: \(\unlhd\)
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: \(\unlhd\)
- en: '**CHAT & LEARN** The PageRank algorithm has been adapted for various applications
    beyond web search, such as ranking scientific papers, analyzing social networks,
    and even ranking sports teams [[Gle](https://arxiv.org/abs/1407.5107)]. Ask your
    favorite AI chatbot to discuss some of these applications and how the PageRank
    algorithm is modified for each case. \(\ddagger\)'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: '**聊天与学习** PageRank算法已被应用于超越网络搜索的各种应用，例如排名科学论文、分析社交网络，甚至排名体育队伍 [[Gle](https://arxiv.org/abs/1407.5107)]。请你的AI聊天机器人讨论一些这些应用以及PageRank算法如何针对每种情况进行修改。\(\ddagger\)'
- en: '***Self-assessment quiz*** *(with help from Claude, Gemini, and ChatGPT)*'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: '***自我评估测验*** *(由Claude、Gemini和ChatGPT协助)*'
- en: '**1** Consider a random walk on the following graph:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: '**1** 考虑以下图上的随机游走：'
- en: '[PRE44]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: What is the transition matrix for this random walk?
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 这个随机游走的转移矩阵是什么？
- en: a)
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: a)
- en: \[\begin{split} \begin{bmatrix} 1/3 & 1/3 & 1/3 \\ 1/3 & 1/3 & 1/3 \\ 1/3 &
    1/3 & 1/3 \end{bmatrix} \end{split}\]
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \begin{bmatrix} 1/3 & 1/3 & 1/3 \\ 1/3 & 1/3 & 1/3 \\ 1/3 &
    1/3 & 1/3 \end{bmatrix} \end{split}\]
- en: b)
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: b)
- en: \[\begin{split} \begin{bmatrix} 0 & 1/2 & 1/2 \\ 1/2 & 0 & 1/2 \\ 1/2 & 1/2
    & 0 \end{bmatrix} \end{split}\]
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \begin{bmatrix} 0 & 1/2 & 1/2 \\ 1/2 & 0 & 1/2 \\ 1/2 & 1/2
    & 0 \end{bmatrix} \end{split}\]
- en: c)
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: c)
- en: \[\begin{split} \begin{bmatrix} 1 & 0 & 0 \\ 0 & 1 & 0 \\ 0 & 0 & 1 \end{bmatrix}
    \end{split}\]
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \begin{bmatrix} 1 & 0 & 0 \\ 0 & 1 & 0 \\ 0 & 0 & 1 \end{bmatrix}
    \end{split}\]
- en: d)
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: d)
- en: \[\begin{split} \begin{bmatrix} 0 & 1 & 0 \\ 0 & 0 & 1 \\ 1 & 0 & 0 \end{bmatrix}
    \end{split}\]
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \begin{bmatrix} 0 & 1 & 0 \\ 0 & 0 & 1 \\ 1 & 0 & 0 \end{bmatrix}
    \end{split}\]
- en: '**2** In a random walk on a directed graph, the transition probability from
    vertex \(i\) to vertex \(j\) is given by:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: '**2** 在有向图上的随机游走中，从顶点 \(i\) 到顶点 \(j\) 的转移概率由以下公式给出：'
- en: a) \(p_{i,j} = \frac{1}{\delta^-(j)}\) for all \(j \in N^-(i)\)
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: a) \(p_{i,j} = \frac{1}{\delta^-(j)}\) 对于所有 \(j \in N^-(i)\)
- en: b) \(p_{i,j} = \frac{1}{\delta^+(j)}\) for all \(j \in N^+(i)\)
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: b) \(p_{i,j} = \frac{1}{\delta^+(j)}\) 对于所有 \(j \in N^+(i)\)
- en: c) \(p_{i,j} = \frac{1}{\delta^-(i)}\) for all \(j \in N^-(i)\)
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: c) \(p_{i,j} = \frac{1}{\delta^-(i)}\) 对于所有 \(j \in N^-(i)\)
- en: d) \(p_{i,j} = \frac{1}{\delta^+(i)}\) for all \(j \in N^+(i)\)
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: d) \(p_{i,j} = \frac{1}{\delta^+(i)}\) 对于所有 \(j \in N^+(i)\)
- en: '**3** The transition matrix \(P\) of a random walk on a directed graph can
    be expressed in terms of the adjacency matrix \(A\) as:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: '**3** 有向图上随机游走的转移矩阵 \(P\) 可以用邻接矩阵 \(A\) 表示为：'
- en: a) \(P = AD^{-1}\)
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: a) \(P = AD^{-1}\)
- en: b) \(P = A^TD^{-1}\)
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: b) \(P = A^TD^{-1}\)
- en: c) \(P = D^{-1}A\)
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: c) \(P = D^{-1}A\)
- en: d) \(P = D^{-1}A^T\)
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: d) \(P = D^{-1}A^T\)
- en: '**4** In a random walk on an undirected graph, the stationary distribution
    \(\boldsymbol{\pi}\) satisfies:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: '**4** 在无向图上的随机游走中，平稳分布 \(\boldsymbol{\pi}\) 满足：'
- en: a) \(\pi_i = \frac{\delta^+(i)}{\sum_{j \in V} \delta^+(j)}\) for all \(i \in
    V\)
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: a) \(\pi_i = \frac{\delta^+(i)}{\sum_{j \in V} \delta^+(j)}\) 对于所有 \(i \in V\)
- en: b) \(\pi_i = \frac{1}{\delta(i)}\) for all \(i \in V\)
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: b) \(\pi_i = \frac{1}{\delta(i)}\) 对于所有 \(i \in V\)
- en: c) \(\pi_i = \frac{1}{|V|}\) for all \(i \in V\)
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: c) \(\pi_i = \frac{1}{|V|}\) 对于所有 \(i \in V\)
- en: d) \(\pi_i = \frac{\delta(i)}{\sum_{j \in V} \delta(j)}\) for all \(i \in V\)
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: d) \(\pi_i = \frac{\delta(i)}{\sum_{j \in V} \delta(j)}\) 对于所有 \(i \in V\)
- en: '**5** Personalized PageRank differs from standard PageRank in that:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: '**5** 个性化 PageRank 与标准 PageRank 的不同之处在于：'
- en: a) It considers the user’s browsing history
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: a) 它考虑用户的浏览历史
- en: b) It jumps to a non-uniform distribution when teleporting
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: b) 在传送时跳转到非均匀分布
- en: c) It uses a different damping factor
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: c) 它使用不同的阻尼系数
- en: d) It only considers a subset of the graph
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: d) 它只考虑图的一个子集
- en: 'Answer for 1: b. Justification: Each node has a degree of 2, and the probability
    of transitioning to each neighbor is 1/2.'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 1 题的答案：b. 理由：每个节点都有 2 度，跳转到每个邻居的概率是 1/2。
- en: 'Answer for 2: d. Justification: The text states, “In words, at each step, we
    choose an outgoing edge from the current state uniformly at random,” which corresponds
    to the transition probability \(p_{i,j} = \frac{1}{\delta^+(i)}\) for all \(j
    \in N^+(i)\), where \(\delta^+(i)\) is the out-degree of vertex \(i\) and \(N^+(i)\)
    is the set of vertices with an edge from \(i\).'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 2 题的答案：d. 理由：文本中提到，“在每一步，我们均匀随机地从当前状态选择一个出边，”这对应于所有 \(j \in N^+(i)\) 的转移概率 \(p_{i,j}
    = \frac{1}{\delta^+(i)}\)，其中 \(\delta^+(i)\) 是顶点 \(i\) 的出度，\(N^+(i)\) 是从 \(i\)
    出发的边的顶点集。
- en: 'Answer for 3: c. Justification: The text states, “The transition matrix of
    random walk on \(G\) satisfying the conditions of the definition above is \(P
    = D^{-1}A\), where \(D\) is the out-degree matrix.”'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 3 题的答案：c. 理由：文本中提到，“满足上述定义条件的 \(G\) 上的随机游走的转移矩阵是 \(P = D^{-1}A\)，其中 \(D\) 是出度矩阵。”
- en: 'Answer for 4: d. Justification: The text states, “In the connected case without
    damping, the unique stationary distribution of random walk on \(G\) is given by
    \(\pi_i = \frac{\delta(i)}{\sum_{i \in V} \delta(i)}, \forall i \in V\).”'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 4 题的答案：d. 理由：文本中提到，“在无阻尼的连通情况下，\(G\) 上随机游走的唯一平稳分布由 \(\pi_i = \frac{\delta(i)}{\sum_{i
    \in V} \delta(i)}, \forall i \in V\) 给出。”
- en: 'Answer for 5: b. Justification: The text states, “When teleporting, rather
    than jumping to a uniformly random page, we instead jump to an arbitrary distribution
    \(\boldsymbol{\mu}\) which is meant to capture some specific interests.”'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 5 题的答案：b. 理由：文本中提到，“在传送时，我们不是跳转到均匀随机页面，而是跳转到任意分布 \(\boldsymbol{\mu}\)，这个分布旨在捕捉某些特定的兴趣。”
- en: 7.5.1\. Random walk on a graph[#](#random-walk-on-a-graph "Link to this heading")
  id: totrans-234
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.5.1\. 图上的随机游走[#](#random-walk-on-a-graph "链接到这个标题")
- en: We first specialize the theory of the previous section to random walks on graphs.
    We start with the case of digraphs. The undirected case leads to useful simplifications.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先将上一节的理论专门化到图上的随机游走。我们首先从有向图的情况开始。无向情况导致有用的简化。
- en: '**Directed case** We first define a random walk on a digraph.'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: '**有向情况** 我们首先定义一个有向图上的随机游走。'
- en: '**DEFINITION** **(Random Walk on a Digraph)** \(\idx{random walk on a graph}\xdi\)
    Let \(G = (V,E)\) be a directed graph. If a vertex does not have an outgoing edge
    (i.e., an edge with it as its source), add a self-loop to it. A random walk on
    \(G\) is a time-homogeneous Markov chain \((X_t)_{t \geq 0}\) with state space
    \(\mathcal{S} = V\) and transition probabilities'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: '**定义** **（有向图上的随机游走）** \(\idx{random walk on a graph}\xdi\) 设 \(G = (V,E)\)
    为一个有向图。如果一个顶点没有出边（即以它为源的边），则向它添加一个自环。\(G\) 上的随机游走是一个时间齐次的马尔可夫链 \((X_t)_{t \geq
    0}\)，状态空间为 \(\mathcal{S} = V\)，转移概率'
- en: \[ p_{i,j} = \P[X_{t+1} = j\,|\,X_{t} = i] = \frac{1}{\delta^+(i)}, \qquad \forall
    i \in V, j \in N^+(i), \]
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: \[ p_{i,j} = \P[X_{t+1} = j\,|\,X_{t} = i] = \frac{1}{\delta^+(i)}, \qquad \forall
    i \in V, j \in N^+(i), \]
- en: where \(\delta^+(i)\) is the out-degree of \(i\), i.e., the number of outgoing
    edges and \(N^+(i) = \{j \in V:(i,j) \in E\}\). \(\natural\)
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: \(\delta^+(i)\) 表示顶点 \(i\) 的出度，即出边的数量，且 \(N^+(i) = \{j \in V:(i,j) \in E\}\)。\(\natural\)
- en: In words, at each step, we choose an outgoing edge from the current state uniformly
    at random. Choosing a self-loop (i.e., an edge of the form \((i,i)\)) means staying
    where we are.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 用话来说，在每一步，我们从当前状态均匀随机选择一个出边。选择一个自环（即形式为 \((i,i)\) 的边）意味着停留在原地。
- en: Let \(G = (V,E)\) be a digraph with \(n = |V|\) vertices. Without loss of generality,
    we let the vertex set be \([n] = \{1,\ldots,n\}\). The adjacency matrix of \(G\)
    is denoted as \(A = (a_{i,j})_{i,j}\). We define the out-degree matrix \(D\) as
    the diagonal matrix with diagonal entries \(\delta^+(i)\), \(i=1,\ldots,n\). That
    is,
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 设 \(G = (V,E)\) 为一个有向图，有 \(n = |V|\) 个顶点。不失一般性，我们令顶点集为 \([n] = \{1,\ldots,n\}\)。\(G\)
    的邻接矩阵表示为 \(A = (a_{i,j})_{i,j}\)。我们定义出度矩阵 \(D\) 为对角矩阵，其对角线元素为 \(\delta^+(i)\)，\(i=1,\ldots,n\)。即，
- en: \[ D = \mathrm{diag}(A \mathbf{1}). \]
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: \[ D = \mathrm{diag}(A \mathbf{1}). \]
- en: '**LEMMA** **(Transition Matrix in Terms of Adjacency)** \(\idx{transition matrix
    in terms of adjacency}\xdi\) The transition matrix of random walk on \(G\) satisfying
    the conditions of the definition above is'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: '**引理** **（邻接矩阵中的转移矩阵）** \(\idx{transition matrix in terms of adjacency}\xdi\)
    满足上述定义条件的 \(G\) 上的随机游走的转移矩阵是'
- en: \[ P = D^{-1} A. \]
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: \[ P = D^{-1} A. \]
- en: \(\flat\)
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: \(\flat\)
- en: '*Proof:* The formula follows immediately from the definition. \(\square\)'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: '*证明* 该公式直接从定义中得出。\(\square\)'
- en: We specialize irreducibility to the case of random walk on a digraph.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将不可约性专门化到有向图上的随机游走的情况。
- en: '**LEMMA** **(Irreducibility)** \(\idx{irreducibility lemma}\xdi\) Let \(G =
    (V,E)\) be a digraph. Random walk on \(G\) is irreducible if and only if \(G\)
    is strongly connected. \(\flat\)'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: '**引理** **（不可约性）** \(\idx{irreducibility lemma}\xdi\) 设 \(G = (V,E)\) 为一个有向图。\(G\)
    上的随机游走是不可约的当且仅当 \(G\) 是强连通的。\(\flat\)'
- en: '*Proof:* Simply note that the transition graph of the walk is \(G\) itself.
    We have seen previously that irreducibility is equivalent to the transition graph
    being strongly connected. \(\square\)'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: '*证明* 简单地指出，游走的转移图就是 \(G\) 本身。我们之前已经看到，不可约性与转移图是强连通的等价。\(\square\)'
- en: In the undirected case, more structure emerges as we detail next.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 在无向情况下，随着我们接下来详细说明，更多的结构会显现出来。
- en: '**Undirected case** Specializing the previous definitions and observations
    to undirected graphs, we get the following.'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: '**无向情况** 将之前的定义和观察专门化到无向图，我们得到以下结果。'
- en: It will be convenient to allow self-loops, i.e., entry \(a_{i,i}\) of the adjacency
    matrix can be \(1\) for some \(i\).
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 将自环允许在内将很方便，即邻接矩阵中的 \(a_{i,i}\) 可以对某些 \(i\) 为 \(1\)。
- en: '**DEFINITION** **(Random Walk on a Graph)** \(\idx{random walk on a graph}\xdi\)
    Let \(G = (V,E)\) be a graph. If a vertex is isolated, add a self-loop to it.
    A random walk on \(G\) is a time-homogeneous Markov chain \((X_t)_{t \geq 0}\)
    with state space \(\mathcal{S} = V\) and transition probabilities'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: '**定义** **（图上的随机游走）** \(\idx{random walk on a graph}\xdi\) 设 \(G = (V,E)\) 为一个图。如果一个顶点是孤立的，则向其添加一个自环。\(G\)
    上的随机游走是一个时间齐次的马尔可夫链 \((X_t)_{t \geq 0}\)，其状态空间为 \(\mathcal{S} = V\)，转移概率'
- en: \[ p_{i,j} = \P[X_{t+1} = j\,|\,X_{t} = i] = \frac{1}{\delta(i)}, \qquad \forall
    i \in V, j \in N(i) \]
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: \[ p_{i,j} = \P[X_{t+1} = j\,|\,X_{t} = i] = \frac{1}{\delta(i)}, \qquad \forall
    i \in V, j \in N(i) \]
- en: 'where \(\delta(i)\) is the degree of \(i\) and \(N(i) = \{j \in V: \{i,j\}
    \in E\}\). \(\natural\)'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: '其中 \(\delta(i)\) 是 \(i\) 的度数，且 \(N(i) = \{j \in V: \{i,j\} \in E\}\)。\(\natural\)'
- en: As we have seen previously, the transition matrix of random walk on \(G\) satisfying
    the conditions of the definition above is \(P = D^{-1} A\), where \(D = \mathrm{diag}(A
    \mathbf{1})\) is the degree matrix.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们之前所看到的，满足上述定义条件的 \(G\) 上随机游走的转移矩阵是 \(P = D^{-1} A\)，其中 \(D = \mathrm{diag}(A
    \mathbf{1})\) 是度矩阵。
- en: For instance, we have previously derived the transition matrix for random walk
    on the Petersen graph.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我们之前已经推导出了 Petersen 图上随机游走的转移矩阵。
- en: We specialize irreducibility to the case of random walk on a graph.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将不可约性专门化到图上的随机游走的情况。
- en: '**LEMMA** **(Irreducibility)** \(\idx{irreducibility lemma}\xdi\) Let \(G =
    (V,E)\) be a graph. Random walk on \(G\) is irreducible if and only if \(G\) is
    connected. \(\flat\)'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: '**引理** **（不可约性）** \(\idx{irreducibility lemma}\xdi\) 设 \(G = (V,E)\) 为一个图。\(G\)
    上的随机游走是不可约的当且仅当 \(G\) 是连通的。\(\flat\)'
- en: '*Proof:* We only prove one direction. Suppose \(G\) is connected. Then between
    any two vertices \(i\) and \(j\) there is a sequence of vertices \(z_0 = i, z_1,
    \ldots, z_r = j\) such that \(\{z_{\ell-1},z_\ell\} \in E\) for all \(\ell = 1,\ldots,r\).
    In particular, \(a_{z_{\ell-1},z_\ell} > 0\) which implies \(p_{z_{\ell-1},z_\ell}
    > 0\). That proves irreducibility. \(\square\)'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: '**证明**：我们只证明一个方向。假设 \(G\) 是连通的。那么在任意两个顶点 \(i\) 和 \(j\) 之间存在一个顶点序列 \(z_0 = i,
    z_1, \ldots, z_r = j\)，使得对于所有 \(\ell = 1,\ldots,r\)，\(\{z_{\ell-1},z_\ell\} \in
    E\)。特别是，\(a_{z_{\ell-1},z_\ell} > 0\)，这表明 \(p_{z_{\ell-1},z_\ell} > 0\)。这证明了不可约性。
    \(\square\)'
- en: By the previous lemma and the *Existence of a Stationary Distribution*, provided
    \(G\) is connected, it has a unique stationary distribution. It turns out to be
    straightforward to compute it as we see in the next subsection.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 根据前面的引理和**平稳分布的存在性**，如果 \(G\) 是连通的，那么它有一个唯一的平稳分布。实际上，我们将在下一小节中看到，计算它是直接的。
- en: '**Reversible chains** A Markov chain is said to be reversible if it satisfies
    the detailed balance conditions.'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: '**可逆链** 如果一个马尔可夫链满足详细平衡条件，则称其为可逆链。'
- en: '**DEFINITION** **(Reversibility)** \(\idx{reversible}\xdi\) A transition matrix
    \(P = (p_{i,j})_{i,j=1}^n\) is reversible with respect to a probability distribution
    \(\bpi = (\pi_i)_{i=1}^n\) if it satisfies the so-called detailed balance conditions'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: '**定义** **(可逆性)** \(\idx{reversible}\xdi\) 一个转移矩阵 \(P = (p_{i,j})_{i,j=1}^n\)
    如果相对于概率分布 \(\bpi = (\pi_i)_{i=1}^n\) 满足所谓的详细平衡条件，则称其为可逆的'
- en: \[ \pi_i p_{i,j} = \pi_j p_{j,i}, \qquad \forall i,j. \]
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \pi_i p_{i,j} = \pi_j p_{j,i}, \qquad \forall i,j. \]
- en: \(\natural\)
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: \(\natural\)
- en: The next theorem explains why this definition is useful to us.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个定理解释了为什么这个定义对我们是有用的。
- en: '**THEOREM** **(Reversibility and Stationarity)** \(\idx{reversibility and stationarity
    theorem}\xdi\) Let \(P = (p_{i,j})_{i,j=1}^n\) be a transition matrix reversible
    with respect to a probability distribution \(\bpi = (\pi_i)_{i=1}^n\). Then \(\bpi\)
    is a stationary distribution of \(P\). \(\sharp\)'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: '**定理** **(可逆性和平稳性)** \(\idx{reversibility and stationarity theorem}\xdi\) 设
    \(P = (p_{i,j})_{i,j=1}^n\) 为一个相对于概率分布 \(\bpi = (\pi_i)_{i=1}^n\) 可逆的转移矩阵。那么 \(\bpi\)
    是 \(P\) 的一个平稳分布。 \(\sharp\)'
- en: '*Proof idea:* Just check the definition.'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: '**证明思路**：只需检查定义。'
- en: '*Proof:* For any \(j\), by the definition of reversibility,'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: '**证明**：对于任何 \(j\)，根据可逆性的定义，'
- en: \[ \sum_{i} \pi_i p_{i,j} = \sum_{i} \pi_j p_{j,i} = \pi_j \sum_{i} p_{j,i}
    = \pi_j, \]
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \sum_{i} \pi_i p_{i,j} = \sum_{i} \pi_j p_{j,i} = \pi_j \sum_{i} p_{j,i}
    = \pi_j, \]
- en: where we used that \(P\) is stochastic in the last equality. \(\square\)
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 其中在最后一个等式中我们使用了 \(P\) 是随机的。 \(\square\)
- en: We return to random walk on a graph. We show that it is reversible and derive
    the stationary dsitribution.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 我们回到图上的随机游走。我们展示它是可逆的，并推导出平稳分布。
- en: '**THEOREM** **(Stationary Distribution on a Graph)** \(\idx{stationary distribution
    on a graph}\xdi\) Let \(G = (V,E)\) be a graph. Assume further that \(G\) is connected.
    Then the unique stationary distribution of random walk on \(G\) is given by'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: '**定理** **(图上的平稳分布)** \(\idx{stationary distribution on a graph}\xdi\) 设 \(G
    = (V,E)\) 为一个图。进一步假设 \(G\) 是连通的。那么在 \(G\) 上随机游走的唯一平稳分布由下式给出'
- en: \[ \pi_i = \frac{\delta(i)}{\sum_{i \in V} \delta(i)}, \qquad \forall i \in
    V. \]
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \pi_i = \frac{\delta(i)}{\sum_{i \in V} \delta(i)}, \qquad \forall i \in
    V. \]
- en: \(\sharp\)
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: \(\sharp\)
- en: '*Proof idea:* We prove this in two parts. We first argue that \(\bpi = (\pi_i)_{i
    \in V}\) is indeed a probability distribution. Then we show that the transition
    matrix \(P\) is reversible with respect to \(\bpi\).'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: '**证明思路**：我们分两部分来证明。首先，我们论证 \(\bpi = (\pi_i)_{i \in V}\) 确实是一个概率分布。然后我们展示转移矩阵
    \(P\) 相对于 \(\bpi\) 是可逆的。'
- en: '*Proof:* We first show that \(\bpi = (\pi_v)_{v \in V}\) is a probability distribution.
    Its entries are non-negative by definition. Further'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: '**证明**：我们首先展示 \(\bpi = (\pi_v)_{v \in V}\) 是一个概率分布。它的条目根据定义是非负的。进一步'
- en: \[ \sum_{i \in V} \pi_i = \sum_{i \in V}\frac{\delta(i)}{\sum_{i \in V} \delta(i)}
    = \frac{\sum_{i \in V} \delta(i)}{\sum_{i \in V} \delta(i)} = 1. \]
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \sum_{i \in V} \pi_i = \sum_{i \in V}\frac{\delta(i)}{\sum_{i \in V} \delta(i)}
    = \frac{\sum_{i \in V} \delta(i)}{\sum_{i \in V} \delta(i)} = 1. \]
- en: It remains to establish reversibility. For any \(i, j\), by definition,
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 剩下要建立可逆性。对于任何 \(i, j\)，根据定义，
- en: \[\begin{align*} \pi_i p_{i,j} &= \frac{\delta(i)}{\sum_{i \in V} \delta(i)}
    \frac{a_{i,j}}{\sum_{k} a_{i,k}}\\ &= \frac{\delta(i)}{\sum_{i \in V} \delta(i)}
    \frac{a_{i,j}}{\delta(i)}\\ &= \frac{1}{\sum_{i \in V} \delta(i)} a_{i,j}. \end{align*}\]
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{align*} \pi_i p_{i,j} &= \frac{\delta(i)}{\sum_{i \in V} \delta(i)}
    \frac{a_{i,j}}{\sum_{k} a_{i,k}}\\ &= \frac{\delta(i)}{\sum_{i \in V} \delta(i)}
    \frac{a_{i,j}}{\delta(i)}\\ &= \frac{1}{\sum_{i \in V} \delta(i)} a_{i,j}. \end{align*}\]
- en: Changing the roles of \(i\) and \(j\) gives the same expression since \(a_{j,i}
    = a_{i,j}\). \(\square\)
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 改变\(i\)和\(j\)的角色会得到相同的表达式，因为\(a_{j,i} = a_{i,j}\)。\(\square\)
- en: 7.5.2\. PageRank[#](#pagerank "Link to this heading")
  id: totrans-282
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.5.2\. PageRank[#](#pagerank "链接到这个标题")
- en: One is often interested in identifying central nodes in a network. Intuitively,
    they should correspond to entities (e.g., individuals or webpages depending on
    the network) that are particularly influential or authoritative. There are many
    ways of uncovering such nodes. Formally one defines a notion of [node centrality](https://en.wikipedia.org/wiki/Centrality)\(\idx{node
    centrality}\xdi\), which ranks nodes by importance. Here we focus on one important
    such notion, PageRank. We will see that it is closely related to random walks
    on graphs.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 人们通常对识别网络中的中心节点感兴趣。直观上，它们应该对应于特别有影响力或权威性的实体（例如，根据网络的不同，可以是个人或网页）。有许多方法可以揭示这样的节点。形式上，定义了一个关于[节点中心性](https://en.wikipedia.org/wiki/Centrality)\(\idx{节点中心性}\xdi\)的概念，该概念按重要性对节点进行排序。在这里，我们关注一个重要的此类概念，即PageRank。我们将看到它与图上的随机游走密切相关。
- en: '**A notion of centrality for directed graphs** We start with the directed case.'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: '**有向图中心性的概念**我们从有向情况开始。'
- en: Let \(G = (V,E)\) be a digraph on \(n\) vertices. We seek to associate a measure
    of importance to each vertex. We will denote this (row) vector by
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 设\(G = (V,E)\)是一个有\(n\)个顶点的有向图。我们试图为每个顶点关联一个重要性度量。我们将用这个（行）向量表示
- en: \[ \mathbf{PR} = (\mathrm{PR}_1, \ldots, \mathrm{PR}_n)^T, \]
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \mathbf{PR} = (\mathrm{PR}_1, \ldots, \mathrm{PR}_n)^T, \]
- en: where \(\mathrm{PR}\) stands for PageRank\(\idx{PageRank}\xdi\).
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 其中\(\mathrm{PR}\)代表PageRank\(\idx{PageRank}\xdi\)。
- en: We posit that each vertex has a certain amount of influence associated to it
    and that it distributes that influence equally among the neighbors it points to.
    We seek a (row) vector \(\mathbf{z} = (z_1,\ldots,z_n)^T\) that satisfies an equation
    of the form
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 我们假设每个顶点都与一个与之相关的影响量相关联，并且它将这种影响平均分配给它指向的邻居。我们寻求一个（行）向量\(\mathbf{z} = (z_1,\ldots,z_n)^T\)，它满足以下形式的方程
- en: \[ z_i = \sum_{j \in N^-(i)} z_j \frac{1}{\delta^+(j)}, \]
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: \[ z_i = \sum_{j \in N^-(i)} z_j \frac{1}{\delta^+(j)}, \]
- en: where \(\delta^+(j) = |N^+(j)|\) is the out-degree of \(j\) and \(N^-(i)\) is
    the set of vertices \(j\) with an edge \((j,i)\). Observe that we explicitly take
    into account the direction of the edges. We think of an edge \((j,i)\) as an indication
    that \(j\) values \(i\).
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 其中\(\delta^+(j) = |N^+(j)|\)是\(j\)的出度，\(N^-(i)\)是具有边\((j,i)\)的顶点集合\(j\)的集合。注意，我们明确考虑了边的方向。我们认为边\((j,i)\)是\(j\)认为\(i\)有价值的指示。
- en: 'On the web for instance, a link towards a page indicates that the destination
    page has information of value. Quoting [Wikipedia](https://en.wikipedia.org/wiki/PageRank):'
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在网络上，例如，指向一个页面的链接表明目标页面有有价值的信息。引用[Wikipedia](https://en.wikipedia.org/wiki/PageRank)：
- en: PageRank works by counting the number and quality of links to a page to determine
    a rough estimate of how important the website is. The underlying assumption is
    that more important websites are likely to receive more links from other websites.
  id: totrans-292
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: PageRank通过计算指向一个页面的链接数量和质量来确定该网站的大致重要性。其基本假设是，越重要的网站更有可能从其他网站获得更多链接。
- en: On X (formerly known as Twitter), following an account is an indication that
    the latter is of interest.
  id: totrans-293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在X（以前称为Twitter）上，关注一个账户表明该账户是有趣的。
- en: We have already encountered this set of equations. Consider random walk on the
    directed graph \(G\) (where a self-loop is added to each vertex without an outgoing
    edge). That is, at every step, we pick an outgoing edge of the current state uniformly
    at random. Then the transition matrix is
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经遇到过这组方程。考虑有向图\(G\)上的随机游走（在每个没有出边顶点上添加一个自环）。也就是说，在每一步，我们随机均匀地选择当前状态的一个出边。然后转移矩阵是
- en: \[ P = D^{-1} A, \]
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: \[ P = D^{-1} A, \]
- en: where \(D\) is the diagonal matrix with the out-degrees on its diagonal.
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 其中\(D\)是对角矩阵，其对角线上的元素是出度。
- en: A stationary distribution \(\bpi = (\pi_1,\ldots,\pi_n)^T\) is a row vector
    satisfying in this case
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 一个平稳分布\(\bpi = (\pi_1,\ldots,\pi_n)^T\)是一个行向量，满足在这种情况下
- en: \[ \pi_i = \sum_{j=1}^n \pi_j p_{j,i} = \sum_{j \in N^-(i)} \pi_j \frac{1}{\delta^+(j)}.
    \]
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \pi_i = \sum_{j=1}^n \pi_j p_{j,i} = \sum_{j \in N^-(i)} \pi_j \frac{1}{\delta^+(j)}.
    \]
- en: So \(\mathbf{z}\) is stationary distribution of random walk on \(G\).
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，\(\mathbf{z}\)是\(G\)上随机游走的平稳分布。
- en: If the graph \(G\) is strongly connected, we know that there is a unique stationary
    distribution by the *Existence of a Stationary Distribution*. In many real-world
    digraphs, however, that assumption is not satisfied. To ensure that a meaningful
    solution can still be found, we modify the walk slightly.
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 如果图 \(G\) 是强连通的，我们知道根据*稳态分布的存在性*，存在一个唯一的稳态分布。然而，在许多现实世界的有向图中，这个假设并不成立。为了确保仍然可以找到有意义的解，我们稍微修改了行走。
- en: To make the walk irreducible, we add a small probability at each step of landing
    at a uniformly chosen node. This is sometimes referred to as *teleporting*. That
    is, we define the transition matrix
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使行走不可约，我们在每一步中添加一个小的概率，使得随机游走能够均匀地到达一个节点。这有时被称为*传送*。也就是说，我们定义转移矩阵
- en: \[ Q = \alpha P + (1-\alpha) \frac{1}{n} \mathbf{1} \mathbf{1}^T, \]
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: \[ Q = \alpha P + (1-\alpha) \frac{1}{n} \mathbf{1} \mathbf{1}^T, \]
- en: for some \(\alpha \in (0,1)\) known as the damping factor (or teleporting parameter).
    A typical choice is \(\alpha = 0.85\).
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 一个典型的选择是 \(\alpha = 0.85\)。
- en: Note that \(\frac{1}{n} \mathbf{1} \mathbf{1}^T\) is a stochastic matrix. Indeed,
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 注意到 \(\frac{1}{n} \mathbf{1} \mathbf{1}^T\) 是一个随机矩阵。实际上，
- en: \[ \frac{1}{n} \mathbf{1} \mathbf{1}^T \mathbf{1} = \frac{1}{n} \mathbf{1} n
    = \mathbf{1}. \]
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \frac{1}{n} \mathbf{1} \mathbf{1}^T \mathbf{1} = \frac{1}{n} \mathbf{1} n
    = \mathbf{1}. \]
- en: Hence, \(Q\) is a stochastic matrix (as a convex combination of stochastic matrices).
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，\(Q\) 是一个随机矩阵（作为随机矩阵的凸组合）。
- en: Moreover, \(Q\) is clearly irreducible since it is strictly positive. That is,
    for any \(x, y \in [n]\), one can reach \(y\) from \(x\) in a single step
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，\(Q\) 显然是不可约的，因为它严格为正。也就是说，对于任意的 \(x, y \in [n]\)，可以从 \(x\) 在一步内到达 \(y\)。
- en: \[ Q_{x,y} = \alpha P_{x,y} + (1-\alpha) \frac{1}{n} > 0. \]
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: \[ Q_{x,y} = \alpha P_{x,y} + (1-\alpha) \frac{1}{n} > 0. \]
- en: This also holds for \(x = y\) so the chain is lazy.
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 这也适用于 \(x = y\)，因此链是懒惰的。
- en: Finally, we define \(\mathbf{PR}\) as the unique stationary distribution of
    \(Q = (q_{i,j})_{i,j=1}^n\), that is, the solution to
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们定义 \(\mathbf{PR}\) 为 \(Q = (q_{i,j})_{i,j=1}^n\) 的唯一稳态分布，即
- en: \[ \mathrm{PR}_i = \sum_{j=1}^n \mathrm{PR}_j \, q_{j,i}, \]
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \mathrm{PR}_i = \sum_{j=1}^n \mathrm{PR}_j \, q_{j,i}, \]
- en: with \(\mathbf{PR} \geq 0\)
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 对于某个 \(\alpha \in (0,1)\)（称为阻尼因子或传送参数），有 \(\mathbf{PR} \geq 0\)。
- en: \[ \sum_{i=1}^n \mathrm{PR}_i = 1. \]
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \sum_{i=1}^n \mathrm{PR}_i = 1. \]
- en: 'Quoting [Wikipedia](https://en.wikipedia.org/wiki/PageRank):'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: '引用 [维基百科](https://en.wikipedia.org/wiki/PageRank):'
- en: The formula uses a model of a random surfer who reaches their target site after
    several clicks, then switches to a random page. The PageRank value of a page reflects
    the chance that the random surfer will land on that page by clicking on a link.
    It can be understood as a Markov chain in which the states are pages, and the
    transitions are the links between pages – all of which are all equally probable.
  id: totrans-315
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 该公式使用了一个随机游走者的模型，该游走者在多次点击后到达目标网站，然后切换到随机页面。页面的 PageRank 值反映了随机游走者通过点击链接而停留在该页面的概率。它可以理解为一种马尔可夫链，其中状态是页面，转移是页面之间的链接——所有这些都具有相同的概率。
- en: Here is an implementation of the PageRank algorithm. We will need a function
    that takes as input an adjacency matrix \(A\) and returns the corresponding transition
    matrix \(P\). Some vertices have no outgoing links. To avoid dividing by \(0\),
    we add a self-loop to *all vertices with out-degree \(0\)*. We [`numpy.fill_diagonal`](https://numpy.org/doc/stable/reference/generated/numpy.fill_diagonal.html)
    for this purpose. (The boolean values in `sinks` below automatically convert to
    `0.0` and `1.0` when used in the numerical matrix context. So this effectively
    adds self-loops only to sink nodes – nodes that had no outgoing edges now have
    a single outgoing edge pointing back to themselves.)
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是 PageRank 算法的实现。我们需要一个函数，该函数接受邻接矩阵 \(A\) 作为输入，并返回相应的转移矩阵 \(P\)。一些顶点没有出边。为了避免除以
    \(0\)，我们为*所有出度为 \(0\) 的顶点*添加一个自环。我们使用 `numpy.fill_diagonal` 来实现这一点。（下面的布尔值在数值矩阵上下文中使用时自动转换为
    `0.0` 和 `1.0`。因此，这实际上只为汇点添加自环——现在没有出边的节点现在有一个指向自己的出边。）
- en: Also, because the adjacency matrix and the vector of out-degrees have different
    shapes, we turn `out_deg` into a column vector using [`numpy.newaxis`](https://numpy.org/doc/stable/reference/constants.html#numpy.newaxis)
    to ensure that the division is [done one column at a time](https://numpy.org/doc/stable/user/basics.broadcasting.html#broadcastable-arrays).
    (There are many ways of doing this, [but some are slower than others](https://stackoverflow.com/questions/18522216/multiplying-across-in-a-numpy-array).)
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，由于邻接矩阵和出度向量具有不同的形状，我们使用 `numpy.newaxis` 将 `out_deg` 转换为列向量，以确保除法是[逐列进行的](https://numpy.org/doc/stable/user/basics.broadcasting.html#broadcastable-arrays)。（有几种方法可以做到这一点，[但有些比其他方法慢](https://stackoverflow.com/questions/18522216/multiplying-across-in-a-numpy-array)。）
- en: '[PRE45]'
  id: totrans-318
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: The following function adds the damping factor. Here `mu` will be the uniform
    distribution. It gets added (after scaling by `1-alpha`) one row at a time to
    `P` (again after scaling by `alpha`). This time we do not need to reshape `mu`
    as the sum is done one row at a time.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 以下函数添加了阻尼因子。这里的 `mu` 将是均匀分布。它（在按 `1-alpha` 缩放后）逐行添加到 `P` 中（再次按 `alpha` 缩放）。这次我们不需要重塑
    `mu`，因为求和是逐行进行的。
- en: '[PRE46]'
  id: totrans-320
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: When computing PageRank, we multiply from the left.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 在计算PageRank时，我们从左乘。
- en: '[PRE47]'
  id: totrans-322
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: '**NUMERICAL CORNER:** Let’s try a star with edges pointing out. Along the way,
    we check that our functions work how we expect them to.'
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: '**数值角**: 让我们尝试一个边缘指向外的星星。在这个过程中，我们检查我们的函数是否按预期工作。'
- en: '[PRE48]'
  id: totrans-324
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: '![../../_images/660932284bae2affdddf5662aeec676a1cf3903af81ef0cecb91e479b6585e26.png](../Images/ff153b67326802af34ceb69f23f4985b.png)'
  id: totrans-325
  prefs: []
  type: TYPE_IMG
  zh: '![../../_images/660932284bae2affdddf5662aeec676a1cf3903af81ef0cecb91e479b6585e26.png](../Images/ff153b67326802af34ceb69f23f4985b.png)'
- en: '[PRE49]'
  id: totrans-326
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: '[PRE50]'
  id: totrans-327
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: We compute the matrices \(P\) and \(Q\). We use [`numpy.set_printoptions`](https://numpy.org/doc/stable/reference/generated/numpy.set_printoptions.html)
    to condense the output.
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 我们计算矩阵 \(P\) 和 \(Q\)。我们使用 `numpy.set_printoptions` 来压缩输出。
- en: '[PRE51]'
  id: totrans-329
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: '[PRE52]'
  id: totrans-330
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: '[PRE53]'
  id: totrans-331
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: '[PRE54]'
  id: totrans-332
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: While it is tempting to guess that \(1\) is the most central node of the network,
    no edge actually points to it. In this case, the center of the star has a low
    PageRank value.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然猜测 \(1\) 是网络中最中心的节点很有吸引力，但实际上没有边指向它。在这种情况下，星星的中心具有很低的PageRank值。
- en: '[PRE55]'
  id: totrans-334
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: '[PRE56]'
  id: totrans-335
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: We then try a star with edges pointing in.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们尝试一个边缘指向内的星星。
- en: '[PRE57]'
  id: totrans-337
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: '![../../_images/a2444432691b17ff6593a677e80f8c88415d65748ccba7a1b3b861b173f655f2.png](../Images/d644ec50527bfb74965fed98a96f2683.png)'
  id: totrans-338
  prefs: []
  type: TYPE_IMG
  zh: '![../../_images/a2444432691b17ff6593a677e80f8c88415d65748ccba7a1b3b861b173f655f2.png](../Images/d644ec50527bfb74965fed98a96f2683.png)'
- en: '[PRE58]'
  id: totrans-339
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: '[PRE59]'
  id: totrans-340
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: '[PRE60]'
  id: totrans-341
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: '[PRE61]'
  id: totrans-342
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: '[PRE62]'
  id: totrans-343
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: '[PRE63]'
  id: totrans-344
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: In this case, the center of the star does indeed have a high PageRank value.
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，星星的中心确实具有很高的PageRank值。
- en: '[PRE64]'
  id: totrans-346
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: '[PRE65]'
  id: totrans-347
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: \(\unlhd\)
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: \(\unlhd\)
- en: '**A notion of centrality for undirected graphs** We can apply PageRank\(\idx{PageRank}\xdi\)
    in the undirected case as well.'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: '**无向图中心性的概念** 我们也可以在无向情况下应用PageRank\(\idx{PageRank}\xdi\)。'
- en: Consider random walk on the undirected graph \(G\). That is, at every step,
    we pick a neighbor of the current state uniformly at random. If needed, add a
    self-loop to any isolated vertex. Then the transition matrix is
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑在无向图 \(G\) 上的随机游走。也就是说，在每一步，我们随机均匀地选择当前状态的一个邻居。如果需要，可以向任何孤立顶点添加自环。然后转移矩阵是
- en: \[ P = D^{-1} A, \]
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: \[ P = D^{-1} A, \]
- en: where \(D\) is the degree matrix and \(A\) is the adjacency matrix. A stationary
    distribution \(\bpi = (\pi_1,\ldots,\pi_n)^T\) is a row vector satisfying in this
    case
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 \(D\) 是度矩阵，\(A\) 是邻接矩阵。一个稳态分布 \(\bpi = (\pi_1,\ldots,\pi_n)^T\) 是一个行向量，满足在这种情况下
- en: \[ \pi_i = \sum_{j=1}^n \pi_j p_{j,i} = \sum_{j \in N(i)} \pi_j \frac{1}{\delta(j)}.
    \]
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \pi_i = \sum_{j=1}^n \pi_j p_{j,i} = \sum_{j \in N(i)} \pi_j \frac{1}{\delta(j)}.
    \]
- en: We already know the solution to this system of equations. In the connected case
    without damping, the unique stationary distribution of random walk on \(G\) is
    given by
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经知道这个方程组的解。在无阻尼的连通情况下，\(G\) 上随机游走的唯一稳态分布由下式给出
- en: \[ \pi_i = \frac{\delta(i)}{\sum_{i \in V} \delta(i)}, \qquad \forall i \in
    V. \]
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \pi_i = \frac{\delta(i)}{\sum_{i \in V} \delta(i)}, \qquad \forall i \in
    V. \]
- en: In words, the centrality of a node is directly proportional to its degree, i.e.,
    how many neighbors it has. Up to the scaling factor, this is known as [degree
    centrality](https://en.wikipedia.org/wiki/Centrality#Degree_centrality)\(\idx{degree
    centrality}\xdi\).
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 也就是说，一个节点的中心性与其度直接成正比，即它有多少个邻居。考虑到缩放因子，这被称为[度中心性](https://en.wikipedia.org/wiki/Centrality#Degree_centrality)\(\idx{degree
    centrality}\xdi\)。
- en: For a general undirected graph that may not be connected, we can use a damping
    factor to enforce irreducibility. We add a small probability at each step of landing
    at a uniformly chosen node. That is, we define the transition matrix
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: 对于一个可能不连通的一般无向图，我们可以使用阻尼因子来强制不可约性。我们在每一步都添加一个小的概率，以均匀选择一个节点。也就是说，我们定义转移矩阵
- en: \[ Q = \alpha P + (1-\alpha) \frac{1}{n} \mathbf{1} \mathbf{1}^T, \]
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: \[ Q = \alpha P + (1-\alpha) \frac{1}{n} \mathbf{1} \mathbf{1}^T, \]
- en: for some \(\alpha \in (0,1)\) known as the damping factor. We define the PageRank
    vector \(\mathbf{PR}\) as the unique stationary distribution of \(Q = (q_{i,j})_{i,j=1}^n\),
    that is, the solution to
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 对于某个 \(\alpha \in (0,1)\)，称为阻尼因子。我们定义PageRank向量 \(\mathbf{PR}\) 为 \(Q = (q_{i,j})_{i,j=1}^n\)
    的唯一平稳分布，即
- en: \[ \mathrm{PR}_i = \sum_{j=1}^n \mathrm{PR}_j \, q_{j,i}, \]
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \mathrm{PR}_i = \sum_{j=1}^n \mathrm{PR}_j \, q_{j,i}, \]
- en: with \(\mathbf{PR} \geq 0\)
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: \(\mathbf{PR} \geq 0\)
- en: \[ \sum_{i=1}^n \mathrm{PR}_i = 1. \]
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \sum_{i=1}^n \mathrm{PR}_i = 1. \]
- en: '**NUMERICAL CORNER:** We revisit the star example in the undirected case.'
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: '**数值角:** 我们重新审视无向情况下的星形示例。'
- en: '[PRE66]'
  id: totrans-364
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: '![../../_images/c7f2056453edc830e099413bfdb90e0047d36da8030c2b8abf8be4198801e5fc.png](../Images/2d0d2764fb0069741155c9c91833c00b.png)'
  id: totrans-365
  prefs: []
  type: TYPE_IMG
  zh: '![../../_images/c7f2056453edc830e099413bfdb90e0047d36da8030c2b8abf8be4198801e5fc.png](../Images/2d0d2764fb0069741155c9c91833c00b.png)'
- en: We first compute the PageRank vector without damping. Here the random walk is
    periodic (Why?) so power iteration may fail (Try it!). Instead, we use a small
    amount of damping and increase the number of iterations.
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先计算不带阻尼的PageRank向量。在这里，随机游走是周期的（为什么？），所以幂迭代可能会失败（试试看！）。相反，我们使用少量的阻尼并增加迭代次数。
- en: '[PRE67]'
  id: totrans-367
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: '[PRE68]'
  id: totrans-368
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: '[PRE69]'
  id: totrans-369
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: '[PRE70]'
  id: totrans-370
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: The PageRank value for the center node is indeed roughly \(7\) times larger
    than the other ones, as can be expected from the ratio of their degrees.
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 中心节点的PageRank值确实大约是其他节点的7倍，这可以从它们的度数比中预期到。
- en: We try again with more damping. This time the ratio of PageRank values is not
    quite the same as the ratio of degrees, but the center node continues to have
    a higher value than the other nodes.
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 我们再次尝试使用更多的阻尼。这次PageRank值的比率并不完全与度数的比率相同，但中心节点仍然比其他节点具有更高的值。
- en: '[PRE71]'
  id: totrans-373
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: '[PRE72]'
  id: totrans-374
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: \(\unlhd\)
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: \(\unlhd\)
- en: '**CHAT & LEARN** There are many other centrality measures besides PageRank,
    such as betweenness centrality, closeness centrality, and eigenvector centrality.
    Ask your favorite AI chatbot to explain these measures and discuss their similarities
    and differences with PageRank. \(\ddagger\)'
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: '**聊天与学习:** 除了PageRank之外，还有许多其他中心性度量，如介数中心性、接近中心性和特征向量中心性。请你的AI聊天机器人解释这些度量，并讨论它们与PageRank的相似之处和不同之处。
    \(\ddagger\)'
- en: 7.5.3\. Personalized PageRank[#](#personalized-pagerank "Link to this heading")
  id: totrans-377
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.5.3\. 个性化PageRank[#](#personalized-pagerank "链接到这个标题")
- en: We return to [MathWorld](https://mathworld.wolfram.com) dataset. Recall that
    each page of MathWorld concerns a particular mathematical concept. In a section
    entitled “SEE ALSO”, other related mathematical concepts are listed with a link
    to their MathWorld page. Our goal is to identify “central” vertices in the resulting
    graph.
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 我们回到 [MathWorld](https://mathworld.wolfram.com) 数据集。回想一下，MathWorld的每一页都涉及特定的数学概念。在一个名为“也见”的部分，列出了其他相关的数学概念，并附有链接到它们的MathWorld页面。我们的目标是识别结果图中的“中心”顶点。
- en: '**Figure:** Platonic solids (*Credit:* Made with [Midjourney](https://www.midjourney.com/))'
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: '**图:** 柏拉图立体 (*来源:* 使用 [Midjourney](https://www.midjourney.com/) 制作)'
- en: '![Platonic solids](../Images/4393ac7f9684a7e62d5f82de15668d37.png)'
  id: totrans-380
  prefs: []
  type: TYPE_IMG
  zh: '![柏拉图立体](../Images/4393ac7f9684a7e62d5f82de15668d37.png)'
- en: \(\bowtie\)
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: \(\bowtie\)
- en: '**NUMERICAL CORNER:** We load the dataset again.'
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: '**数值角:** 我们再次加载数据集。'
- en: '[PRE73]'
  id: totrans-383
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: '|  | from | to |'
  id: totrans-384
  prefs: []
  type: TYPE_TB
  zh: '|  | 从 | 到 |'
- en: '| --- | --- | --- |'
  id: totrans-385
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| 0 | 0 | 2 |'
  id: totrans-386
  prefs: []
  type: TYPE_TB
  zh: '| 0 | 0 | 2 |'
- en: '| 1 | 1 | 47 |'
  id: totrans-387
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 1 | 47 |'
- en: '| 2 | 1 | 404 |'
  id: totrans-388
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 1 | 404 |'
- en: '| 3 | 1 | 2721 |'
  id: totrans-389
  prefs: []
  type: TYPE_TB
  zh: '| 3 | 1 | 2721 |'
- en: '| 4 | 2 | 0 |'
  id: totrans-390
  prefs: []
  type: TYPE_TB
  zh: '| 4 | 2 | 0 |'
- en: The second file contains the titles of the pages.
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个文件包含页面的标题。
- en: '[PRE74]'
  id: totrans-392
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: '|  | title |'
  id: totrans-393
  prefs: []
  type: TYPE_TB
  zh: '|  | 标题 |'
- en: '| --- | --- |'
  id: totrans-394
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| 0 | Alexander''s Horned Sphere |'
  id: totrans-395
  prefs: []
  type: TYPE_TB
  zh: '| 0 | 亚历山大角形球体 |'
- en: '| 1 | Exotic Sphere |'
  id: totrans-396
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 异域球体 |'
- en: '| 2 | Antoine''s Horned Sphere |'
  id: totrans-397
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 安托万角形球体 |'
- en: '| 3 | Flat |'
  id: totrans-398
  prefs: []
  type: TYPE_TB
  zh: '| 3 | 平面 |'
- en: '| 4 | Poincaré Manifold |'
  id: totrans-399
  prefs: []
  type: TYPE_TB
  zh: '| 4 | 普通多面体 |'
- en: We construct the graph by adding the edges one by one. We first convert `df_edges`
    into a NumPy array.
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: 我们通过逐个添加边来构建图。我们首先将 `df_edges` 转换为NumPy数组。
- en: '[PRE75]'
  id: totrans-401
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: '[PRE76]'
  id: totrans-402
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: '[PRE77]'
  id: totrans-403
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: To apply PageRank, we construct the adjacency matric of the graph. We also define
    a vector of title pages.
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: 为了应用PageRank，我们构建图的邻接矩阵。我们还定义了一个标题页向量。
- en: '[PRE78]'
  id: totrans-405
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: We use [`numpy.argsort`](https://numpy.org/doc/stable/reference/generated/numpy.argsort.html)
    to identify the pages with highest scores. We apply it to `-pr_mw` to sort from
    the highest to lowest value.
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用 `numpy.argsort`（[链接](https://numpy.org/doc/stable/reference/generated/numpy.argsort.html)）来识别得分最高的页面。我们将其应用于
    `-pr_mw` 以从高到低排序。
- en: '[PRE79]'
  id: totrans-407
  prefs: []
  type: TYPE_PRE
  zh: '[PRE79]'
- en: 'The top 25 topics are:'
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: 前 25 个主题是：
- en: '[PRE80]'
  id: totrans-409
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: '[PRE81]'
  id: totrans-410
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: We indeed get a list of central concepts in mathematics – including several
    we have encountered previously such as `Normal Distribution`, `Tree`, `Vector`
    or `Derivative`.
  id: totrans-411
  prefs: []
  type: TYPE_NORMAL
  zh: 我们确实得到了数学中的核心概念列表——包括我们之前遇到的一些，如 `正态分布`、`树`、`向量` 或 `导数`。
- en: \(\unlhd\)
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: \(\unlhd\)
- en: There is a variant of PageRank, referred to as Personalized PageRank (PPR)\(\idx{Personalized
    PageRank}\xdi\), which aims to tailor the outcome to specific interests. This
    is accomplished from a simple change to the algorithm. When teleporting, rather
    than jumping to a uniformly random page, we instead jump to an arbitrary distribution
    which is meant to capture some specific interests. In the context of the web for
    instance, this distribution might be uniform over someone’s bookmarks.
  id: totrans-413
  prefs: []
  type: TYPE_NORMAL
  zh: 存在一种 PageRank 的变体，称为个性化 PageRank（PPR）\(\idx{个性化 PageRank}\xdi\)，旨在根据特定兴趣定制结果。这是通过简单修改算法来实现的。在随机跳跃时，我们不是跳转到均匀随机的页面，而是跳转到任意分布，旨在捕捉某些特定兴趣。例如，在网页的上下文中，这种分布可能是在某人的书签上均匀分布。
- en: 'We adapt `pagerank` as follows:'
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将 `pagerank` 调整如下：
- en: '[PRE82]'
  id: totrans-415
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: '**NUMERICAL CORNER:** To test PPR, consider the distribution concentrated on
    a single topic `Normal Distribution`. This is topic number `1270`.'
  id: totrans-416
  prefs: []
  type: TYPE_NORMAL
  zh: '**数值角落**：为了测试 PPR，考虑集中在单个主题 `正态分布` 上的分布。这是主题编号 `1270`。'
- en: '[PRE83]'
  id: totrans-417
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: '[PRE84]'
  id: totrans-418
  prefs: []
  type: TYPE_PRE
  zh: '[PRE84]'
- en: '[PRE85]'
  id: totrans-419
  prefs: []
  type: TYPE_PRE
  zh: '[PRE85]'
- en: We now run PPR and list the top 25 pages.
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在运行 PPR 并列出前 25 页。
- en: '[PRE86]'
  id: totrans-421
  prefs: []
  type: TYPE_PRE
  zh: '[PRE86]'
- en: 'The top 25 topics are:'
  id: totrans-422
  prefs: []
  type: TYPE_NORMAL
  zh: 前 25 个主题是：
- en: '[PRE87]'
  id: totrans-423
  prefs: []
  type: TYPE_PRE
  zh: '[PRE87]'
- en: '[PRE88]'
  id: totrans-424
  prefs: []
  type: TYPE_PRE
  zh: '[PRE88]'
- en: This indeed returns various statistical concepts, particularly related to the
    normal dsitribution.
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
  zh: 这确实返回了各种统计概念，尤其是与正态分布相关的内容。
- en: \(\unlhd\)
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: \(\unlhd\)
- en: '**CHAT & LEARN** The PageRank algorithm has been adapted for various applications
    beyond web search, such as ranking scientific papers, analyzing social networks,
    and even ranking sports teams [[Gle](https://arxiv.org/abs/1407.5107)]. Ask your
    favorite AI chatbot to discuss some of these applications and how the PageRank
    algorithm is modified for each case. \(\ddagger\)'
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: '**CHAT & LEARN** PageRank 算法已被应用于超越网页搜索的各种应用，例如排名科学论文、分析社交网络，甚至排名运动队 [[Gle](https://arxiv.org/abs/1407.5107)]。请向您喜欢的
    AI 聊天机器人询问一些这些应用以及 PageRank 算法如何针对每种情况进行修改 \(\ddagger\)'
- en: '***Self-assessment quiz*** *(with help from Claude, Gemini, and ChatGPT)*'
  id: totrans-428
  prefs: []
  type: TYPE_NORMAL
  zh: '***自我评估测验*** *(由 Claude、Gemini 和 ChatGPT 协助)*'
- en: '**1** Consider a random walk on the following graph:'
  id: totrans-429
  prefs: []
  type: TYPE_NORMAL
  zh: '**1** 考虑以下图上的随机游走：'
- en: '[PRE89]'
  id: totrans-430
  prefs: []
  type: TYPE_PRE
  zh: '[PRE89]'
- en: What is the transition matrix for this random walk?
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: 这个随机游走的转移矩阵是什么？
- en: a)
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: a)
- en: \[\begin{split} \begin{bmatrix} 1/3 & 1/3 & 1/3 \\ 1/3 & 1/3 & 1/3 \\ 1/3 &
    1/3 & 1/3 \end{bmatrix} \end{split}\]
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \begin{bmatrix} 1/3 & 1/3 & 1/3 \\ 1/3 & 1/3 & 1/3 \\ 1/3 &
    1/3 & 1/3 \end{bmatrix} \end{split}\]
- en: b)
  id: totrans-434
  prefs: []
  type: TYPE_NORMAL
  zh: b)
- en: \[\begin{split} \begin{bmatrix} 0 & 1/2 & 1/2 \\ 1/2 & 0 & 1/2 \\ 1/2 & 1/2
    & 0 \end{bmatrix} \end{split}\]
  id: totrans-435
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \begin{bmatrix} 0 & 1/2 & 1/2 \\ 1/2 & 0 & 1/2 \\ 1/2 & 1/2
    & 0 \end{bmatrix} \end{split}\]
- en: c)
  id: totrans-436
  prefs: []
  type: TYPE_NORMAL
  zh: c)
- en: \[\begin{split} \begin{bmatrix} 1 & 0 & 0 \\ 0 & 1 & 0 \\ 0 & 0 & 1 \end{bmatrix}
    \end{split}\]
  id: totrans-437
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \begin{bmatrix} 1 & 0 & 0 \\ 0 & 1 & 0 \\ 0 & 0 & 1 \end{bmatrix}
    \end{split}\]
- en: d)
  id: totrans-438
  prefs: []
  type: TYPE_NORMAL
  zh: d)
- en: \[\begin{split} \begin{bmatrix} 0 & 1 & 0 \\ 0 & 0 & 1 \\ 1 & 0 & 0 \end{bmatrix}
    \end{split}\]
  id: totrans-439
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \begin{bmatrix} 0 & 1 & 0 \\ 0 & 0 & 1 \\ 1 & 0 & 0 \end{bmatrix}
    \end{split}\]
- en: '**2** In a random walk on a directed graph, the transition probability from
    vertex \(i\) to vertex \(j\) is given by:'
  id: totrans-440
  prefs: []
  type: TYPE_NORMAL
  zh: '**2** 在有向图上的随机游走中，从顶点 \(i\) 到顶点 \(j\) 的转移概率由以下公式给出：'
- en: a) \(p_{i,j} = \frac{1}{\delta^-(j)}\) for all \(j \in N^-(i)\)
  id: totrans-441
  prefs: []
  type: TYPE_NORMAL
  zh: a) \(p_{i,j} = \frac{1}{\delta^-(j)}\) 对于所有 \(j \in N^-(i)\)
- en: b) \(p_{i,j} = \frac{1}{\delta^+(j)}\) for all \(j \in N^+(i)\)
  id: totrans-442
  prefs: []
  type: TYPE_NORMAL
  zh: b) \(p_{i,j} = \frac{1}{\delta^+(j)}\) 对于所有 \(j \in N^+(i)\)
- en: c) \(p_{i,j} = \frac{1}{\delta^-(i)}\) for all \(j \in N^-(i)\)
  id: totrans-443
  prefs: []
  type: TYPE_NORMAL
  zh: c) \(p_{i,j} = \frac{1}{\delta^-(i)}\) 对于所有 \(j \in N^-(i)\)
- en: d) \(p_{i,j} = \frac{1}{\delta^+(i)}\) for all \(j \in N^+(i)\)
  id: totrans-444
  prefs: []
  type: TYPE_NORMAL
  zh: d) \(p_{i,j} = \frac{1}{\delta^+(i)}\) 对于所有 \(j \in N^+(i)\)
- en: '**3** The transition matrix \(P\) of a random walk on a directed graph can
    be expressed in terms of the adjacency matrix \(A\) as:'
  id: totrans-445
  prefs: []
  type: TYPE_NORMAL
  zh: '**3** 有向图上随机游走的转移矩阵 \(P\) 可以用邻接矩阵 \(A\) 表示为：'
- en: a) \(P = AD^{-1}\)
  id: totrans-446
  prefs: []
  type: TYPE_NORMAL
  zh: a) \(P = AD^{-1}\)
- en: b) \(P = A^TD^{-1}\)
  id: totrans-447
  prefs: []
  type: TYPE_NORMAL
  zh: b) \(P = A^TD^{-1}\)
- en: c) \(P = D^{-1}A\)
  id: totrans-448
  prefs: []
  type: TYPE_NORMAL
  zh: c) \(P = D^{-1}A\)
- en: d) \(P = D^{-1}A^T\)
  id: totrans-449
  prefs: []
  type: TYPE_NORMAL
  zh: d) \(P = D^{-1}A^T\)
- en: '**4** In a random walk on an undirected graph, the stationary distribution
    \(\boldsymbol{\pi}\) satisfies:'
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: '**4** 在无向图上的随机游走中，平稳分布 \(\boldsymbol{\pi}\) 满足：'
- en: a) \(\pi_i = \frac{\delta^+(i)}{\sum_{j \in V} \delta^+(j)}\) for all \(i \in
    V\)
  id: totrans-451
  prefs: []
  type: TYPE_NORMAL
  zh: a) \(\pi_i = \frac{\delta^+(i)}{\sum_{j \in V} \delta^+(j)}\) 对于所有 \(i \in V\)
- en: b) \(\pi_i = \frac{1}{\delta(i)}\) for all \(i \in V\)
  id: totrans-452
  prefs: []
  type: TYPE_NORMAL
  zh: b) \(\pi_i = \frac{1}{\delta(i)}\) 对于所有 \(i \in V\)
- en: c) \(\pi_i = \frac{1}{|V|}\) for all \(i \in V\)
  id: totrans-453
  prefs: []
  type: TYPE_NORMAL
  zh: c) \(\pi_i = \frac{1}{|V|}\) 对于所有 \(i \in V\)
- en: d) \(\pi_i = \frac{\delta(i)}{\sum_{j \in V} \delta(j)}\) for all \(i \in V\)
  id: totrans-454
  prefs: []
  type: TYPE_NORMAL
  zh: d) \(\pi_i = \frac{\delta(i)}{\sum_{j \in V} \delta(j)}\) 对于所有 \(i \in V\)
- en: '**5** Personalized PageRank differs from standard PageRank in that:'
  id: totrans-455
  prefs: []
  type: TYPE_NORMAL
  zh: '**5** 个人化PageRank与标准PageRank的不同之处在于：'
- en: a) It considers the user’s browsing history
  id: totrans-456
  prefs: []
  type: TYPE_NORMAL
  zh: a) 它考虑用户的浏览历史
- en: b) It jumps to a non-uniform distribution when teleporting
  id: totrans-457
  prefs: []
  type: TYPE_NORMAL
  zh: b) 传送时跳转到非均匀分布
- en: c) It uses a different damping factor
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: c) 它使用不同的阻尼因子
- en: d) It only considers a subset of the graph
  id: totrans-459
  prefs: []
  type: TYPE_NORMAL
  zh: d) 它只考虑图的一个子集
- en: 'Answer for 1: b. Justification: Each node has a degree of 2, and the probability
    of transitioning to each neighbor is 1/2.'
  id: totrans-460
  prefs: []
  type: TYPE_NORMAL
  zh: 1题的答案：b. 理由：每个节点都有2度，转到每个邻居的概率是1/2。
- en: 'Answer for 2: d. Justification: The text states, “In words, at each step, we
    choose an outgoing edge from the current state uniformly at random,” which corresponds
    to the transition probability \(p_{i,j} = \frac{1}{\delta^+(i)}\) for all \(j
    \in N^+(i)\), where \(\delta^+(i)\) is the out-degree of vertex \(i\) and \(N^+(i)\)
    is the set of vertices with an edge from \(i\).'
  id: totrans-461
  prefs: []
  type: TYPE_NORMAL
  zh: 2题的答案：d. 理由：文本中提到，“用词来说，在每一步，我们从当前状态均匀随机选择一个出边，”这对应于所有 \(j \in N^+(i)\) 的转移概率
    \(p_{i,j} = \frac{1}{\delta^+(i)}\)，其中 \(\delta^+(i)\) 是顶点 \(i\) 的出度，\(N^+(i)\)
    是从 \(i\) 出边的顶点集。
- en: 'Answer for 3: c. Justification: The text states, “The transition matrix of
    random walk on \(G\) satisfying the conditions of the definition above is \(P
    = D^{-1}A\), where \(D\) is the out-degree matrix.”'
  id: totrans-462
  prefs: []
  type: TYPE_NORMAL
  zh: 3题的答案：c. 理由：文本中提到，“满足上述定义条件的 \(G\) 上的随机游走转移矩阵是 \(P = D^{-1}A\)，其中 \(D\) 是出度矩阵。”
- en: 'Answer for 4: d. Justification: The text states, “In the connected case without
    damping, the unique stationary distribution of random walk on \(G\) is given by
    \(\pi_i = \frac{\delta(i)}{\sum_{i \in V} \delta(i)}, \forall i \in V\).”'
  id: totrans-463
  prefs: []
  type: TYPE_NORMAL
  zh: 4题的答案：d. 理由：文本中提到，“在无阻尼的连通情况下，\(G\) 上随机游走的唯一稳态分布由 \(\pi_i = \frac{\delta(i)}{\sum_{i
    \in V} \delta(i)}, \forall i \in V\) 给出。”
- en: 'Answer for 5: b. Justification: The text states, “When teleporting, rather
    than jumping to a uniformly random page, we instead jump to an arbitrary distribution
    \(\boldsymbol{\mu}\) which is meant to capture some specific interests.”'
  id: totrans-464
  prefs: []
  type: TYPE_NORMAL
  zh: 5题的答案：b. 理由：文本中提到，“在传送时，我们不是跳转到均匀随机页面，而是跳转到任意分布 \(\boldsymbol{\mu}\)，这个分布旨在捕捉一些特定的兴趣。”
