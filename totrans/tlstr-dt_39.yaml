- en: Online Appendix E — R Markdown
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://tellingstorieswithdata.com/24-rmarkdown.html](https://tellingstorieswithdata.com/24-rmarkdown.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[Appendices](./20-r_essentials.html)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[E  R Markdown](./24-rmarkdown.html)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Quarto is the successor to R Markdown, however it is relatively new and many
    people still use R Markdown. For the most part, the aspects covered in [Chapter
    3](03-workflow.html) apply for both Quarto and R Markdown. However, in this appendix
    we provide an equivalent for R Markdown, for the guidance provided for Quarto,
    where there are aspects that differ.
  prefs: []
  type: TYPE_NORMAL
- en: E.1 R chunks
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We can include code for R and many other languages in code chunks within an
    R Markdown document. Then when we knit the document, the code will run and be
    included in the document.
  prefs: []
  type: TYPE_NORMAL
- en: To create an R chunk, we start with three backticks and then within curly braces
    we tell R Markdown that this is an R chunk. Anything inside this chunk will be
    considered R code and run as such. For instance, we could load the `tidyverse`
    and `AER` and make a graph of the number of times a survey respondent visited
    the doctor in the past two weeks.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]{r}'
  prefs: []
  type: TYPE_NORMAL
- en: library(tidyverse)
  prefs: []
  type: TYPE_NORMAL
- en: library(AER)
  prefs: []
  type: TYPE_NORMAL
- en: data("DoctorVisits", package = "AER")
  prefs: []
  type: TYPE_NORMAL
- en: DoctorVisits |>
  prefs: []
  type: TYPE_NORMAL
- en: ggplot(aes(x = illness)) +
  prefs: []
  type: TYPE_NORMAL
- en: geom_histogram(stat = "count")
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: The output of that code is [Figure 3.1](03-workflow.html#fig-doctervisits)
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/fea3d502a7503de9e0f6f6d602220d17.png)'
  prefs: []
  type: TYPE_IMG
- en: Number of illnesses in the past two weeks, based on the 1977–1978 Australian
    Health Survey
  prefs: []
  type: TYPE_NORMAL
- en: Notice that in contrast to Quarto, all the options go between curly braces in
    the top line. It is not possible to use the comment notation of Quarto.
  prefs: []
  type: TYPE_NORMAL
- en: E.2 Cross-references
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'It can be useful to cross-reference figures, tables, and equations. This makes
    it easier to refer to them in the text. To do this for a figure we refer to the
    name of the R chunk that creates or contains the figure. For instance, `(Figure
    \@ref(fig:uniquename))` will produce: ([Figure 3.2](03-workflow.html#fig-uniquename))
    as the name of the R chunk is `uniquename`. We also need to add ‘fig’ in front
    of the chunk name so that R Markdown knows that this is a figure. We then include
    a ‘fig.cap’ in the R chunk that specifies a caption.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]{r uniquename, fig.cap = "Number of illnesses in the past two weeks,
    based on the 1977--1978 Australian Health Survey", echo = TRUE}'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: library(tidyverse)
  prefs: []
  type: TYPE_NORMAL
- en: library(AER)
  prefs: []
  type: TYPE_NORMAL
- en: data("DoctorVisits", package = "AER")
  prefs: []
  type: TYPE_NORMAL
- en: DoctorVisits |>
  prefs: []
  type: TYPE_NORMAL
- en: ggplot(aes(x = illness)) +
  prefs: []
  type: TYPE_NORMAL
- en: geom_histogram(stat = "count")
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: \begin{equation}
  prefs: []
  type: TYPE_NORMAL
- en: Y = C + I + G + (X - M) (\#eq:macroidentity)
  prefs: []
  type: TYPE_NORMAL
- en: \end{equation}
  prefs: []
  type: TYPE_NORMAL
- en: '```'
  prefs: []
  type: TYPE_NORMAL
- en: \[ Y = C + I + G + (X - M) \tag{E.1}\]
  prefs: []
  type: TYPE_NORMAL
- en: When using cross-references ensure that the R chunks have simple labels. In
    general, try to keep the names simple but unique, and if possible, avoid punctuation
    and stick to letters. Do not use underbars in the labels because that will cause
    an error.**
  prefs: []
  type: TYPE_NORMAL
