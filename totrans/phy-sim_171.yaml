- en: Volume Conservation Constraints
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://phys-sim-book.github.io/lec32.3-pbd_volume_constraints.html](https://phys-sim-book.github.io/lec32.3-pbd_volume_constraints.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
  prefs: []
  type: TYPE_NORMAL
- en: The simulation of incompressible or nearly incompressible materials is critical
    for many applications in computer graphics. In a force-based framework, incompressibility
    typically requires solving a complex Poisson equation for pressure. PBD offers
    a more direct and often simpler approach by enforcing volume or density conservation
    through geometric constraints. This section will explore several such constraints,
    beginning with those defined on discrete mesh elements like tetrahedra and extending
    to global volume constraints for closed surfaces.
  prefs: []
  type: TYPE_NORMAL
- en: '[Tetrahedral Volume and Triangle Area Constraints](#tetrahedral-volume-and-triangle-area-constraints)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: For volumetric objects discretized into a tetrahedral mesh, incompressibility
    can be approximated by constraining the volume of each individual tetrahedron
    to remain at its rest volume.
  prefs: []
  type: TYPE_NORMAL
- en: '****Definition 33.3.1 (Tetrahedral Volume Constraint).**** Given a tetrahedron
    defined by four vertices with positions p1​,p2​,p3​,p4​ and a rest volume V0​,
    the volume constraint function C is defined as: C(p1​,p2​,p3​,p4​)=61​((p2​−p1​)×(p3​−p1​))⋅(p4​−p1​)−V0​(33.3.1)
    The constraint is satisfied when C=0. The gradients of this function with respect
    to the four vertex positions are: ∇p1​​C∇p2​​C∇p3​​C∇p4​​C​=61​((p3​−p2​)×(p4​−p2​))=61​((p4​−p3​)×(p1​−p3​))=61​((p1​−p4​)×(p2​−p4​))=61​((p2​−p1​)×(p3​−p1​))​
    These gradients—vectors proportional to the areas of the opposing faces—are used
    to calculate position corrections for the four vertices. An analogous constraint
    can be defined for the area of a triangle in 2D or 3D simulations.'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[Global Volume for Closed Meshes](#global-volume-for-closed-meshes)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'For objects represented by a closed, watertight triangle mesh (such as an inflatable
    character), it is often desirable to control the total enclosed volume. This can
    be achieved with a single global constraint that acts on all vertices of the mesh.
    The total volume V of a closed mesh can be calculated using the Divergence Theorem,
    which discretizes to a sum over all triangles. The volume contributed by each
    triangle i with vertices (pt1​i​,pt2​i​,pt3​i​) is the signed volume of the tetrahedron
    formed by the triangle and the origin:'
  prefs: []
  type: TYPE_NORMAL
- en: V=i∑N_triangles​61​(pt1​i​×pt2​i​)⋅pt3​i​
  prefs: []
  type: TYPE_NORMAL
- en: 'The global volume constraint is then formulated to maintain this volume at
    a target value, which is typically the rest volume V0​ scaled by a pressure factor
    kpressure​: C(p1​,...,pN​)=(i∑​61​(pt1i​​×pt2i​​)⋅pt3i​​)−kpressure​V0​(33.3.2)
    The gradient of this constraint with respect to a vertex position pj​ is the sum
    of the gradients from all triangles adjacent to that vertex. This results in a
    correction that redistributes the volume error across the entire surface.'
  prefs: []
  type: TYPE_NORMAL
