["```r\nelection %>%  select(state, total_vote,\n r_points, pct_trump, party, census) %>%\n sample_n(5)\n```", "```r\n## # A tibble: 5 x 6\n##   state          total_vote r_points pct_trump party      census   \n##   <chr>               <dbl>    <dbl>     <dbl> <chr>      <chr>    \n## 1 Kentucky          1924149     29.8      62.5 Republican South    \n## 2 Vermont            315067    -26.4      30.3 Democrat   Northeast\n## 3 South Carolina    2103027     14.3      54.9 Republican South    \n## 4 Wyoming            255849     46.3      68.2 Republican West     \n## 5 Kansas            1194755     20.4      56.2 Republican Midwest\n```", "```r\n# Hex color codes for Dem Blue and Rep Red\nparty_colors <-  c(\"#2E74C0\", \"#CB454A\") \n\np0 <-  ggplot(data = subset(election, st %nin% \"DC\"),\n mapping = aes(x = r_points,\n y = reorder(state, r_points),\n color = party))\n\np1 <-  p0 +  geom_vline(xintercept = 0, color = \"gray30\") +\n geom_point(size = 2)\n\np2 <-  p1 +  scale_color_manual(values = party_colors)\n\np3 <-  p2 +  scale_x_continuous(breaks = c(-30, -20, -10, 0, 10, 20, 30, 40),\n labels = c(\"30\\n (Clinton)\", \"20\", \"10\", \"0\",\n \"10\", \"20\", \"30\", \"40\\n(Trump)\"))\n\np3 +  facet_wrap(~  census, ncol=1, scales=\"free_y\") +\n guides(color=FALSE) +  labs(x = \"Point Margin\", y = \"\") +\n theme(axis.text=element_text(size=8))\n```", "```r\nlibrary(maps)\nus_states <-  map_data(\"state\")\nhead(us_states)\n```", "```r\n##       long     lat group order  region subregion\n## 1 -87.4620 30.3897     1     1 alabama      <NA>\n## 2 -87.4849 30.3725     1     2 alabama      <NA>\n## 3 -87.5250 30.3725     1     3 alabama      <NA>\n## 4 -87.5308 30.3324     1     4 alabama      <NA>\n## 5 -87.5709 30.3267     1     5 alabama      <NA>\n## 6 -87.5881 30.3267     1     6 alabama      <NA>\n```", "```r\ndim(us_states)\n```", "```r\n## [1] 15537     6\n```", "```r\np <-  ggplot(data = us_states,\n mapping = aes(x = long, y = lat,\n group = group))\n\np +  geom_polygon(fill = \"white\", color = \"black\")\n```", "```r\np <-  ggplot(data = us_states,\n aes(x = long, y = lat,\n group = group, fill = region))\n\np +  geom_polygon(color = \"gray90\", size = 0.1) +  guides(fill = FALSE)\n```", "```r\np <-  ggplot(data = us_states,\n mapping = aes(x = long, y = lat,\n group = group, fill = region))\n\np +  geom_polygon(color = \"gray90\", size = 0.1) +\n coord_map(projection = \"albers\", lat0 = 39, lat1 = 45) +\n guides(fill = FALSE)\n```", "```r\nelection$region <-  tolower(election$state)\nus_states_elec <-  left_join(us_states, election)\n```", "```r\np <-  ggplot(data = us_states_elec,\n aes(x = long, y = lat,\n group = group, fill = party))\n\np +  geom_polygon(color = \"gray90\", size = 0.1) +\n coord_map(projection = \"albers\", lat0 = 39, lat1 = 45) \n```", "```r\np0 <-  ggplot(data = us_states_elec,\n mapping = aes(x = long, y = lat,\n group = group, fill = party))\np1 <-  p0 +  geom_polygon(color = \"gray90\", size = 0.1) +\n coord_map(projection = \"albers\", lat0 = 39, lat1 = 45) \np2 <-  p1 +  scale_fill_manual(values = party_colors) +\n labs(title = \"Election Results 2016\", fill = NULL)\np2 +  theme_map() \n```", "```r\np0 <-  ggplot(data = us_states_elec,\n mapping = aes(x = long, y = lat, group = group, fill = pct_trump))\n\np1 <-  p0 +  geom_polygon(color = \"gray90\", size = 0.1) +\n coord_map(projection = \"albers\", lat0 = 39, lat1 = 45) \n\np1 +  labs(title = \"Trump vote\") +  theme_map() +  labs(fill = \"Percent\")\n\np2 <-  p1 +  scale_fill_gradient(low = \"white\", high = \"#CB454A\") +\n labs(title = \"Trump vote\") \np2 +  theme_map() +  labs(fill = \"Percent\")\n```", "```r\np0 <-  ggplot(data = us_states_elec,\n mapping = aes(x = long, y = lat, group = group, fill = d_points))\n\np1 <-  p0 +  geom_polygon(color = \"gray90\", size = 0.1) +\n coord_map(projection = \"albers\", lat0 = 39, lat1 = 45) \n\np2 <-  p1 +  scale_fill_gradient2() +  labs(title = \"Winning margins\") \np2 +  theme_map() +  labs(fill = \"Percent\")\n\np3 <-  p1 +  scale_fill_gradient2(low = \"red\", mid = scales::muted(\"purple\"),\n high = \"blue\", breaks = c(-25, 0, 25, 50, 75)) +\n labs(title = \"Winning margins\") \np3 +  theme_map() +  labs(fill = \"Percent\")\n```", "```r\np0 <-  ggplot(data = subset(us_states_elec,\n region %nin% \"district of columbia\"),\n aes(x = long, y = lat, group = group, fill = d_points))\n\np1 <-  p0 +  geom_polygon(color = \"gray90\", size = 0.1) +\n coord_map(projection = \"albers\", lat0 = 39, lat1 = 45) \n\np2 <-  p1 +  scale_fill_gradient2(low = \"red\",\n mid = scales::muted(\"purple\"),\n high = \"blue\") +\n labs(title = \"Winning margins\") \np2 +  theme_map() +  labs(fill = \"Percent\")\n```", "```r\ncounty_map %>%  sample_n(5)\n```", "```r\n##            long      lat  order  hole piece             group    id\n## 116977  -286097 -1302531 116977 FALSE     1  0500000US35025.1 35025\n## 175994  1657614  -698592 175994 FALSE     1  0500000US51197.1 51197\n## 186409   674547   -65321 186409 FALSE     1  0500000US55011.1 55011\n## 22624    619876 -1093164  22624 FALSE     1  0500000US05105.1 05105\n## 5906   -1983421 -2424955   5906 FALSE    10 0500000US02016.10 02016\n```", "```r\ncounty_data %>%\n select(id, name, state, pop_dens, pct_black) %>%\n sample_n(5)\n```", "```r\n##         id                name state      pop_dens   pct_black\n## 3029 53051 Pend Oreille County    WA [    0,   10) [ 0.0, 2.0)\n## 1851 35041    Roosevelt County    NM [    0,   10) [ 2.0, 5.0)\n## 1593 29165       Platte County    MO [  100,  500) [ 5.0,10.0)\n## 2363 45009      Bamberg County    SC [   10,   50) [50.0,85.3]\n## 654  17087      Johnson County    IL [   10,   50) [ 5.0,10.0)\n```", "```r\ncounty_full <-  left_join(county_map, county_data, by = \"id\")\n```", "```r\np <-  ggplot(data = county_full,\n mapping = aes(x = long, y = lat,\n fill = pop_dens, \n group = group))\n\np1 <-  p +  geom_polygon(color = \"gray90\", size = 0.05) +  coord_equal()\n\np2 <-  p1 +  scale_fill_brewer(palette=\"Blues\",\n labels = c(\"0-10\", \"10-50\", \"50-100\", \"100-500\",\n \"500-1,000\", \"1,000-5,000\", \">5,000\"))\n\np2 +  labs(fill = \"Population per\\nsquare mile\") +\n theme_map() +\n guides(fill = guide_legend(nrow = 1)) + \n theme(legend.position = \"bottom\")\n```", "```r\np <-  ggplot(data = county_full,\n mapping = aes(x = long, y = lat, fill = pct_black, \n group = group))\np1 <-  p +  geom_polygon(color = \"gray90\", size = 0.05) +  coord_equal()\np2 <-  p1 +  scale_fill_brewer(palette=\"Greens\")\n\np2 +  labs(fill = \"US Population, Percent Black\") +\n guides(fill = guide_legend(nrow = 1)) + \n theme_map() +  theme(legend.position = \"bottom\")\n```", "```r\norange_pal <-  RColorBrewer::brewer.pal(n = 6, name = \"Oranges\")\norange_pal\n```", "```r\n## [1] \"#FEEDDE\" \"#FDD0A2\" \"#FDAE6B\" \"#FD8D3C\" \"#E6550D\"\n## [6] \"#A63603\"\n```", "```r\norange_rev <-  rev(orange_pal)\norange_rev\n```", "```r\n## [1] \"#A63603\" \"#E6550D\" \"#FD8D3C\" \"#FDAE6B\" \"#FDD0A2\"\n## [6] \"#FEEDDE\"\n```", "```r\ngun_p <-  ggplot(data = county_full,\n mapping = aes(x = long, y = lat,\n fill = su_gun6, \n group = group))\n\ngun_p1 <-  gun_p +  geom_polygon(color = \"gray90\", size = 0.05) +  coord_equal()\n\ngun_p2 <-  gun_p1 +  scale_fill_manual(values = orange_pal)\n\ngun_p2 +  labs(title = \"Gun-Related Suicides, 1999-2015\",\n fill = \"Rate per 100,000 pop.\") +\n theme_map() +  theme(legend.position = \"bottom\")\n```", "```r\npop_p <-  ggplot(data = county_full, mapping = aes(x = long, y = lat,\n fill = pop_dens6, \n group = group))\n\npop_p1 <-  pop_p +  geom_polygon(color = \"gray90\", size = 0.05) +  coord_equal()\n\npop_p2 <-  pop_p1 +  scale_fill_manual(values = orange_rev)\n\npop_p2 +  labs(title = \"Reverse-coded Population Density\",\n fill = \"People per square mile\") +\n theme_map() +  theme(legend.position = \"bottom\")\n```", "```r\nlibrary(statebins)\n\nstatebins_continuous(state_data = election, state_col = \"state\",\n text_color = \"white\", value_col = \"pct_trump\",\n brewer_pal=\"Reds\", font_size = 3,\n legend_title=\"Percent Trump\")\n\nstatebins_continuous(state_data = subset(election, st %nin% \"DC\"),\n state_col = \"state\",\n text_color = \"black\", value_col = \"pct_clinton\",\n brewer_pal=\"Blues\", font_size = 3,\n legend_title=\"Percent Clinton\")\n```", "```r\nelection <-  election %>%  mutate(color = recode(party, Republican = \"darkred\",\n Democrat = \"royalblue\"))\n\nstatebins_manual(state_data = election, state_col = \"st\",\n color_col = \"color\", text_color = \"white\",\n font_size = 3, legend_title=\"Winner\",\n labels=c(\"Trump\", \"Clinton\"), legend_position = \"right\")\n\nstatebins(state_data = election, \n state_col = \"state\", value_col = \"pct_trump\",\n text_color = \"white\", breaks = 4,\n labels = c(\"4-21\", \"21-37\", \"37-53\", \"53-70\"),\n brewer_pal=\"Reds\", font_size = 3, legend_title=\"Percent Trump\")\n```", "```r\nopiates\n```", "```r\n## # A tibble: 800 x 11\n##     year state        fips deaths population crude adjusted\n##    <int> <chr>       <int>  <int>      <int> <dbl>    <dbl>\n##  1  1999 Alabama         1     37    4430141 0.800    0.800\n##  2  1999 Alaska          2     27     624779 4.30     4.00 \n##  3  1999 Arizona         4    229    5023823 4.60     4.70 \n##  4  1999 Arkansas        5     28    2651860 1.10     1.10 \n##  5  1999 California      6   1474   33499204 4.40     4.50 \n##  6  1999 Colorado        8    164    4226018 3.90     3.70 \n##  7  1999 Connecticut     9    151    3386401 4.50     4.40 \n##  8  1999 Delaware       10     32     774990 4.10     4.10 \n##  9  1999 District o…    11     28     570213 4.90     4.90 \n## 10  1999 Florida        12    402   15759421 2.60     2.60 \n## # ... with 790 more rows, and 4 more variables:\n## #   adjusted_se <dbl>, region <ord>, abbr <chr>,\n## #   division_name <chr>\n```", "```r\nopiates$region <-  tolower(opiates$state)\nopiates_map <-  left_join(us_states, opiates)\n```", "```r\nlibrary(viridis)\n\np0 <-  ggplot(data = subset(opiates_map, year >  1999),\n mapping = aes(x = long, y = lat,\n group = group,\n fill = adjusted))\n\np1 <-  p0 +  geom_polygon(color = \"gray90\", size = 0.05) +\n coord_map(projection = \"albers\", lat0 = 39, lat1 = 45) \n\np2 <-  p1 +  scale_fill_viridis_c(option = \"plasma\")\n\np2 +  theme_map() +  facet_wrap(~  year, ncol = 3) +\n theme(legend.position = \"bottom\",\n strip.background = element_blank()) +\n labs(fill = \"Death rate per 100,000 population \",\n title = \"Opiate Related Deaths by State, 2000-2014\") \n```", "```r\np <-  ggplot(data = opiates,\n mapping = aes(x = year, y = adjusted,\n group = state))\np +  geom_line(color = \"gray70\") \n```", "```r\np0 <-  ggplot(data = drop_na(opiates, division_name),\n mapping = aes(x = year, y = adjusted))\n\np1 <-  p0 +  geom_line(color = \"gray70\", \n mapping = aes(group = state)) \n```", "```r\np2 <-  p1 +  geom_smooth(mapping = aes(group = division_name),\n se = FALSE)\n```", "```r\np3 <-  p2 +  geom_text_repel(data = subset(opiates,\n year ==  max(year) &  abbr !=\"DC\"),\n mapping = aes(x = year, y = adjusted, label = abbr),\n size = 1.8, segment.color = NA, nudge_x = 30) +\n coord_cartesian(c(min(opiates$year), \n max(opiates$year)))\n```", "```r\np3 +  labs(x = \"\", y = \"Rate per 100,000 population\",\n title = \"State-Level Opiate Death Rates by Census Division, 1999-2014\") +\n facet_wrap(~  reorder(division_name, -adjusted, na.rm = TRUE), nrow  = 3)\n```", "```r\nelection %>%  select(state, total_vote,\n r_points, pct_trump, party, census) %>%\n sample_n(5)\n```", "```r\n## # A tibble: 5 x 6\n##   state          total_vote r_points pct_trump party      census   \n##   <chr>               <dbl>    <dbl>     <dbl> <chr>      <chr>    \n## 1 Kentucky          1924149     29.8      62.5 Republican South    \n## 2 Vermont            315067    -26.4      30.3 Democrat   Northeast\n## 3 South Carolina    2103027     14.3      54.9 Republican South    \n## 4 Wyoming            255849     46.3      68.2 Republican West     \n## 5 Kansas            1194755     20.4      56.2 Republican Midwest\n```", "```r\n# Hex color codes for Dem Blue and Rep Red\nparty_colors <-  c(\"#2E74C0\", \"#CB454A\") \n\np0 <-  ggplot(data = subset(election, st %nin% \"DC\"),\n mapping = aes(x = r_points,\n y = reorder(state, r_points),\n color = party))\n\np1 <-  p0 +  geom_vline(xintercept = 0, color = \"gray30\") +\n geom_point(size = 2)\n\np2 <-  p1 +  scale_color_manual(values = party_colors)\n\np3 <-  p2 +  scale_x_continuous(breaks = c(-30, -20, -10, 0, 10, 20, 30, 40),\n labels = c(\"30\\n (Clinton)\", \"20\", \"10\", \"0\",\n \"10\", \"20\", \"30\", \"40\\n(Trump)\"))\n\np3 +  facet_wrap(~  census, ncol=1, scales=\"free_y\") +\n guides(color=FALSE) +  labs(x = \"Point Margin\", y = \"\") +\n theme(axis.text=element_text(size=8))\n```", "```r\nlibrary(maps)\nus_states <-  map_data(\"state\")\nhead(us_states)\n```", "```r\n##       long     lat group order  region subregion\n## 1 -87.4620 30.3897     1     1 alabama      <NA>\n## 2 -87.4849 30.3725     1     2 alabama      <NA>\n## 3 -87.5250 30.3725     1     3 alabama      <NA>\n## 4 -87.5308 30.3324     1     4 alabama      <NA>\n## 5 -87.5709 30.3267     1     5 alabama      <NA>\n## 6 -87.5881 30.3267     1     6 alabama      <NA>\n```", "```r\ndim(us_states)\n```", "```r\n## [1] 15537     6\n```", "```r\np <-  ggplot(data = us_states,\n mapping = aes(x = long, y = lat,\n group = group))\n\np +  geom_polygon(fill = \"white\", color = \"black\")\n```", "```r\np <-  ggplot(data = us_states,\n aes(x = long, y = lat,\n group = group, fill = region))\n\np +  geom_polygon(color = \"gray90\", size = 0.1) +  guides(fill = FALSE)\n```", "```r\np <-  ggplot(data = us_states,\n mapping = aes(x = long, y = lat,\n group = group, fill = region))\n\np +  geom_polygon(color = \"gray90\", size = 0.1) +\n coord_map(projection = \"albers\", lat0 = 39, lat1 = 45) +\n guides(fill = FALSE)\n```", "```r\nelection$region <-  tolower(election$state)\nus_states_elec <-  left_join(us_states, election)\n```", "```r\np <-  ggplot(data = us_states_elec,\n aes(x = long, y = lat,\n group = group, fill = party))\n\np +  geom_polygon(color = \"gray90\", size = 0.1) +\n coord_map(projection = \"albers\", lat0 = 39, lat1 = 45) \n```", "```r\np0 <-  ggplot(data = us_states_elec,\n mapping = aes(x = long, y = lat,\n group = group, fill = party))\np1 <-  p0 +  geom_polygon(color = \"gray90\", size = 0.1) +\n coord_map(projection = \"albers\", lat0 = 39, lat1 = 45) \np2 <-  p1 +  scale_fill_manual(values = party_colors) +\n labs(title = \"Election Results 2016\", fill = NULL)\np2 +  theme_map() \n```", "```r\np0 <-  ggplot(data = us_states_elec,\n mapping = aes(x = long, y = lat, group = group, fill = pct_trump))\n\np1 <-  p0 +  geom_polygon(color = \"gray90\", size = 0.1) +\n coord_map(projection = \"albers\", lat0 = 39, lat1 = 45) \n\np1 +  labs(title = \"Trump vote\") +  theme_map() +  labs(fill = \"Percent\")\n\np2 <-  p1 +  scale_fill_gradient(low = \"white\", high = \"#CB454A\") +\n labs(title = \"Trump vote\") \np2 +  theme_map() +  labs(fill = \"Percent\")\n```", "```r\np0 <-  ggplot(data = us_states_elec,\n mapping = aes(x = long, y = lat, group = group, fill = d_points))\n\np1 <-  p0 +  geom_polygon(color = \"gray90\", size = 0.1) +\n coord_map(projection = \"albers\", lat0 = 39, lat1 = 45) \n\np2 <-  p1 +  scale_fill_gradient2() +  labs(title = \"Winning margins\") \np2 +  theme_map() +  labs(fill = \"Percent\")\n\np3 <-  p1 +  scale_fill_gradient2(low = \"red\", mid = scales::muted(\"purple\"),\n high = \"blue\", breaks = c(-25, 0, 25, 50, 75)) +\n labs(title = \"Winning margins\") \np3 +  theme_map() +  labs(fill = \"Percent\")\n```", "```r\np0 <-  ggplot(data = subset(us_states_elec,\n region %nin% \"district of columbia\"),\n aes(x = long, y = lat, group = group, fill = d_points))\n\np1 <-  p0 +  geom_polygon(color = \"gray90\", size = 0.1) +\n coord_map(projection = \"albers\", lat0 = 39, lat1 = 45) \n\np2 <-  p1 +  scale_fill_gradient2(low = \"red\",\n mid = scales::muted(\"purple\"),\n high = \"blue\") +\n labs(title = \"Winning margins\") \np2 +  theme_map() +  labs(fill = \"Percent\")\n```", "```r\ncounty_map %>%  sample_n(5)\n```", "```r\n##            long      lat  order  hole piece             group    id\n## 116977  -286097 -1302531 116977 FALSE     1  0500000US35025.1 35025\n## 175994  1657614  -698592 175994 FALSE     1  0500000US51197.1 51197\n## 186409   674547   -65321 186409 FALSE     1  0500000US55011.1 55011\n## 22624    619876 -1093164  22624 FALSE     1  0500000US05105.1 05105\n## 5906   -1983421 -2424955   5906 FALSE    10 0500000US02016.10 02016\n```", "```r\ncounty_data %>%\n select(id, name, state, pop_dens, pct_black) %>%\n sample_n(5)\n```", "```r\n##         id                name state      pop_dens   pct_black\n## 3029 53051 Pend Oreille County    WA [    0,   10) [ 0.0, 2.0)\n## 1851 35041    Roosevelt County    NM [    0,   10) [ 2.0, 5.0)\n## 1593 29165       Platte County    MO [  100,  500) [ 5.0,10.0)\n## 2363 45009      Bamberg County    SC [   10,   50) [50.0,85.3]\n## 654  17087      Johnson County    IL [   10,   50) [ 5.0,10.0)\n```", "```r\ncounty_full <-  left_join(county_map, county_data, by = \"id\")\n```", "```r\np <-  ggplot(data = county_full,\n mapping = aes(x = long, y = lat,\n fill = pop_dens, \n group = group))\n\np1 <-  p +  geom_polygon(color = \"gray90\", size = 0.05) +  coord_equal()\n\np2 <-  p1 +  scale_fill_brewer(palette=\"Blues\",\n labels = c(\"0-10\", \"10-50\", \"50-100\", \"100-500\",\n \"500-1,000\", \"1,000-5,000\", \">5,000\"))\n\np2 +  labs(fill = \"Population per\\nsquare mile\") +\n theme_map() +\n guides(fill = guide_legend(nrow = 1)) + \n theme(legend.position = \"bottom\")\n```", "```r\np <-  ggplot(data = county_full,\n mapping = aes(x = long, y = lat, fill = pct_black, \n group = group))\np1 <-  p +  geom_polygon(color = \"gray90\", size = 0.05) +  coord_equal()\np2 <-  p1 +  scale_fill_brewer(palette=\"Greens\")\n\np2 +  labs(fill = \"US Population, Percent Black\") +\n guides(fill = guide_legend(nrow = 1)) + \n theme_map() +  theme(legend.position = \"bottom\")\n```", "```r\norange_pal <-  RColorBrewer::brewer.pal(n = 6, name = \"Oranges\")\norange_pal\n```", "```r\n## [1] \"#FEEDDE\" \"#FDD0A2\" \"#FDAE6B\" \"#FD8D3C\" \"#E6550D\"\n## [6] \"#A63603\"\n```", "```r\norange_rev <-  rev(orange_pal)\norange_rev\n```", "```r\n## [1] \"#A63603\" \"#E6550D\" \"#FD8D3C\" \"#FDAE6B\" \"#FDD0A2\"\n## [6] \"#FEEDDE\"\n```", "```r\ngun_p <-  ggplot(data = county_full,\n mapping = aes(x = long, y = lat,\n fill = su_gun6, \n group = group))\n\ngun_p1 <-  gun_p +  geom_polygon(color = \"gray90\", size = 0.05) +  coord_equal()\n\ngun_p2 <-  gun_p1 +  scale_fill_manual(values = orange_pal)\n\ngun_p2 +  labs(title = \"Gun-Related Suicides, 1999-2015\",\n fill = \"Rate per 100,000 pop.\") +\n theme_map() +  theme(legend.position = \"bottom\")\n```", "```r\npop_p <-  ggplot(data = county_full, mapping = aes(x = long, y = lat,\n fill = pop_dens6, \n group = group))\n\npop_p1 <-  pop_p +  geom_polygon(color = \"gray90\", size = 0.05) +  coord_equal()\n\npop_p2 <-  pop_p1 +  scale_fill_manual(values = orange_rev)\n\npop_p2 +  labs(title = \"Reverse-coded Population Density\",\n fill = \"People per square mile\") +\n theme_map() +  theme(legend.position = \"bottom\")\n```", "```r\nlibrary(statebins)\n\nstatebins_continuous(state_data = election, state_col = \"state\",\n text_color = \"white\", value_col = \"pct_trump\",\n brewer_pal=\"Reds\", font_size = 3,\n legend_title=\"Percent Trump\")\n\nstatebins_continuous(state_data = subset(election, st %nin% \"DC\"),\n state_col = \"state\",\n text_color = \"black\", value_col = \"pct_clinton\",\n brewer_pal=\"Blues\", font_size = 3,\n legend_title=\"Percent Clinton\")\n```", "```r\nelection <-  election %>%  mutate(color = recode(party, Republican = \"darkred\",\n Democrat = \"royalblue\"))\n\nstatebins_manual(state_data = election, state_col = \"st\",\n color_col = \"color\", text_color = \"white\",\n font_size = 3, legend_title=\"Winner\",\n labels=c(\"Trump\", \"Clinton\"), legend_position = \"right\")\n\nstatebins(state_data = election, \n state_col = \"state\", value_col = \"pct_trump\",\n text_color = \"white\", breaks = 4,\n labels = c(\"4-21\", \"21-37\", \"37-53\", \"53-70\"),\n brewer_pal=\"Reds\", font_size = 3, legend_title=\"Percent Trump\")\n```", "```r\nopiates\n```", "```r\n## # A tibble: 800 x 11\n##     year state        fips deaths population crude adjusted\n##    <int> <chr>       <int>  <int>      <int> <dbl>    <dbl>\n##  1  1999 Alabama         1     37    4430141 0.800    0.800\n##  2  1999 Alaska          2     27     624779 4.30     4.00 \n##  3  1999 Arizona         4    229    5023823 4.60     4.70 \n##  4  1999 Arkansas        5     28    2651860 1.10     1.10 \n##  5  1999 California      6   1474   33499204 4.40     4.50 \n##  6  1999 Colorado        8    164    4226018 3.90     3.70 \n##  7  1999 Connecticut     9    151    3386401 4.50     4.40 \n##  8  1999 Delaware       10     32     774990 4.10     4.10 \n##  9  1999 District o…    11     28     570213 4.90     4.90 \n## 10  1999 Florida        12    402   15759421 2.60     2.60 \n## # ... with 790 more rows, and 4 more variables:\n## #   adjusted_se <dbl>, region <ord>, abbr <chr>,\n## #   division_name <chr>\n```", "```r\nopiates$region <-  tolower(opiates$state)\nopiates_map <-  left_join(us_states, opiates)\n```", "```r\nlibrary(viridis)\n\np0 <-  ggplot(data = subset(opiates_map, year >  1999),\n mapping = aes(x = long, y = lat,\n group = group,\n fill = adjusted))\n\np1 <-  p0 +  geom_polygon(color = \"gray90\", size = 0.05) +\n coord_map(projection = \"albers\", lat0 = 39, lat1 = 45) \n\np2 <-  p1 +  scale_fill_viridis_c(option = \"plasma\")\n\np2 +  theme_map() +  facet_wrap(~  year, ncol = 3) +\n theme(legend.position = \"bottom\",\n strip.background = element_blank()) +\n labs(fill = \"Death rate per 100,000 population \",\n title = \"Opiate Related Deaths by State, 2000-2014\") \n```", "```r\np <-  ggplot(data = opiates,\n mapping = aes(x = year, y = adjusted,\n group = state))\np +  geom_line(color = \"gray70\") \n```", "```r\np0 <-  ggplot(data = drop_na(opiates, division_name),\n mapping = aes(x = year, y = adjusted))\n\np1 <-  p0 +  geom_line(color = \"gray70\", \n mapping = aes(group = state)) \n```", "```r\np2 <-  p1 +  geom_smooth(mapping = aes(group = division_name),\n se = FALSE)\n```", "```r\np3 <-  p2 +  geom_text_repel(data = subset(opiates,\n year ==  max(year) &  abbr !=\"DC\"),\n mapping = aes(x = year, y = adjusted, label = abbr),\n size = 1.8, segment.color = NA, nudge_x = 30) +\n coord_cartesian(c(min(opiates$year), \n max(opiates$year)))\n```", "```r\np3 +  labs(x = \"\", y = \"Rate per 100,000 population\",\n title = \"State-Level Opiate Death Rates by Census Division, 1999-2014\") +\n facet_wrap(~  reorder(division_name, -adjusted, na.rm = TRUE), nrow  = 3)\n```"]