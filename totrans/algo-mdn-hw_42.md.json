["```cpp\nconst int M = 1e9 + 7;   // input: array of n integers in the [0, M) range // output: sum modulo M int slow_sum(int *a, int n) {  int s = 0; for (int i = 0; i < n; i++) s = (s + a[i]) % M; return s; }   int fast_sum(int *a, int n) {  int s = 0; for (int i = 0; i < n; i++) { s += a[i]; // s < 2 * M s = (s >= M ? s - M : s); // will be replaced with cmov } return s; }   int faster_sum(int *a, int n) {  long long s = 0; // 64-bit integer to handle overflow for (int i = 0; i < n; i++) s += a[i]; // will be vectorized return s % M; } \n```", "```cpp\ntypedef __uint32_t u32; typedef __uint64_t u64;   const u32 n = 1e9 + 7, nr = inverse(n, 1ull << 32);   u32 reduce(u64 x) {  u32 q = u32(x) * nr;      // q = x * n' mod r u64 m = (u64) q * n;      // m = q * n u32 y = (x - m) >> 32;    // y = (x - m) / r return x < m ? y + n : y; // if y < 0, add n to make it be in the [0, n) range } \n```", "```cpp\nu32 reduce(u64 x) {  u32 q = u32(x) * nr; u64 m = (u64) q * n; u32 y = (x - m) >> 32; return y + n } \n```", "```cpp\nu32 reduce(u64 x) {  u32 q = u32(x) * nr; u32 m = ((u64) q * n) >> 32; return (x >> 32) + n - m; } \n```", "```cpp\ntypedef __uint128_t u128;   u64 reduce(u128 x) const {  u64 q = u64(x) * nr; u64 m = ((u128) q * n) >> 64; return (x >> 64) + n - m; } \n```", "```cpp\nstruct Montgomery {  u32 n, nr;  constexpr Montgomery(u32 n) : n(n), nr(1) { // log(2^32) = 5 for (int i = 0; i < 5; i++) nr *= 2 - n * nr; }   u32 reduce(u64 x) const { u32 q = u32(x) * nr; u32 m = ((u64) q * n) >> 32; return (x >> 32) + n - m; // returns a number in the [0, 2 * n - 2] range // (add a \"x < n ? x : x - n\" type of check if you need a proper modulo) }   u32 multiply(u32 x, u32 y) const { return reduce((u64) x * y); }   u32 transform(u32 x) const { return (u64(x) << 32) % n; // can also be implemented as multiply(x, r^2 mod n) } }; \n```", "```cpp\nconstexpr Montgomery space(M);   int inverse(int _a) {  u64 a = space.transform(_a); u64 r = space.transform(1);  #pragma GCC unroll(30) for (int l = 0; l < 30; l++) { if ( (M - 2) >> l & 1 ) r = space.multiply(r, a); a = space.multiply(a, a); }   return space.reduce(r); } \n```"]