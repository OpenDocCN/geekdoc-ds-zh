["```r\nhead(asasec)\n```", "```r\n##                                Section         Sname\n## 1      Aging and the Life Course (018)         Aging\n## 2     Alcohol, Drugs and Tobacco (030) Alcohol/Drugs\n## 3 Altruism and Social Solidarity (047)      Altruism\n## 4            Animals and Society (042)       Animals\n## 5             Asia/Asian America (024)          Asia\n## 6            Body and Embodiment (048)          Body\n##   Beginning Revenues Expenses Ending Journal Year Members\n## 1     12752    12104    12007  12849      No 2005     598\n## 2     11933     1144      400  12677      No 2005     301\n## 3      1139     1862     1875   1126      No 2005      NA\n## 4       473      820     1116    177      No 2005     209\n## 5      9056     2116     1710   9462      No 2005     365\n## 6      3408     1618     1920   3106      No 2005      NA\n```", "```r\np <-  ggplot(data = subset(asasec, Year ==  2014),\n mapping = aes(x = Members, y = Revenues, label = Sname))\n\np +  geom_point() +  geom_smooth()\n```", "```r\n## `geom_smooth()` using method = 'loess' and formula 'y ~ x'\n```", "```r\np <-  ggplot(data = subset(asasec, Year ==  2014),\n mapping = aes(x = Members, y = Revenues, label = Sname))\n\np +  geom_point(mapping = aes(color = Journal)) +\n geom_smooth(method = \"lm\")\n```", "```r\np0 <-  ggplot(data = subset(asasec, Year ==  2014),\n mapping = aes(x = Members, y = Revenues, label = Sname))\n\np1 <-  p0 +  geom_smooth(method = \"lm\", se = FALSE, color = \"gray80\") +\n geom_point(mapping = aes(color = Journal)) \n\np2 <-  p1 +  geom_text_repel(data=subset(asasec,\n Year ==  2014 &  Revenues >  7000),\n size = 2)\n```", "```r\np3 <-  p2 +  labs(x=\"Membership\",\n y=\"Revenues\",\n color = \"Section has own Journal\",\n title = \"ASA Sections\",\n subtitle = \"2014 Calendar year.\",\n caption = \"Source: ASA annual report.\")\np4 <-  p3 +  scale_y_continuous(labels = scales::dollar) +\n theme(legend.position = \"bottom\")\np4\n```", "```r\np <-  ggplot(data = organdata,\n mapping = aes(x = roads, y = donors, color = world))\np +  geom_point(size = 2) +  scale_color_brewer(palette = \"Set2\") +\n theme(legend.position = \"top\")\n\np +  geom_point(size = 2) +  scale_color_brewer(palette = \"Pastel2\") +\n theme(legend.position = \"top\")\n\np +  geom_point(size = 2) +  scale_color_brewer(palette = \"Dark2\") +\n theme(legend.position = \"top\")\n```", "```r\ncb_palette <-  c(\"#999999\", \"#E69F00\", \"#56B4E9\", \"#009E73\",\n \"#F0E442\", \"#0072B2\", \"#D55E00\", \"#CC79A7\")\n\np4 +  scale_color_manual(values = cb_palette) \n```", "```r\nDefault <-  brewer.pal(5, \"Set2\")\n```", "```r\nlibrary(dichromat)\n\ntypes <-  c(\"deutan\", \"protan\", \"tritan\")\nnames(types) <-  c(\"Deuteronopia\", \"Protanopia\", \"Tritanopia\")\n\ncolor_table <-  types %>%\n purrr::map(~  dichromat(Default, .x)) %>%\n as_tibble() %>%\n add_column(Default, .before = TRUE)\n\ncolor_table\n```", "```r\n## # A tibble: 5 x 4\n##   Default Deuteronopia Protanopia Tritanopia\n##   <chr>   <chr>        <chr>      <chr>     \n## 1 #66C2A5 #AEAEA7      #BABAA5    #82BDBD   \n## 2 #FC8D62 #B6B661      #9E9E63    #F29494   \n## 3 #8DA0CB #9C9CCB      #9E9ECB    #92ABAB   \n## 4 #E78AC3 #ACACC1      #9898C3    #DA9C9C   \n## 5 #A6D854 #CACA5E      #D3D355    #B6C8C8\n```", "```r\ncolor_comp(color_table)\n```", "```r\n# Democrat Blue and Republican Red\nparty_colors <-  c(\"#2E74C0\", \"#CB454A\")\n\np0 <-  ggplot(data = subset(county_data,\n flipped == \"No\"),\n mapping = aes(x = pop,\n y = black/100))\n\np1 <-  p0 +  geom_point(alpha = 0.15, color = \"gray50\") +\n scale_x_log10(labels=scales::comma) \n\np1\n```", "```r\np2 <-  p1 +  geom_point(data = subset(county_data,\n flipped == \"Yes\"),\n mapping = aes(x = pop, y = black/100,\n color = partywinner16)) +\n scale_color_manual(values = party_colors)\n\np2\n```", "```r\np3 <-  p2 +  scale_y_continuous(labels=scales::percent) +\n labs(color = \"County flipped to ... \",\n x = \"County Population (log scale)\",\n y = \"Percent Black Population\",\n title = \"Flipped counties, 2016\",\n caption = \"Counties in gray did not flip.\")\n\np3\n```", "```r\np4 <-  p3 +  geom_text_repel(data = subset(county_data,\n flipped == \"Yes\" &\n black  >  25),\n mapping = aes(x = pop,\n y = black/100,\n label = state), size = 2)\n\np4 +  theme_minimal() +\n theme(legend.position=\"top\")\n```", "```r\ntheme_set(theme_bw())\np4 +  theme(legend.position=\"top\")\n\ntheme_set(theme_dark())\np4 +  theme(legend.position=\"top\")\n```", "```r\nlibrary(ggthemes)\n\ntheme_set(theme_economist())\np4 +  theme(legend.position=\"top\")\n\ntheme_set(theme_wsj())\n\np4 +  theme(plot.title = element_text(size = rel(0.6)),\n legend.title = element_text(size = rel(0.35)),\n plot.caption = element_text(size = rel(0.35)),\n legend.position = \"top\")\n```", "```r\np4 +  theme(legend.position = \"top\")\n\np4 +  theme(legend.position = \"top\",\n plot.title = element_text(size=rel(2),\n lineheight=.5,\n family=\"Times\",\n face=\"bold.italic\",\n colour=\"orange\"),\n axis.text.x = element_text(size=rel(1.1),\n family=\"Courier\",\n face=\"bold\",\n color=\"purple\"))\n```", "```r\nyrs <-  c(seq(1972, 1988, 4), 1993, seq(1996, 2016, 4))\n\nmean_age <-  gss_lon %>%\n filter(age %nin%  NA &&  year %in%  yrs) %>%\n group_by(year) %>%\n summarize(xbar = round(mean(age, na.rm = TRUE), 0))\nmean_age$y <-  0.3\n\nyr_labs <-  data.frame(x = 85, y = 0.8,\n year = yrs)\n```", "```r\np <-  ggplot(data = subset(gss_lon, year %in%  yrs),\n mapping = aes(x = age))\n\np1 <-  p +  geom_density(fill = \"gray20\", color = FALSE,\n alpha = 0.9, mapping = aes(y = ..scaled..)) +\n geom_vline(data = subset(mean_age, year %in%  yrs),\n aes(xintercept = xbar), color = \"white\", size = 0.5) +\n geom_text(data = subset(mean_age, year %in%  yrs),\n aes(x = xbar, y = y, label = xbar), nudge_x = 7.5,\n color = \"white\", size = 3.5, hjust = 1) +\n geom_text(data = subset(yr_labs, year %in%  yrs),\n aes(x = x, y = y, label = year)) +\n facet_grid(year ~  ., switch = \"y\")\n```", "```r\np1 +  theme_book(base_size = 10, plot_title_size = 10,\n strip_text_size = 32, panel_spacing = unit(0.1, \"lines\")) +\n theme(plot.title = element_text(size = 16),\n axis.text.x= element_text(size = 12),\n axis.title.y=element_blank(),\n axis.text.y=element_blank(),\n axis.ticks.y = element_blank(),\n strip.background = element_blank(),\n strip.text.y = element_blank(),\n panel.grid.major = element_blank(),\n panel.grid.minor = element_blank()) +\n labs(x = \"Age\",\n y = NULL,\n title = \"Age Distribution of\\nGSS Respondents\")\n```", "```r\nlibrary(ggridges)\n\np <-  ggplot(data = gss_lon,\n mapping = aes(x = age, y = factor(year, levels = rev(unique(year)),\n ordered = TRUE)))\n\np +  geom_density_ridges(alpha = 0.6, fill = \"lightblue\", scale = 1.5) +\n scale_x_continuous(breaks = c(25, 50, 75)) +\n scale_y_discrete(expand = c(0.01, 0)) + \n labs(x = \"Age\", y = NULL,\n title = \"Age Distribution of\\nGSS Respondents\") +\n theme_ridges() +\n theme(title = element_text(size = 16, face = \"bold\"))\n```", "```r\nhead(fredts)\n```", "```r\n##         date  sp500 monbase sp500_i monbase_i\n## 1 2009-03-11 696.68 1542228 100.000   100.000\n## 2 2009-03-18 766.73 1693133 110.055   109.785\n## 3 2009-03-25 799.10 1693133 114.701   109.785\n## 4 2009-04-01 809.06 1733017 116.131   112.371\n## 5 2009-04-08 830.61 1733017 119.224   112.371\n## 6 2009-04-15 852.21 1789878 122.324   116.058\n```", "```r\nfredts_m <-  fredts %>%  select(date, sp500_i, monbase_i) %>%\n gather(key = series, value = score, sp500_i:monbase_i)\n\nhead(fredts_m)\n```", "```r\n##         date  series   score\n## 1 2009-03-11 sp500_i 100.000\n## 2 2009-03-18 sp500_i 110.055\n## 3 2009-03-25 sp500_i 114.701\n## 4 2009-04-01 sp500_i 116.131\n## 5 2009-04-08 sp500_i 119.224\n## 6 2009-04-15 sp500_i 122.324\n```", "```r\np <-  ggplot(data = fredts_m,\n mapping = aes(x = date, y = score,\n group = series,\n color = series))\np1 <-  p +  geom_line() +  theme(legend.position = \"top\") +\n labs(x = \"Date\",\n y = \"Index\",\n color = \"Series\")\n\np <-  ggplot(data = fredts,\n mapping = aes(x = date, y = sp500_i -  monbase_i))\n\np2 <-  p +  geom_line() +\n labs(x = \"Date\",\n y = \"Difference\")\n```", "```r\ncowplot::plot_grid(p1, p2, nrow = 2, rel_heights = c(0.75, 0.25), align = \"v\")\n```", "```r\nhead(yahoo)\n```", "```r\n##   Year Revenue Employees Mayer\n## 1 2004    3574      7600    No\n## 2 2005    5257      9800    No\n## 3 2006    6425     11400    No\n## 4 2007    6969     14300    No\n## 5 2008    7208     13600    No\n## 6 2009    6460     13900    No\n```", "```r\np <-  ggplot(data = yahoo,\n mapping = aes(x = Employees, y = Revenue))\np +  geom_path(color = \"gray80\") +\n geom_text(aes(color = Mayer, label = Year),\n size = 3, fontface = \"bold\") +\n theme(legend.position = \"bottom\") +\n labs(color = \"Mayer is CEO\",\n x = \"Employees\", y = \"Revenue (Millions)\",\n title = \"Yahoo Employees vs Revenues, 2004-2014\") +\n scale_y_continuous(labels = scales::dollar) +\n scale_x_continuous(labels = scales::comma)\n```", "```r\np <-  ggplot(data = yahoo,\n mapping = aes(x = Year, y = Revenue/Employees))\n\np +  geom_vline(xintercept = 2012) +\n geom_line(color = \"gray60\", size = 2) +\n annotate(\"text\", x = 2013, y = 0.44,\n label = \" Mayer becomes CEO\", size = 2.5) +\n labs(x = \"Year\\n\",\n y = \"Revenue/Employees\",\n title = \"Yahoo Revenue to Employee Ratio, 2004-2014\")\n```", "```r\nhead(studebt)\n```", "```r\n## # A tibble: 6 x 4\n##   Debt     type        pct Debtrc  \n##   <ord>    <fct>     <int> <ord>   \n## 1 Under $5 Borrowers    20 Under $5\n## 2 $5-$10   Borrowers    17 $5-$10  \n## 3 $10-$25  Borrowers    28 $10-$25 \n## 4 $25-$50  Borrowers    19 $25-$50 \n## 5 $50-$75  Borrowers     8 $50-$75 \n## 6 $75-$100 Borrowers     3 $75-$100\n```", "```r\np_xlab <- \"Amount Owed, in thousands of Dollars\"\np_title <- \"Outstanding Student Loans\"\np_subtitle <- \"44 million borrowers owe a total of $1.3 trillion\"\np_caption <- \"Source: FRB NY\"\n\nf_labs <-  c(`Borrowers` = \"Percent of\\nall Borrowers\",\n `Balances` = \"Percent of\\nall Balances\")\n\np <-  ggplot(data = studebt,\n mapping = aes(x = Debt, y = pct/100, fill = type))\np +  geom_bar(stat = \"identity\") +\n scale_fill_brewer(type = \"qual\", palette = \"Dark2\") +\n scale_y_continuous(labels = scales::percent) +\n guides(fill = FALSE) +\n theme(strip.text.x = element_text(face = \"bold\")) +\n labs(y = NULL, x = p_xlab,\n caption = p_caption,\n title = p_title,\n subtitle = p_subtitle) +\n facet_grid(~  type, labeller = as_labeller(f_labs)) +\n coord_flip()\n```", "```r\nlibrary(viridis)\n\np <-  ggplot(studebt, aes(y = pct/100, x = type, fill = Debtrc))\np +  geom_bar(stat = \"identity\", color = \"gray80\") +\n scale_x_discrete(labels = as_labeller(f_labs)) +\n scale_y_continuous(labels = scales::percent) +\n scale_fill_viridis(discrete = TRUE) +\n guides(fill = guide_legend(reverse = TRUE,\n title.position = \"top\",\n label.position = \"bottom\",\n keywidth = 3,\n nrow = 1)) +\n labs(x = NULL, y = NULL,\n fill = \"Amount Owed, in thousands of dollars\",\n caption = p_caption,\n title = p_title,\n subtitle = p_subtitle) +\n theme(legend.position = \"top\",\n axis.text.y = element_text(face = \"bold\", hjust = 1, size = 12),\n axis.ticks.length = unit(0, \"cm\"),\n panel.grid.major.y = element_blank()) +\n coord_flip()\n```", "```r\np <-  ggplot(data = organdata,\n mapping = aes(x = roads, y = donors, color = world))\np +  geom_point(size = 2) +  scale_color_brewer(palette = \"Set2\") +\n theme(legend.position = \"top\")\n\np +  geom_point(size = 2) +  scale_color_brewer(palette = \"Pastel2\") +\n theme(legend.position = \"top\")\n\np +  geom_point(size = 2) +  scale_color_brewer(palette = \"Dark2\") +\n theme(legend.position = \"top\")\n```", "```r\ncb_palette <-  c(\"#999999\", \"#E69F00\", \"#56B4E9\", \"#009E73\",\n \"#F0E442\", \"#0072B2\", \"#D55E00\", \"#CC79A7\")\n\np4 +  scale_color_manual(values = cb_palette) \n```", "```r\nDefault <-  brewer.pal(5, \"Set2\")\n```", "```r\nlibrary(dichromat)\n\ntypes <-  c(\"deutan\", \"protan\", \"tritan\")\nnames(types) <-  c(\"Deuteronopia\", \"Protanopia\", \"Tritanopia\")\n\ncolor_table <-  types %>%\n purrr::map(~  dichromat(Default, .x)) %>%\n as_tibble() %>%\n add_column(Default, .before = TRUE)\n\ncolor_table\n```", "```r\n## # A tibble: 5 x 4\n##   Default Deuteronopia Protanopia Tritanopia\n##   <chr>   <chr>        <chr>      <chr>     \n## 1 #66C2A5 #AEAEA7      #BABAA5    #82BDBD   \n## 2 #FC8D62 #B6B661      #9E9E63    #F29494   \n## 3 #8DA0CB #9C9CCB      #9E9ECB    #92ABAB   \n## 4 #E78AC3 #ACACC1      #9898C3    #DA9C9C   \n## 5 #A6D854 #CACA5E      #D3D355    #B6C8C8\n```", "```r\ncolor_comp(color_table)\n```", "```r\n# Democrat Blue and Republican Red\nparty_colors <-  c(\"#2E74C0\", \"#CB454A\")\n\np0 <-  ggplot(data = subset(county_data,\n flipped == \"No\"),\n mapping = aes(x = pop,\n y = black/100))\n\np1 <-  p0 +  geom_point(alpha = 0.15, color = \"gray50\") +\n scale_x_log10(labels=scales::comma) \n\np1\n```", "```r\np2 <-  p1 +  geom_point(data = subset(county_data,\n flipped == \"Yes\"),\n mapping = aes(x = pop, y = black/100,\n color = partywinner16)) +\n scale_color_manual(values = party_colors)\n\np2\n```", "```r\np3 <-  p2 +  scale_y_continuous(labels=scales::percent) +\n labs(color = \"County flipped to ... \",\n x = \"County Population (log scale)\",\n y = \"Percent Black Population\",\n title = \"Flipped counties, 2016\",\n caption = \"Counties in gray did not flip.\")\n\np3\n```", "```r\np4 <-  p3 +  geom_text_repel(data = subset(county_data,\n flipped == \"Yes\" &\n black  >  25),\n mapping = aes(x = pop,\n y = black/100,\n label = state), size = 2)\n\np4 +  theme_minimal() +\n theme(legend.position=\"top\")\n```", "```r\ntheme_set(theme_bw())\np4 +  theme(legend.position=\"top\")\n\ntheme_set(theme_dark())\np4 +  theme(legend.position=\"top\")\n```", "```r\nlibrary(ggthemes)\n\ntheme_set(theme_economist())\np4 +  theme(legend.position=\"top\")\n\ntheme_set(theme_wsj())\n\np4 +  theme(plot.title = element_text(size = rel(0.6)),\n legend.title = element_text(size = rel(0.35)),\n plot.caption = element_text(size = rel(0.35)),\n legend.position = \"top\")\n```", "```r\np4 +  theme(legend.position = \"top\")\n\np4 +  theme(legend.position = \"top\",\n plot.title = element_text(size=rel(2),\n lineheight=.5,\n family=\"Times\",\n face=\"bold.italic\",\n colour=\"orange\"),\n axis.text.x = element_text(size=rel(1.1),\n family=\"Courier\",\n face=\"bold\",\n color=\"purple\"))\n```", "```r\nyrs <-  c(seq(1972, 1988, 4), 1993, seq(1996, 2016, 4))\n\nmean_age <-  gss_lon %>%\n filter(age %nin%  NA &&  year %in%  yrs) %>%\n group_by(year) %>%\n summarize(xbar = round(mean(age, na.rm = TRUE), 0))\nmean_age$y <-  0.3\n\nyr_labs <-  data.frame(x = 85, y = 0.8,\n year = yrs)\n```", "```r\np <-  ggplot(data = subset(gss_lon, year %in%  yrs),\n mapping = aes(x = age))\n\np1 <-  p +  geom_density(fill = \"gray20\", color = FALSE,\n alpha = 0.9, mapping = aes(y = ..scaled..)) +\n geom_vline(data = subset(mean_age, year %in%  yrs),\n aes(xintercept = xbar), color = \"white\", size = 0.5) +\n geom_text(data = subset(mean_age, year %in%  yrs),\n aes(x = xbar, y = y, label = xbar), nudge_x = 7.5,\n color = \"white\", size = 3.5, hjust = 1) +\n geom_text(data = subset(yr_labs, year %in%  yrs),\n aes(x = x, y = y, label = year)) +\n facet_grid(year ~  ., switch = \"y\")\n```", "```r\np1 +  theme_book(base_size = 10, plot_title_size = 10,\n strip_text_size = 32, panel_spacing = unit(0.1, \"lines\")) +\n theme(plot.title = element_text(size = 16),\n axis.text.x= element_text(size = 12),\n axis.title.y=element_blank(),\n axis.text.y=element_blank(),\n axis.ticks.y = element_blank(),\n strip.background = element_blank(),\n strip.text.y = element_blank(),\n panel.grid.major = element_blank(),\n panel.grid.minor = element_blank()) +\n labs(x = \"Age\",\n y = NULL,\n title = \"Age Distribution of\\nGSS Respondents\")\n```", "```r\nlibrary(ggridges)\n\np <-  ggplot(data = gss_lon,\n mapping = aes(x = age, y = factor(year, levels = rev(unique(year)),\n ordered = TRUE)))\n\np +  geom_density_ridges(alpha = 0.6, fill = \"lightblue\", scale = 1.5) +\n scale_x_continuous(breaks = c(25, 50, 75)) +\n scale_y_discrete(expand = c(0.01, 0)) + \n labs(x = \"Age\", y = NULL,\n title = \"Age Distribution of\\nGSS Respondents\") +\n theme_ridges() +\n theme(title = element_text(size = 16, face = \"bold\"))\n```", "```r\nhead(fredts)\n```", "```r\n##         date  sp500 monbase sp500_i monbase_i\n## 1 2009-03-11 696.68 1542228 100.000   100.000\n## 2 2009-03-18 766.73 1693133 110.055   109.785\n## 3 2009-03-25 799.10 1693133 114.701   109.785\n## 4 2009-04-01 809.06 1733017 116.131   112.371\n## 5 2009-04-08 830.61 1733017 119.224   112.371\n## 6 2009-04-15 852.21 1789878 122.324   116.058\n```", "```r\nfredts_m <-  fredts %>%  select(date, sp500_i, monbase_i) %>%\n gather(key = series, value = score, sp500_i:monbase_i)\n\nhead(fredts_m)\n```", "```r\n##         date  series   score\n## 1 2009-03-11 sp500_i 100.000\n## 2 2009-03-18 sp500_i 110.055\n## 3 2009-03-25 sp500_i 114.701\n## 4 2009-04-01 sp500_i 116.131\n## 5 2009-04-08 sp500_i 119.224\n## 6 2009-04-15 sp500_i 122.324\n```", "```r\np <-  ggplot(data = fredts_m,\n mapping = aes(x = date, y = score,\n group = series,\n color = series))\np1 <-  p +  geom_line() +  theme(legend.position = \"top\") +\n labs(x = \"Date\",\n y = \"Index\",\n color = \"Series\")\n\np <-  ggplot(data = fredts,\n mapping = aes(x = date, y = sp500_i -  monbase_i))\n\np2 <-  p +  geom_line() +\n labs(x = \"Date\",\n y = \"Difference\")\n```", "```r\ncowplot::plot_grid(p1, p2, nrow = 2, rel_heights = c(0.75, 0.25), align = \"v\")\n```", "```r\nhead(yahoo)\n```", "```r\n##   Year Revenue Employees Mayer\n## 1 2004    3574      7600    No\n## 2 2005    5257      9800    No\n## 3 2006    6425     11400    No\n## 4 2007    6969     14300    No\n## 5 2008    7208     13600    No\n## 6 2009    6460     13900    No\n```", "```r\np <-  ggplot(data = yahoo,\n mapping = aes(x = Employees, y = Revenue))\np +  geom_path(color = \"gray80\") +\n geom_text(aes(color = Mayer, label = Year),\n size = 3, fontface = \"bold\") +\n theme(legend.position = \"bottom\") +\n labs(color = \"Mayer is CEO\",\n x = \"Employees\", y = \"Revenue (Millions)\",\n title = \"Yahoo Employees vs Revenues, 2004-2014\") +\n scale_y_continuous(labels = scales::dollar) +\n scale_x_continuous(labels = scales::comma)\n```", "```r\np <-  ggplot(data = yahoo,\n mapping = aes(x = Year, y = Revenue/Employees))\n\np +  geom_vline(xintercept = 2012) +\n geom_line(color = \"gray60\", size = 2) +\n annotate(\"text\", x = 2013, y = 0.44,\n label = \" Mayer becomes CEO\", size = 2.5) +\n labs(x = \"Year\\n\",\n y = \"Revenue/Employees\",\n title = \"Yahoo Revenue to Employee Ratio, 2004-2014\")\n```", "```r\nhead(studebt)\n```", "```r\n## # A tibble: 6 x 4\n##   Debt     type        pct Debtrc  \n##   <ord>    <fct>     <int> <ord>   \n## 1 Under $5 Borrowers    20 Under $5\n## 2 $5-$10   Borrowers    17 $5-$10  \n## 3 $10-$25  Borrowers    28 $10-$25 \n## 4 $25-$50  Borrowers    19 $25-$50 \n## 5 $50-$75  Borrowers     8 $50-$75 \n## 6 $75-$100 Borrowers     3 $75-$100\n```", "```r\np_xlab <- \"Amount Owed, in thousands of Dollars\"\np_title <- \"Outstanding Student Loans\"\np_subtitle <- \"44 million borrowers owe a total of $1.3 trillion\"\np_caption <- \"Source: FRB NY\"\n\nf_labs <-  c(`Borrowers` = \"Percent of\\nall Borrowers\",\n `Balances` = \"Percent of\\nall Balances\")\n\np <-  ggplot(data = studebt,\n mapping = aes(x = Debt, y = pct/100, fill = type))\np +  geom_bar(stat = \"identity\") +\n scale_fill_brewer(type = \"qual\", palette = \"Dark2\") +\n scale_y_continuous(labels = scales::percent) +\n guides(fill = FALSE) +\n theme(strip.text.x = element_text(face = \"bold\")) +\n labs(y = NULL, x = p_xlab,\n caption = p_caption,\n title = p_title,\n subtitle = p_subtitle) +\n facet_grid(~  type, labeller = as_labeller(f_labs)) +\n coord_flip()\n```", "```r\nlibrary(viridis)\n\np <-  ggplot(studebt, aes(y = pct/100, x = type, fill = Debtrc))\np +  geom_bar(stat = \"identity\", color = \"gray80\") +\n scale_x_discrete(labels = as_labeller(f_labs)) +\n scale_y_continuous(labels = scales::percent) +\n scale_fill_viridis(discrete = TRUE) +\n guides(fill = guide_legend(reverse = TRUE,\n title.position = \"top\",\n label.position = \"bottom\",\n keywidth = 3,\n nrow = 1)) +\n labs(x = NULL, y = NULL,\n fill = \"Amount Owed, in thousands of dollars\",\n caption = p_caption,\n title = p_title,\n subtitle = p_subtitle) +\n theme(legend.position = \"top\",\n axis.text.y = element_text(face = \"bold\", hjust = 1, size = 12),\n axis.ticks.length = unit(0, \"cm\"),\n panel.grid.major.y = element_blank()) +\n coord_flip()\n```", "```r\nhead(fredts)\n```", "```r\n##         date  sp500 monbase sp500_i monbase_i\n## 1 2009-03-11 696.68 1542228 100.000   100.000\n## 2 2009-03-18 766.73 1693133 110.055   109.785\n## 3 2009-03-25 799.10 1693133 114.701   109.785\n## 4 2009-04-01 809.06 1733017 116.131   112.371\n## 5 2009-04-08 830.61 1733017 119.224   112.371\n## 6 2009-04-15 852.21 1789878 122.324   116.058\n```", "```r\nfredts_m <-  fredts %>%  select(date, sp500_i, monbase_i) %>%\n gather(key = series, value = score, sp500_i:monbase_i)\n\nhead(fredts_m)\n```", "```r\n##         date  series   score\n## 1 2009-03-11 sp500_i 100.000\n## 2 2009-03-18 sp500_i 110.055\n## 3 2009-03-25 sp500_i 114.701\n## 4 2009-04-01 sp500_i 116.131\n## 5 2009-04-08 sp500_i 119.224\n## 6 2009-04-15 sp500_i 122.324\n```", "```r\np <-  ggplot(data = fredts_m,\n mapping = aes(x = date, y = score,\n group = series,\n color = series))\np1 <-  p +  geom_line() +  theme(legend.position = \"top\") +\n labs(x = \"Date\",\n y = \"Index\",\n color = \"Series\")\n\np <-  ggplot(data = fredts,\n mapping = aes(x = date, y = sp500_i -  monbase_i))\n\np2 <-  p +  geom_line() +\n labs(x = \"Date\",\n y = \"Difference\")\n```", "```r\ncowplot::plot_grid(p1, p2, nrow = 2, rel_heights = c(0.75, 0.25), align = \"v\")\n```", "```r\nhead(yahoo)\n```", "```r\n##   Year Revenue Employees Mayer\n## 1 2004    3574      7600    No\n## 2 2005    5257      9800    No\n## 3 2006    6425     11400    No\n## 4 2007    6969     14300    No\n## 5 2008    7208     13600    No\n## 6 2009    6460     13900    No\n```", "```r\np <-  ggplot(data = yahoo,\n mapping = aes(x = Employees, y = Revenue))\np +  geom_path(color = \"gray80\") +\n geom_text(aes(color = Mayer, label = Year),\n size = 3, fontface = \"bold\") +\n theme(legend.position = \"bottom\") +\n labs(color = \"Mayer is CEO\",\n x = \"Employees\", y = \"Revenue (Millions)\",\n title = \"Yahoo Employees vs Revenues, 2004-2014\") +\n scale_y_continuous(labels = scales::dollar) +\n scale_x_continuous(labels = scales::comma)\n```", "```r\np <-  ggplot(data = yahoo,\n mapping = aes(x = Year, y = Revenue/Employees))\n\np +  geom_vline(xintercept = 2012) +\n geom_line(color = \"gray60\", size = 2) +\n annotate(\"text\", x = 2013, y = 0.44,\n label = \" Mayer becomes CEO\", size = 2.5) +\n labs(x = \"Year\\n\",\n y = \"Revenue/Employees\",\n title = \"Yahoo Revenue to Employee Ratio, 2004-2014\")\n```", "```r\nhead(studebt)\n```", "```r\n## # A tibble: 6 x 4\n##   Debt     type        pct Debtrc  \n##   <ord>    <fct>     <int> <ord>   \n## 1 Under $5 Borrowers    20 Under $5\n## 2 $5-$10   Borrowers    17 $5-$10  \n## 3 $10-$25  Borrowers    28 $10-$25 \n## 4 $25-$50  Borrowers    19 $25-$50 \n## 5 $50-$75  Borrowers     8 $50-$75 \n## 6 $75-$100 Borrowers     3 $75-$100\n```", "```r\np_xlab <- \"Amount Owed, in thousands of Dollars\"\np_title <- \"Outstanding Student Loans\"\np_subtitle <- \"44 million borrowers owe a total of $1.3 trillion\"\np_caption <- \"Source: FRB NY\"\n\nf_labs <-  c(`Borrowers` = \"Percent of\\nall Borrowers\",\n `Balances` = \"Percent of\\nall Balances\")\n\np <-  ggplot(data = studebt,\n mapping = aes(x = Debt, y = pct/100, fill = type))\np +  geom_bar(stat = \"identity\") +\n scale_fill_brewer(type = \"qual\", palette = \"Dark2\") +\n scale_y_continuous(labels = scales::percent) +\n guides(fill = FALSE) +\n theme(strip.text.x = element_text(face = \"bold\")) +\n labs(y = NULL, x = p_xlab,\n caption = p_caption,\n title = p_title,\n subtitle = p_subtitle) +\n facet_grid(~  type, labeller = as_labeller(f_labs)) +\n coord_flip()\n```", "```r\nlibrary(viridis)\n\np <-  ggplot(studebt, aes(y = pct/100, x = type, fill = Debtrc))\np +  geom_bar(stat = \"identity\", color = \"gray80\") +\n scale_x_discrete(labels = as_labeller(f_labs)) +\n scale_y_continuous(labels = scales::percent) +\n scale_fill_viridis(discrete = TRUE) +\n guides(fill = guide_legend(reverse = TRUE,\n title.position = \"top\",\n label.position = \"bottom\",\n keywidth = 3,\n nrow = 1)) +\n labs(x = NULL, y = NULL,\n fill = \"Amount Owed, in thousands of dollars\",\n caption = p_caption,\n title = p_title,\n subtitle = p_subtitle) +\n theme(legend.position = \"top\",\n axis.text.y = element_text(face = \"bold\", hjust = 1, size = 12),\n axis.ticks.length = unit(0, \"cm\"),\n panel.grid.major.y = element_blank()) +\n coord_flip()\n```"]