- en: Chapter 1 R and the Tidyverse
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章 R和Tidyverse
- en: 原文：[https://datasciencebook.ca/intro.html](https://datasciencebook.ca/intro.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://datasciencebook.ca/intro.html](https://datasciencebook.ca/intro.html)
- en: 1.1 Overview
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.1 概述
- en: This chapter provides an introduction to data science and the R programming
    language. The goal here is to get your hands dirty right from the start! We will
    walk through an entire data analysis, and along the way introduce different types
    of data analysis question, some fundamental programming concepts in R, and the
    basics of loading, cleaning, and visualizing data. In the following chapters,
    we will dig into each of these steps in much more detail; but for now, let’s jump
    in to see how much we can do with data science!
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章介绍了数据科学和R编程语言。目标是从一开始就让你动手实践！我们将进行整个数据分析，并在过程中介绍不同类型的数据分析问题、R中的一些基本编程概念以及加载数据、清理数据和可视化数据的基础。在接下来的章节中，我们将更详细地探讨这些步骤；但就目前而言，让我们跳入看看我们可以用数据科学做多少事情！
- en: 1.2 Chapter learning objectives
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.2 章节学习目标
- en: 'By the end of the chapter, readers will be able to do the following:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 到本章结束时，读者将能够做到以下事项：
- en: Identify the different types of data analysis question and categorize a question
    into the correct type.
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 识别不同类型的数据分析问题，并将问题分类到正确的类型。
- en: Load the `tidyverse` package into R.
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 `tidyverse` 包加载到R中。
- en: Read tabular data with `read_csv`.
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 `read_csv` 读取表格数据。
- en: Create new variables and objects in R using the assignment symbol.
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用赋值符号在R中创建新变量和对象。
- en: Create and organize subsets of tabular data using `filter`, `select`, `arrange`,
    and `slice`.
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 `filter`、`select`、`arrange` 和 `slice` 创建和组织表格数据的子集。
- en: Add and modify columns in tabular data using `mutate`.
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 `mutate` 添加和修改表格数据中的列。
- en: Visualize data with a `ggplot` bar plot.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 `ggplot` 条形图可视化数据。
- en: Use `?` to access help and documentation tools in R.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 `?` 访问R中的帮助和文档工具。
- en: 1.3 Canadian languages data set
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.3 加拿大语言数据集
- en: 'In this chapter, we will walk through a full analysis of a data set relating
    to languages spoken at home by Canadian residents (Figure [1.1](intro.html#fig:canada-map)).
    Many Indigenous peoples exist in Canada with their own cultures and languages;
    these languages are often unique to Canada and not spoken anywhere else in the
    world ([Statistics Canada 2018](#ref-statcan2018mothertongue)). Sadly, colonization
    has led to the loss of many of these languages. For instance, generations of children
    were not allowed to speak their mother tongue (the first language an individual
    learns in childhood) in Canadian residential schools. Colonizers also renamed
    places they had “discovered” ([K. Wilson 2018](#ref-wilson2018)). Acts such as
    these have significantly harmed the continuity of Indigenous languages in Canada,
    and some languages are considered “endangered” as few people report speaking them.
    To learn more, please see *Canadian Geographic*’s article, “Mapping Indigenous
    Languages in Canada” ([Walker 2017](#ref-walker2017)), *They Came for the Children:
    Canada, Aboriginal peoples, and Residential Schools* ([Truth and Reconciliation
    Commission of Canada 2012](#ref-children2012)) and the *Truth and Reconciliation
    Commission of Canada’s* *Calls to Action* ([Truth and Reconciliation Commission
    of Canada 2015](#ref-calls2015)).'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '在本章中，我们将全面分析加拿大居民在家使用的语言数据集（图[1.1](intro.html#fig:canada-map)）。加拿大存在许多拥有自己文化和语言的土著民族；这些语言通常在加拿大是独特的，在世界其他地方没有使用过（[加拿大统计局
    2018](#ref-statcan2018mothertongue)）。遗憾的是，殖民化导致了这些语言中的许多丢失。例如，在加拿大的寄宿学校中，几代人都不被允许说他们的母语（一个人在童年时期学习的第一语言）。殖民者还更改了他们所谓的“发现”的地方名称（[K.
    Wilson 2018](#ref-wilson2018)）。这些行为严重损害了加拿大土著语言的连续性，一些语言被认为是“濒危”的，因为很少有人报告说他们使用这些语言。欲了解更多信息，请参阅加拿大地理杂志的文章“Mapping
    Indigenous Languages in Canada”（[Walker 2017](#ref-walker2017)）、“They Came for
    the Children: Canada, Aboriginal peoples, and Residential Schools”（[加拿大和解委员会 2012](#ref-children2012)）以及加拿大和解委员会的“Calls
    to Action”（[加拿大和解委员会 2015](#ref-calls2015)）。'
- en: '![Map of Canada.](../Images/dd0332fa06019501cfff04224459a23a.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![加拿大地图。](../Images/dd0332fa06019501cfff04224459a23a.png)'
- en: 'Figure 1.1: Map of Canada.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.1：加拿大地图。
- en: 'The data set we will study in this chapter is taken from [the `canlang` R data
    package](https://ttimbers.github.io/canlang/) ([Timbers 2020](#ref-timbers2020canlang)),
    which has population language data collected during the 2016 Canadian census ([Statistics
    Canada 2016a](#ref-cancensus2016)). In this data, there are 214 languages recorded,
    each having six different properties:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在本章中将研究的数据集来自 [`canlang` R 数据包](https://ttimbers.github.io/canlang/) ([Timbers
    2020](#ref-timbers2020canlang))，该数据包收集了 2016 年加拿大人口普查期间的人口语言数据 ([加拿大统计局 2016a](#ref-cancensus2016))。在这个数据集中，记录了
    214 种语言，每种语言有六个不同的属性：
- en: '`category`: Higher-level language category, describing whether the language
    is an Official Canadian language, an Aboriginal (i.e., Indigenous) language, or
    a Non-Official and Non-Aboriginal language.'
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`category`: 高级语言类别，描述该语言是否是加拿大的官方语言、原住民（即土著）语言，或非官方和非原住民语言。'
- en: '`language`: The name of the language.'
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`language`: 该语言的名字。'
- en: '`mother_tongue`: Number of Canadian residents who reported the language as
    their mother tongue. Mother tongue is generally defined as the language someone
    was exposed to since birth.'
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mother_tongue`: 报告将该语言作为母语的加拿大居民人数。母语通常是指一个人从出生以来接触到的语言。'
- en: '`most_at_home`: Number of Canadian residents who reported the language as being
    spoken most often at home.'
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`most_at_home`: 报告在家中最常使用该语言的加拿大居民人数。'
- en: '`most_at_work`: Number of Canadian residents who reported the language as being
    used most often at work.'
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`most_at_work`: 报告在工作中最常使用该语言的加拿大居民人数。'
- en: '`lang_known`: Number of Canadian residents who reported knowledge of the language.'
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`lang_known`: 报告了解该语言的加拿大居民人数。'
- en: 'According to the census, more than 60 Aboriginal languages were reported as
    being spoken in Canada. Suppose we want to know which are the most common; then
    we might ask the following question, which we wish to answer using our data:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 根据人口普查，有超过 60 种原住民语言在加拿大被报告为使用语言。假设我们想知道哪些是最常见的；那么我们可能会提出以下问题，我们希望使用我们的数据来回答：
- en: '*Which ten Aboriginal languages were most often reported in 2016 as mother
    tongues in Canada, and how many people speak each of them?*'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '*在 2016 年，加拿大哪些十种原住民语言最常被报告为母语，以及有多少人使用每种语言？*'
- en: '**Note:** Data science cannot be done without a deep understanding of the data
    and problem domain. In this book, we have simplified the data sets used in our
    examples to concentrate on methods and fundamental concepts. But in real life,
    you cannot and should not do data science without a domain expert. Alternatively,
    it is common to practice data science in your own domain of expertise! Remember
    that when you work with data, it is essential to think about *how* the data were
    collected, which affects the conclusions you can draw. If your data are biased,
    then your results will be biased!'
  id: totrans-27
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**注意：** 没有对数据和问题领域的深入理解，就无法进行数据科学。在这本书中，我们简化了示例中使用的数据集，以便集中讨论方法和基本概念。但在现实生活中，没有领域专家，你无法也不应该进行数据科学。或者，在您自己的专业领域内进行数据科学是很常见的！记住，当您处理数据时，考虑数据的收集方式是至关重要的，这会影响您得出的结论。如果您的数据存在偏差，那么您的结果也会存在偏差！'
- en: 1.4 Asking a question
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.4 提出问题
- en: 'Every good data analysis begins with a *question*—like the above—that you aim
    to answer using data. As it turns out, there are actually a number of different
    *types* of question regarding data: descriptive, exploratory, predictive, inferential,
    causal, and mechanistic, all of which are defined in Table [1.1](intro.html#tab:questions-table).
    Carefully formulating a question as early as possible in your analysis—and correctly
    identifying which type of question it is—will guide your overall approach to the
    analysis as well as the selection of appropriate tools.'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 每一个好的数据分析都始于一个 *问题*——就像上面提到的——您希望通过数据来回答。实际上，关于数据的 *类型* 问题有很多：描述性、探索性、预测性、推理性、因果性和机制性，所有这些都在表
    [1.1](intro.html#tab:questions-table) 中定义。尽早仔细地制定问题——并正确识别其类型——将指导您的整体分析方法以及选择适当的工具。
- en: 'Table 1.1: Types of data analysis question ([Leek and Peng 2015](#ref-leek2015question);
    [Peng and Matsui 2015](#ref-peng2015art)).'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 表 1.1：数据分析问题类型 ([Leek 和 Peng 2015](#ref-leek2015question)；[Peng 和 Matsui 2015](#ref-peng2015art))。
- en: '| Question type | Description | Example |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: '| 问题类型 | 描述 | 示例 |'
- en: '| --- | --- | --- |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| Descriptive | A question that asks about summarized characteristics of a
    data set without interpretation (i.e., report a fact). | How many people live
    in each province and territory in Canada? |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '| 描述 | 一个询问关于数据集的总结特征而不进行解释的问题（即报告事实）。| 加拿大的每个省和地区有多少人居住？|'
- en: '| Exploratory | A question that asks if there are patterns, trends, or relationships
    within a single data set. Often used to propose hypotheses for future study. |
    Does political party voting change with indicators of wealth in a set of data
    collected on 2,000 people living in Canada? |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
  zh: '| 探索 | 一个询问单个数据集中是否存在模式、趋势或关系的问题。通常用于提出未来研究的假设。| 在收集的关于加拿大2,000名居住者的数据集中，政党投票是否会随着财富指标而变化？|'
- en: '| Predictive | A question that asks about predicting measurements or labels
    for individuals (people or things). The focus is on what things predict some outcome,
    but not what causes the outcome. | What political party will someone vote for
    in the next Canadian election? |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '| 预测 | 一个询问关于预测个人（人或事物）的测量或标签的问题。重点是哪些事物预测某些结果，而不是结果的原因。| 在下一次加拿大选举中，某人会投票给哪个政党？|'
- en: '| Inferential | A question that looks for patterns, trends, or relationships
    in a single data set **and** also asks for quantification of how applicable these
    findings are to the wider population. | Does political party voting change with
    indicators of wealth for all people living in Canada? |'
  id: totrans-36
  prefs: []
  type: TYPE_TB
  zh: '| 推断 | 一个寻找单个数据集中模式、趋势或关系的问题，并且还要求量化这些发现对更广泛群体的适用性。| 加拿大所有居住者的财富指标是否会影响政党投票？|'
- en: '| Causal | A question that asks about whether changing one factor will lead
    to a change in another factor, on average, in the wider population. | Does wealth
    lead to voting for a certain political party in Canadian elections? |'
  id: totrans-37
  prefs: []
  type: TYPE_TB
  zh: '| 因果 | 一个询问是否改变一个因素会导致在更广泛的群体中另一个因素平均发生变化的问题。| 加拿大选举中财富是否会导致对某个政治党的投票？|'
- en: '| Mechanistic | A question that asks about the underlying mechanism of the
    observed patterns, trends, or relationships (i.e., how does it happen?) | How
    does wealth lead to voting for a certain political party in Canadian elections?
    |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '| 机制 | 一个询问观察到的模式、趋势或关系的潜在机制的问题（即它是如何发生的？）| 财富是如何导致在加拿大选举中对某个政治党的投票的？|'
- en: 'In this book, you will learn techniques to answer the first four types of question:
    descriptive, exploratory, predictive, and inferential; causal and mechanistic
    questions are beyond the scope of this book. In particular, you will learn how
    to apply the following analysis tools:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书中，你将学习回答前四种类型问题的技术：描述性、探索性、预测性和推断性；因果和机制问题超出了本书的范围。特别是，你将学习如何应用以下分析工具：
- en: '**Summarization:** computing and reporting aggregated values pertaining to
    a data set. Summarization is most often used to answer descriptive questions,
    and can occasionally help with answering exploratory questions. For example, you
    might use summarization to answer the following question: *What is the average
    race time for runners in this data set?* Tools for summarization are covered in
    detail in Chapters [2](reading.html#reading) and [3](wrangling.html#wrangling),
    but appear regularly throughout the text.'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**总结：**计算和报告与数据集相关的聚合值。总结通常用于回答描述性问题，偶尔也有助于回答探索性问题。例如，你可能使用总结来回答以下问题：*在这个数据集中，跑者的平均比赛时间是多少？*总结工具在第二章[2](reading.html#reading)和第三章[3](wrangling.html#wrangling)中详细介绍，但它们在整本书中都会定期出现。'
- en: '**Visualization:** plotting data graphically. Visualization is typically used
    to answer descriptive and exploratory questions, but plays a critical supporting
    role in answering all of the types of question in Table [1.1](intro.html#tab:questions-table).
    For example, you might use visualization to answer the following question: *Is
    there any relationship between race time and age for runners in this data set?*
    This is covered in detail in Chapter [4](viz.html#viz), but again appears regularly
    throughout the book.'
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**可视化：**图形化地绘制数据。可视化通常用于回答描述性和探索性问题，但在回答表格[1.1](intro.html#tab:questions-table)中所有类型的问题中都起着关键的支持作用。例如，你可能使用可视化来回答以下问题：*在这个数据集中，跑者的比赛时间和年龄之间是否存在任何关系？*这将在第四章[4](viz.html#viz)中详细介绍，但同样会在整本书中定期出现。'
- en: '**Classification:** predicting a class or category for a new observation. Classification
    is used to answer predictive questions. For example, you might use classification
    to answer the following question: *Given measurements of a tumor’s average cell
    area and perimeter, is the tumor benign or malignant?* Classification is covered
    in Chapters [5](classification1.html#classification1) and [6](classification2.html#classification2).'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**分类**：预测新观察值的类别或类别。分类用于回答预测性问题。例如，你可能使用分类来回答以下问题：*给定肿瘤平均细胞面积和周长的测量值，肿瘤是良性还是恶性的？*分类在[第5章](classification1.html#classification1)和[第6章](classification2.html#classification2)中有所介绍。'
- en: '**Regression:** predicting a quantitative value for a new observation. Regression
    is also used to answer predictive questions. For example, you might use regression
    to answer the following question: *What will be the race time for a 20-year-old
    runner who weighs 50kg?* Regression is covered in Chapters [7](regression1.html#regression1)
    and [8](regression2.html#regression2).'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**回归**：预测新观察值的定量值。回归也用于回答预测性问题。例如，你可能使用回归来回答以下问题：*一个体重50kg的20岁跑者的比赛时间会是多少？*回归在[第7章](regression1.html#regression1)和[第8章](regression2.html#regression2)中有所介绍。'
- en: '**Clustering:** finding previously unknown/unlabeled subgroups in a data set.
    Clustering is often used to answer exploratory questions. For example, you might
    use clustering to answer the following question: *What products are commonly bought
    together on Amazon?* Clustering is covered in Chapter [9](clustering.html#clustering).'
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**聚类**：在数据集中找到先前未知/未标记的子组。聚类通常用于回答探索性问题。例如，你可能使用聚类来回答以下问题：*在亚马逊上，哪些产品通常一起购买？*聚类在[第9章](clustering.html#clustering)中有所介绍。'
- en: '**Estimation:** taking measurements for a small number of items from a large
    group and making a good guess for the average or proportion for the large group.
    Estimation is used to answer inferential questions. For example, you might use
    estimation to answer the following question: *Given a survey of cellphone ownership
    of 100 Canadians, what proportion of the entire Canadian population own Android
    phones?* Estimation is covered in Chapter [10](inference.html#inference).'
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**估计**：从大量项目中测量少量项目并就大组的平均值或比例做出良好的猜测。估计用于回答推断性问题。例如，你可能使用估计来回答以下问题：*在100名加拿大人的手机拥有率调查中，整个加拿大人口中拥有安卓手机的比例是多少？*估计在[第10章](inference.html#inference)中有所介绍。'
- en: 'Referring to Table [1.1](intro.html#tab:questions-table), our question about
    Aboriginal languages is an example of a *descriptive question*: we are summarizing
    the characteristics of a data set without further interpretation. And referring
    to the list above, it looks like we should use visualization and perhaps some
    summarization to answer the question. So in the remainder of this chapter, we
    will work towards making a visualization that shows us the ten most common Aboriginal
    languages in Canada and their associated counts, according to the 2016 census.'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 参考表[1.1](intro.html#tab:questions-table)，我们关于土著语言的疑问是一个*描述性问题*的例子：我们正在总结数据集的特征，而不进行进一步的解释。根据上面的列表，看起来我们应该使用可视化，也许还有一些总结来回答这个问题。因此，在本章的剩余部分，我们将努力制作一个可视化，展示加拿大最常见的十种土著语言及其相关的计数，这些数据来自2016年的人口普查。
- en: 1.5 Loading a tabular data set
  id: totrans-47
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.5 加载表格数据集
- en: 'A data set is, at its core essence, a structured collection of numbers and
    characters. Aside from that, there are really no strict rules; data sets can come
    in many different forms! Perhaps the most common form of data set that you will
    find in the wild, however, is *tabular data*. Think spreadsheets in Microsoft
    Excel: tabular data are rectangular-shaped and spreadsheet-like, as shown in Figure
    [1.2](intro.html#fig:img-spreadsheet-vs-dataframe). In this book, we will focus
    primarily on tabular data.'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集在本质上是一个由数字和字符组成的结构化集合。除此之外，实际上并没有严格的规则；数据集可以以许多不同的形式出现！然而，你在野外最常见的数据集形式可能是*表格数据*。想象一下微软Excel中的电子表格：表格数据是矩形形状，类似于电子表格，如图[1.2](intro.html#fig:img-spreadsheet-vs-dataframe)所示。在这本书中，我们将主要关注表格数据。
- en: Since we are using R for data analysis in this book, the first step for us is
    to load the data into R. When we load tabular data into R, it is represented as
    a *data frame* object. Figure [1.2](intro.html#fig:img-spreadsheet-vs-dataframe)
    shows that an R data frame is very similar to a spreadsheet. We refer to the rows
    as **observations**; these are the individual objects for which we collect data.
    In Figure [1.2](intro.html#fig:img-spreadsheet-vs-dataframe), the observations
    are languages. We refer to the columns as **variables**; these are the characteristics
    of each observation. In Figure [1.2](intro.html#fig:img-spreadsheet-vs-dataframe),
    the variables are the the language’s category, its name, the number of mother
    tongue speakers, etc.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们在本书中使用R进行数据分析，因此我们首先要做的是将数据加载到R中。当我们将表格数据加载到R中时，它表示为*数据框*对象。图[1.2](intro.html#fig:img-spreadsheet-vs-dataframe)显示了R数据框与电子表格非常相似。我们将行称为**观测值**；这些是我们收集数据的单个对象。在图[1.2](intro.html#fig:img-spreadsheet-vs-dataframe)中，观测值是语言。我们将列称为**变量**；这些是每个观测值的特征。在图[1.2](intro.html#fig:img-spreadsheet-vs-dataframe)中，变量是语言的类别、名称、母语使用者数量等。
- en: '![A spreadsheet versus a data frame in R.](../Images/2d2b9e4a1b734a4d683073b4a4195743.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![R中的电子表格与数据框对比](../Images/2d2b9e4a1b734a4d683073b4a4195743.png)'
- en: 'Figure 1.2: A spreadsheet versus a data frame in R.'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.2：R中的电子表格与数据框对比。
- en: 'The first kind of data file that we will learn how to load into R as a data
    frame is the *comma-separated values* format (`.csv` for short). These files have
    names ending in `.csv`, and can be opened and saved using common spreadsheet programs
    like Microsoft Excel and Google Sheets. For example, the `.csv` file named `can_lang.csv`
    is included with [the code for this book](https://github.com/UBC-DSCI/introduction-to-datascience/tree/master/data).
    If we were to open this data in a plain text editor (a program like Notepad that
    just shows text with no formatting), we would see each row on its own line, and
    each entry in the table separated by a comma:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将学习如何将第一种数据文件加载到R中作为数据框，这种格式是*逗号分隔值*（简称`.csv`）。这些文件的名称以`.csv`结尾，可以使用常见的电子表格程序如Microsoft
    Excel和Google Sheets打开和保存。例如，名为`can_lang.csv`的`.csv`文件包含在[本书的代码中](https://github.com/UBC-DSCI/introduction-to-datascience/tree/master/data)。如果我们用纯文本编辑器（如记事本，它只显示没有格式的文本）打开此数据，我们会看到每行单独一行，表中的每个条目由逗号分隔：
- en: '[PRE0]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'To load this data into R so that we can do things with it (e.g., perform analyses
    or create data visualizations), we will need to use a *function.* A function is
    a special word in R that takes instructions (we call these *arguments*) and does
    something. The function we will use to load a `.csv` file into R is called `read_csv`.
    In its most basic use-case, `read_csv` expects that the data file:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 要将此数据加载到R中以便我们可以对其进行操作（例如，执行分析或创建数据可视化），我们需要使用一个*函数*。函数是R中的一个特殊单词，它接受指令（我们称之为*参数*）并执行某些操作。我们将用于将`.csv`文件加载到R中的函数称为`read_csv`。在其最基本的使用场景中，`read_csv`期望数据文件：
- en: has column names (or *headers*),
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有列名（或*标题*），
- en: uses a comma (`,`) to separate the columns, and
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用逗号（`,`）分隔列，
- en: does not have row names.
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 没有行名。
- en: Below you’ll see the code used to load the data into R using the `read_csv`
    function. Note that the `read_csv` function is not included in the base installation
    of R, meaning that it is not one of the primary functions ready to use when you
    install R. Therefore, you need to load it from somewhere else before you can use
    it. The place from which we will load it is called an R *package*. An R package
    is a collection of functions that can be used in addition to the built-in R package
    functions once loaded. The `read_csv` function, in particular, can be made accessible
    by loading [the `tidyverse` R package](https://tidyverse.tidyverse.org/) ([Wickham
    2021b](#ref-tidyverse); [Wickham et al. 2019](#ref-wickham2019tidverse)) using
    the `library` function. The `tidyverse` package contains many functions that we
    will use throughout this book to load, clean, wrangle, and visualize data.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 下面您将看到用于使用`read_csv`函数将数据加载到R中的代码。请注意，`read_csv`函数不包括在R的基本安装中，这意味着它不是安装R时可以直接使用的首要函数之一。因此，在您可以使用它之前，您需要从其他地方加载它。我们将从该地方加载的地方称为R
    *包*。R包是一组函数的集合，一旦加载，就可以在除了内置R包函数之外使用。`read_csv`函数可以通过使用`library`函数加载[`tidyverse`
    R包](https://tidyverse.tidyverse.org/)（[Wickham 2021b](#ref-tidyverse); [Wickham
    et al. 2019](#ref-wickham2019tidverse))来访问。`tidyverse`包包含许多函数，我们将在这本书的整个过程中使用这些函数来加载数据、清理数据、整理数据和可视化数据。
- en: '[PRE1]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[PRE2]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '**Note:** You may have noticed that we got some extra output from R regarding
    attached packages and conflicts below our code line. These are examples of *messages*
    in R, which give the user more information that might be handy to know. The `Attaching
    packages` message is natural when loading `tidyverse`, since `tidyverse` actually
    automatically causes other packages to be imported too, such as `dplyr`. In the
    future, when we load `tidyverse` in this book, we will silence these messages
    to help with the readability of the book. The `Conflicts` message is also totally
    normal in this circumstance. This message tells you if functions from different
    packages share the same name, which is confusing to R. For example, in this case,
    the `dplyr` package and the `stats` package both provide a function called `filter`.
    The message above (`dplyr::filter() masks stats::filter()`) is R telling you that
    it is going to default to the `dplyr` package version of this function. So if
    you use the `filter` function, you will be using the `dplyr` version. In order
    to use the `stats` version, you need to use its full name `stats::filter`. Messages
    are not errors, so generally you don’t need to take action when you see a message;
    but you should always read the message and critically think about what it means
    and whether you need to do anything about it.'
  id: totrans-61
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**注意：**你可能已经注意到，我们在代码行下方得到了一些关于附加包和冲突的额外输出。这些都是R中的**消息**示例，它们提供了用户可能需要知道的信息。当加载`tidyverse`时，`Attaching
    packages`消息是自然的，因为`tidyverse`实际上会自动导入其他包，例如`dplyr`。在未来，当我们在本书中加载`tidyverse`时，我们将关闭这些消息，以帮助提高书籍的可读性。`Conflicts`消息在这种情况下也是完全正常的。这条消息告诉你，来自不同包的函数是否具有相同的名称，这可能会让R感到困惑。例如，在这种情况下，`dplyr`包和`stats`包都提供了一个名为`filter`的函数。上面的消息（`dplyr::filter()
    masks stats::filter()`）是R告诉你它将默认使用这个函数的`dplyr`包版本。所以如果你使用`filter`函数，你将使用`dplyr`版本。为了使用`stats`版本，你需要使用它的全名`stats::filter`。消息不是错误，所以通常你不需要在看到消息时采取行动；但你应该始终阅读消息，并批判性地思考它的含义以及你是否需要采取任何行动。'
- en: 'After loading the `tidyverse` package, we can call the `read_csv` function
    and pass it a single argument: the name of the file, `"can_lang.csv"`. We have
    to put quotes around file names and other letters and words that we use in our
    code to distinguish it from the special words (like functions!) that make up the
    R programming language. The file’s name is the only argument we need to provide
    because our file satisfies everything else that the `read_csv` function expects
    in the default use-case. Figure [1.3](intro.html#fig:img-read-csv) describes how
    we use the `read_csv` to read data into R.'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在加载`tidyverse`包之后，我们可以调用`read_csv`函数，并给它传递一个单一参数：文件的名称，即`"can_lang.csv"`。我们必须在文件名和其他我们在代码中使用的字母和单词周围加上引号，以区分构成R编程语言的特殊单词（如函数！）。文件名是我们唯一需要提供的参数，因为我们的文件满足了`read_csv`函数在默认使用场景下期望的所有其他条件。图[1.3](intro.html#fig:img-read-csv)描述了如何使用`read_csv`将数据读入R。
- en: '![Syntax for the read_csv function.](../Images/4fcfe6dbdd2fdb594b1596f6057bdb66.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![`read_csv`函数的语法。](../Images/4fcfe6dbdd2fdb594b1596f6057bdb66.png)'
- en: 'Figure 1.3: Syntax for the `read_csv` function.'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.3：`read_csv`函数的语法。
- en: '[PRE3]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[PRE4]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '**Note:** There is another function that also loads csv files named `read.csv`.
    We will *always* use `read_csv` in this book, as it is designed to play nicely
    with all of the other `tidyverse` functions, which we will use extensively. Be
    careful not to accidentally use `read.csv`, as it can cause some tricky errors
    to occur in your code that are hard to track down!'
  id: totrans-67
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**注意：**还有一个名为`read.csv`的函数也可以加载csv文件。在这本书中，我们将**始终**使用`read_csv`，因为它被设计成与其他所有`tidyverse`函数很好地协同工作，我们将广泛使用这些函数。请小心不要意外使用`read.csv`，因为它可能会在你的代码中引起一些难以追踪的错误！'
- en: 1.6 Naming things in R
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.6 R中的命名事项
- en: When we loaded the 2016 Canadian census language data using `read_csv`, we did
    not give this data frame a name. Therefore the data was just printed on the screen,
    and we cannot do anything else with it. That isn’t very useful. What would be
    more useful would be to give a name to the data frame that `read_csv` outputs,
    so that we can refer to it later for analysis and visualization.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们使用`read_csv`加载2016年加拿大人口普查语言数据时，我们没有给这个数据框命名。因此，数据只是打印在屏幕上，我们无法对其进行任何其他操作。这并不太有用。更有用的事情是为`read_csv`输出的数据框命名，这样我们就可以在以后的分析和可视化中引用它。
- en: The way to assign a name to a value in R is via the *assignment symbol* `<-`.
    On the left side of the assignment symbol you put the name that you want to use,
    and on the right side of the assignment symbol you put the value that you want
    the name to refer to. Names can be used to refer to almost anything in R, such
    as numbers, words (also known as *strings* of characters), and data frames! Below,
    we set `my_number` to `3` (the result of `1+2`) and we set `name` to the string
    `"Alice"`.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 在 R 中为值分配名称的方法是通过 *赋值符号* `<-`。在赋值符号的左侧，你放置你想要使用的名称，而在赋值符号的右侧，你放置你想要名称引用的值。名称可以用来引用
    R 中的几乎所有内容，例如数字、单词（也称为字符 *字符串*），以及数据框！下面，我们将 `my_number` 设置为 `3`（`1+2` 的结果），并将
    `name` 设置为字符串 `"Alice"`。
- en: '[PRE5]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Note that when we name something in R using the assignment symbol, `<-`, we
    do not need to surround the name we are creating with quotes. This is because
    we are formally telling R that this special word denotes the value of whatever
    is on the right-hand side. Only characters and words that act as *values* on the
    right-hand side of the assignment symbol—e.g., the file name `"data/can_lang.csv"`
    that we specified before, or `"Alice"` above—need to be surrounded by quotes.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，当我们使用赋值符号 `<-` 在 R 中为某物命名时，我们不需要用引号包围我们创建的名称。这是因为我们正式告诉 R，这个特殊的词表示右侧的值。只有作为赋值符号右侧
    *值* 的字符和单词——例如，我们之前指定的文件名 `"data/can_lang.csv"` 或上面的 `"Alice"`——需要用引号包围。
- en: 'After making the assignment, we can use the special name words we have created
    in place of their values. For example, if we want to do something with the value
    `3` later on, we can just use `my_number` instead. Let’s try adding 2 to `my_number`;
    you will see that R just interprets this as adding 3 and 2:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行赋值之后，我们可以用我们创建的特殊名称词来代替它们的值。例如，如果我们稍后想对值 `3` 做些操作，我们只需使用 `my_number` 即可。让我们尝试将
    2 加到 `my_number` 上；你会看到 R 只是将其解释为将 3 和 2 相加：
- en: '[PRE6]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[PRE7]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Object names can consist of letters, numbers, periods `.` and underscores `_`.
    Other symbols won’t work since they have their own meanings in R. For example,
    `-` is the subtraction symbol; if we try to assign a name with the `-` symbol,
    R will complain and we will get an error!
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 对象名称可以由字母、数字、点 `.` 和下划线 `_` 组成。其他符号不会起作用，因为它们在 R 中有自己的含义。例如，`-` 是减号；如果我们尝试使用
    `-` 符号分配名称，R 将会抱怨，并且我们会得到一个错误！
- en: '[PRE8]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: There are certain conventions for naming objects in R. When naming an object
    we suggest using only lowercase letters, numbers and underscores `_` to separate
    the words in a name. R is case sensitive, which means that `Letter` and `letter`
    would be two different objects in R. You should also try to give your objects
    meaningful names. For instance, you *can* name a data frame `x`. However, using
    more meaningful terms, such as `language_data`, will help you remember what each
    name in your code represents. We recommend following the Tidyverse naming conventions
    outlined in the *Tidyverse Style Guide* ([Wickham 2020](#ref-tidyversestyleguide)).
    Let’s now use the assignment symbol to give the name `can_lang` to the 2016 Canadian
    census language data frame that we get from `read_csv`.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在 R 中为对象命名有一些约定。在命名对象时，我们建议只使用小写字母、数字和下划线 `_` 来分隔名称中的单词。R 是区分大小写的，这意味着 `Letter`
    和 `letter` 在 R 中是两个不同的对象。你还应该尝试给你的对象赋予有意义的名称。例如，你可以将数据框命名为 `x`。然而，使用更有意义的术语，如
    `language_data`，将有助于你记住代码中每个名称代表的内容。我们建议遵循 *Tidyverse 风格指南* 中概述的 Tidyverse 命名约定（[Wickham
    2020](#ref-tidyversestyleguide)）。现在，让我们使用赋值符号将名称 `can_lang` 分配给从 `read_csv` 获取的
    2016 年加拿大人口普查语言数据框。
- en: '[PRE10]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Wait a minute, nothing happened this time! Where’s our data? Actually, something
    did happen: the data was loaded in and now has the name `can_lang` associated
    with it. And we can use that name to access the data frame and do things with
    it. For example, we can type the name of the data frame to print the first few
    rows on the screen. You will also see at the top that the number of observations
    (i.e., rows) and variables (i.e., columns) are printed. Printing the first few
    rows of a data frame like this is a handy way to get a quick sense for what is
    contained in a data frame.'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 等一下，这次什么都没发生！我们的数据在哪里？实际上，确实发生了某些事情：数据已经被加载进来，并且现在与名称 `can_lang` 相关联。我们可以使用这个名称来访问数据框并对其进行操作。例如，我们可以输入数据框的名称来在屏幕上打印前几行。你也会看到在顶部打印了观测数（即行数）和变量（即列数）。以这种方式打印数据框的前几行是一种快速了解数据框包含内容的便捷方法。
- en: '[PRE11]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '[PRE12]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 1.7 Creating subsets of data frames with `filter` & `select`
  id: totrans-84
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.7 使用 `filter` & `select` 创建数据框的子集
- en: Now that we’ve loaded our data into R, we can start wrangling the data to find
    the ten Aboriginal languages that were most often reported in 2016 as mother tongues
    in Canada. In particular, we will construct a table with the ten Aboriginal languages
    that have the largest counts in the `mother_tongue` column. The `filter` and `select`
    functions from the `tidyverse` package will help us here. The `filter` function
    allows you to obtain a subset of the rows with specific values, while the `select`
    function allows you to obtain a subset of the columns. Therefore, we can `filter`
    the rows to extract the Aboriginal languages in the data set, and then use `select`
    to obtain only the columns we want to include in our table.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经将数据加载到 R 中，我们可以开始整理数据，以找到在 2016 年作为加拿大母语的十个最常报告的土著语言。特别是，我们将构建一个包含在 `mother_tongue`
    列中计数最大的十个土著语言的表格。`tidyverse` 包中的 `filter` 和 `select` 函数将帮助我们。`filter` 函数允许你获取具有特定值的行子集，而
    `select` 函数允许你获取列子集。因此，我们可以使用 `filter` 过滤行以提取数据集中的土著语言，然后使用 `select` 获取我们想要包含在表格中的列。
- en: 1.7.1 Using `filter` to extract rows
  id: totrans-86
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.7.1 使用 `filter` 提取行
- en: Looking at the `can_lang` data above, we see the `category` column contains
    different high-level categories of languages, which include “Aboriginal languages”,
    “Non-Official & Non-Aboriginal languages” and “Official languages”. To answer
    our question we want to filter our data set so we restrict our attention to only
    those languages in the “Aboriginal languages” category.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 观察上面的 `can_lang` 数据，我们看到 `category` 列包含不同的高级语言类别，包括“土著语言”、“非官方和非土著语言”和“官方语言”。为了回答我们的问题，我们想要过滤我们的数据集，以便我们只关注“土著语言”类别中的语言。
- en: We can use the `filter` function to obtain the subset of rows with desired values
    from a data frame. Figure [1.4](intro.html#fig:img-filter) outlines what arguments
    we need to specify to use `filter`. The first argument to `filter` is the name
    of the data frame object, `can_lang`. The second argument is a *logical statement*
    to use when filtering the rows. A logical statement evaluates to either `TRUE`
    or `FALSE`; `filter` keeps only those rows for which the logical statement evaluates
    to `TRUE`. For example, in our analysis, we are interested in keeping only languages
    in the “Aboriginal languages” higher-level category. We can use the *equivalency
    operator* `==` to compare the values of the `category` column with the value `"Aboriginal
    languages"`; you will learn about many other kinds of logical statements in Chapter
    [3](wrangling.html#wrangling). Similar to when we loaded the data file and put
    quotes around the file name, here we need to put quotes around `"Aboriginal languages"`.
    Using quotes tells R that this is a string *value* and not one of the special
    words that make up the R programming language, or one of the names we have given
    to data frames in the code we have already written.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用 `filter` 函数从数据帧中获取具有所需值的行子集。图 [1.4](intro.html#fig:img-filter) 概述了使用
    `filter` 需要指定的参数。`filter` 的第一个参数是数据帧对象的名称，`can_lang`。第二个参数是用于过滤行的逻辑语句。逻辑语句的结果为
    `TRUE` 或 `FALSE`；`filter` 只保留逻辑语句评估为 `TRUE` 的行。例如，在我们的分析中，我们只对“土著语言”高级类别中的语言感兴趣。我们可以使用等价运算符
    `==` 来比较 `category` 列的值与 `"Aboriginal languages"` 的值；你将在第 [3](wrangling.html#wrangling)
    章学习到许多其他类型的逻辑语句。类似于当我们加载数据文件并在文件名周围加上引号时，这里我们需要在 `"Aboriginal languages"` 周围加上引号。使用引号告诉
    R 这是一个字符串 *值*，而不是构成 R 编程语言的特殊单词之一，或者是我们已经在编写的代码中给数据帧命名的名称之一。
- en: '![Syntax for the filter function.](../Images/f00d6811dec72484d333db7a10f67fb3.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![过滤器函数的语法。](../Images/f00d6811dec72484d333db7a10f67fb3.png)'
- en: 'Figure 1.4: Syntax for the `filter` function.'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.4：`filter` 函数的语法。
- en: With these arguments, `filter` returns a data frame that has all the columns
    of the input data frame, but only those rows we asked for in our logical filter
    statement.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这些参数，`filter` 函数返回一个包含输入数据帧所有列的数据帧，但只包含我们在逻辑过滤器语句中请求的行。
- en: '[PRE13]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '[PRE14]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: It’s good practice to check the output after using a function in R. We can see
    the original `can_lang` data set contained 214 rows with multiple kinds of `category`.
    The data frame `aboriginal_lang` contains only 67 rows, and looks like it only
    contains languages in the “Aboriginal languages” in the `category` column. So
    it looks like the function gave us the result we wanted!
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在 R 中使用函数后检查输出是一个好习惯。我们可以看到原始的 `can_lang` 数据集包含 214 行，有多种 `category`。数据框 `aboriginal_lang`
    包含 67 行，看起来它只包含 `category` 列中的“土著语言”语言。所以看起来函数给出了我们想要的结果！
- en: 1.7.2 Using `select` to extract columns
  id: totrans-95
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.7.2 使用 `select` 提取列
- en: 'Now let’s use `select` to extract the `language` and `mother_tongue` columns
    from this data frame. Figure [1.5](intro.html#fig:img-select) shows us the syntax
    for the `select` function. To extract these columns, we need to provide the `select`
    function with three arguments. The first argument is the name of the data frame
    object, which in this example is `aboriginal_lang`. The second and third arguments
    are the column names that we want to select: `language` and `mother_tongue`. After
    passing these three arguments, the `select` function returns two columns (the
    `language` and `mother_tongue` columns that we asked for) as a data frame. This
    code is also a great example of why being able to name things in R is useful:
    you can see that we are using the result of our earlier `filter` step (which we
    named `aboriginal_lang`) here in the next step of the analysis!'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们使用 `select` 从这个数据框中提取 `language` 和 `mother_tongue` 列。图 [1.5](intro.html#fig:img-select)
    展示了 `select` 函数的语法。为了提取这些列，我们需要向 `select` 函数提供三个参数。第一个参数是数据框对象的名称，在这个例子中是 `aboriginal_lang`。第二个和第三个参数是我们想要选择的列名：`language`
    和 `mother_tongue`。传递这三个参数后，`select` 函数将返回两个列（我们请求的 `language` 和 `mother_tongue`
    列）作为数据框。这段代码也是一个很好的例子，说明了为什么在 R 中能够命名东西是有用的：我们可以看到，我们正在使用我们之前 `filter` 步骤的结果（我们将其命名为
    `aboriginal_lang`）在分析的下一步中！
- en: '![Syntax for the select function.](../Images/a2bc428b1fe2824efc23c9841b3d9ffd.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![选择函数的语法。](../Images/a2bc428b1fe2824efc23c9841b3d9ffd.png)'
- en: 'Figure 1.5: Syntax for the `select` function.'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.5：`select` 函数的语法。
- en: '[PRE15]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[PRE16]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 1.8 Using `arrange` to order and `slice` to select rows by index number
  id: totrans-101
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.8 使用 `arrange` 排序和 `slice` 通过索引号选择行
- en: We have used `filter` and `select` to obtain a table with only the Aboriginal
    languages in the data set and their associated counts. However, we want to know
    the **ten** languages that are spoken most often. As a next step, we will order
    the `mother_tongue` column from largest to smallest value and then extract only
    the top ten rows. This is where the `arrange` and `slice` functions come to the
    rescue!
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经使用 `filter` 和 `select` 获取了一个只包含数据集中土著语言的表格及其相关计数。然而，我们想知道**十种**最常使用的语言。作为下一步，我们将按从大到小的顺序对
    `mother_tongue` 列进行排序，然后只提取前十个行。这就是 `arrange` 和 `slice` 函数大显身手的地方！
- en: The `arrange` function allows us to order the rows of a data frame by the values
    of a particular column. Figure [1.6](intro.html#fig:img-arrange) details what
    arguments we need to specify to use the `arrange` function. We need to pass the
    data frame as the first argument to this function, and the variable to order by
    as the second argument. Since we want to choose the ten Aboriginal languages most
    often reported as a mother tongue language, we will use the `arrange` function
    to order the rows in our `selected_lang` data frame by the `mother_tongue` column.
    We want to arrange the rows in descending order (from largest to smallest), so
    we pass the column to the `desc` function before using it as an argument.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '`arrange` 函数允许我们根据特定列的值对数据框的行进行排序。图 [1.6](intro.html#fig:img-arrange) 详细说明了使用
    `arrange` 函数需要指定哪些参数。我们需要将数据框作为第一个参数传递给此函数，并将排序变量作为第二个参数。由于我们想选择最常报告为母语的十种土著语言，我们将使用
    `arrange` 函数按 `mother_tongue` 列对 `selected_lang` 数据框中的行进行排序。我们希望按降序（从大到小）排列行，因此在使用它作为参数之前，我们将列传递给
    `desc` 函数。'
- en: '![Syntax for the arrange function.](../Images/909852038e7e8c0e3b506691b4a83133.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![arrange 函数的语法。](../Images/909852038e7e8c0e3b506691b4a83133.png)'
- en: 'Figure 1.6: Syntax for the `arrange` function.'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.6：`arrange` 函数的语法。
- en: '[PRE17]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '[PRE18]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Next we will use the `slice` function, which selects rows according to their
    row number. Since we want to choose the most common ten languages, we will indicate
    we want the rows 1 to 10 using the argument `1:10`.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将使用 `slice` 函数，该函数根据行号选择行。由于我们想选择最常见的十种语言，我们将使用参数 `1:10` 指示我们想要第 1 到 10
    行。
- en: '[PRE19]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '[PRE20]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 1.9 Adding and modifying columns using `mutate`
  id: totrans-111
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.9 使用 `mutate` 添加和修改列
- en: Recall that our data analysis question referred to the *count* of Canadians
    that speak each of the top ten most commonly reported Aboriginal languages as
    their mother tongue, and the `ten_lang` data frame indeed contains those counts…
    But perhaps, seeing these numbers, we became curious about the *percentage* of
    the population of Canada associated with each count. It is common to come up with
    new data analysis questions in the process of answering a first one—so fear not
    and explore! To answer this small question along the way, we need to divide each
    count in the `mother_tongue` column by the total Canadian population according
    to the 2016 census—i.e., 35,151,728—and multiply it by 100\. We can perform this
    computation using the `mutate` function. We pass the `ten_lang` data frame as
    its first argument, then specify the equation that computes the percentages in
    the second argument. By using a new variable name on the left hand side of the
    equation, we will create a new column in the data frame; and if we use an existing
    name, we will modify that variable. In this case, we will opt to create a new
    column called `mother_tongue_percent`.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 回想一下，我们的数据分析问题涉及说前十个最常报告的原住民语言作为母语的加拿大人的 *数量*，而 `ten_lang` 数据框确实包含这些数量……但也许，看到这些数字后，我们开始对与每个数量相关的加拿大
    *百分比* 产生了好奇心。在回答第一个问题时，通常会提出新的数据分析问题——所以不要害怕，去探索！为了回答这个附带问题，我们需要将 `mother_tongue`
    列中的每个计数除以 2016 年人口普查的总加拿大人口——即 35,151,728，然后乘以 100。我们可以使用 `mutate` 函数执行此计算。我们将
    `ten_lang` 数据框作为其第一个参数传递，然后在第二个参数中指定计算百分比的方程。通过在方程的左侧使用新的变量名，我们将在数据框中创建一个新列；如果我们使用现有的名称，我们将修改该变量。在这种情况下，我们将选择创建一个名为
    `mother_tongue_percent` 的新列。
- en: '[PRE21]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '[PRE22]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: The `ten_lang_percent` data frame shows that the ten Aboriginal languages in
    the `ten_lang` data frame were spoken as a mother tongue by between 0.008% and
    0.18% of the Canadian population.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '`ten_lang_percent` 数据框显示，在 `ten_lang` 数据框中的十个原住民语言中，作为母语被加拿大人口中的 0.008% 到 0.18%
    的人使用。'
- en: 1.10 Exploring data with visualizations
  id: totrans-116
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.10 使用可视化探索数据
- en: 'The `ten_lang` table we generated in Section [1.8](intro.html#arrangesliceintro)
    answers our initial data analysis question. Are we done? Well, not quite; tables
    are almost never the best way to present the result of your analysis to your audience.
    Even the `ten_lang` table with only two columns presents some difficulty: for
    example, you have to scrutinize the table quite closely to get a sense for the
    relative numbers of speakers of each language. When you move on to more complicated
    analyses, this issue only gets worse. In contrast, a *visualization* would convey
    this information in a much more easily understood format. Visualizations are a
    great tool for summarizing information to help you effectively communicate with
    your audience, and creating effective data visualizations is an essential component
    of any data analysis. In this section we will develop a visualization of the ten
    Aboriginal languages that were most often reported in 2016 as mother tongues in
    Canada, as well as the number of people that speak each of them.'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在 [1.8](intro.html#arrangesliceintro) 节中生成的 `ten_lang` 表格回答了我们的初始数据分析问题。我们完成了吗？嗯，还不完全是；表格几乎从来不是向观众展示您分析结果的最佳方式。即使是只有两列的
    `ten_lang` 表格也带来了一些困难：例如，您必须非常仔细地检查表格，才能对每种语言的说话者相对数量有一个概念。当您转向更复杂的分析时，这个问题只会变得更糟。相比之下，一种
    *可视化* 会以更容易理解的方式传达这些信息。可视化是总结信息以帮助您有效地与观众沟通的出色工具，创建有效的数据可视化是任何数据分析的必要组成部分。在本节中，我们将开发一个可视化，展示在
    2016 年最常报告为加拿大母语的十个原住民语言，以及说每种语言的人数。
- en: 1.10.1 Using `ggplot` to create a bar plot
  id: totrans-118
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.10.1 使用 `ggplot` 创建条形图
- en: 'In our data set, we can see that `language` and `mother_tongue` are in separate
    columns (or variables). In addition, there is a single row (or observation) for
    each language. The data are, therefore, in what we call a *tidy data* format.
    Tidy data is a fundamental concept and will be a significant focus in the remainder
    of this book: many of the functions from `tidyverse` require tidy data, including
    the `ggplot` function that we will use shortly for our visualization. We will
    formally introduce tidy data in Chapter [3](wrangling.html#wrangling).'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的数据集中，我们可以看到`language`和`mother_tongue`位于不同的列（或变量）中。此外，每种语言都有一个单独的行（或观察）。因此，数据是以我们所说的*整洁数据*格式存在的。整洁数据是一个基本概念，将在本书的剩余部分中成为一个重要的焦点：`tidyverse`中的许多函数都需要整洁数据，包括我们很快将用于可视化的`ggplot`函数。我们将在第[3](wrangling.html#wrangling)章中正式介绍整洁数据。
- en: We will make a bar plot to visualize our data. A bar plot is a chart where the
    lengths of the bars represent certain values, like counts or proportions. We will
    make a bar plot using the `mother_tongue` and `language` columns from our `ten_lang`
    data frame. To create a bar plot of these two variables using the `ggplot` function,
    we must specify the data frame, which variables to put on the x and y axes, and
    what kind of plot to create. The `ggplot` function and its common usage is illustrated
    in Figure [1.7](intro.html#fig:img-ggplot). Figure [1.8](intro.html#fig:barplot-mother-tongue)
    shows the resulting bar plot generated by following the instructions in Figure
    [1.7](intro.html#fig:img-ggplot).
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将制作一个条形图来可视化我们的数据。条形图是一种图表，其中条形的长度代表某些值，如计数或比例。我们将使用`mother_tongue`和`language`列从我们的`ten_lang`数据框中制作条形图。要使用`ggplot`函数创建这两个变量的条形图，我们必须指定数据框、要放在x轴和y轴上的变量以及要创建的图表类型。`ggplot`函数及其常见用法如图[1.7](intro.html#fig:img-ggplot)所示。图[1.8](intro.html#fig:barplot-mother-tongue)显示了按照图[1.7](intro.html#fig:img-ggplot)中的说明生成的结果条形图。
- en: '![Creating a bar plot with the ggplot function.](../Images/d698b360e47c6e9f6d999cd35beae49e.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![使用ggplot函数创建条形图。](../Images/d698b360e47c6e9f6d999cd35beae49e.png)'
- en: 'Figure 1.7: Creating a bar plot with the `ggplot` function.'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.7：使用`ggplot`函数创建条形图。
- en: '[PRE23]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '![Bar plot of the ten Aboriginal languages most often reported by Canadian
    residents as their mother tongue. Note that this visualization is not done yet;
    there are still improvements to be made.](../Images/1aefb89d000e06af69758f5485a8cdad.png)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![加拿大居民最常报告为母语的十种土著语言的条形图。注意，这个可视化尚未完成；仍有改进的空间。](../Images/1aefb89d000e06af69758f5485a8cdad.png)'
- en: 'Figure 1.8: Bar plot of the ten Aboriginal languages most often reported by
    Canadian residents as their mother tongue. Note that this visualization is not
    done yet; there are still improvements to be made.'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.8：加拿大居民最常报告为母语的十种土著语言的条形图。注意，这个可视化尚未完成；仍有改进的空间。
- en: '**Note:** The vast majority of the time, a single expression in R must be contained
    in a single line of code. However, there *are* a small number of situations in
    which you can have a single R expression span multiple lines. Above is one such
    case: here, R knows that a line cannot end with a `+` symbol, and so it keeps
    reading the next line to figure out what the right-hand side of the `+` symbol
    should be. We could, of course, put all of the added layers on one line of code,
    but splitting them across multiple lines helps a lot with code readability.'
  id: totrans-126
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**注意：** 大多数情况下，R中的单个表达式必须包含在单行代码中。然而，确实存在一些情况下，你可以让单个R表达式跨越多行。上面就是一个例子：在这里，R知道一行不能以`+`符号结束，因此它会继续读取下一行以确定`+`符号右侧应该是什么。当然，我们可以将所有添加的层放在一行代码中，但将它们分散在多行中对于代码的可读性有很大帮助。'
- en: 1.10.2 Formatting ggplot objects
  id: totrans-127
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.10.2 格式化ggplot对象
- en: It is exciting that we can already visualize our data to help answer our question,
    but we are not done yet! We can (and should) do more to improve the interpretability
    of the data visualization that we created. For example, by default, R uses the
    column names as the axis labels. Usually these column names do not have enough
    information about the variable in the column. We really should replace this default
    with a more informative label. For the example above, R uses the column name `mother_tongue`
    as the label for the y axis, but most people will not know what that is. And even
    if they did, they will not know how we measured this variable, or the group of
    people on which the measurements were taken. An axis label that reads “Mother
    Tongue (Number of Canadian Residents)” would be much more informative.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 很令人兴奋的是，我们已经有能力可视化我们的数据来帮助我们回答问题，但我们还没有完成！我们可以（并且应该）做更多来提高我们创建的数据可视化的可解释性。例如，默认情况下，R
    使用列名作为轴标签。通常这些列名没有足够的信息来描述列中的变量。我们真的应该用更信息的标签来替换这个默认设置。对于上面的例子，R 使用列名 `mother_tongue`
    作为 y 轴的标签，但大多数人不会知道这是什么。即使他们知道，他们也不知道我们是如何测量这个变量的，或者测量是在哪个群体上进行的。一个读作“母语（加拿大居民数量）”的轴标签将提供更多信息。
- en: Adding additional layers to our visualizations that we create in `ggplot` is
    one common and easy way to improve and refine our data visualizations. New layers
    are added to `ggplot` objects using the `+` symbol. For example, we can use the
    `xlab` (short for x axis label) and `ylab` (short for y axis label) functions
    to add layers where we specify meaningful and informative labels for the x and
    y axes. Again, since we are specifying words (e.g. `"Mother Tongue (Number of
    Canadian Residents)"`) as arguments to `xlab` and `ylab`, we surround them with
    double quotation marks. We can add many more layers to format the plot further,
    and we will explore these in Chapter [4](viz.html#viz).
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们创建的 `ggplot` 可视化中添加额外的层是一种常见且简单的方法来改进和细化我们的数据可视化。使用 `+` 符号向 `ggplot` 对象中添加新层。例如，我们可以使用
    `xlab`（x 轴标签的简称）和 `ylab`（y 轴标签的简称）函数来添加层，在这些层中我们指定对 x 轴和 y 轴有意义的和信息的标签。再次强调，由于我们正在将单词（例如，“母语（加拿大居民数量）”作为
    `xlab` 和 `ylab` 的参数，所以我们用双引号包围它们。我们可以添加更多层来进一步格式化图表，我们将在第 [4](viz.html#viz) 章节中探讨这些。
- en: '[PRE24]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '![Bar plot of the ten Aboriginal languages most often reported by Canadian
    residents as their mother tongue with x and y labels. Note that this visualization
    is not done yet; there are still improvements to be made.](../Images/922b4b3bdffbd8439e861c05d168af8d.png)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![加拿大居民报告的十种最常见的土著语言的条形图，带有 x 和 y 轴标签。请注意，这个可视化尚未完成；还有改进的空间。](../Images/922b4b3bdffbd8439e861c05d168af8d.png)'
- en: 'Figure 1.9: Bar plot of the ten Aboriginal languages most often reported by
    Canadian residents as their mother tongue with x and y labels. Note that this
    visualization is not done yet; there are still improvements to be made.'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.9：加拿大居民报告的十种最常见的土著语言的条形图，带有 x 轴和 y 轴标签。请注意，这个可视化尚未完成；还有改进的空间。
- en: 'The result is shown in Figure [1.9](intro.html#fig:barplot-mother-tongue-labs).
    This is already quite an improvement! Let’s tackle the next major issue with the
    visualization in Figure [1.9](intro.html#fig:barplot-mother-tongue-labs): the
    overlapping x axis labels, which are currently making it difficult to read the
    different language names. One solution is to rotate the plot such that the bars
    are horizontal rather than vertical. To accomplish this, we will swap the x and
    y coordinate axes:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如图 [1.9](intro.html#fig:barplot-mother-tongue-labs) 所示。这已经是一个相当大的改进了！让我们解决图
    [1.9](intro.html#fig:barplot-mother-tongue-labs) 中可视化遇到的下一个主要问题：重叠的 x 轴标签，这目前使得阅读不同的语言名称变得困难。一个解决方案是将图表旋转，使条形水平而不是垂直。为了实现这一点，我们将交换
    x 和 y 坐标轴：
- en: '[PRE25]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '![Horizontal bar plot of the ten Aboriginal languages most often reported by
    Canadian residents as their mother tongue. There are no more serious issues with
    this visualization, but it could be refined further.](../Images/e9c36f3aea862cdb65b4a5ad2cf75e47.png)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![加拿大居民报告的十种最常见的土著语言的水平条形图。这个可视化没有更严重的问题，但还可以进一步改进。](../Images/e9c36f3aea862cdb65b4a5ad2cf75e47.png)'
- en: 'Figure 1.10: Horizontal bar plot of the ten Aboriginal languages most often
    reported by Canadian residents as their mother tongue. There are no more serious
    issues with this visualization, but it could be refined further.'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.10：加拿大居民报告的十种最常见的土著语言的水平条形图。这个可视化没有更严重的问题，但还可以进一步改进。
- en: Another big step forward, as shown in Figure [1.10](intro.html#fig:barplot-mother-tongue-flipped)!
    There are no more serious issues with the visualization. Now comes time to refine
    the visualization to make it even more well-suited to answering the question we
    asked earlier in this chapter. For example, the visualization could be made more
    transparent by organizing the bars according to the number of Canadian residents
    reporting each language, rather than in alphabetical order. We can reorder the
    bars using the `reorder` function, which orders a variable (here `language`) based
    on the values of the second variable (`mother_tongue`).
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 如图 [1.10](intro.html#fig:barplot-mother-tongue-flipped) 所示，又迈出了重要的一步！可视化中不再存在严重的问题。现在，我们需要对可视化进行细化，使其更适合回答我们在本章早期提出的问题。例如，可以通过根据报告每种语言的加拿大居民数量来组织条形，而不是按字母顺序排列，从而使可视化更加透明。我们可以使用
    `reorder` 函数重新排列条形，该函数根据第二个变量（此处为 `mother_tongue`）的值对变量（此处为 `language`）进行排序。
- en: '[PRE26]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '![Bar plot of the ten Aboriginal languages most often reported by Canadian
    residents as their mother tongue with bars reordered.](../Images/0363040b99895d965ed0248ca05f2045.png)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![按顺序重新排列条形图，显示加拿大居民最常报告的十种土著语言。](../Images/0363040b99895d965ed0248ca05f2045.png)'
- en: 'Figure 1.11: Bar plot of the ten Aboriginal languages most often reported by
    Canadian residents as their mother tongue with bars reordered.'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.11：按顺序重新排列条形图，显示加拿大居民最常报告的十种土著语言。
- en: Figure [1.11](intro.html#fig:barplot-mother-tongue-reorder) provides a very
    clear and well-organized answer to our original question; we can see what the
    ten most often reported Aboriginal languages were, according to the 2016 Canadian
    census, and how many people speak each of them. For instance, we can see that
    the Aboriginal language most often reported was Cree n.o.s. with over 60,000 Canadian
    residents reporting it as their mother tongue.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 图 [1.11](intro.html#fig:barplot-mother-tongue-reorder) 提供了一个非常清晰且组织良好的答案，回答了我们的原始问题；我们可以看到根据
    2016 年加拿大人口普查，最常报告的十种土著语言是什么，以及有多少人使用每种语言。例如，我们可以看到最常报告的土著语言是 Cree n.o.s.，有超过
    60,000 名加拿大居民将其报告为他们的母语。
- en: '**Note:** “n.o.s.” means “not otherwise specified”, so Cree n.o.s. refers to
    individuals who reported Cree as their mother tongue. In this data set, the Cree
    languages include the following categories: Cree n.o.s., Swampy Cree, Plains Cree,
    Woods Cree, and a ‘Cree not included elsewhere’ category (which includes Moose
    Cree, Northern East Cree and Southern East Cree) ([Statistics Canada 2016b](#ref-language2016)).'
  id: totrans-142
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**注意：** “n.o.s.” 表示 “未另作说明”，因此 Cree n.o.s. 指的是报告 Cree 为其母语的个人。在此数据集中，Cree 语言包括以下类别：Cree
    n.o.s.、Swampy Cree、Plains Cree、Woods Cree 以及一个“未在其他地方包括的 Cree”类别（包括 Moose Cree、Northern
    East Cree 和 Southern East Cree）([加拿大统计局 2016b](#ref-language2016))。'
- en: 1.10.3 Putting it all together
  id: totrans-143
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.10.3 整合所有内容
- en: In the block of code below, we put everything from this chapter together, with
    a few modifications. In particular, we have actually skipped the `select` step
    that we did above; since you specify the variable names to plot in the `ggplot`
    function, you don’t actually need to `select` the columns in advance when creating
    a visualization. We have also provided *comments* next to many of the lines of
    code below using the hash symbol `#`. When R sees a `#` sign, it will ignore all
    of the text that comes after the symbol on that line. So you can use comments
    to explain lines of code for others, and perhaps more importantly, your future
    self! It’s good practice to get in the habit of commenting your code to improve
    its readability.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的代码块中，我们将本章的所有内容整合在一起，进行了一些修改。特别是，我们实际上跳过了上面所做的 `select` 步骤；由于你在 `ggplot`
    函数中指定了要绘制的变量名称，因此创建可视化时实际上不需要提前选择列。我们还在下面的许多代码行旁边提供了 *注释* 使用井号 `#`。当 R 看到井号 `#`
    时，它将忽略该符号之后该行上的所有文本。因此，你可以使用注释来解释代码行以供他人参考，也许更重要的是，供未来的你参考！养成注释代码的习惯以改善其可读性是一个好习惯。
- en: This exercise demonstrates the power of R. In relatively few lines of code,
    we performed an entire data science workflow with a highly effective data visualization!
    We asked a question, loaded the data into R, wrangled the data (using `filter`,
    `arrange` and `slice`) and created a data visualization to help answer our question.
    In this chapter, you got a quick taste of the data science workflow; continue
    on with the next few chapters to learn each of these steps in much more detail!
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 这个练习展示了 R 的强大功能。在相对较少的代码行中，我们执行了整个数据科学工作流程，并使用高度有效的数据可视化！我们提出了一个问题，将数据加载到 R
    中，整理数据（使用 `filter`、`arrange` 和 `slice`），并创建数据可视化来帮助我们回答问题。在本章中，你快速尝到了数据科学工作流程的滋味；继续阅读接下来的几章，以更详细地学习每个步骤！
- en: '[PRE27]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: '![Putting it all together: bar plot of the ten Aboriginal languages most often
    reported by Canadian residents as their mother tongue.](../Images/d2134604351c8b8b829f00aaa49f88e2.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![将所有内容整合在一起：加拿大居民最常报告为母语的十个原住民语言的条形图。](../Images/d2134604351c8b8b829f00aaa49f88e2.png)'
- en: 'Figure 1.12: Putting it all together: bar plot of the ten Aboriginal languages
    most often reported by Canadian residents as their mother tongue.'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.12：将所有内容整合在一起：加拿大居民最常报告为母语的十个原住民语言的条形图。
- en: 1.11 Accessing documentation
  id: totrans-149
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.11 访问文档
- en: 'There are many R functions in the `tidyverse` package (and beyond!), and nobody
    can be expected to remember what every one of them does or all of the arguments
    we have to give them. Fortunately, R provides the `?` symbol, which provides an
    easy way to pull up the documentation for most functions quickly. To use the `?`
    symbol to access documentation, you just put the name of the function you are
    curious about after the `?` symbol. For example, if you had forgotten what the
    `filter` function did or exactly what arguments to pass in, you could run the
    following code:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '`tidyverse` 包（以及更多）中有很多 R 函数，没有人能期望记住它们每一个的功能或者所有必须给出的参数。幸运的是，R 提供了 `?` 符号，它提供了一种快速调出大多数函数文档的简便方法。要使用
    `?` 符号访问文档，你只需在 `?` 符号后放置你好奇的函数名称。例如，如果你忘记了 `filter` 函数的功能或者确切需要传递的参数，你可以运行以下代码：'
- en: '[PRE28]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Figure [1.13](intro.html#fig:01-help) shows the documentation that will pop
    up, including a high-level description of the function, its arguments, a description
    of each, and more. Note that you may find some of the text in the documentation
    a bit too technical right now (for example, what is `dbplyr`, and what is a lazy
    data frame?). Fear not: as you work through this book, many of these terms will
    be introduced to you, and slowly but surely you will become more adept at understanding
    and navigating documentation like that shown in Figure [1.13](intro.html#fig:01-help).
    But do keep in mind that the documentation is not written to *teach* you about
    a function; it is just there as a reference to *remind* you about the different
    arguments and usage of functions that you have already learned about elsewhere.'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 图 [1.13](intro.html#fig:01-help) 展示了将弹出的文档，包括函数的高级描述、其参数的描述以及更多内容。请注意，你现在可能会觉得文档中的某些文本有些过于技术性（例如，什么是
    `dbplyr`，什么是懒数据框？）。不必担心：随着你阅读这本书，许多这些术语将会被介绍给你，而且你会逐渐但肯定地变得更加熟练于理解和导航如图 [1.13](intro.html#fig:01-help)
    所示的文档。但请记住，文档并不是为了 *教授* 你关于函数的知识；它只是作为一个参考，来 *提醒* 你关于你已经在其他地方学习过的不同函数的参数和用法。
- en: '![The documentation for the filter function, including a high-level description,
    a list of arguments and their meanings, and more.](../Images/ddaaeb1d7bf161d9ab6f311586973c80.png)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![`filter` 函数的文档，包括高级描述、参数列表及其含义等。](../Images/ddaaeb1d7bf161d9ab6f311586973c80.png)'
- en: 'Figure 1.13: The documentation for the `filter` function, including a high-level
    description, a list of arguments and their meanings, and more.'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.13：`filter` 函数的文档，包括高级描述、参数列表及其含义等。
- en: 1.12 Exercises
  id: totrans-155
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.12 练习
- en: Practice exercises for the material covered in this chapter can be found in
    the accompanying [worksheets repository](https://worksheets.datasciencebook.ca)
    in the “R and the tidyverse” row. You can launch an interactive version of the
    worksheet in your browser by clicking the “launch binder” button. You can also
    preview a non-interactive version of the worksheet by clicking “view worksheet.”
    If you instead decide to download the worksheet and run it on your own machine,
    make sure to follow the instructions for computer setup found in Chapter [13](setup.html#setup).
    This will ensure that the automated feedback and guidance that the worksheets
    provide will function as intended.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖的练习材料可以在“R和tidyverse”行中的配套[工作表存储库](https://worksheets.datasciencebook.ca)中找到。您可以通过点击“启动binder”按钮在浏览器中启动工作表的交互式版本。您还可以通过点击“查看工作表”预览非交互式版本的工作表。如果您决定下载工作表并在自己的机器上运行，请确保遵循第[13](setup.html#setup)章中找到的计算机设置说明。这将确保工作表提供的自动反馈和指导能够按预期工作。
- en: References
  id: totrans-157
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 参考文献
- en: 'Leek, Jeffrey, and Roger Peng. 2015\. “What Is the Question?” *Science* 347
    (6228): 1314–15.Peng, Roger D, and Elizabeth Matsui. 2015\. *The Art of Data Science:
    A Guide for Anyone Who Works with Data*. Skybrude Consulting, LLC. [https://bookdown.org/rdpeng/artofdatascience/](https://bookdown.org/rdpeng/artofdatascience/).Statistics
    Canada. 2016a. “Population Census.” [https://www12.statcan.gc.ca/census-recensement/2016/dp-pd/index-eng.cfm](https://www12.statcan.gc.ca/census-recensement/2016/dp-pd/index-eng.cfm).———.
    2016b. “The Aboriginal Languages of First Nations People, Métis and Inuit.” [https://www12.statcan.gc.ca/census-recensement/2016/as-sa/98-200-x/2016022/98-200-x2016022-eng.cfm](https://www12.statcan.gc.ca/census-recensement/2016/as-sa/98-200-x/2016022/98-200-x2016022-eng.cfm).———.
    2018\. “The Evolution of Language Populations in Canada, by Mother Tongue, from
    1901 to 2016.” [https://www150.statcan.gc.ca/n1/pub/11-630-x/11-630-x2018001-eng.htm](https://www150.statcan.gc.ca/n1/pub/11-630-x/11-630-x2018001-eng.htm).Timbers,
    Tiffany. 2020\. *canlang: Canadian Census Language Data*. [https://ttimbers.github.io/canlang/](https://ttimbers.github.io/canlang/).Truth
    and Reconciliation Commission of Canada. 2012\. *They Came for the Children: Canada,
    Aboriginal Peoples, and the Residential Schools*. Public Works & Government Services
    Canada.———. 2015\. *Calls to Action*. [https://www2.gov.bc.ca/assets/gov/british-columbians-our-governments/indigenous-people/aboriginal-peoples-documents/calls_to_action_english2.pdf](https://www2.gov.bc.ca/assets/gov/british-columbians-our-governments/indigenous-people/aboriginal-peoples-documents/calls_to_action_english2.pdf).Walker,
    Nick. 2017\. “Mapping Indigenous Languages in Canada.” *Canadian Geographic*.
    [https://www.canadiangeographic.ca/article/mapping-indigenous-languages-canada](https://www.canadiangeographic.ca/article/mapping-indigenous-languages-canada).———.
    2020\. *The Tidyverse Style Guide*. [https://style.tidyverse.org/](https://style.tidyverse.org/).———.
    2021b. *tidyverse R package*. [https://tidyverse.tidyverse.org/](https://tidyverse.tidyverse.org/).Wickham,
    Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan,
    Romain François, Garrett Grolemund, et al. 2019\. “Welcome to the tidyverse.”
    *Journal of Open Source Software* 4 (43): 1686.Wilson, Kory. 2018\. *Pulling Together:
    Foundations Guide*. BCcampus. [https://opentextbc.ca/indigenizationfoundations/](https://opentextbc.ca/indigenizationfoundations/).'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 'Leek, Jeffrey, and Roger Peng. 2015\. “What Is the Question?” *Science* 347
    (6228): 1314–15. Peng, Roger D, and Elizabeth Matsui. 2015\. *The Art of Data
    Science: A Guide for Anyone Who Works with Data*. Skybrude Consulting, LLC. [https://bookdown.org/rdpeng/artofdatascience/](https://bookdown.org/rdpeng/artofdatascience/).
    统计加拿大. 2016a. “Population Census.” [https://www12.statcan.gc.ca/census-recensement/2016/dp-pd/index-eng.cfm](https://www12.statcan.gc.ca/census-recensement/2016/dp-pd/index-eng.cfm).
    ——. 2016b. “The Aboriginal Languages of First Nations People, Métis and Inuit.”
    [https://www12.statcan.gc.ca/census-recensement/2016/as-sa/98-200-x/2016022/98-200-x2016022-eng.cfm](https://www12.statcan.gc.ca/census-recensement/2016/as-sa/98-200-x/2016022/98-200-x2016022-eng.cfm).
    ——. 2018\. “The Evolution of Language Populations in Canada, by Mother Tongue,
    from 1901 to 2016.” [https://www150.statcan.gc.ca/n1/pub/11-630-x/11-630-x2018001-eng.htm](https://www150.statcan.gc.ca/n1/pub/11-630-x/11-630-x2018001-eng.htm).
    Timbers, Tiffany. 2020\. *canlang: Canadian Census Language Data*. [https://ttimbers.github.io/canlang/](https://ttimbers.github.io/canlang/).
    加拿大和解委员会. 2012\. *他们来带走孩子：加拿大、原住民和寄宿学校*. 加拿大公共工程与政府服务部. ——. 2015\. *行动呼吁*. [https://www2.gov.bc.ca/assets/gov/british-columbians-our-governments/indigenous-people/aboriginal-peoples-documents/calls_to_action_english2.pdf](https://www2.gov.bc.ca/assets/gov/british-columbians-our-governments/indigenous-people/aboriginal-peoples-documents/calls_to_action_english2.pdf).
    Walker, Nick. 2017\. “Mapping Indigenous Languages in Canada.” *Canadian Geographic*.
    [https://www.canadiangeographic.ca/article/mapping-indigenous-languages-canada](https://www.canadiangeographic.ca/article/mapping-indigenous-languages-canada).
    ——. 2020\. *The Tidyverse Style Guide*. [https://style.tidyverse.org/](https://style.tidyverse.org/).
    ——. 2021b. *tidyverse R package*. [https://tidyverse.tidyverse.org/](https://tidyverse.tidyverse.org/).
    Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino
    McGowan, Romain François, Garrett Grolemund, et al. 2019\. “Welcome to the tidyverse.”
    *Journal of Open Source Software* 4 (43): 1686. Wilson, Kory. 2018\. *Pulling
    Together: Foundations Guide*. BCcampus. [https://opentextbc.ca/indigenizationfoundations/](https://opentextbc.ca/indigenizationfoundations/).'
