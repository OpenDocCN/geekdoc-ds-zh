- en: 'Cloth: Stretching and Bending'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://phys-sim-book.github.io/lec32.1-pbd_cloth_constraints.html](https://phys-sim-book.github.io/lec32.1-pbd_cloth_constraints.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
  prefs: []
  type: TYPE_NORMAL
- en: In the context of Position-Based Dynamics (PBD), the complex mechanical behaviors
    of cloth, such as its resistance to stretching and bending, are modeled through
    a system of geometric constraints. Instead of accumulating forces, the PBD framework
    directly manipulates the positions of the mesh vertices to satisfy these constraints
    in an iterative manner. This section will detail the formulation of fundamental
    constraints for cloth simulation.
  prefs: []
  type: TYPE_NORMAL
- en: '[Stretching Resistance via Distance Constraints](#stretching-resistance-via-distance-constraints)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The primary characteristic of most textiles is their high resistance to stretching.
    In PBD, this property is enforced by constraining the distance between connected
    particles to remain close to its initial, or rest, distance. This is one of the
    simplest yet most crucial constraints in the PBD ecosystem (we have already seen
    this constraint in [Example 32.4.1](lec31.4-solver.html#exp:solver:distance_constraint))
  prefs: []
  type: TYPE_NORMAL
- en: '****Example 33.1.1 (Stretching Constraint).**** Consider two particles, i=1,2,
    with positions p1​ and p2​, masses m1​ and m2​, and a rest distance d between
    them. The stretching constraint function C is defined as the difference between
    the current distance and the rest distance: C(p1​,p2​)=∥p1​−p2​∥−d(33.1.1) The
    goal is to find corrections Δp1​ and Δp2​ such that C(p1​+Δp1​,p2​+Δp2​)=0. The
    gradients of the constraint function with respect to the particle positions are:
    ∇p1​​C=∥p1​−p2​∥p1​−p2​​=nand∇p2​​C=−∥p1​−p2​∥p1​−p2​​=−n where n is the unit
    vector along the axis connecting the two particles. Following the general PBD
    projection formula [(32.4.4)](lec31.4-solver.html#eq:pbd:final_correction), the
    scalar Lagrange multiplier λ is computed as: λ=w1​∥∇p1​​C∥2+w2​∥∇p2​​C∥2C(p1​,p2​)​=w1​+w2​∥p1​−p2​∥−d​
    where wi​=1/mi​ is the inverse mass of particle i. The position corrections are
    then found by moving the particles along their respective gradient directions,
    scaled by their inverse mass and λ: Δp1​=−w1​+w2​w1​​(∥p1​−p2​∥−d)nΔp2​=+w1​+w2​w2​​(∥p1​−p2​∥−d)n
    These corrections, when applied, will move the particles to exactly satisfy the
    rest length. Note that the total correction is distributed between the particles
    based on their inverse mass, ensuring that lighter particles move more than heavier
    ones and that linear momentum is conserved (∑mi​Δpi​=0).'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: To achieve different levels of elasticity, a stiffness parameter k∈[0,1] can
    be introduced by scaling the corrections Δpi​ by k. This allows for materials
    with varying elasticity, from perfectly rigid (k=1) to completely unstiff (k=0).
  prefs: []
  type: TYPE_NORMAL
- en: '[Dihedral Angle Bending Constraints](#dihedral-angle-bending-constraints)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: While stretching constraints maintain the structural integrity of the cloth
    mesh, they do not prevent it from folding unnaturally. Bending resistance, which
    dictates how the cloth wrinkles and drapes, is modeled by constraining the angle
    between adjacent triangles.
  prefs: []
  type: TYPE_NORMAL
- en: The constraint is defined for a pair of triangles (p1​,p3​,p2​) and (p1​,p2​,p4​)
    sharing a common edge (p1​,p2​). The bending resistance is a function of the **dihedral
    angle** ϕ between the two triangles, which is the initial angle between their
    respective normal vectors n1​ and n2​. The constraint aims to restore this angle
    to its rest value, ϕ0​.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/b5baa6b60d5d5623b98a44bc14c1c0a5.png)'
  prefs: []
  type: TYPE_IMG
- en: '**[Bending Constraints]** The provided illustration shows the dihedral angle
    for a pair of triangles in R3.'
  prefs: []
  type: TYPE_NORMAL
- en: 'The constraint function is formulated as: Cbend​(p1​,p2​,p3​,p4​)=arccos(n1​⋅n2​)−ϕ0​(33.1.2)
    where the normals are computed as: n1​n2​​=(p2,1​×p3,1​)/∥p2,1​×p3,1​∥=(p2,1​×p4,1​)/∥p2,1​×p4,1​∥.​
    The gradients of this function with respect to the four vertex positions (p1​,p2​,p3​,p4​)
    are then computed, and the standard PBD projection mechanism is used to derive
    the position corrections. The stiffness of bending is determined using kbend​
    parameter.'
  prefs: []
  type: TYPE_NORMAL
- en: A significant advantage of this formulation is its independence from stretching.
    Because the angle is defined by normalized vectors, the constraint is invariant
    to the lengths of the triangle edges.
  prefs: []
  type: TYPE_NORMAL
- en: '[Isometric Bending](#isometric-bending)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: For surfaces that are nearly inextensible, the isometric bending model [[Bergou
    et al. 2006]](bibliography.html#bergou2006quadratic) can be used. This model provides
    a robust formulation based on the local Hessian of the bending energy.
  prefs: []
  type: TYPE_NORMAL
- en: 'This model considers a stencil for each interior edge e0​ of the mesh, consisting
    of the four vertices of the two triangles adjacent to that edge, labeled p0​,p1​,p2​,p3​.
    The local bending energy for this stencil is defined as a quadratic form: Ebend​(ps​)=21​i,j∈{0,1,2,3}∑​Qij​(pi⊤​pj​)(33.1.3)
    where ps​=(p0​,p1​,p2​,p3​)T is the vector of stencil positions and Q∈R4×4 is
    a constant matrix representing the local Hessian of the bending energy. This matrix
    depends only on the rest geometry of the stencil and can be precomputed. Its entries
    are derived from the cotangents of the angles within the two triangles.'
  prefs: []
  type: TYPE_NORMAL
- en: 'The bending constraint is defined directly from this energy: Cbend​(ps​)=Ebend​(ps​).
    Since the energy is quadratic in the positions, its gradient is linear and straightforward
    to compute: ∂pi​∂Cbend​​=j∈{0,1,2,3}∑​Qij​pj​(33.1.4) This model is particularly
    effective for garment simulation where fabric is expected to deform isometrically
    (i.e., without stretching).'
  prefs: []
  type: TYPE_NORMAL
