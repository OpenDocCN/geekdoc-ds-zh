["```py\nlibrary(babynames)\nlibrary(carData)\nlibrary(datasauRus)\nlibrary(ggmap)\nlibrary(janitor)\nlibrary(knitr)\nlibrary(leaflet)\nlibrary(mapdeck)\nlibrary(maps)\nlibrary(mapproj)\nlibrary(modelsummary)\nlibrary(opendatatoronto)\nlibrary(patchwork)\nlibrary(tidygeocoder)\nlibrary(tidyverse)\nlibrary(tinytable)\nlibrary(troopdata)\nlibrary(shiny)\nlibrary(usethis)\nlibrary(WDI)\n```", "```py\ndatasaurus_dozen\n```", "```py\n# A tibble: 1,846 × 3\n   dataset     x     y\n   <chr>   <dbl> <dbl>\n 1 dino     55.4  97.2\n 2 dino     51.5  96.0\n 3 dino     46.2  94.5\n 4 dino     42.8  91.4\n 5 dino     40.8  88.3\n 6 dino     38.7  84.9\n 7 dino     35.6  79.9\n 8 dino     33.1  77.6\n 9 dino     29.0  74.5\n10 dino     26.2  71.4\n# ℹ 1,836 more rows\n```", "```py\n# Based on: https://juliasilge.com/blog/datasaurus-multiclass/\ndatasaurus_dozen |>\n filter(dataset %in% c(\"dino\", \"star\", \"away\", \"bullseye\")) |>\n summarise(across(c(x, y), list(mean = mean, sd = sd)),\n .by = dataset) |>\n tt() |> \n style_tt(j = 2:5, align = \"r\") |> \n format_tt(digits = 1, num_fmt = \"decimal\") |> \n setNames(c(\"Dataset\", \"x mean\", \"x sd\", \"y mean\", \"y sd\"))\n```", "```py\ndatasaurus_dozen |>\n filter(dataset %in% c(\"dino\", \"star\", \"away\", \"bullseye\")) |>\n ggplot(aes(x = x, y = y, colour = dataset)) +\n geom_point() +\n theme_minimal() +\n facet_wrap(vars(dataset), nrow = 2, ncol = 2) +\n labs(color = \"Dataset\")\n```", "```py\nhead(anscombe)\n```", "```py\n x1 x2 x3 x4   y1   y2    y3   y4\n1 10 10 10  8 8.04 9.14  7.46 6.58\n2  8  8  8  8 6.95 8.14  6.77 5.76\n3 13 13 13  8 7.58 8.74 12.74 7.71\n4  9  9  9  8 8.81 8.77  7.11 8.84\n5 11 11 11  8 8.33 9.26  7.81 8.47\n6 14 14 14  8 9.96 8.10  8.84 7.04\n```", "```py\n# From: https://www.njtierney.com/post/2020/06/01/tidy-anscombe/\n# And the pivot_longer() vignette.\n\ntidy_anscombe <-\n anscombe |>\n pivot_longer(\n everything(),\n names_to = c(\".value\", \"set\"),\n names_pattern = \"(.)(.)\"\n )\n```", "```py\ntidy_anscombe |>\n summarise(\n across(c(x, y), list(mean = mean, sd = sd)),\n .by = set\n ) |>\n tt() |> \n style_tt(j = 2:5, align = \"r\") |> \n format_tt(digits = 1, num_fmt = \"decimal\") |> \n setNames(c(\"Dataset\", \"x mean\", \"x sd\", \"y mean\", \"y sd\"))\n```", "```py\ntidy_anscombe |>\n ggplot(aes(x = x, y = y, colour = set)) +\n geom_point() +\n geom_smooth(method = lm, se = FALSE) +\n theme_minimal() +\n facet_wrap(vars(set), nrow = 2, ncol = 2) +\n labs(colour = \"Dataset\") +\n theme(legend.position = \"bottom\")\n```", "```py\nbeps <- \n BEPS |> \n as_tibble() |> \n clean_names() |> \n select(age, vote, gender, political_knowledge)\n```", "```py\nbeps <-\n beps |>\n mutate(\n age_group =\n case_when(\n age < 35 ~ \"<35\",\n age < 50 ~ \"35-49\",\n age < 65 ~ \"50-64\",\n age < 80 ~ \"65-79\",\n age < 100 ~ \"80-99\"\n ),\n age_group = \n factor(age_group, levels = c(\"<35\", \"35-49\", \"50-64\", \"65-79\", \"80-99\"))\n )\n```", "```py\nbeps |>\n ggplot(mapping = aes(x = age_group)) +\n geom_bar() +\n theme_minimal() +\n labs(x = \"Age group\", y = \"Number of observations\")\n\nbeps |> \n count(age_group) |> \n ggplot(mapping = aes(x = age_group, y = n)) +\n geom_col() +\n theme_minimal() +\n labs(x = \"Age group\", y = \"Number of observations\")\n```", "```py\nbeps |>\n ggplot(mapping = aes(x = age_group, fill = vote)) +\n geom_bar() +\n labs(x = \"Age group\", y = \"Number of observations\", fill = \"Vote\") +\n theme(legend.position = \"bottom\")\n\nbeps |>\n ggplot(mapping = aes(x = age_group, fill = vote)) +\n geom_bar(position = \"dodge2\") +\n labs(x = \"Age group\", y = \"Number of observations\", fill = \"Vote\") +\n theme(legend.position = \"bottom\")\n```", "```py\ntheme_bw <-\n beps |>\n ggplot(mapping = aes(x = age_group)) +\n geom_bar(position = \"dodge\") +\n theme_bw()\n\ntheme_classic <-\n beps |>\n ggplot(mapping = aes(x = age_group)) +\n geom_bar(position = \"dodge\") +\n theme_classic()\n\ntheme_dark <-\n beps |>\n ggplot(mapping = aes(x = age_group)) +\n geom_bar(position = \"dodge\") +\n theme_dark()\n\ntheme_minimal <-\n beps |>\n ggplot(mapping = aes(x = age_group)) +\n geom_bar(position = \"dodge\") +\n theme_minimal()\n\n(theme_bw + theme_classic) / (theme_dark + theme_minimal)\n```", "```py\nbeps |>\n ggplot(mapping = aes(x = age_group, fill = gender)) +\n geom_bar() +\n theme_minimal() +\n labs(\n x = \"Age-group of respondent\",\n y = \"Number of respondents\",\n fill = \"Gender\"\n ) +\n facet_wrap(vars(vote)) +\n guides(x = guide_axis(angle = 90)) +\n theme(legend.position = \"bottom\")\n```", "```py\nbeps |>\n ggplot(mapping = aes(x = age_group, fill = gender)) +\n geom_bar() +\n theme_minimal() +\n labs(\n x = \"Age-group of respondent\",\n y = \"Number of respondents\",\n fill = \"Gender\"\n ) +\n facet_wrap(vars(vote), scales = \"free\") +\n guides(x = guide_axis(angle = 90)) +\n theme(legend.position = \"bottom\")\n```", "```py\nnew_labels <- \n c(\"0\" = \"No knowledge\", \"1\" = \"Low knowledge\",\n \"2\" = \"Moderate knowledge\", \"3\" = \"High knowledge\")\n\nbeps |>\n ggplot(mapping = aes(x = age_group, fill = vote)) +\n geom_bar() +\n theme_minimal() +\n labs(\n x = \"Age-group of respondent\",\n y = \"Number of respondents\",\n fill = \"Voted for\"\n ) +\n facet_wrap(\n vars(political_knowledge),\n scales = \"free\",\n labeller = labeller(political_knowledge = new_labels)\n ) +\n guides(x = guide_axis(angle = 90)) +\n theme(legend.position = \"bottom\")\n```", "```py\n# Panel (a)\nbeps |>\n ggplot(mapping = aes(x = age_group, fill = vote)) +\n geom_bar() +\n theme_minimal() +\n labs(x = \"Age-group\", y = \"Number\", fill = \"Voted for\") +\n theme(legend.position = \"bottom\") +\n scale_fill_brewer(palette = \"Blues\")\n\n# Panel (b)\nbeps |>\n ggplot(mapping = aes(x = age_group, fill = vote)) +\n geom_bar() +\n theme_minimal() +\n labs(x = \"Age-group\", y = \"Number\", fill = \"Voted for\") +\n theme(legend.position = \"bottom\") +\n scale_fill_brewer(palette = \"Set1\")\n\n# Panel (c)\nbeps |>\n ggplot(mapping = aes(x = age_group, fill = vote)) +\n geom_bar() +\n theme_minimal() +\n labs(x = \"Age-group\", y = \"Number\", fill = \"Voted for\") +\n theme(legend.position = \"bottom\") +\n scale_fill_viridis_d()\n\n# Panel (d)\nbeps |>\n ggplot(mapping = aes(x = age_group, fill = vote)) +\n geom_bar() +\n theme_minimal() +\n labs(x = \"Age-group\", y = \"Number\", fill = \"Voted for\") +\n theme(legend.position = \"bottom\") +\n scale_fill_viridis_d(option = \"magma\")\n```", "```py\nWDIsearch(\"gdp growth\")\nWDIsearch(\"inflation\")\nWDIsearch(\"population, total\")\nWDIsearch(\"Unemployment, total\")\n```", "```py\nworld_bank_data <-\n WDI(\n indicator =\n c(\"FP.CPI.TOTL.ZG\", \"NY.GDP.MKTP.KD.ZG\", \"SP.POP.TOTL\",\"SL.UEM.TOTL.NE.ZS\"),\n country = c(\"AU\", \"ET\", \"IN\", \"US\")\n )\n```", "```py\nworld_bank_data <-\n world_bank_data |>\n rename(\n inflation = FP.CPI.TOTL.ZG,\n gdp_growth = NY.GDP.MKTP.KD.ZG,\n population = SP.POP.TOTL,\n unem_rate = SL.UEM.TOTL.NE.ZS\n ) |>\n select(country, year, inflation, gdp_growth, population, unem_rate)\n\nhead(world_bank_data)\n```", "```py\n# A tibble: 6 × 6\n  country    year inflation gdp_growth population unem_rate\n  <chr>     <dbl>     <dbl>      <dbl>      <dbl>     <dbl>\n1 Australia  1960     3.73       NA      10276477        NA\n2 Australia  1961     2.29        2.48   10483000        NA\n3 Australia  1962    -0.319       1.29   10742000        NA\n4 Australia  1963     0.641       6.22   10950000        NA\n5 Australia  1964     2.87        6.98   11167000        NA\n6 Australia  1965     3.41        5.98   11388000        NA\n```", "```py\n# Panel (a)\nworld_bank_data |>\n ggplot(mapping = aes(x = gdp_growth, y = inflation, color = country)) +\n geom_point()\n\n# Panel (b)\nworld_bank_data |>\n ggplot(mapping = aes(x = gdp_growth, y = inflation, color = country)) +\n geom_point() +\n theme_minimal() +\n labs(x = \"GDP growth\", y = \"Inflation\", color = \"Country\")\n```", "```py\n# Panel (a)\nworld_bank_data |>\n ggplot(aes(x = gdp_growth, y = inflation, color = country)) +\n geom_point() +\n theme_minimal() +\n labs(x = \"GDP growth\", y = \"Inflation\", color = \"Country\") +\n theme(legend.position = \"bottom\") +\n scale_color_brewer(palette = \"Blues\")\n\n# Panel (b)\nworld_bank_data |>\n ggplot(aes(x = gdp_growth, y = inflation, color = country)) +\n geom_point() +\n theme_minimal() +\n labs(x = \"GDP growth\",  y = \"Inflation\", color = \"Country\") +\n theme(legend.position = \"bottom\") +\n scale_color_brewer(palette = \"Set1\")\n\n# Panel (c)\nworld_bank_data |>\n ggplot(aes(x = gdp_growth, y = inflation, color = country)) +\n geom_point() +\n theme_minimal() +\n labs(x = \"GDP growth\",  y = \"Inflation\", color = \"Country\") +\n theme(legend.position = \"bottom\") +\n scale_colour_viridis_d()\n\n# Panel (d)\nworld_bank_data |>\n ggplot(aes(x = gdp_growth, y = inflation, color = country)) +\n geom_point() +\n theme_minimal() +\n labs(x = \"GDP growth\",  y = \"Inflation\", color = \"Country\") +\n theme(legend.position = \"bottom\") +\n scale_colour_viridis_d(option = \"magma\")\n```", "```py\nset.seed(853)\n\n# Panel (a)\nworld_bank_data |>\n ggplot(aes(x = gdp_growth, y = inflation, color = country )) +\n geom_point(alpha = 0.5) +\n theme_minimal() +\n labs(x = \"GDP growth\", y = \"Inflation\", color = \"Country\")\n\n# Panel (b)\nworld_bank_data |>\n ggplot(aes(x = gdp_growth, y = inflation, color = country)) +\n geom_jitter(width = 1, height = 1) +\n theme_minimal() +\n labs(x = \"GDP growth\", y = \"Inflation\", color = \"Country\")\n```", "```py\n# Panel (a)\nworld_bank_data |>\n ggplot(aes(x = gdp_growth, y = inflation, color = country)) +\n geom_jitter() +\n geom_smooth() +\n theme_minimal() +\n labs(x = \"GDP growth\", y = \"Inflation\", color = \"Country\")\n\n# Panel (b)\nworld_bank_data |>\n ggplot(aes(x = gdp_growth, y = inflation, color = country)) +\n geom_jitter() +\n geom_smooth(method = lm, se = FALSE) +\n theme_minimal() +\n labs(x = \"GDP growth\", y = \"Inflation\", color = \"Country\")\n\n# Panel (c)\nworld_bank_data |>\n ggplot(aes(x = gdp_growth, y = inflation, color = country)) +\n geom_jitter() +\n geom_smooth(method = lm, color = \"black\", se = FALSE) +\n theme_minimal() +\n labs(x = \"GDP growth\", y = \"Inflation\", color = \"Country\")\n```", "```py\n# Panel (a)\nworld_bank_data |>\n filter(country == \"United States\") |>\n ggplot(mapping = aes(x = year, y = gdp_growth)) +\n geom_line() +\n theme_minimal() +\n labs(x = \"Year\", y = \"GDP growth\", caption = \"Data source: World Bank.\")\n\n# Panel (b)\nworld_bank_data |>\n filter(country == \"United States\") |>\n ggplot(mapping = aes(x = year, y = gdp_growth)) +\n geom_step() +\n theme_minimal() +\n labs(x = \"Year\",y = \"GDP growth\", caption = \"Data source: World Bank.\")\n```", "```py\nworld_bank_data |>\n filter(country == \"United States\") |>\n select(-population, -gdp_growth) |>\n pivot_longer(\n cols = c(\"inflation\", \"unem_rate\"),\n names_to = \"series\",\n values_to = \"value\"\n ) |>\n ggplot(mapping = aes(x = year, y = value, color = series)) +\n geom_line() +\n theme_minimal() +\n labs(\n x = \"Year\", y = \"Value\", color = \"Economic indicator\",\n caption = \"Data source: World Bank.\"\n ) +\n scale_color_brewer(palette = \"Set1\", labels = c(\"Inflation\", \"Unemployment\")) +\n theme(legend.position = \"bottom\")\n\nworld_bank_data |>\n filter(country == \"United States\") |>\n ggplot(mapping = aes(x = unem_rate, y = inflation)) +\n geom_path() +\n theme_minimal() +\n labs(\n x = \"Unemployment rate\", y = \"Inflation\",\n caption = \"Data source: World Bank.\"\n )\n```", "```py\nworld_bank_data |>\n filter(country == \"Ethiopia\") |>\n ggplot(aes(x = gdp_growth)) +\n geom_histogram() +\n theme_minimal() +\n labs(\n x = \"GDP growth\",\n y = \"Number of occurrences\",\n caption = \"Data source: World Bank.\"\n )\n```", "```py\n# Panel (a)\nworld_bank_data |>\n filter(country == \"Ethiopia\") |>\n ggplot(aes(x = gdp_growth)) +\n geom_histogram(bins = 5) +\n theme_minimal() +\n labs(\n x = \"GDP growth\",\n y = \"Number of occurrences\"\n )\n\n# Panel (b)\nworld_bank_data |>\n filter(country == \"Ethiopia\") |>\n ggplot(aes(x = gdp_growth)) +\n geom_histogram(bins = 20) +\n theme_minimal() +\n labs(\n x = \"GDP growth\",\n y = \"Number of occurrences\"\n )\n\n# Panel (c)\nworld_bank_data |>\n filter(country == \"Ethiopia\") |>\n ggplot(aes(x = gdp_growth)) +\n geom_histogram(binwidth = 2) +\n theme_minimal() +\n labs(\n x = \"GDP growth\",\n y = \"Number of occurrences\"\n )\n\n# Panel (d)\nworld_bank_data |>\n filter(country == \"Ethiopia\") |>\n ggplot(aes(x = gdp_growth)) +\n geom_histogram(binwidth = 5) +\n theme_minimal() +\n labs(\n x = \"GDP growth\",\n y = \"Number of occurrences\"\n )\n```", "```py\n# Panel (a)\nworld_bank_data |>\n ggplot(aes(x = gdp_growth, color = country)) +\n geom_freqpoly() +\n theme_minimal() +\n labs(\n x = \"GDP growth\", y = \"Number of occurrences\",\n color = \"Country\",\n caption = \"Data source: World Bank.\"\n ) +\n scale_color_brewer(palette = \"Set1\")\n\n# Panel (b)\nworld_bank_data |>\n ggplot(aes(x = gdp_growth, group = country, fill = country)) +\n geom_dotplot(method = \"histodot\") +\n theme_minimal() +\n labs(\n x = \"GDP growth\", y = \"Number of occurrences\",\n fill = \"Country\",\n caption = \"Data source: World Bank.\"\n ) +\n scale_color_brewer(palette = \"Set1\")\n\n# Panel (c)\nworld_bank_data |>\n filter(country %in% c(\"India\", \"United States\")) |>\n ggplot(mapping = aes(x = gdp_growth, fill = country)) +\n geom_histogram(alpha = 0.5, position = \"identity\") +\n theme_minimal() +\n labs(\n x = \"GDP growth\", y = \"Number of occurrences\",\n fill = \"Country\",\n caption = \"Data source: World Bank.\"\n ) +\n scale_color_brewer(palette = \"Set1\")\n```", "```py\nworld_bank_data |>\n ggplot(mapping = aes(x = gdp_growth, color = country)) +\n stat_ecdf(geom = \"point\") +\n theme_minimal() +\n labs(\n x = \"GDP growth\", y = \"Proportion\", color = \"Country\",\n caption = \"Data source: World Bank.\"\n ) + \n theme(legend.position = \"bottom\")\n```", "```py\nset.seed(853)\n\nnumber_of_draws <- 10000\n\nboth_left_and_right_skew <-\n c(\n rbeta(number_of_draws / 2, 5, 2),\n rbeta(number_of_draws / 2, 2, 5)\n )\n\nno_skew <-\n rbeta(number_of_draws, 1, 1)\n\nbeta_distributions <-\n tibble(\n observation = c(both_left_and_right_skew, no_skew),\n source = c(\n rep(\"Left and right skew\", number_of_draws),\n rep(\"No skew\", number_of_draws)\n )\n )\n```", "```py\nbeta_distributions |>\n ggplot(aes(x = source, y = observation)) +\n geom_boxplot() +\n theme_classic()\n\nbeta_distributions |>\n ggplot(aes(x = observation, color = source)) +\n geom_freqpoly(binwidth = 0.05) +\n theme_classic() +\n theme(legend.position = \"bottom\")\n```", "```py\nworld_bank_data |>\n ggplot(mapping = aes(x = country, y = inflation)) +\n geom_boxplot() +\n geom_jitter(alpha = 0.3, width = 0.15, height = 0) +\n theme_minimal() +\n labs(\n x = \"Country\",\n y = \"Inflation\",\n caption = \"Data source: World Bank.\"\n )\n```", "```py\ntop_five_names_by_year <-\n babynames |>\n arrange(desc(n)) |>\n slice_head(n = 5, by = c(year, sex))\n\ntop_five_names_by_year |>\n ggplot(aes(x = n, fill = sex)) +\n geom_histogram(position = \"dodge\") +\n theme_minimal() +\n scale_fill_brewer(palette = \"Set1\") +\n labs(\n x = \"Babies with that name\",\n y = \"Occurrences\",\n fill = \"Sex\"\n )\n```", "```py\nlibrary(shiny)\n\n# Define UI for application that draws a histogram\nui <- fluidPage(\n # Application title\n titlePanel(\"Count of names for five most popular names each year.\"),\n\n # Sidebar with a slider input for number of bins\n sidebarLayout(\n sidebarPanel(\n sliderInput(\n inputId = \"number_of_bins\",\n label = \"Number of bins:\",\n min = 1,\n max = 50,\n value = 30\n )\n ),\n\n # Show a plot of the generated distribution\n mainPanel(plotOutput(\"distPlot\"))\n )\n)\n\n# Define server logic required to draw a histogram\nserver <- function(input, output) {\n output$distPlot <- renderPlot({\n # Draw the histogram with the specified number of bins\n top_five_names_by_year |>\n ggplot(aes(x = n, fill = sex)) +\n geom_histogram(position = \"dodge\", bins = input$number_of_bins) +\n theme_minimal() +\n scale_fill_brewer(palette = \"Set1\") +\n labs(\n x = \"Babies with that name\",\n y = \"Occurrences\",\n fill = \"Sex\"\n )\n })\n}\n\n# Run the application\nshinyApp(ui = ui, server = server)\n```", "```py\nworld_bank_data <- \n world_bank_data |> \n select(-unem_rate)\n```", "```py\nworld_bank_data |>\n slice(1:10) |>\n tt()\n```", "```py\n```", "```py\n```", "```py\nworld_bank_data |>\n slice(1:10) |>\n mutate(year = as.factor(year)) |>\n tt() |> \n style_tt(j = 1:5, align = \"lccrr\") |> \n format_tt(digits = 1, num_mark_big = \",\", num_fmt = \"decimal\") |> \n setNames(c(\"Country\", \"Year\", \"Inflation\", \"GDP growth\", \"Population\"))\n```", "```py\nworld_bank_data |>\n select(-population) |> \n datasummary_skim(histogram = FALSE)\n```", "```py\nworld_bank_data |>\n datasummary_skim(type = \"categorical\")\n```", "```py\nworld_bank_data |>\n datasummary_correlation()\n```", "```py\ndatasummary_balance(\n formula = ~country,\n data = world_bank_data |> \n filter(country %in% c(\"Australia\", \"Ethiopia\")),\n dinm = FALSE,\n notes = \"Data source: World Bank.\"\n)\n```", "```py\nfirst_model <- lm(\n formula = gdp_growth ~ inflation,\n data = world_bank_data\n)\n\nsecond_model <- lm(\n formula = gdp_growth ~ inflation + country,\n data = world_bank_data\n)\n\nthird_model <- lm(\n formula = gdp_growth ~ inflation + country + population,\n data = world_bank_data\n)\n\nmodelsummary(list(first_model, second_model, third_model))\n```", "```py\nmodelsummary(\n list(first_model, second_model, third_model),\n fmt = 1\n)\n```", "```py\nfrance <- map_data(map = \"france\")\n\nhead(france)\n```", "```py\n long      lat group order region subregion\n1 2.557093 51.09752     1     1   Nord      <NA>\n2 2.579995 51.00298     1     2   Nord      <NA>\n3 2.609101 50.98545     1     3   Nord      <NA>\n4 2.630782 50.95073     1     4   Nord      <NA>\n5 2.625894 50.94116     1     5   Nord      <NA>\n6 2.597699 50.91967     1     6   Nord      <NA>\n```", "```py\nfrench_cities <-\n world.cities |>\n filter(country.etc == \"France\")\n\nhead(french_cities)\n```", "```py\n name country.etc    pop   lat long capital\n1       Abbeville      France  26656 50.12 1.83       0\n2         Acheres      France  23219 48.97 2.06       0\n3            Agde      France  23477 43.33 3.46       0\n4            Agen      France  34742 44.20 0.62       0\n5 Aire-sur-la-Lys      France  10470 50.64 2.39       0\n6 Aix-en-Provence      France 148622 43.53 5.44       0\n```", "```py\nggplot() +\n geom_polygon(\n data = france,\n aes(x = long, y = lat, group = group),\n fill = \"white\",\n colour = \"grey\"\n ) +\n coord_map() +\n geom_point(\n aes(x = french_cities$long, y = french_cities$lat),\n alpha = 0.3,\n color = \"black\"\n ) +\n theme_minimal() +\n labs(x = \"Longitude\", y = \"Latitude\")\n```", "```py\nbbox <- c(left = 148.95, bottom = -35.5, right = 149.3, top = -35.1)\n```", "```py\ncanberra_stamen_map <- get_stadiamap(bbox, zoom = 11, maptype = \"stamen_toner_lite\")\n\nggmap(canberra_stamen_map)\n```", "```py\nbooths <-\n read_csv(\n \"https://results.aec.gov.au/24310/Website/Downloads/GeneralPollingPlacesDownload-24310.csv\",\n skip = 1,\n guess_max = 10000\n )\n```", "```py\nbooths_reduced <-\n booths |>\n filter(State == \"ACT\") |>\n select(PollingPlaceID, DivisionNm, Latitude, Longitude) |>\n filter(!is.na(Longitude)) |> # Remove rows without geography\n filter(Longitude < 165) # Remove Norfolk Island\n```", "```py\nggmap(canberra_stamen_map, extent = \"normal\", maprange = FALSE) +\n geom_point(data = booths_reduced,\n aes(x = Longitude, y = Latitude, colour = DivisionNm),\n alpha = 0.7) +\n scale_color_brewer(name = \"2019 Division\", palette = \"Set1\") +\n coord_map(\n projection = \"mercator\",\n xlim = c(attr(map, \"bb\")$ll.lon, attr(map, \"bb\")$ur.lon),\n ylim = c(attr(map, \"bb\")$ll.lat, attr(map, \"bb\")$ur.lat)\n ) +\n labs(x = \"Longitude\",\n y = \"Latitude\") +\n theme_minimal() +\n theme(panel.grid.major = element_blank(),\n panel.grid.minor = element_blank())\n```", "```py\nggsave(\"map.pdf\", width = 20, height = 10, units = \"cm\")\n```", "```py\nbases <- get_basedata()\n\nhead(bases)\n```", "```py\n# A tibble: 6 × 9\n  countryname ccode iso3c basename            lat   lon  base lilypad fundedsite\n  <chr>       <dbl> <chr> <chr>             <dbl> <dbl> <dbl>   <dbl>      <dbl>\n1 Afghanistan   700 AFG   Bagram AB          34.9  69.3     1       0          0\n2 Afghanistan   700 AFG   Kandahar Airfield  31.5  65.8     1       0          0\n3 Afghanistan   700 AFG   Mazar-e-Sharif     36.7  67.2     1       0          0\n4 Afghanistan   700 AFG   Gardez             33.6  69.2     1       0          0\n5 Afghanistan   700 AFG   Kabul              34.5  69.2     1       0          0\n6 Afghanistan   700 AFG   Herat              34.3  62.2     1       0          0\n```", "```py\n# Use: https://data.humdata.org/dataset/bounding-boxes-for-countries\nbbox_germany <- c(left = 5.867, bottom = 45.967, right = 15.033, top = 55.133)\n\nbbox_japan <- c(left = 127, bottom = 30, right = 146, top = 45)\n\nbbox_australia <- c(left = 112.467, bottom = -45, right = 155, top = -9.133)\n```", "```py\ngerman_stamen_map <- get_stadiamap(bbox_germany, zoom = 6, maptype = \"stamen_toner_lite\")\n\njapan_stamen_map <- get_stadiamap(bbox_japan, zoom = 6, maptype = \"stamen_toner_lite\")\n\naus_stamen_map <- get_stadiamap(bbox_australia, zoom = 5, maptype = \"stamen_toner_lite\")\n```", "```py\nggmap(german_stamen_map) +\n geom_point(data = bases, aes(x = lon, y = lat)) +\n labs(x = \"Longitude\",\n y = \"Latitude\") +\n theme_minimal()\n\nggmap(japan_stamen_map) +\n geom_point(data = bases, aes(x = lon, y = lat)) +\n labs(x = \"Longitude\",\n y = \"Latitude\") +\n theme_minimal()\n\nggmap(aus_stamen_map) +\n geom_point(data = bases, aes(x = lon, y = lat)) +\n labs(x = \"Longitude\",\n y = \"Latitude\") +\n theme_minimal()\n```", "```py\nplace_names <-\n tibble(\n city = c(\"Sydney\", \"Toronto\", \"Accra\", \"Guayaquil\"),\n country = c(\"Australia\", \"Canada\", \"Ghana\", \"Ecuador\")\n )\n\nplace_names\n```", "```py\n# A tibble: 4 × 2\n  city      country  \n  <chr>     <chr>    \n1 Sydney    Australia\n2 Toronto   Canada   \n3 Accra     Ghana    \n4 Guayaquil Ecuador \n```", "```py\nplace_names <-\n geo(\n city = place_names$city,\n country = place_names$country,\n method = \"osm\"\n )\n\nplace_names\n```", "```py\n# A tibble: 4 × 4\n  city      country      lat    long\n  <chr>     <chr>      <dbl>   <dbl>\n1 Sydney    Australia -33.9  151\\.   \n2 Toronto   Canada     43.7  -79.4  \n3 Accra     Ghana       5.56  -0.201\n4 Guayaquil Ecuador    -2.19 -79.9 \n```", "```py\nworld <- map_data(map = \"world\")\n\nggplot() +\n geom_polygon(\n data = world,\n aes(x = long, y = lat, group = group),\n fill = \"white\",\n colour = \"grey\"\n ) +\n geom_point(\n aes(x = place_names$long, y = place_names$lat),\n color = \"black\") +\n geom_text(\n aes(x = place_names$long, y = place_names$lat, label = place_names$city),\n nudge_y = -5) +\n theme_minimal() +\n labs(x = \"Longitude\",\n y = \"Latitude\")\n```", "```py\nbases <- get_basedata()\n\n# Some of the bases include unexpected characters which we need to address\nEncoding(bases$basename) <- \"latin1\"\n\nleaflet(data = bases) |>\n addTiles() |> # Add default OpenStreetMap map tiles\n addMarkers(\n lng = bases$lon,\n lat = bases$lat,\n popup = bases$basename,\n label = bases$countryname\n )\n```", "```py\nbuild <-\n get_builddata(startyear = 2008, endyear = 2019) |>\n filter(!is.na(lon)) |>\n mutate(\n cost = case_when(\n spend_construction > 100000 ~ \"More than $100,000,000\",\n spend_construction > 10000 ~ \"More than $10,000,000\",\n spend_construction > 1000 ~ \"More than $1,000,000\",\n TRUE ~ \"$1,000,000 or less\"\n )\n )\n\npal <-\n colorFactor(\"Dark2\", domain = build$cost |> unique())\n\nleaflet() |>\n addTiles() |> # Add default OpenStreetMap map tiles\n addCircleMarkers(\n data = build,\n lng = build$lon,\n lat = build$lat,\n color = pal(build$cost),\n popup = paste(\n \"<b>Location:</b>\",\n as.character(build$location),\n \"<br>\",\n \"<b>Amount:</b>\",\n as.character(build$spend_construction),\n \"<br>\"\n )\n ) |>\n addLegend(\n \"bottomright\",\n pal = pal,\n values = build$cost |> unique(),\n title = \"Type\",\n opacity = 1\n )\n```", "```py\nMAPBOX_TOKEN <- \"PUT_YOUR_MAPBOX_SECRET_HERE\"\n```", "```py\nmapdeck(style = mapdeck_style(\"light\")) |>\n add_scatterplot(\n data = build,\n lat = \"lat\",\n lon = \"lon\",\n layer_id = \"scatter_layer\",\n radius = 10,\n radius_min_pixels = 5,\n radius_max_pixels = 100,\n tooltip = \"location\"\n )\n```", "```py\ndatasaurus_dozen |> \n filter(dataset == \"v_lines\") |> \n ggplot(aes(x=x, y=y)) + \n geom_point()\n```", "```py\nbeps |>\n ggplot(mapping = aes(x = age, fill = vote)) +\n geom_bar() +\n theme_minimal() +\n labs(x = \"Age of respondent\", y = \"Number of respondents\")\n```", "```py\nbeps |> \n ggplot(mapping = aes(x = age, fill = vote)) + \n geom_bar()\n```", "```py\ntibble(year = 1875:1972,\n level = as.numeric(datasets::LakeHuron)) |>\n ggplot(aes(x = year, y = level)) +\n geom_point()\n```", "```py\ndatasets::trees |> \n as_tibble() |> \n ggplot(aes(x = Height)) +\n geom_bar()\n```", "```py\ndatasets::ChickWeight |> \n as_tibble() |> \n ggplot(aes(x = Time, y = weight, group = Chick)) +\n geom_line()\n```", "```py\ntibble(year = 1700:1988,\n sunspots = as.numeric(datasets::sunspot.year) |> round(0)) |>\n ggplot(aes(x = sunspots)) +\n geom_histogram()\n```", "```py\nggplot(data = penguins,\n aes(x = flipper_length_mm,\n y = body_mass_g)) +\n geom_point(aes(color = species,\n shape = species),\n size = 3,\n alpha = 0.8) +\n scale_color_manual(values = c(\"darkorange\", \"purple\", \"cyan4\")) +\n labs(\n title = \"Penguin size, Palmer Station LTER\",\n subtitle = \"Flipper length and body mass for Adelie, Chinstrap and Gentoo Penguins\",\n x = \"Flipper length (mm)\",\n y = \"Body mass (g)\",\n color = \"Penguin species\",\n shape = \"Penguin species\"\n ) +\n theme_minimal() +\n theme(\n legend.position = c(0.2, 0.7),\n plot.title.position = \"plot\",\n plot.caption = element_text(hjust = 0, face = \"italic\"),\n plot.caption.position = \"plot\"\n )\n```", "```py\ndatasets::morley |> \n tibble()\n```"]