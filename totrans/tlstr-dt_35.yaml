- en: Online Appendix A — R essentials
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在线附录A — R基础知识
- en: 原文：[https://tellingstorieswithdata.com/20-r_essentials.html](https://tellingstorieswithdata.com/20-r_essentials.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://tellingstorieswithdata.com/20-r_essentials.html](https://tellingstorieswithdata.com/20-r_essentials.html)
- en: '[Appendices](./20-r_essentials.html)'
  id: totrans-2
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[附录](./20-r_essentials.html)'
- en: '[A  R essentials](./20-r_essentials.html)'
  id: totrans-3
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[R 基础知识](./20-r_essentials.html)'
- en: '**Prerequisites**'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '**先决条件**'
- en: Read *R for Data Science*, Chapter 4 “Data transformation”, ([Wickham, Çetinkaya-Rundel,
    and Grolemund [2016] 2023](99-references.html#ref-r4ds))
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读 *R for Data Science*，第4章“数据转换”，([Wickham, Çetinkaya-Rundel, and Grolemund
    [2016] 2023](99-references.html#ref-r4ds))
- en: Provides an overview of manipulating datasets using `dplyr`.
  id: totrans-6
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍了使用 `dplyr` 操作数据集的概述。
- en: Read *Data Feminism*, Chapter 6 “The Numbers Don’t Speak for Themselves”, ([D’Ignazio
    and Klein 2020](99-references.html#ref-datafeminism2020))
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读 *Data Feminism*，第6章“数字并不代表一切”，([D’Ignazio and Klein 2020](99-references.html#ref-datafeminism2020))
- en: Discusses the need to consider data within the broader context that generated
    them.
  id: totrans-8
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 讨论了考虑数据在其生成的大背景中的必要性。
- en: Read *R Generation*, ([Thieme 2018](99-references.html#ref-Thieme2018))
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读 *R Generation* ([Thieme 2018](99-references.html#ref-Thieme2018))
- en: Provides background information about `R`.
  id: totrans-10
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供了关于 `R` 的背景信息。
- en: '**Key concepts and skills**'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念和技能**'
- en: Understanding foundational aspects of `R` and RStudio enables a gradual improvement
    of workflows. For instance, being able to use key `dplyr` verbs and make graphs
    with `ggplot2` makes manipulating and understanding datasets easier.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解 `R` 和 RStudio 的基础方面能够逐步改进工作流程。例如，能够使用关键的 `dplyr` 动词和用 `ggplot2` 绘图使得操作和理解数据集变得更加容易。
- en: But there is an awful lot of functionality in the `tidyverse` including importing
    data, dataset manipulation, string manipulation, and factors. You do not need
    to know it all at once, but you should know that you do not yet know it.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 但是 `tidyverse` 中包含的功能非常多，包括导入数据、数据集操作、字符串操作和因子。你不必一开始就全部了解，但你应该知道你还没有全部了解。
- en: Beyond the `tidyverse` it is also important to know that foundational aspects,
    common to many languages, exist and can be added to data science workflows. For
    instance, class, functions, and data simulation all have an important role to
    play.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 除了 `tidyverse`，还重要的是要知道许多语言共有的基础方面存在，并且可以添加到数据科学工作流程中。例如，类、函数和数据模拟都扮演着重要的角色。
- en: '**Software and packages**'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '**软件和包**'
- en: Base `R`
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基础 `R`
- en: Core `tidyverse` ([Wickham et al. 2019](99-references.html#ref-tidyverse))
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 核心tidyverse ([Wickham et al. 2019](99-references.html#ref-tidyverse))
- en: '`dplyr` ([Wickham et al. 2022](99-references.html#ref-citedplyr))'
  id: totrans-18
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dplyr` ([Wickham et al. 2022](99-references.html#ref-citedplyr))'
- en: '`forcats` ([Wickham 2023](99-references.html#ref-citeforcats))'
  id: totrans-19
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`forcats` ([Wickham 2023](99-references.html#ref-citeforcats))'
- en: '`ggplot2` ([Wickham 2016](99-references.html#ref-citeggplot))'
  id: totrans-20
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ggplot2` ([Wickham 2016](99-references.html#ref-citeggplot))'
- en: '`readr` ([Wickham, Hester, and Bryan 2022](99-references.html#ref-citereadr))'
  id: totrans-21
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`readr` ([Wickham, Hester, and Bryan 2022](99-references.html#ref-citereadr))'
- en: '`stringr` ([Wickham 2022](99-references.html#ref-citestringr))'
  id: totrans-22
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`stringr` ([Wickham 2022](99-references.html#ref-citestringr))'
- en: '`tibble` ([Müller and Wickham 2022](99-references.html#ref-tibble))'
  id: totrans-23
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tibble` ([Müller and Wickham 2022](99-references.html#ref-tibble))'
- en: '`tidyr` ([Wickham, Vaughan, and Girlich 2023](99-references.html#ref-citetidyr))'
  id: totrans-24
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tidyr` ([Wickham, Vaughan, and Girlich 2023](99-references.html#ref-citetidyr))'
- en: Outer `tidyverse` ([Wickham et al. 2019](99-references.html#ref-tidyverse))
    (these need to be loaded separately e.g. `library("haven")`)
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 外部 `tidyverse` ([Wickham et al. 2019](99-references.html#ref-tidyverse))（这些需要单独加载，例如
    `library("haven")`）
- en: '`haven` ([Wickham, Miller, and Smith 2023](99-references.html#ref-citehaven))'
  id: totrans-26
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`haven` ([Wickham, Miller, and Smith 2023](99-references.html#ref-citehaven))'
- en: '`lubridate` ([Grolemund and Wickham 2011](99-references.html#ref-GrolemundWickham2011))'
  id: totrans-27
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`lubridate` ([Grolemund and Wickham 2011](99-references.html#ref-GrolemundWickham2011))'
- en: '`janitor` ([Firke 2023](99-references.html#ref-janitor))'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`janitor` ([Firke 2023](99-references.html#ref-janitor))'
- en: A.1 Introduction
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.1 简介
- en: In this chapter we focus on foundational skills needed to use the statistical
    programming language `R` ([R Core Team 2024](99-references.html#ref-citeR)) to
    tell stories with data. Some of it may not make sense at first, but these are
    skills and approaches that we will often use. You should initially go through
    this chapter quickly, noting aspects that you do not understand. Then come back
    to this chapter from time to time as you continue through the rest of the book.
    That way you will see how the various bits fit into context.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们关注使用统计编程语言 `R` ([R Core Team 2024](99-references.html#ref-citeR)) 来用数据讲故事所需的基础技能。其中一些内容一开始可能难以理解，但这些是我们经常会使用到的技能和方法。您应该首先快速浏览本章，注意您不理解的部分。然后，在继续阅读本书的其余部分时，不时地回到本章。这样，您将看到各种部分是如何融入上下文的。
- en: '`R` is an open-source language for statistical programming. You can download
    `R` for free from the [Comprehensive R Archive Network](https://cran.r-project.org)
    (CRAN). RStudio is an Integrated Development Environment (IDE) for `R` which makes
    the language easier to use and can be downloaded for free from Posit [here](https://www.rstudio.com/products/rstudio/).'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '`R` 是一种用于统计编程的开源语言。您可以从 [综合 R 存档网络](https://cran.r-project.org) (CRAN) 免费下载
    `R`。RStudio 是 `R` 的集成开发环境 (IDE)，它使得语言更容易使用，并且可以从 Posit [这里](https://www.rstudio.com/products/rstudio/)
    免费下载。'
- en: 'The past ten years or so have been characterized by the increased use of the
    `tidyverse`. This is “…an opinionated collection of `R` packages designed for
    data science. All packages share an underlying design philosophy, grammar, and
    data structures” ([Wickham 2020](99-references.html#ref-tidyversewebsite)). There
    are three distinctions to be clear about: the original `R` language, typically
    referred to as “base”; the `tidyverse` which is a coherent collection of packages
    that build on top of base, and other packages.'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 过去十年左右的时间里，`tidyverse` 的使用越来越广泛。这被描述为“一个有偏见的 `R` 包集合，专为数据科学设计。所有包都共享一个基本的设计理念、语法和数据结构”
    ([Wickham 2020](99-references.html#ref-tidyversewebsite))。有三个区别需要明确：原始的 `R` 语言，通常称为“基础”；建立在基础之上的
    `tidyverse`，它是一个连贯的包集合，以及其他包。
- en: Essentially everything that we can do in the `tidyverse`, we can also do in
    base. But, as the `tidyverse` was built especially for data science it is often
    easier to use, especially when learning. Additionally, most everything that we
    can do in the `tidyverse`, we can also do with other packages. But, as the `tidyverse`
    is a coherent collection of packages, it is often easier to use, again, especially
    when learning. Eventually there are cases where it makes sense to trade-off the
    convenience and coherence of the `tidyverse` for some features of base, other
    packages, or languages. Indeed, we introduce SQL in [Chapter 10](10-store_and_share.html)
    as one source of considerable efficiency gain when working with data. For instance,
    the `tidyverse` can be slow, and so if one needs to import thousands of CSVs then
    it can make sense to switch away from `read_csv()`. The appropriate use of base
    and non-tidyverse packages, or even other languages, rather than dogmatic insistence
    on a particular solution, is a sign of intellectual maturity.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，我们在 `tidyverse` 中能做的几乎所有事情，我们都可以在基础中做到。但是，由于 `tidyverse` 是专门为数据科学构建的，它通常更容易使用，尤其是在学习时。此外，我们可以在
    `tidyverse` 中做的几乎所有事情，我们也可以用其他包来做。但是，由于 `tidyverse` 是一个连贯的包集合，它通常更容易使用，再次，尤其是在学习时。最终，在某些情况下，为了某些基础、其他包或语言的特性，权衡
    `tidyverse` 的便利性和连贯性是有意义的。确实，我们在第 10 章 [介绍 SQL](10-store_and_share.html) 作为在处理数据时获得相当效率提升的一个来源。例如，`tidyverse`
    可能会较慢，因此如果需要导入数千个 CSV 文件，那么切换到 `read_csv()` 可能是有意义的。适当使用基础和非 `tidyverse` 包，甚至其他语言，而不是盲目坚持特定的解决方案，是智力成熟的标志。
- en: Central to our use of the statistical programming language `R` is data, and
    most of the data that we use will have humans at the heart of it. Sometimes, dealing
    with human-centered data in this way can have a numbing effect, resulting in over-generalization,
    and potentially problematic work. Another sign of intellectual maturity is when
    it has the opposite effect, increasing our awareness of our decision-making processes
    and their consequences.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用统计编程语言 `R` 的核心是数据，而我们使用的大多数数据都将以人为核心。有时，以这种方式处理以人为中心的数据可能会产生麻木效应，导致过度概括，并可能产生问题性的工作。智力成熟的另一个标志是它产生相反的效果，增加了我们对决策过程及其后果的认识。
- en: In practice, I find that far from distancing you from questions of meaning,
    quantitative data forces you to confront them. The numbers draw you in. Working
    with data like this is an unending exercise in humility, a constant compulsion
    to think through what you can and cannot see, and a standing invitation to understand
    what the measures really capture—what they mean, and for whom.
  id: totrans-35
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 在实践中，我发现，量化数据并非将你从意义的问题中隔离开来，反而迫使你面对这些问题。数字吸引你进入。使用这类数据的工作是一场永无止境的谦卑练习，不断迫使你思考你能看到什么，不能看到什么，并且始终邀请你理解这些度量真正捕捉到的是什么——它们的意义，以及对于谁而言。
- en: ''
  id: totrans-36
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Healy ([2020](99-references.html#ref-kieranskitchen))
  id: totrans-37
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: Healy ([2020](99-references.html#ref-kieranskitchen))
- en: A.2 R, RStudio, and Posit Cloud
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.2 R, RStudio, and Posit Cloud
- en: '`R` and RStudio are complementary, but they are not the same thing. Müller,
    Schieferdecker, and Schratz ([2019](99-references.html#ref-vistransrep)) explain
    their relationship by analogy, where `R` is like an engine and RStudio is like
    a car—we can use engines in a lot of different situations, and they are not limited
    to being used in cars, but the combination is especially useful.'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '`R` 和 RStudio 是互补的，但它们不是同一件事。Müller、Schieferdecker 和 Schratz ([2019](99-references.html#ref-vistransrep))
    通过类比解释了它们之间的关系，其中 `R` 类似于发动机，而 RStudio 类似于汽车——我们可以在很多不同的场合使用发动机，它们并不局限于在汽车中使用，但组合起来特别有用。'
- en: A.2.1 R
  id: totrans-40
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.2.1 R
- en: '[`R`](https://www.r-project.org/) is an open-source and free programming language
    that is focused on general statistics. Free in this context does not refer to
    a price of zero, but instead to the freedom that the creators give users to largely
    do what they want with it (although it also does have a price of zero). This is
    in contrast with an open-source programming language that is designed for general
    purpose, such as `Python`, or an open-source programming language that is focused
    on probability, such as `Stan`. It was created by Ross Ihaka and Robert Gentleman
    at the University of Auckland in the 1990s, and traces its provenance to `S`,
    which was developed at Bell Labs in the 1970s. It is maintained by the R Core
    Team and changes to this “base” of code occur methodically and with concern given
    to different priorities.'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '[`R`](https://www.r-project.org/) 是一种开源且免费的编程语言，专注于通用统计学。这里的“免费”并不是指零价格，而是指创造者给予用户在很大程度上可以随意使用它的自由（尽管它也确实有一个零价格）。这与为通用目的设计的开源编程语言，如
    `Python`，或专注于概率的开源编程语言，如 `Stan`，形成对比。它由 Ross Ihaka 和 Robert Gentleman 在 20 世纪
    90 年代在奥克兰大学创建，其起源可以追溯到 20 世纪 70 年代在贝尔实验室开发的 `S` 语言。它由 R 核心团队维护，对“基础”代码的更改是有序的，并且会考虑到不同的优先级。'
- en: Many people build on this stable base, to extend the capabilities of `R` to
    better and more quickly suit their needs. They do this by creating packages. Typically,
    although not always, a package is a collection of `R` code, mostly functions,
    and this allows us to more easily do things that we want to do. These packages
    are managed by repositories such as CRAN and Bioconductor.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 许多人在此基础上构建稳定的基础，以扩展 `R` 的功能，使其更好地、更快地满足他们的需求。他们通过创建包来实现这一点。通常情况下，尽管并非总是如此，一个包通常是一组
    `R` 代码，主要是函数，这使得我们能够更容易地完成我们想要做的事情。这些包由如 CRAN 和 Bioconductor 这样的存储库管理。
- en: If you want to use a package, then you first need to install it on your computer,
    and then you need to load it when you want to use it. Dr Di Cook, Professor of
    Business Analytics at Monash University, describes this as analogous to a lightbulb.
    If you want light in your house, first you need to fit a lightbulb, and then you
    need to turn the switch on. Installing a package, say, `install.packages("tidyverse")`,
    is akin to fitting a lightbulb into a socket—you only need to do this once for
    each lightbulb. But then each time you want light you need to turn on the switch
    to the lightbulb, which in the `R` packages case, means drawing on your library,
    say, `library(tidyverse)`.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想使用一个包，那么你首先需要在你的电脑上安装它，然后在你想要使用它的时候加载它。莫纳什大学商业分析学教授 Dr. Di Cook 将此描述为类似于灯泡。如果你想在家里有光，首先你需要安装一个灯泡，然后你需要打开开关。安装一个包，比如
    `install.packages("tidyverse")`，就像将灯泡安装到插座中——你只需要为每个灯泡做一次。但然后每次你想有光的时候，你都需要打开灯泡的开关，在
    `R` 包的情况下，这意味着调用你的库，比如 `library(tidyverse)`。
- en: '*Shoulders of giants* *Dr Di Cook is Distinguished Professor of Statistics
    at Monash University. After earning a PhD in statistics from Rutgers University
    in 1993 where she focused on statistical graphics, she was appointed as an assistant
    professor at Iowa State University, being promoted to full professor in 2005,
    and in 2015 she moved to Monash. One area of her research is data visualization,
    especially interactive and dynamic graphics. Buja, Cook, and Swayne ([1996](99-references.html#ref-buja1996interactive))
    which proposes a taxonomy of interactive data visualization and associated software
    XGobi, which is the focus of Cook and Swayne ([2007](99-references.html#ref-ggobibook)).
    Cook et al. ([1995](99-references.html#ref-Cook1995)) develops and explores the
    use of a dynamic graphical tool for exploratory data analysis and Buja et al.
    ([2009](99-references.html#ref-Buja2009)) develops a framework for evaluating
    visual statistical methods, where plots and human cognition stand in for test
    statistics and statistical tests, respectively. She is a Fellow of the American
    Statistical Association.*  *To install a package on your computer (again, we will
    need to do this only once per computer) we use `install.packages()`.'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '*站在巨人的肩膀上* *迪·库克博士是莫纳什大学的杰出统计学教授。1993年，她在罗格斯大学获得统计学博士学位，专注于统计图形，之后被任命为爱荷华州立大学的助理教授，2005年晋升为正教授，2015年搬到了莫纳什大学。她研究的一个领域是数据可视化，特别是交互式和动态图形。Buja、Cook和Swayne
    ([1996](99-references.html#ref-buja1996interactive)) 提出了一个交互式数据可视化和相关软件XGobi的分类法，这是Cook和Swayne
    ([2007](99-references.html#ref-ggobibook)) 的焦点。Cook等人 ([1995](99-references.html#ref-Cook1995))
    开发并探索了用于探索性数据分析的动态图形工具的使用，Buja等人 ([2009](99-references.html#ref-Buja2009)) 开发了一个评估视觉统计方法的框架，其中图表和人类认知分别代表检验统计量和统计检验。她是美国统计协会的会员。*  *要在计算机上安装包（我们将在每台计算机上只做一次）我们使用`install.packages()`。'
- en: '[PRE0]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '*And then when we want to use the package, we use `library()`.'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '*然后当我们想要使用包时，我们使用`library()`。'
- en: '[PRE1]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '*Having downloaded it, we can open `R` and use it directly. It is primarily
    designed to be interacted with through the command line. While this is functional,
    it can be useful to have a richer environment than the command line provides.
    In particular, it can be useful to install an Integrated Development Environment
    (IDE), which is an application that brings together various bits and pieces that
    will be used often. One common IDE for `R` is RStudio, although others such as
    Visual Studio are also used.***  ***### A.2.2 RStudio'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '*下载后，我们可以直接打开`R`并使用它。它主要是为了通过命令行进行交互设计的。虽然这样是可行的，但拥有一个比命令行提供更丰富的环境可能更有用。特别是，安装一个集成开发环境（IDE）可能很有用，这是一个将经常使用的各种组件组合在一起的应用程序。`R`的一个常见IDE是RStudio，尽管也使用其他IDE，如Visual
    Studio。***'
- en: RStudio is distinct to `R`, and they are different entities. RStudio builds
    on top of `R` to make it easier to use R. This is in the same way that one could
    use the internet from the command line, but most people use a browser such as
    Chrome, Firefox, or Safari.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: RStudio与`R`不同，它们是不同的实体。RStudio建立在`R`之上，使其更容易使用。这就像人们可以从命令行使用互联网一样，但大多数人使用浏览器，如Chrome、Firefox或Safari。
- en: RStudio is free in the sense that we do not pay for it. It is also free in the
    sense of being able to take the code, modify it, and distribute that code. But
    the maker of RStudio, Posit, is a company, albeit it a B Corp, and so it is possible
    that the current situation could change. It can be downloaded from Posit [here](https://www.rstudio.com/products/rstudio/).
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: RStudio是免费的，因为我们不需要为其付费。它也是免费的，意味着我们可以获取代码，修改它，并分发该代码。但RStudio的制作者Posit是一家公司，尽管它是一家B公司，因此当前情况可能会改变。可以从Posit
    [这里](https://www.rstudio.com/products/rstudio/)下载。
- en: When we open RStudio it will look like [Figure A.1](#fig-first).
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们打开RStudio时，它看起来像[图A.1](#fig-first)。
- en: '![](../Images/27948520f36735f6cc69fdfa7e0a63b8.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/27948520f36735f6cc69fdfa7e0a63b8.png)'
- en: 'Figure A.1: Opening RStudio for the first time'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 图A.1：首次打开RStudio
- en: The left pane is a console in which you can type and execute `R` code line by
    line. Try it with 2+2 by clicking next to the prompt “>”, typing “2+2”, and then
    pressing “return/enter”.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 左侧面板是一个控制台，你可以在其中逐行输入和执行`R`代码。尝试使用2+2，点击提示符“>”旁边，输入“2+2”，然后按“return/enter”键。
- en: '[PRE2]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '*[PRE3]*  *The pane on the top right has information about the environment.
    For instance, when we create variables a list of their names and some properties
    will appear there. Next to the prompt type the following code, replacing Rohan
    with your name, and again press enter.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE3]*  *右上角的窗格包含有关环境的信息。例如，当我们创建变量时，将出现它们的名称和一些属性列表。在提示符旁边输入以下代码，将 Rohan
    替换为你的名字，然后再次按回车键。'
- en: '[PRE4]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '*As mentioned in [Chapter 2](02-drinking_from_a_fire_hose.html) the `<-`, or
    “assignment operator”, allocates `"Rohan"` to an object called “my_name”. You
    should notice a new value in the environment pane with the variable name and its
    value.'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '*如[第2章](02-drinking_from_a_fire_hose.html)所述，`<-`，或“赋值运算符”，将“Rohan”分配给一个名为“my_name”的对象。你应该注意环境面板中出现了新的变量名及其值。'
- en: 'The pane in the bottom right is a file manager. At the moment it should just
    have two files: an `R` History file and a `R` Project file. We will get to what
    these are later, but for now we will create and save a file.'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 右下角的窗格是文件管理器。目前它应该只有两个文件：一个 `R` 历史文件和一个 `R` 项目文件。我们将在稍后了解这些文件是什么，但现在我们将创建并保存一个文件。
- en: Run the following code, without worrying too much about the details for now.
    You should see a new “.rds” file in your list of files.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 运行以下代码，现在不必过于担心细节。你应该在你的文件列表中看到一个新文件“`.rds`”。
- en: '[PRE5]**  ***### A.2.3 Posit Cloud'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE5]**  ***### A.2.3 正云'
- en: While you can and should download RStudio to your own computer, initially we
    recommend using [Posit Cloud](https://posit.cloud). This is an online version
    of RStudio that is provided by Posit. We will use this so that you can focus on
    getting comfortable with `R` and RStudio in an environment that is consistent.
    This way you do not have to worry about what computer you have or installation
    permissions, amongst other things.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然你可以也应该将 RStudio 下载到自己的电脑上，但最初我们建议使用[正云](https://posit.cloud)。这是由 Posit 提供的
    RStudio 的在线版本。我们将使用这个版本，这样你就可以在一个一致的环境中专注于熟悉 `R` 和 RStudio，而不用担心你有什么样的电脑或安装权限等问题。
- en: The free version of Posit Cloud is free, as in no financial cost. The trade-off
    is that it is not powerful, and it is sometimes slow, but for the purposes of
    getting started it is enough.******  ****## A.3 Getting started
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 正云的免费版本是免费的，即没有财务成本。代价是它不够强大，有时运行速度也较慢，但对于入门目的来说已经足够了。******  ****## A.3 入门
- en: We will now start going through some code. Actively write this all out yourself.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将开始逐步查看一些代码。请自己积极地将这些内容全部写出来。
- en: While working line-by-line in the console is fine, it is easier to write out
    a whole script that can then be run. We will do this by making an `R` Script (“File”
    \(\rightarrow\) “New File” \(\rightarrow\) “R Script”). The console pane will
    fall to the bottom left and an `R` Script will open in the top left. We will write
    some code that will get all of the Australian federal politicians and then construct
    a small table about the genders of the prime ministers. Some of this code will
    not make sense at this stage, but just type it all out to get into the habit and
    then run it. To run the whole script, we can click “Run” or we can highlight certain
    lines and then click “Run” to just run those lines.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然在控制台中逐行工作是可以的，但编写一个可以运行的整个脚本会更方便。我们将通过创建一个 `R` 脚本（“文件” \(\rightarrow\) “新建文件”
    \(\rightarrow\) “R 脚本”）来实现这一点。控制台面板将位于左下角，而 `R` 脚本将打开在左上角。我们将编写一些代码来获取所有澳大利亚联邦政治家，然后构建一个关于总理性别的简短表格。其中一些代码在这个阶段可能没有意义，但只需全部输入以养成习惯，然后运行。要运行整个脚本，我们可以点击“运行”，或者我们可以突出显示某些行，然后点击“运行”来仅运行这些行。
- en: '[PRE6]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '*[PRE7]'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE7]'
- en: '*[PRE8]*  *We can see that, as at the end of 2021, one female has been prime
    minister (Julia Gillard), while the other 29 prime ministers were male.'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE8]*  *我们可以看到，截至 2021 年底，有一位女性担任过总理（朱莉娅·吉拉德），而其他 29 位总理都是男性。'
- en: 'One critical operator when programming is the “pipe”: `|>`. We read this as
    “and then”. This takes the output of a line of code and uses it as the first input
    to the next line of code. It makes code easier to read. By way of background,
    for many years `R` users used `%>%` as the pipe, which is from `magrittr` ([Bache
    and Wickham 2022](99-references.html#ref-magrittr)) and part of the `tidyverse`.
    Base `R` added the pipe that we use in this book, `|>`, in 2021, and so if you
    look at older code, you may see the earlier pipe being used. For the most part,
    they are interchangeable.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 编程时一个关键的运算符是“管道”：`|>`。我们读作“然后”。这将从一行代码的输出用作下一行代码的第一个输入。这使得代码更容易阅读。作为背景，多年来`R`用户使用`%>%`作为管道，它来自`magrittr`
    ([Bache and Wickham 2022](99-references.html#ref-magrittr))，也是`tidyverse`的一部分。基础`R`在2021年添加了我们在这本书中使用的管道`|>`，因此如果你查看旧代码，你可能会看到早期管道的使用。大部分情况下，它们是可以互换的。
- en: The idea of the pipe is that we take a dataset, and then do something to it.
    We used this in the earlier example. Another example follows where we will look
    at the first six lines of a dataset by piping it to `head()`. Notice that `head()`
    does not explicitly take any arguments in this example. It knows which data to
    display because the pipe tells it implicitly.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 管道（pipe）的概念是我们取一个数据集，然后对它进行一些操作。我们在前面的例子中使用了这种方法。以下是一个例子，我们将通过管道将数据集传递给`head()`来查看数据集的前六行。请注意，在这个例子中，`head()`没有明确地接受任何参数。它知道要显示哪些数据，因为管道隐式地告诉它。
- en: '[PRE9]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '*[PRE10]*  *We can save this `R` Script as “my_first_r_script.R” (“File” \(\rightarrow\)
    “Save As”). At this point, our workspace should look something like [Figure A.2](#fig-third).'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE10]* 我们可以将这个`R`脚本保存为“my_first_r_script.R”（“文件”\(\rightarrow\)“另存为”）。在这个时候，我们的工作空间应该看起来像[图A.2](#fig-third)。'
- en: '![](../Images/89a745e9aee901ca8bc0b5d55af90fd7.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/89a745e9aee901ca8bc0b5d55af90fd7.png)'
- en: 'Figure A.2: After running an `R` Script'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图A.2：运行`R`脚本后
- en: One thing to be aware of is that each Posit Cloud workspace is essentially a
    new computer. Because of this, we need to install any package that we want to
    use for each workspace. For instance, before we can use the `tidyverse`, we need
    to install it with `install.packages("tidyverse")`. This contrasts with using
    one’s own computer.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 有一个需要注意的事项是，每个Posit Cloud工作空间本质上是一台新的计算机。正因为如此，我们需要为每个工作空间安装我们想要使用的任何包。例如，在我们能够使用`tidyverse`之前，我们需要使用`install.packages("tidyverse")`来安装它。这与使用自己的计算机形成对比。
- en: 'A few final notes on Posit Cloud:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 关于Posit Cloud的一些最后说明：
- en: In the Australian politician’s example, we got our data from the website GitHub
    using an `R` package, but we can get data into a workspace from a local computer
    in a variety of ways. One way is to use the “upload” button in the “Files” panel.
    Another is to use `readr` ([Wickham, Hester, and Bryan 2022](99-references.html#ref-citereadr)),
    which is part of the `tidyverse` ([Wickham et al. 2019](99-references.html#ref-tidyverse)).
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在澳大利亚政治家的例子中，我们使用`R`包从GitHub网站获取数据，但我们可以通过多种方式将数据从本地计算机导入工作空间。一种方式是使用“文件”面板中的“上传”按钮。另一种方式是使用`readr`
    ([Wickham, Hester, and Bryan 2022](99-references.html#ref-citereadr))，它是`tidyverse`的一部分
    ([Wickham et al. 2019](99-references.html#ref-tidyverse))。
- en: Posit Cloud allows some degree of collaboration. For instance, you can give
    someone else access to a workspace that you create and even both be in the same
    workspace at the one time. This could be useful for collaboration.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Posit Cloud 允许一定程度上的协作。例如，你可以将你创建的工作空间访问权限授予其他人，甚至你们可以同时在同一工作空间中。这可能会很有用，用于协作。
- en: There are a variety of weaknesses of Posit Cloud, in particular the RAM limits.
    Additionally, like any web application, things break from time to time or go down.***  ***##
    A.4 The `dplyr` verbs
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Posit Cloud存在多种弱点，尤其是RAM限制。此外，像任何网络应用一样，有时事情会出错或崩溃。***  ***
- en: One of the key packages that we will use is the `tidyverse` ([Wickham et al.
    2019](99-references.html#ref-tidyverse)). The `tidyverse` is actually a package
    of packages, which means when we install the `tidyverse`, we actually install
    a whole bunch of different packages. The key package in the `tidyverse` in terms
    of manipulating data is `dplyr` ([Wickham et al. 2022](99-references.html#ref-citedplyr)).
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将要使用的关键包之一是`tidyverse` ([Wickham et al. 2019](99-references.html#ref-tidyverse))。实际上，`tidyverse`是一个包的集合，这意味着当我们安装`tidyverse`时，我们实际上安装了一整套不同的包。在`tidyverse`中，用于操作数据的核心包是`dplyr`
    ([Wickham et al. 2022](99-references.html#ref-citedplyr))。
- en: There are five `dplyr` functions that are regularly used, and we will now go
    through each of these. These are commonly referred to as the `dplyr` verbs.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 有五个`dplyr`函数经常使用，我们现在将逐一介绍。这些通常被称为`dplyr`动词。
- en: '`select()`'
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`select()`'
- en: '`filter()`'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`filter()`'
- en: '`arrange()`'
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`arrange()`'
- en: '`mutate()`'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mutate()`'
- en: '`summarise()` or equally `summarize()`'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`summarise()`或等价的`summarize()`'
- en: We will also cover `.by`, and `count()` here as they are closely related.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还将介绍`.by`和`count()`，因为它们密切相关。
- en: As we have already installed the `tidyverse`, we just need to load it.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们已安装了`tidyverse`，我们只需加载它。
- en: '[PRE11]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '*And we will begin by again using some data about Australian politicians from
    the `AustralianPoliticians` package ([Alexander and Hodgetts 2021](99-references.html#ref-citeaustralianpoliticians)).'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '*我们将再次使用来自`AustralianPoliticians`包（[Alexander和Hodgetts 2021](99-references.html#ref-citeaustralianpoliticians)）的关于澳大利亚政治家的数据。'
- en: '[PRE12]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '*[PRE13]*  *### A.4.1 `select()`'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE13]*  *### A.4.1 `select()`'
- en: We use `select()` to pick particular columns of a dataset. For instance, we
    might like to select the “firstName” column.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用`select()`来选择数据集的特定列。例如，我们可能想选择“firstName”列。
- en: '[PRE14]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '*[PRE15]*  *In R, there are many ways to do things. Sometimes these are different
    ways to do the same thing, and other times they are different ways to do *almost*
    the same thing. For instance, another way to pick a particular column of a dataset
    is to use the “extract” operator `$`. This is from base, as opposed to `select()`
    which is from the `tidyverse`.'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE15]*  *在R中，有许多做事的方式。有时这些是做同样事情的不同方式，有时是做几乎同样事情的不同方式。例如，另一种选择数据集特定列的方法是使用“提取”运算符`$`。这是来自基础，而不是来自`tidyverse`的`select()`。'
- en: '[PRE16]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '*[PRE17]*  *The two appear similar—both pick the “firstName” column—but they
    differ in the class of what they return, with `select()` returning a tibble and
    `$` returning a vector. For the sake of completeness, if we combine `select()`
    with `pull()` then we get the same class of output, a vector, as if we had used
    the extract operator.'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE17]*  *这两个看起来很相似——都选择“firstName”列，但它们返回的对象类型不同，`select()`返回一个tibble，而`$`返回一个向量。为了完整性，如果我们结合`select()`和`pull()`，我们将得到与使用提取运算符相同的输出类型，即向量。'
- en: '[PRE18]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '*[PRE19]*  *We can also use `select()` to remove columns, by negating the column
    name.'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE19]*  *我们也可以使用`select()`来删除列，通过取列名的否定。'
- en: '[PRE20]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '*[PRE21]*  *Finally, we can `select()` based on conditions. For instance, we
    can `select()` all of the columns that start with, say, “birth”.'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE21]*  *最后，我们可以根据条件进行`select()`。例如，我们可以选择以“birth”开头的所有列。'
- en: '[PRE22]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '*[PRE23]*  *There are a variety of similar “selection helpers” including `starts_with()`,
    `ends_with()`, and `contains()`. More information about these is available in
    the help page for `select()` which can be accessed by running `?select()`.'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE23]*  *有许多类似的“选择辅助器”，包括`starts_with()`、`ends_with()`和`contains()`。关于这些的更多信息可以在`select()`的帮助页面中找到，可以通过运行`?select()`来访问。'
- en: At this point, we will use `select()` to reduce the width of our dataset.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一点上，我们将使用`select()`来减少数据集的宽度。
- en: '[PRE24]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '*[PRE25]*  *One thing that sometimes confuses people who are new to R, is that
    the output is not “saved”, unless you assign it to an object. For instance, here
    the first lines are `australian_politicians <- australian_politicians |>` and
    then `select()` is used, compared with `australian_politicians |>`. This ensures
    that the changes brought about by `select()` are applied to the object, and so
    it is that modified version that would be used at any point later in the code.******  ***###
    A.4.2 `filter()`'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE25]*  *对于初学者来说，有时会让人困惑的一件事是输出不会“保存”，除非你将其分配给一个对象。例如，这里的前几行是`australian_politicians
    <- australian_politicians |>`然后使用`select()`，与`australian_politicians |>`相比。这确保了`select()`带来的更改应用于对象，因此修改后的版本将在代码的任何后续点使用。******  ***###
    A.4.2 `filter()`'
- en: We use `filter()` to pick particular rows of a dataset. For instance, we might
    be only interested in politicians that became prime minister.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用`filter()`来选择数据集的特定行。例如，我们可能只对成为总理的政治家感兴趣。
- en: '[PRE26]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '*[PRE27]*  *We could also give `filter()` two conditions. For instance, we
    could look at politicians that become prime minister and were named Joseph, using
    the “and” operator `&`.'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE27]*  *我们也可以给`filter()`两个条件。例如，我们可以使用“与”运算符`&`来查看成为总理且名为Joseph的政治家。'
- en: '[PRE28]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '*[PRE29]*  *We get the same result if we use a comma instead of an ampersand.'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE29]*  *如果我们用逗号代替和号，我们会得到相同的结果。'
- en: '[PRE30]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '*[PRE31]*  *Similarly, we could look at politicians who were named, say, Myles
    or Ruth using the “or” operator `|`.'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE31]*  *同样，我们可以使用“或”运算符`|`来查找名为Myles或Ruth的政治家。'
- en: '[PRE32]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '*[PRE33]*  *We could also pipe the result. For instance we could pipe from
    `filter()` to `select()`.'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE33]*  *我们也可以将结果传递。例如，我们可以从 `filter()` 传递到 `select()`。'
- en: '[PRE34]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '*[PRE35]*  *If we happen to know the particular row number that is of interest
    then we could `filter()` to only that particular row. For instance, say the row
    853 was of interest.'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE35]*  *如果我们知道感兴趣的特定行号，我们可以使用 `filter()` 只筛选那一行。例如，假设第853行是感兴趣的。'
- en: '[PRE36]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: '*[PRE37]*  *There is also a dedicated function to do this, which is `slice()`.'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE37]*  *为此还有一个专门的功能，即 `slice()`。'
- en: '[PRE38]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: '*[PRE39]*  *While this may seem somewhat esoteric, it is especially useful
    if we would like to remove a particular row using negation, or duplicate specific
    rows. For instance, we could remove the first row.'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE39]*  *虽然这看起来可能有些神秘，但如果我们要使用否定来删除特定行或重复特定行，它就特别有用。例如，我们可以删除第一行。'
- en: '[PRE40]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: '*[PRE41]*  *We could also only, say, only keep the first three rows.'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE41]*  *我们也可以只保留前三行，例如。'
- en: '[PRE42]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: '*[PRE43]*  *Finally, we could duplicate the first two rows and this takes advantage
    of `n()` which provides the current group size.'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE43]*  *最后，我们可以复制前两行，这利用了 `n()` 提供的当前组大小。'
- en: '[PRE44]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: '*[PRE45]**********  ***### A.4.3 `arrange()`'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE45]**********  ***### A.4.3 `arrange()`'
- en: We use `arrange()` to change the order of the dataset based on the values of
    particular columns. For instance, we could arrange the politicians by their birthday.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用 `arrange()` 来根据特定列的值更改数据集的顺序。例如，我们可以根据政治家的生日对政治家进行排序。
- en: '[PRE46]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: '*[PRE47]*  *We could modify `arrange()` with `desc()` to change from ascending
    to descending order.'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE47]*  *我们可以使用 `desc()` 修改 `arrange()`，以从升序变为降序。'
- en: '[PRE48]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: '*[PRE49]*  *This could also be achieved with the minus sign.'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE49]*  *这也可以通过减号实现。'
- en: '[PRE50]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: '*[PRE51]*  *And we could arrange based on more than one column. For instance,
    if two politicians have the same first name, then we could also arrange based
    on their birthday.'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE51]*  *我们还可以根据多个列进行排序。例如，如果两个政治家有相同的名字，我们还可以根据他们的生日进行排序。'
- en: '[PRE52]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: '*[PRE53]*  *We could achieve the same result by piping between two instances
    of `arrange()`.'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE53]*  *我们也可以通过在两个 `arrange()` 实例之间传递来实现相同的结果。'
- en: '[PRE54]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: '*[PRE55]*  *When we use `arrange()` we should be clear about precedence. For
    instance, changing to birthday and then first name would give a different arrangement.'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE55]*  *当我们使用 `arrange()` 时，我们应该清楚优先级。例如，先改为生日然后是名字将给出不同的排序。'
- en: '[PRE56]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: '*[PRE57]*  *A nice way to arrange by a variety of columns is to use `across()`.
    It enables us to use the “selection helpers” such as `starts_with()` that were
    mentioned in association with `select()`.'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE57]*  *通过多种列进行排序的一个好方法是使用 `across()`。它使我们能够使用与 `select()` 相关提到的“选择辅助工具”例如
    `starts_with()`。'
- en: '[PRE58]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: '*[PRE59]'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE59]'
- en: '[PRE60]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: '*[PRE61]********  ***### A.4.4 `mutate()`'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE61]********  ***### A.4.4 `mutate()`'
- en: We use `mutate()` when we want to make a new column. For instance, perhaps we
    want to make a new column that is 1 if a person was both a member and a senator
    and 0 otherwise. That is to say that our new column would denote politicians that
    served in both the upper and the lower house.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用 `mutate()` 来创建新列。例如，也许我们想要创建一个新列，如果一个人既是成员又是参议员则为1，否则为0。也就是说，我们的新列将表示在上下两院都服务的政治家。
- en: '[PRE62]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: '*[PRE63]*  *We could use `mutate()` with math, such as addition and subtraction.
    For instance, we could calculate the age that the politicians are (or would have
    been) in 2022.'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE63]*  *我们可以使用 `mutate()` 结合数学运算，如加法和减法。例如，我们可以计算出政治家在2022年（或本应）的年龄。'
- en: '[PRE64]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: '*[PRE65]*  *There are a variety of functions that are especially useful when
    constructing new columns. These include `log()` which will compute the natural
    logarithm, `lead()` which will bring values up by one row, `lag()` which will
    push values down by one row, and `cumsum()` which creates a cumulative sum of
    the column.'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE65]*  *在构建新列时，有许多特别有用的函数。这些包括计算自然对数的 `log()`，将值上移一行 `lead()`，将值下移一行 `lag()`，以及创建列的累积和
    `cumsum()`。'
- en: '[PRE66]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: '*[PRE67]'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE67]'
- en: '[PRE68]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: '*[PRE69]'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE69]'
- en: '[PRE70]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: '*[PRE71]'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE71]'
- en: '[PRE72]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: '*[PRE73]****  ***As we have in earlier examples, we can also use `mutate()`
    in combination with `across()`. This includes the potential use of the selection
    helpers. For instance, we could count the number of characters in both the first
    and last names at the same time.'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE73]****  ***正如我们在前面的例子中所做的那样，我们也可以将 `mutate()` 与 `across()` 结合使用。这包括潜在的选择辅助工具的使用。例如，我们可以同时计算名字的首字母和最后一个字母的字符数。'
- en: '[PRE74]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: '*[PRE75]*  *Finally, we use `case_when()` when we need to make a new column
    on the basis of more than two conditional statements (in contrast to `if_else()`
    from our first `mutate()` example). For instance, we may have some years and want
    to group them into decades.'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE75]*  *最后，当我们需要基于两个以上的条件语句创建新列时，我们使用 `case_when()`（与第一个 `mutate()` 示例中的
    `if_else()` 相比）。例如，我们可能有一些年份，并希望将它们分组到十年中。'
- en: '[PRE76]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: '*[PRE77]*  *We could accomplish this with a series of nested `if_else()` statements,
    but `case_when()` is more clear. The cases are evaluated in order and as soon
    as there is a match `case_when()` does not continue to the remainder of the cases.
    It can be useful to have a catch-all at the end that will signal if there is a
    potential issue that we might like to know about if the code were to ever get
    there.*******  ***### A.4.5 `summarise()`'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE77]*  *我们可以通过一系列嵌套的 `if_else()` 语句来完成这项工作，但 `case_when()` 更清晰。情况按顺序评估，一旦有匹配项，`case_when()`
    就不会继续评估剩余的情况。在代码可能到达那里的情况下，有一个通用的捕获项可能是有用的，它会指示我们可能希望了解的潜在问题。*******  ***### A.4.5
    `summarise()`'
- en: We use `summarise()` when we would like to make new, condensed, summary variables.
    For instance, perhaps we would like to know the minimum, average, and maximum
    of some column.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用 `summarise()` 当我们想要创建新的、简化的汇总变量。例如，我们可能想知道某些列的最小值、平均值和最大值。
- en: '[PRE78]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: '*[PRE79]*  *As an aside, `summarise()` and `summarize()` are equivalent and
    we can use either. In this book we use `summarise()`.'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE79]*  *顺便说一下，`summarise()` 和 `summarize()` 是等效的，我们可以使用任一。在这本书中，我们使用 `summarise()`。'
- en: '[PRE80]'
  id: totrans-165
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: '*[PRE81]*  *By default, `summarise()` will provide one row of output for a
    whole dataset. For instance, in the earlier example we found the youngest, oldest,
    and average across all politicians. However, we can create more groups in our
    dataset using `.by` within the function. We can use many functions on the basis
    of groups, but the `summarise()` function is particularly powerful in conjunction
    with `.by`. For instance, we could group by gender, and then get age-based summary
    statistics.'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE81]*  *默认情况下，`summarise()` 将为整个数据集提供一行输出。例如，在早期示例中，我们找到了所有政治家的最年轻、最年长和平均年龄。然而，我们可以在数据集中使用
    `.by` 函数创建更多分组。我们可以在分组的基础上使用许多函数，但 `summarise()` 函数与 `.by` 结合特别强大。例如，我们可以按性别分组，然后获取基于年龄的汇总统计。'
- en: '[PRE82]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: '*[PRE83]*  *Similarly, we could look at youngest, oldest, and mean age at death
    by gender.'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE83]*  *同样，我们可以查看按性别划分的最年轻、最年长和平均死亡年龄。'
- en: '[PRE84]'
  id: totrans-169
  prefs: []
  type: TYPE_PRE
  zh: '[PRE84]'
- en: '*[PRE85]*  *And so we learn that female members of parliament on average lived
    slightly longer than male members of parliament.'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE85]*  *因此，我们了解到女性议员平均寿命略长于男性议员。'
- en: We can use `.by` on the basis of more than one group. For instance, we could
    look at the average number of days lived by gender and by they were in the House
    of Representatives or the Senate.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在多个分组的基础上使用 `.by`。例如，我们可以查看按性别和他们在众议院或参议院中的天数来计算平均生活天数。
- en: '[PRE86]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE86]'
- en: '*[PRE87]*  *We can use `count()` to create counts by groups. For instance,
    the number of politicians by gender.'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE87]*  *我们可以使用 `count()` 来按组创建计数。例如，按性别划分的政治家数量。'
- en: '[PRE88]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE88]'
- en: '*[PRE89]*  *In addition to the `count()`, we could calculate a proportion.'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE89]*  *除了 `count()`，我们还可以计算比例。'
- en: '[PRE90]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE90]'
- en: '*[PRE91]*  *Using `count()` is essentially the same as using `.by` within `summarise()`
    with `n()`, and we get the same result in that way.'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE91]*  *使用 `count()` 实质上与在 `summarise()` 中使用 `.by` 和 `n()` 相同，并且我们以这种方式获得相同的结果。'
- en: '[PRE92]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE92]'
- en: '*[PRE93]*  *And there is a comparably helpful function that acts similarly
    to`mutate()`, which is `add_count()`. The difference is that the number will be
    added in a new column.'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE93]*  *还有一个类似的有帮助的函数，其作用类似于 `mutate()`，称为 `add_count()`。区别在于数字将添加到新列中。'
- en: '[PRE94]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE94]'
- en: '*[PRE95]***********************  ***## A.5 Base R'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE95]***********************  ***## A.5 Base R'
- en: While the `tidyverse` was established relatively recently to help with data
    science, `R` existed long before this. There is a host of functionality that is
    built into `R` especially around the core needs of programming and statisticians.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然 `tidyverse` 是相对较近才建立起来以帮助数据科学，但 `R` 在此之前就已经存在了。`R` 中内置了许多功能，特别是围绕编程和统计学家核心需求的功能。
- en: 'In particular, we will cover:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 尤其是以下内容：
- en: '`class()`.'
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`class()`。'
- en: Data simulation.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 数据模拟。
- en: '`function()`, `for()`, and `apply()`.'
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`function()`，`for()` 和 `apply()`。'
- en: There is no need to install or load any additional packages, as this functionality
    comes with R.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 没有必要安装或加载任何额外的包，因为这个功能是随 `R` 一起提供的。
- en: A.5.1 `class()`
  id: totrans-188
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.5.1 `class()`
- en: In everyday usage “a, b, c, …” are letters and “1, 2, 3,…” are numbers. And
    we use letters and numbers differently; for instance, we do not add or subtract
    letters. Similarly, `R` needs to have some way of distinguishing different classes
    of content and to define the properties that each class has, “how it behaves,
    and how it relates to other types of objects” ([Wickham 2019](99-references.html#ref-advancedr)).
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 在日常使用中，“a, b, c, …”是字母，“1, 2, 3,…”是数字。我们使用字母和数字的方式不同；例如，我们不会对字母进行加法或减法操作。同样，`R`需要有一种方式来区分不同类别的内容，并定义每个类别具有的属性，“它的行为方式以及它与其他类型对象的关联”
    ([Wickham 2019](99-references.html#ref-advancedr))。
- en: Classes have a hierarchy. For instance, we are “human”, which is itself “animal”.
    All “humans” are “animals”, but not all “animals” are “humans”. Similarly, all
    integers are numbers, but not all numbers are integers. We can find out the class
    of an object in `R` with `class()`.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 类别有一个层次结构。例如，我们是“人类”，而“人类”本身是“动物”。所有“人类”都是“动物”，但并非所有“动物”都是“人类”。同样，所有整数都是数字，但并非所有数字都是整数。我们可以使用
    `class()` 在`R`中找出对象的类别。
- en: '[PRE96]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: '*[PRE97]'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE97]'
- en: '[PRE98]'
  id: totrans-193
  prefs: []
  type: TYPE_PRE
  zh: '[PRE98]'
- en: '*[PRE99]**  **The classes that we cover here are “numeric”, “character”, “factor”,
    “date”, and “data.frame”.'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE99]**  **我们在这里讨论的类别是“数值”，“字符”，“因子”，“日期”和“数据框”。'
- en: The first thing to know is that, in the same way that a frog can become a prince,
    we can sometimes change the class of an object in R. This is called “casting”.
    For instance, we could start with a “numeric”, change it to a “character” with
    `as.character()`, and then a “factor” with `as.factor()`. But if we tried to make
    it into a “date” with `as.Date()` we would get an error because no all numbers
    have the properties that are needed to be a date.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 首先要知道的是，就像青蛙可以变成王子一样，我们有时可以在R中改变一个对象的类别。这被称为“类型转换”。例如，我们可以从一个“数值”开始，使用 `as.character()`
    将其转换为“字符”，然后使用 `as.factor()` 转换为“因子”。但如果我们尝试使用 `as.Date()` 将其转换为“日期”，我们会得到一个错误，因为并非所有数字都具有成为日期所需的属性。
- en: '[PRE100]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE100]'
- en: '*[PRE101]'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE101]'
- en: '[PRE102]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE102]'
- en: '*[PRE103]'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE103]'
- en: '[PRE104]'
  id: totrans-200
  prefs: []
  type: TYPE_PRE
  zh: '[PRE104]'
- en: '*[PRE105]'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE105]'
- en: '[PRE106]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE106]'
- en: '*[PRE107]'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE107]'
- en: '[PRE108]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE108]'
- en: '*[PRE109]'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE109]'
- en: '[PRE110]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE110]'
- en: '*[PRE111]******  ***Compared with “numeric” and “character” classes, the “factor”
    class might be less familiar. A “factor” is used for categorical data that can
    only take certain values ([Wickham 2019](99-references.html#ref-advancedr)). For
    instance, typical usage of a “factor” variable would be a binary, such as “day”
    or “night”. It is also often used for age-groups, such as “18-29”, “30-44”, “45-60”,
    “60+” (as opposed to age, which would often be a “numeric”); and sometimes for
    level of education: “less than high school”, “high school”, “college”, “undergraduate
    degree”, “postgraduate degree”. We can find the allowed levels for a “factor”
    using `levels()`.'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE111]******  ***与“数值”和“字符”类别相比，“因子”类别可能不太熟悉。因子用于只能取特定值的分类数据（[Wickham 2019](99-references.html#ref-advancedr)）。例如，典型使用“因子”变量的情况是二元变量，如“白天”或“夜晚”。它也常用于年龄组，如“18-29”，“30-44”，“45-60”，“60+”（与年龄相对，年龄通常是一个“数值”）；有时也用于教育水平：“低于高中”，“高中”，“大学”，“本科学位”，“研究生学位”。我们可以使用
    `levels()` 查找“因子”的允许级别。'
- en: '[PRE112]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE112]'
- en: '*[PRE113]'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE113]'
- en: '[PRE114]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE114]'
- en: '*[PRE115]'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE115]'
- en: '[PRE116]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE116]'
- en: '*[PRE117]***  ***Dates are an especially tricky class and quickly become complicated.
    Nonetheless, at a foundational level, we can use `as.Date()` to convert a character
    that looks like a “date” into an actual “date”. This enables us to, say, perform
    addition and subtraction, when we would not be able to do that with a “character”.'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE117]***  ***日期是一个特别棘手的类别，很快就会变得复杂。尽管如此，在基础层面上，我们可以使用 `as.Date()` 将看起来像“日期”的字符转换为实际的“日期”。这使得我们能够执行加法和减法操作，而如果我们使用的是“字符”，则无法做到这一点。'
- en: '[PRE118]'
  id: totrans-214
  prefs: []
  type: TYPE_PRE
  zh: '[PRE118]'
- en: '*[PRE119]'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE119]'
- en: '[PRE120]'
  id: totrans-216
  prefs: []
  type: TYPE_PRE
  zh: '[PRE120]'
- en: '*[PRE121]'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE121]'
- en: '[PRE122]'
  id: totrans-218
  prefs: []
  type: TYPE_PRE
  zh: '[PRE122]'
- en: '*[PRE123]'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE123]'
- en: '[PRE124]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE124]'
- en: '*[PRE125]'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE125]'
- en: '[PRE126]'
  id: totrans-222
  prefs: []
  type: TYPE_PRE
  zh: '[PRE126]'
- en: '*[PRE127]*****  ***The final class that we discuss here is “data.frame”. This
    looks like a spreadsheet and is commonly used to store the data that we will analyze.
    Formally, “a data frame is a list of equal-length vectors” ([Wickham 2019](99-references.html#ref-advancedr)).
    It will have column and row names which we can see using `colnames()` and `rownames()`,
    although often the names of the rows are just numbers.'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE127]*****  ***我们在这里讨论的最后一个类别是“数据框”。它看起来像电子表格，通常用于存储我们将要分析的数据。正式来说，“数据框是一个长度相等的向量列表”
    ([Wickham 2019](99-references.html#ref-advancedr))。它将具有列名和行名，我们可以使用 `colnames()`
    和 `rownames()` 来查看，尽管通常行名只是数字。'
- en: To illustrate this, we use the “ResumeNames” dataset from `AER` ([Kleiber and
    Zeileis 2008](99-references.html#ref-citeaer)). This package can be installed
    in the same way as any other package from CRAN. This dataset comprises cross-sectional
    data about resume content, especially the name used on the resume, and associated
    information about whether the candidate received a call-back for 4,870 fictitious
    resumes. The dataset was created by Bertrand and Mullainathan ([2004](99-references.html#ref-bertrand2004emily))
    who sent fictitious resumes in response to job advertisements in Boston and Chicago
    that differed in whether the resume was assigned a “very African American sounding
    name or a very White sounding name”. They found considerable discrimination whereby
    “White names receive 50 per cent more callbacks for interviews”. Hangartner, Kopp,
    and Siegenthaler ([2021](99-references.html#ref-hangartner2021monitoring)) generalize
    this using an online Swiss platform and find that immigrants and minority ethnic
    groups are contacted less by recruiters, as are women when the profession is men-dominated,
    and vice versa.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 为了说明这一点，我们使用了来自 `AER` 的“ResumeNames”数据集（[Kleiber 和 Zeileis 2008](99-references.html#ref-citeaer)）。这个包可以像安装
    CRAN 上的任何其他包一样安装。这个数据集包含了关于简历内容的横截面数据，特别是简历上使用的名字，以及关于4,870份虚构简历是否收到回电的相关信息。数据集由
    Bertrand 和 Mullainathan ([2004](99-references.html#ref-bertrand2004emily)) 创建，他们向波士顿和芝加哥的招聘广告发送了虚构的简历，这些广告在简历是否被分配了“非常非洲裔美国人听起来名字”或“非常白人听起来名字”上有所不同。他们发现存在相当大的歧视，其中“白人名字在面试回电中比其他名字多50%”。Hangartner、Kopp
    和 Siegenthaler ([2021](99-references.html#ref-hangartner2021monitoring)) 使用在线瑞士平台进行了推广，发现移民和少数民族群体在招聘者那里得到的联系较少，当职业由男性主导时，女性也是如此，反之亦然。
- en: '[PRE128]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE128]'
- en: '*[PRE129]'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE129]'
- en: '*[PRE130]'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE130]'
- en: '*[PRE131]'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE131]'
- en: '[PRE132]'
  id: totrans-229
  prefs: []
  type: TYPE_PRE
  zh: '[PRE132]'
- en: '*[PRE133]'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE133]'
- en: '[PRE134]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE134]'
- en: '*[PRE135]***  ***We can examine the class of the vectors, i.e. the columns,
    that make-up a data frame by specifying the column name.'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE135]***  ***我们可以通过指定列名来检查构成数据框的向量的类别，即列。'
- en: '[PRE136]'
  id: totrans-233
  prefs: []
  type: TYPE_PRE
  zh: '[PRE136]'
- en: '*[PRE137]'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE137]'
- en: '[PRE138]'
  id: totrans-235
  prefs: []
  type: TYPE_PRE
  zh: '[PRE138]'
- en: '*[PRE139]**  **Sometimes it is helpful to be able to change the classes of
    many columns at once. We can do this by using `mutate()` and `across()`.'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE139]**  **有时能够一次性更改许多列的类别是有帮助的。我们可以通过使用 `mutate()` 和 `across()` 来实现这一点。'
- en: '[PRE140]'
  id: totrans-237
  prefs: []
  type: TYPE_PRE
  zh: '[PRE140]'
- en: '*[PRE141]'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE141]'
- en: '[PRE142]'
  id: totrans-239
  prefs: []
  type: TYPE_PRE
  zh: '[PRE142]'
- en: '*[PRE143]'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE143]'
- en: '[PRE144]'
  id: totrans-241
  prefs: []
  type: TYPE_PRE
  zh: '[PRE144]'
- en: '*[PRE145]'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE145]'
- en: '[PRE146]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE146]'
- en: '*[PRE147]'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE147]'
- en: '[PRE148]'
  id: totrans-245
  prefs: []
  type: TYPE_PRE
  zh: '[PRE148]'
- en: '*[PRE149]'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE149]'
- en: '[PRE150]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE150]'
- en: '*[PRE151]******  ***There are many ways for code to not run but having an issue
    with the class is always among the first things to check. Common issues are variables
    that we think should be “character” or “numeric” actually being “factor”. And
    variables that we think should be “numeric” actually being “character”.'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE151]******  ***代码无法运行有许多原因，但类的问题总是需要首先检查的事项之一。常见的问题是我们认为应该是“字符”或“数值”的变量实际上却是“因子”。还有我们认为应该是“数值”的变量实际上却是“字符”。'
- en: Finally, it is worth pointing out that the class of a vector is whatever the
    class of the content. In Python and other languages, a similar data structure
    to a vector is a “list”. A “list” is a class of its own, and the objects in a
    “list” have their own classes (for instance, `["a", 1]` is an object of class
    “list” with entries of class “string” and “int”). This may be counter-intuitive
    to see that a vector is not its own class if you are coming to `R` from another
    language.*********************  ***### A.5.2 Simulating data
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，值得注意的是，向量的类别就是其内容的类别。在 Python 和其他语言中，与向量类似的数据结构是“列表”。“列表”是一个独立的类别，而“列表”中的对象有自己的类别（例如，`["a",
    1]` 是一个“列表”类别的对象，其条目为“字符串”和“整数”类别）。如果你从其他语言转到 `R`，可能会觉得向量不是它自己的类别，这可能会让你感到反直觉。*********************  ***###
    A.5.2 模拟数据
- en: 'Simulating data is a key skill for telling believable stories with data. In
    order to simulate data, we need to be able to randomly draw from statistical distributions
    and other collections. `R` has a variety of functions to make this easier, including:
    the normal distribution, `rnorm()`; the uniform distribution, `runif()`; the Poisson
    distribution, `rpois()`; the binomial distribution, `rbinom()`; and many others.
    To randomly sample from a collection of items, we can use `sample()`.'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 模拟数据是讲述可信故事的关键技能。为了模拟数据，我们需要能够从统计分布和其他集合中随机抽取。`R` 提供了各种函数来简化这一过程，包括：正态分布，`rnorm()`；均匀分布，`runif()`；泊松分布，`rpois()`；二项分布，`rbinom()`；以及其他许多分布。要从项目集合中随机抽样，我们可以使用
    `sample()`。
- en: When dealing with randomness, the need for reproducibility makes it important,
    paradoxically, that the randomness is repeatable. That is to say, another person
    needs to be able to draw the random numbers that we draw. We do this by setting
    a seed for our random draws using `set.seed()`.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 在处理随机性时，可重复性的需求使得随机性可重复变得重要，这在某种程度上是一种悖论。也就是说，另一个人需要能够抽取我们抽取的随机数。我们通过使用 `set.seed()`
    为我们的随机抽取设置一个种子来实现这一点。
- en: We could get observations from the standard normal distribution and put the
    those into a data frame.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以从标准正态分布中获取观察值，并将这些值放入数据框中。
- en: '[PRE152]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE152]'
- en: '*[PRE153]*  *We could then add draws from the uniform, Poisson, and binomial
    distributions, using `cbind()` to bring the columns of the original dataset and
    the new one together.'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE153]*  *然后我们可以添加来自均匀分布、泊松分布和二项分布的抽取，使用 `cbind()` 将原始数据集和新数据集的列合并在一起。'
- en: '[PRE154]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE154]'
- en: '*[PRE155]*  *Finally, we will add a favorite color to each observation with
    `sample()`.'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE155]*  *最后，我们将使用 `sample()` 为每个观察值添加一个喜欢的颜色。'
- en: '[PRE156]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE156]'
- en: '*[PRE157]*  *We set the option “replace” to “TRUE” because we are only choosing
    between two items, but each time we choose we want the possibility that either
    are chosen. Depending on the simulation we may need to think about whether “replace”
    should be “TRUE” or “FALSE”. Another useful optional argument in `sample()` is
    to adjust the probability with which each item is drawn. The default is that all
    options are equally likely, but we could specify particular probabilities if we
    wanted to with “prob”. As always with functions, we can find more in the help
    file, for instance `?sample`.***  ***### A.5.3 `function()`, `for()`, and `apply()`'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE157]*  *我们将“replace”选项设置为“TRUE”，因为我们只在这两个选项之间进行选择，但每次选择时我们都希望有选择任何一个的可能性。根据模拟的不同，我们可能需要考虑“replace”是否应该是“TRUE”或“FALSE”。在
    `sample()` 函数中，另一个有用的可选参数是调整每个项目被抽取的概率。默认情况下，所有选项的可能性是相等的，但如果我们想指定特定的概率，可以使用“prob”。像往常一样，我们可以在帮助文件中找到更多信息，例如
    `?sample`。***  ***### A.5.3 `function()`、`for()` 和 `apply()`'
- en: '`R` “is a functional programming language” ([Wickham 2019](99-references.html#ref-advancedr)).
    This means that we foundationally write, use, and compose functions, which are
    collections of code that accomplish something specific.'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: '`R` “是一种函数式编程语言” ([Wickham 2019](99-references.html#ref-advancedr))。这意味着我们在基础层面编写、使用和组合函数，这些函数是执行特定任务的代码集合。'
- en: There are a lot of functions in `R` that other people have written, and we can
    use. Almost any common statistical or data science task that we might need to
    accomplish likely already has a function that has been written by someone else
    and made available to us, either as part of the base `R` installation or a package.
    But we will need to write our own functions from time to time, especially for
    more-specific tasks. We define a function using `function()`, and then assign
    a name. We will likely need to include some inputs and outputs for the function.
    Inputs are specified between round brackets. The specific task that the function
    is to accomplish goes between braces.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: '`R` 中有很多其他人为我们编写的函数，我们可以使用。几乎任何我们可能需要完成的常见统计或数据科学任务，很可能已经有其他人编写了函数并为我们提供，无论是作为基础
    `R` 安装的一部分还是作为包的一部分。但有时我们仍需要编写自己的函数，特别是对于更具体的任务。我们使用 `function()` 定义一个函数，然后为其分配一个名称。我们可能需要为函数包含一些输入和输出。输入指定在圆括号之间。函数要完成的特定任务放在花括号之间。'
- en: '[PRE158]'
  id: totrans-261
  prefs: []
  type: TYPE_PRE
  zh: '[PRE158]'
- en: '*[PRE159]*  *We can specify defaults for the inputs in case the person using
    the function does not supply them.'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE159]*  *我们可以为输入指定默认值，以防使用函数的人没有提供它们。'
- en: '[PRE160]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE160]'
- en: '*[PRE161]*  *One common scenario is that we want to apply a function multiple
    times. Like many programming languages, we can use a `for()` loop for this. The
    look of a `for()` loop in `R` is similar to `function()`, in that we define what
    we are iterating over in the round brackets, and the function to apply in braces.'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE161]*  *一个常见的场景是我们想要多次应用一个函数。像许多编程语言一样，我们可以使用 `for()` 循环来实现这一点。在 `R` 中，`for()`
    循环的外观与 `function()` 类似，即我们在圆括号中定义迭代的内容，在花括号中定义要应用的函数。'
- en: Because `R` is a programming language that is focused on statistics, we are
    often interested in arrays or matrices. We use `apply()` to apply a function to
    rows (“MARGIN = 1”) or columns (“MARGIN = 2”).
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 因为 `R` 是一种专注于统计学的编程语言，所以我们通常对数组或矩阵感兴趣。我们使用 `apply()` 函数将一个函数应用于行（“MARGIN = 1”）或列（“MARGIN
    = 2”）。
- en: '[PRE162]'
  id: totrans-266
  prefs: []
  type: TYPE_PRE
  zh: '[PRE162]'
- en: '*[PRE163]'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE163]'
- en: '[PRE164]'
  id: totrans-268
  prefs: []
  type: TYPE_PRE
  zh: '[PRE164]'
- en: '*[PRE165]**********  ***## A.6 Making graphs with `ggplot2`'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE165]**********  ***## A.6 使用 `ggplot2` 绘制图表'
- en: If the key package in the `tidyverse` in terms of manipulating data is `dplyr`
    ([Wickham et al. 2022](99-references.html#ref-citedplyr)), then the key package
    in the `tidyverse` in terms of creating graphs is `ggplot2` ([Wickham 2016](99-references.html#ref-citeggplot)).
    We will have more to say about graphing in [Chapter 5](05-graphs_tables_maps.html),
    but here we provide a quick tour of some essentials. `ggplot2` works by defining
    layers which build to form a graph, based around the “grammar of graphics” (hence,
    the “gg”). Instead of the pipe operator (`|>`) `ggplot2` uses the add operator
    `+`. As part of the `tidyverse` collection of packages, `ggplot2` does not need
    to be explicitly installed or loaded if the `tidyverse` has been loaded.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在 `tidyverse` 中，用于数据操作的键包是 `dplyr` ([Wickham et al. 2022](99-references.html#ref-citedplyr))，那么在
    `tidyverse` 中，用于创建图形的键包是 `ggplot2` ([Wickham 2016](99-references.html#ref-citeggplot))。我们将在第
    5 章中详细介绍图形，但在这里我们快速浏览一些基本内容。`ggplot2` 通过定义层来工作，这些层基于“图形语法”（因此，称为“gg”），而不是使用管道操作符（`|>`），`ggplot2`
    使用添加操作符 `+`。作为 `tidyverse` 包集合的一部分，如果已经加载了 `tidyverse`，则不需要显式安装或加载 `ggplot2`。
- en: 'There are three key aspects that need to be specified to build a graph with
    `ggplot2`:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用 `ggplot2` 构建图形，需要指定三个关键方面：
- en: Data;
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 数据；
- en: Aesthetics / mapping; and
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 美学/映射; 和
- en: Type.
  id: totrans-274
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 类型。
- en: To get started we will obtain some GDP data for countries in the Organisation
    for Economic Co-operation and Development (OECD) ([OECD 2022](99-references.html#ref-citeoecdgdp)).
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始，我们将获取来自经济合作与发展组织（OECD）国家的一些 GDP 数据([OECD 2022](99-references.html#ref-citeoecdgdp))。
- en: '[PRE166]'
  id: totrans-276
  prefs: []
  type: TYPE_PRE
  zh: '[PRE166]'
- en: '*[PRE167]'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE167]'
- en: 'We are interested, firstly, in making a bar chart of GDP change in the third
    quarter of 2021 for ten countries: Australia, Canada, Chile, Indonesia, Germany,
    Great Britain, New Zealand, South Africa, Spain, and the US.'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先感兴趣的是制作 2021 年第三季度十个国家（澳大利亚、加拿大、智利、印度尼西亚、德国、大不列颠、新西兰、南非、西班牙和美国）的 GDP 变化条形图。
- en: '[PRE168]'
  id: totrans-279
  prefs: []
  type: TYPE_PRE
  zh: '[PRE168]'
- en: '*We start with `ggplot()` and specify a mapping/aesthetic, which in this case
    means specifying the x-axis and the y-axis. The first argument in `ggplot()` is
    the data we want to visualize, so we can use the pipe operator at this stage as
    usual.'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: '*我们从 `ggplot()` 开始并指定映射/美学，在这种情况下意味着指定 x 轴和 y 轴。`ggplot()` 的第一个参数是我们想要可视化的数据，因此我们可以在这个阶段像往常一样使用管道操作符。'
- en: '[PRE169]'
  id: totrans-281
  prefs: []
  type: TYPE_PRE
  zh: '[PRE169]'
- en: '*![](../Images/3ab5cd9bf2a580f54a50c1e557eadd7e.png)*  *Now we need to specify
    the type of graph that we are interested in. In this case we want a bar chart
    and we do this by adding `geom_bar()` using `+`.'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/3ab5cd9bf2a580f54a50c1e557eadd7e.png)*  *现在我们需要指定我们感兴趣的图形类型。在这种情况下，我们想要一个条形图，我们可以通过添加
    `geom_bar()` 使用 `+` 来实现。'
- en: '[PRE170]'
  id: totrans-283
  prefs: []
  type: TYPE_PRE
  zh: '[PRE170]'
- en: '*![](../Images/00fed5ecac75556ba0a2dda969d77c48.png)*  *We can color the bars
    by whether the country is European by adding another aesthetic, “fill”.'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/00fed5ecac75556ba0a2dda969d77c48.png)*  *我们可以通过添加另一个美学属性，“填充”，来根据国家是否为欧洲国家来着色条形图。'
- en: '[PRE171]'
  id: totrans-285
  prefs: []
  type: TYPE_PRE
  zh: '[PRE171]'
- en: '*![](../Images/cdef6788b7eaffd8e73e9a1e957f7e34.png)*  *Finally, we could make
    it look nicer by: adding labels, `labs()`; changing the color, `scale_fill_brewer()`;
    and the background, `theme_classic()`.'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/cdef6788b7eaffd8e73e9a1e957f7e34.png)*  *最后，我们可以通过添加标签、`labs()`；更改颜色、`scale_fill_brewer()`；以及背景、`theme_classic()`
    来使其看起来更美观。'
- en: '[PRE172]'
  id: totrans-287
  prefs: []
  type: TYPE_PRE
  zh: '[PRE172]'
- en: '*![](../Images/9019b8dfaacb6d58cf10041dd12f08fb.png)*  *Facets enable us to
    that we create subplots that focus on specific aspects of our data. They are invaluable
    because they allow us to add another variable to a graph without having to make
    a 3D graph. We use `facet_wrap()` to add facets and specify the variable that
    we would like to facet by. In this case, we facet by hemisphere.'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/9019b8dfaacb6d58cf10041dd12f08fb.png)*  *面元使我们能够创建关注数据特定方面的子图。它们非常有价值，因为它们允许我们在不制作
    3D 图形的情况下向图形添加另一个变量。我们使用 `facet_wrap()` 添加面元并指定我们想要面元的变量。在这种情况下，我们按半球面元。'
- en: '[PRE173]'
  id: totrans-289
  prefs: []
  type: TYPE_PRE
  zh: '[PRE173]'
- en: '*![](../Images/5241ba5abcefaebe0ab617293d7237f8.png)*******  ***## A.7 Exploring
    the `tidyverse`'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/5241ba5abcefaebe0ab617293d7237f8.png)*******  ***## A.7 探索 `tidyverse`'
- en: 'We have focused on two aspects of the `tidyverse`: `dplyr`, and `ggplot2`.
    However, the `tidyverse` comprises a variety of different packages and functions.
    We will now go through four common aspects:'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经关注了 `tidyverse` 的两个方面：`dplyr` 和 `ggplot2`。然而，`tidyverse` 包含了各种不同的包和函数。现在我们将探讨四个常见的方面：
- en: Importing data and `tibble()`;
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 导入数据和使用`tibble()`;
- en: Joining and pivoting datasets;
  id: totrans-293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据集的连接和转置；
- en: String manipulation and `stringr`;
  id: totrans-294
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 字符串操作和 `stringr`；
- en: Factor variables and `forcats`.
  id: totrans-295
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 因子变量和 `forcats`。
- en: 'However, the first task is to deal with the nomenclature, and in particular
    to be specific about what is “tidy” about the “tidyverse”. The name refers to
    tidy data, and the benefit of that is that while there are a variety of ways for
    data to be messy, tidy data satisfy three rules. This means the structure of the
    datasets is consistent regardless of the specifics, and makes it easier to apply
    functions that expect certain types of input. Tidy data refers to a dataset where
    ([Wickham, Çetinkaya-Rundel, and Grolemund [2016] 2023](99-references.html#ref-r4ds);
    [Wickham 2014, 4](99-references.html#ref-wickham2014tidy)):'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，首要任务是处理命名法，特别是要具体说明“tidyverse”中的“tidy”是什么意思。这个名字指的是整洁数据，其好处在于尽管数据混乱的方式有很多种，但整洁数据满足三个规则。这意味着数据集的结构在具体细节上是一致的，使得应用期望特定类型输入的函数变得更加容易。整洁数据指的是数据集，其中([Wickham,
    Çetinkaya-Rundel, 和 Grolemund [2016] 2023](99-references.html#ref-r4ds); [Wickham
    2014, 4](99-references.html#ref-wickham2014tidy))：
- en: Every variable is in a column of its own.
  id: totrans-297
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个变量都在自己的列中。
- en: Every observation is in its own row.
  id: totrans-298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个观测值都在自己的行中。
- en: Every value is in its own cell.
  id: totrans-299
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个值都在自己的单元格中。
- en: '[Table A.1](#tbl-nottidydata) is not tidy because age and hair share a column.
    [Table A.2](#tbl-tidydata) is its tidy counterpart.'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: '[表A.1](#tbl-nottidydata)不是整洁的，因为年龄和头发共享一个列。[表A.2](#tbl-tidydata)是其整洁的对应版本。'
- en: 'Table A.1: Example of data that are not tidy'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 表A.1：不整洁数据的示例
- en: '| Person | Variable | Value |'
  id: totrans-302
  prefs: []
  type: TYPE_TB
  zh: '| 人物 | 变量 | 值 |'
- en: '| --- | --- | --- |'
  id: totrans-303
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| Rohan | Age | 35 |'
  id: totrans-304
  prefs: []
  type: TYPE_TB
  zh: '| Rohan | 年龄 | 35 |'
- en: '| Rohan | Hair | Black |'
  id: totrans-305
  prefs: []
  type: TYPE_TB
  zh: '| Rohan | 头发 | 黑色 |'
- en: '| Monica | Age | 35 |'
  id: totrans-306
  prefs: []
  type: TYPE_TB
  zh: '| Monica | 年龄 | 35 |'
- en: '| Monica | Hair | Blonde |'
  id: totrans-307
  prefs: []
  type: TYPE_TB
  zh: '| Monica | 头发 | 金发 |'
- en: '| Edward | Age | 3 |'
  id: totrans-308
  prefs: []
  type: TYPE_TB
  zh: '| Edward | 年龄 | 3 |'
- en: '| Edward | Hair | Brown |'
  id: totrans-309
  prefs: []
  type: TYPE_TB
  zh: '| Edward | 头发 | 棕色 |'
- en: '| Hugo | Age | 1 |'
  id: totrans-310
  prefs: []
  type: TYPE_TB
  zh: '| Hugo | 年龄 | 1 |'
- en: '| Hugo | Hair | Blonde |'
  id: totrans-311
  prefs: []
  type: TYPE_TB
  zh: '| Hugo | 头发 | 金发 |'
- en: 'Table A.2: Example of tidy data'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 表A.2：整洁数据的示例
- en: '| Person | Age | Hair |'
  id: totrans-313
  prefs: []
  type: TYPE_TB
  zh: '| 人物 | 年龄 | 头发 |'
- en: '| --- | --- | --- |'
  id: totrans-314
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| Rohan | 35 | Black |'
  id: totrans-315
  prefs: []
  type: TYPE_TB
  zh: '| Rohan | 35 | 黑色 |'
- en: '| Monica | 35 | Blonde |'
  id: totrans-316
  prefs: []
  type: TYPE_TB
  zh: '| Monica | 35 | 金发 |'
- en: '| Edward | 3 | Brown |'
  id: totrans-317
  prefs: []
  type: TYPE_TB
  zh: '| Edward | 3 | 棕色 |'
- en: '| Hugo | 1 | Blonde |'
  id: totrans-318
  prefs: []
  type: TYPE_TB
  zh: '| Hugo | 1 | 金发 |'
- en: A.7.1 Importing data and `tibble()`
  id: totrans-319
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.7.1 导入数据和`tibble()`
- en: There are a variety of ways to get data into `R` so that we can use it. For
    CSV files, there is `read_csv()` from `readr` ([Wickham, Hester, and Bryan 2022](99-references.html#ref-citereadr)),
    and for Stata files, there is `read_dta()` from `haven` ([Wickham, Miller, and
    Smith 2023](99-references.html#ref-citehaven)).
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 将数据导入`R`以便使用有多种方法。对于CSV文件，有来自`readr`的`read_csv()`函数([Wickham, Hester, 和 Bryan
    2022](99-references.html#ref-citereadr))，而对于Stata文件，有来自`haven`的`read_dta()`函数([Wickham,
    Miller, 和 Smith 2023](99-references.html#ref-citehaven))。
- en: CSVs are a common format and have many advantages including the fact that they
    typically do not modify the data. Each column is separated by a comma, and each
    row is a record. We can provide `read_csv()` with a URL or a local file to read.
    There are a variety of different options that can be passed to `read_csv()` including
    the ability to specify whether the dataset has column names, the types of the
    columns, and how many lines to skip. If we do not specify the types of the columns
    then `read_csv()` will make a guess by looking at the dataset.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: CSV是一种常见的格式，具有许多优点，包括它们通常不会修改数据。每列由逗号分隔，每行是一个记录。我们可以向`read_csv()`提供一个URL或本地文件来读取。可以向`read_csv()`传递各种不同的选项，包括指定数据集是否有列名、列的类型以及要跳过的行数。如果我们没有指定列的类型，那么`read_csv()`将通过查看数据集来猜测。
- en: We use `read_dta()` to read .dta files, which are commonly produced by the statistical
    program Stata. This means that they are common in fields such as sociology, political
    science, and economics. This format separates the data from its labels and so
    we typically reunite these using `to_factor()` from `labelled` ([Larmarange 2023](99-references.html#ref-citelabelled)).
    `haven` is part of the `tidyverse`, but is not automatically loaded by default,
    in contrast to a package such as `ggplot2`, and so we would need to run `library(haven)`.
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用`read_dta()`来读取.dta文件，这些文件通常由统计程序Stata生成。这意味着它们在社会学、政治学和经济学等领域很常见。这种格式将数据与其标签分开，因此我们通常使用`labelled`包中的`to_factor()`函数将它们重新组合([Larmarange
    2023](99-references.html#ref-citelabelled))。`haven`是`tidyverse`的一部分，但默认情况下不会自动加载，与`ggplot2`等包不同，因此我们需要运行`library(haven)`。
- en: Typically a dataset enters `R` as a “data.frame”. While this can be useful,
    another helpful class for a dataset is “tibble”. These can be created using `tibble()`
    from `tibble`, which is part of the `tidyverse`. A tibble is a data frame, with
    some particular changes that make it easier to work with, including not converting
    strings to factors by default, showing the class of columns, and printing nicely.
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，数据集以“data.frame”的形式进入 `R`。虽然这很有用，但数据集的另一个有用的类是“tibble”。这些可以使用 `tibble` 包中的
    `tibble()` 函数创建，`tibble` 是 `tidyverse` 的一部分。tibble 是一个数据框，通过一些特定的更改使其更容易处理，包括默认不将字符串转换为因子，显示列的类，以及打印得很好。
- en: We can make a tibble manually, if need be, for instance, when we simulate data.
    But we typically import data directly as a tibble, for instance, when we use `read_csv()`.
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 如果需要，我们可以手动创建一个 tibble，例如，当我们模拟数据时。但通常我们直接将数据导入为 tibble，例如，当我们使用 `read_csv()`
    时。
- en: '[PRE174]'
  id: totrans-325
  prefs: []
  type: TYPE_PRE
  zh: '[PRE174]'
- en: '*[PRE175]'
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE175]'
- en: '[PRE176]'
  id: totrans-327
  prefs: []
  type: TYPE_PRE
  zh: '[PRE176]'
- en: '*[PRE177]'
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE177]'
- en: '[PRE178]'
  id: totrans-329
  prefs: []
  type: TYPE_PRE
  zh: '[PRE178]'
- en: '*[PRE179]'
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE179]'
- en: '[PRE180]'
  id: totrans-331
  prefs: []
  type: TYPE_PRE
  zh: '[PRE180]'
- en: '*[PRE181]****  ***### A.7.2 Dataset manipulation with joins and pivots'
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE181]****  ***### A.7.2 使用连接和旋转进行数据集操作'
- en: 'There are two dataset manipulations that are often needed: joins and pivots.'
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 常见的数据集操作有两个：连接和旋转。
- en: We often have a situation where we have two, or more, datasets and we are interested
    in combining them. We can join datasets together in a variety of ways. A common
    way is to use `left_join()` from `dplyr` ([Wickham et al. 2022](99-references.html#ref-citedplyr)).
    This is most useful where there is one main dataset that we are using and there
    is another dataset with some useful variables that we want to add to that. The
    critical aspect is that we have a column or columns that we can use to link the
    two datasets. Here we will create two tibbles and then join them on the basis
    of names.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 我们经常遇到有两个或更多数据集的情况，并且我们对将它们结合起来感兴趣。我们可以以各种方式将数据集连接起来。一种常见的方式是使用 `dplyr` 中的 `left_join()`
    ([Wickham 等人 2022](99-references.html#ref-citedplyr))。这最有用的情况是我们使用一个主要数据集，并且还有一个包含一些我们想要添加的有用变量的数据集。关键方面是我们有一个或多个列可以用来连接两个数据集。在这里，我们将创建两个
    tibble，然后基于名称将它们连接起来。
- en: '[PRE182]'
  id: totrans-335
  prefs: []
  type: TYPE_PRE
  zh: '[PRE182]'
- en: '*[PRE183]'
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE183]'
- en: '[PRE184]'
  id: totrans-337
  prefs: []
  type: TYPE_PRE
  zh: '[PRE184]'
- en: '*[PRE185]'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE185]'
- en: '[PRE186]'
  id: totrans-339
  prefs: []
  type: TYPE_PRE
  zh: '[PRE186]'
- en: '*[PRE187]***  ***There are a variety of other options to join datasets, including
    `inner_join()`, `right_join()`, and `full_join()`.'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE187]***  ***有多种其他选项可以用于连接数据集，包括 `inner_join()`、`right_join()` 和 `full_join()`。'
- en: Another common dataset manipulation task is pivoting them. Datasets tend to
    be either long or wide. Long data means that each variable is on a row, and so
    possibly there is repetition, whereas with wide data each variable is a column
    and so there is typically little repetition ([Wickham 2009](99-references.html#ref-Wickham2009)).
    For instance, “anscombe” is wide, and “anscombe_long” is long.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个常见的数据集操作任务是旋转它们。数据集通常是长格式或宽格式。长数据意味着每个变量都在一行上，因此可能存在重复，而宽数据中每个变量都是一列，因此通常重复很少（[Wickham
    2009](99-references.html#ref-Wickham2009)）。例如，“anscombe”是宽格式，而“anscombe_long”是长格式。
- en: '[PRE188]'
  id: totrans-342
  prefs: []
  type: TYPE_PRE
  zh: '[PRE188]'
- en: '*[PRE189]*  *[PRE190]'
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE189]*  *[PRE190]'
- en: '*[PRE191]*  *Generally, in the `tidyverse`, and certainly for `ggplot2`, we
    need long data. To go from one to the other we use `pivot_longer()` and `pivot_wider()`
    from `tidyr` ([Wickham, Vaughan, and Girlich 2023](99-references.html#ref-citetidyr)).'
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE191]*  *在 `tidyverse` 中，尤其是对于 `ggplot2`，我们需要长数据。要从一种格式转换为另一种格式，我们使用 `tidyr`
    中的 `pivot_longer()` 和 `pivot_wider()` ([Wickham、Vaughan 和 Girlich 2023](99-references.html#ref-citetidyr))。'
- en: We will create some wide data on whether “mark” or “lauren” won a running race
    in each of three years.
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将创建一些关于“mark”或“lauren”在三年中每年是否赢得跑步比赛的长宽数据。
- en: '[PRE192]'
  id: totrans-346
  prefs: []
  type: TYPE_PRE
  zh: '[PRE192]'
- en: '*[PRE193]*  *This dataset is in wide format at the moment. To get it into long
    format, we need a column that specifies the person, and another that specifies
    the result. We use `pivot_longer()` to achieve this.'
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE193]*  *这个数据集目前是宽格式。要将它转换为长格式，我们需要一个指定人员的列，以及一个指定结果的列。我们使用 `pivot_longer()`
    来实现这一点。'
- en: '[PRE194]'
  id: totrans-348
  prefs: []
  type: TYPE_PRE
  zh: '[PRE194]'
- en: '*[PRE195]*  *Occasionally, we need to go from long data to wide data. We use
    `pivot_wider()` to do this.'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE195]*  *有时，我们需要从长数据转换为宽数据。我们使用 `pivot_wider()` 来完成这个操作。'
- en: '[PRE196]'
  id: totrans-350
  prefs: []
  type: TYPE_PRE
  zh: '[PRE196]'
- en: '*[PRE197]********  ***### A.7.3 String manipulation and `stringr`'
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE197]********  ***### A.7.3 字符串操作和 `stringr`'
- en: In `R` we often create a string with double quotes, although using single quotes
    works too. For instance `c("a", "b")` consists of two strings “a” and “b”, that
    are contained in a character vector. There are a variety of ways to manipulate
    strings in `R` and we focus on `stringr` ([Wickham 2022](99-references.html#ref-citestringr)).
    This is automatically loaded when we load the `tidyverse`.
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 在 `R` 中，我们通常使用双引号创建字符串，尽管使用单引号也可以。例如 `c("a", "b")` 包含两个字符串 "a" 和 "b"，它们包含在一个字符向量中。在
    `R` 中操作字符串有多种方法，我们重点关注 `stringr` ([Wickham 2022](https://wiki.example.org/99-references.html#ref-citestringr))。当我们加载
    `tidyverse` 时，它会自动加载。
- en: If we want to look for whether a string contains certain content, then we can
    use `str_detect()`. And if we want to remove or change some particular content
    then we can use `str_remove()` or `str_replace()`.
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们想查找字符串是否包含某些内容，则可以使用 `str_detect()`。如果我们想删除或更改某些特定内容，则可以使用 `str_remove()`
    或 `str_replace()`。
- en: '[PRE198]'
  id: totrans-354
  prefs: []
  type: TYPE_PRE
  zh: '[PRE198]'
- en: '*[PRE199]*  *There are a variety of other functions that are often especially
    useful in data cleaning. For instance, we can use `str_length()` to find out how
    long a string is, and `str_c()` to bring strings together.'
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE199]*  *还有许多其他函数在数据清洗中特别有用。例如，我们可以使用 `str_length()` 来找出字符串的长度，以及 `str_c()`
    来合并字符串。'
- en: '[PRE200]'
  id: totrans-356
  prefs: []
  type: TYPE_PRE
  zh: '[PRE200]'
- en: '*[PRE201]*  *Finally, `separate()` from `tidyr`, although not part of `stringr`,
    is indispensable for string manipulation. It turns one character column into many.'
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE201]*  *最后，`tidyr` 中的 `separate()`，尽管不是 `stringr` 的一部分，但在字符串操作中是必不可少的。它可以将一个字符列转换为多个列。'
- en: '[PRE202]'
  id: totrans-358
  prefs: []
  type: TYPE_PRE
  zh: '[PRE202]'
- en: '*[PRE203]***  ***### A.7.4 Factor variables and `forcats`'
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: '*[PRE203]***  ***### A.7.4 因子变量和 `forcats`'
- en: 'A factor is a collection of strings that are categories. Sometimes there will
    be an inherent ordering. For instance, the days of the week have an order – Monday,
    Tuesday, Wednesday, … – which is not alphabetical. But there is no requirement
    for that to be the case, for instance pregnancy status: pregnant or not pregnant.
    Factors feature prominently in base R. They can be useful because they ensure
    that only appropriate strings are allowed. For instance, if “days_of_the_week”
    was a factor variable then “January” would not be allowed. But they can add a
    great deal of complication, and so they have a less prominent role in the `tidyverse`.
    Nonetheless taking advantage of factors is useful in certain circumstances. For
    instance, when plotting the days of the week we probably want them in the usual
    ordering than in the alphabetical ordering that would result if we had them as
    a character variable. While factors are built into base R, one `tidyverse` package
    that is especially useful when using factors is `forcats` ([Wickham 2023](99-references.html#ref-citeforcats)).'
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 因子是一组字符串，代表类别。有时会有固有的顺序。例如，一周中的日子有顺序——星期一、星期二、星期三……——这不是按字母顺序排列的。但并不要求一定是这样，例如怀孕状态：怀孕或未怀孕。因子在基础
    R 中占有一席之地。它们可能很有用，因为它们确保只允许适当的字符串。例如，如果 "days_of_the_week" 是一个因子变量，那么 "January"
    就不被允许。但它们可能会增加很多复杂性，因此在 `tidyverse` 中的角色不太突出。尽管如此，在某些情况下利用因子是有用的。例如，当绘制一周的日子时，我们可能希望它们按照常规顺序排列，而不是如果它们作为字符变量时按字母顺序排列的顺序。虽然因子是基础
    R 内置的，但一个在处理因子时特别有用的 `tidyverse` 包是 `forcats` ([Wickham 2023](https://wiki.example.org/99-references.html#ref-citeforcats))。
- en: 'Sometimes we have a character vector, and we will want it ordered in a particular
    way. The default is that a character vector is ordered alphabetically, but we
    may not want that. For instance, the days of the week would look strange on a
    graph if they were alphabetically ordered: Friday, Monday, Saturday, Sunday, Thursday,
    Tuesday, and Wednesday!'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 有时我们有一个字符向量，我们可能希望它以特定的方式排序。默认情况下，字符向量是按字母顺序排序的，但我们可能不希望这样。例如，如果一周的日子按字母顺序排序，那么在图表上看起来会很奇怪：星期五、星期一、星期六、星期日、星期四、星期二和星期三！
- en: The way to change the ordering is to change the variable from a character to
    a factor. We can use `fct_relevel()` from `forcats` ([Wickham 2023](99-references.html#ref-citeforcats))
    to specify an ordering.
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: 改变排序方式的方法是将变量从字符类型转换为因子类型。我们可以使用 `forcats` 中的 `fct_relevel()` 来指定排序顺序。[Wickham
    2023](https://wiki.example.org/99-references.html#ref-citeforcats))。
- en: '[PRE204]'
  id: totrans-363
  prefs: []
  type: TYPE_PRE
  zh: '[PRE204]'
- en: '*And we can compare the results by graphing first with the original character
    vector on the x-axis, and then another graph with the factor vector on the x-axis.'
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: '*我们可以通过首先用原始字符向量作为 x 轴绘制图表，然后绘制另一个以因子向量作为 x 轴的图表来比较结果。'
- en: '[PRE205]'
  id: totrans-365
  prefs: []
  type: TYPE_PRE
  zh: '[PRE205]'
- en: '*![](../Images/1f621a0c6950ab80d84b56cb6bba0702.png)'
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](../Images/1f621a0c6950ab80d84b56cb6bba0702.png)'
- en: '![](../Images/5148b26746aa4472e6831204ee97cea1.png)***********  ***## A.8 Exercises'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: '![](../Images/5148b26746aa4472e6831204ee97cea1.png)***********  ***## A.8 练习'
- en: Practice
  id: totrans-368
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 练习
- en: '*(Plan)* Consider the following scenario: *A person is interested in whether
    kings or queens live longer, and for every monarch they gather data about how
    long they lived.* Please sketch what that dataset could look like, and then sketch
    a graph that you could build to show all observations.'
  id: totrans-369
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(计划)* 考虑以下场景：*一个人对国王或王后谁活得更久感兴趣，并且为每位君主收集了他们寿命的数据。* 请绘制这个数据集可能的样子，然后绘制一个图表来展示所有观察结果。'
- en: '*(Simulate)* Please further consider the scenario described, assume there are
    1,000 monarchs, and decide which of the following could be used to simulate the
    situation (select all that apply)?'
  id: totrans-370
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(模拟)* 请进一步考虑上述场景，假设有1,000位君主，并决定以下哪些可以用来模拟这种情况（选择所有适用的）？'
- en: '`runif(n = 1000, min = 1, max = 110) |> floor()`'
  id: totrans-371
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`runif(n = 1000, min = 1, max = 110) |> floor()`'
- en: '`rpois(n = 1000, lambda = 65)`'
  id: totrans-372
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`rpois(n = 1000, lambda = 65)`'
- en: '`rnorm(n = 1000) |> floor()`'
  id: totrans-373
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`rnorm(n = 1000) |> floor()`'
- en: '`sample(x = sunspot.month, size = 1000, replace = TRUE) |> floor()`'
  id: totrans-374
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`sample(x = sunspot.month, size = 1000, replace = TRUE) |> floor()`'
- en: '*(Acquire)* Please identify one possible source of actual data about how long
    monarchs lived for.'
  id: totrans-375
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(获取)* 请确定一个关于君主寿命的实际数据来源的可能来源。'
- en: '*(Explore)* Assume that `tidyverse` is loaded and the dataset “monarchs” has
    the column “years”. Which of the following would result only those monarchs that
    lived longer than 35 years (pick one)?'
  id: totrans-376
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(探索)* 假设`tidyverse`已加载，数据集“monarchs”有“years”列。以下哪个选项只会显示寿命超过35年的君主（选择一个）？'
- en: '`monarchs |> arrange(years > 35)`'
  id: totrans-377
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`monarchs |> arrange(years > 35)`'
- en: '`monarchs |> select(years > 35)`'
  id: totrans-378
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`monarchs |> select(years > 35)`'
- en: '`monarchs |> filter(years > 35)`'
  id: totrans-379
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`monarchs |> filter(years > 35)`'
- en: '`monarchs |> mutate(years > 35)`'
  id: totrans-380
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`monarchs |> mutate(years > 35)`'
- en: '*(Communicate)* Please write two paragraphs as if you had gathered data from
    that source, and had built a graph. The exact details contained in the paragraphs
    do not have to be factual (i.e. you do not actually have to get the data nor create
    the graphs).'
  id: totrans-381
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*(沟通)* 请写出两个段落，就像你已经从该来源收集了数据并构建了一个图表。段落中包含的详细内容不必是事实性的（即，你实际上不必获取数据或创建图表）。'
- en: Quiz
  id: totrans-382
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 测验
- en: What is `R` (pick one)?
  id: totrans-383
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`R`是什么（选择一个）？'
- en: A open-source statistical programming language
  id: totrans-384
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个开源统计编程语言
- en: A programming language created by Guido van Rossum
  id: totrans-385
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由Guido van Rossum创建的编程语言
- en: A closed source statistical programming language
  id: totrans-386
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个闭源统计编程语言
- en: An integrated development environment (IDE)
  id: totrans-387
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个集成开发环境（IDE）
- en: What are three advantages of R? What are three disadvantages?
  id: totrans-388
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: R的三个优点是什么？三个缺点是什么？
- en: What is RStudio?
  id: totrans-389
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: RStudio是什么？
- en: An integrated development environment (IDE).
  id: totrans-390
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个集成开发环境（IDE）。
- en: A closed source paid program.
  id: totrans-391
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个闭源付费程序。
- en: A programming language created by Guido van Rossum
  id: totrans-392
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由Guido van Rossum创建的编程语言
- en: A statistical programming language.
  id: totrans-393
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个统计编程语言。
- en: What is the class of the output of `2 + 2` (pick one)?
  id: totrans-394
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`2 + 2`的输出类型是什么（选择一个）？'
- en: character
  id: totrans-395
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 字符
- en: factor
  id: totrans-396
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 因子
- en: numeric
  id: totrans-397
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 数值
- en: date
  id: totrans-398
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 日期
- en: 'Say we had run: `my_name <- "rohan"`. What would be the result of running `print(my_name)`
    (pick one)?'
  id: totrans-399
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设我们运行了：`my_name <- "rohan"`。运行`print(my_name)`的结果会是什么（选择一个）？
- en: “edward”
  id: totrans-400
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “edward”
- en: “monica”
  id: totrans-401
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “monica”
- en: “hugo”
  id: totrans-402
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “hugo”
- en: “rohan”
  id: totrans-403
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “rohan”
- en: 'Say we had a dataset with two columns: “name”, and “age”. Which verb should
    we use to pick just “name” (pick one)?'
  id: totrans-404
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设我们有一个包含两列的数据集：“name”和“age”。我们应该使用哪个动词来选择“name”（选择一个）？
- en: '`select()`'
  id: totrans-405
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`select()`'
- en: '`mutate()`'
  id: totrans-406
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mutate()`'
- en: '`filter()`'
  id: totrans-407
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`filter()`'
- en: '`rename()`'
  id: totrans-408
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`rename()`'
- en: 'Say we had loaded `AustralianPoliticians` and `tidyverse` and then run the
    following code: `australian_politicians <- get_auspol("all")`. How could we select
    all of the columns that end with “Name” (pick one)?'
  id: totrans-409
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设我们已加载`AustralianPoliticians`和`tidyverse`，然后运行以下代码：`australian_politicians
    <- get_auspol("all")`。我们如何选择所有以“Name”结尾的列（选择一个）？
- en: '`australian_politicians |> select(contains("Name"))`'
  id: totrans-410
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`australian_politicians |> select(contains("Name"))`'
- en: '`australian_politicians |> select(starts_with("Name"))`'
  id: totrans-411
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`australian_politicians |> select(starts_with("Name"))`'
- en: '`australian_politicians |> select(matches("Name"))`'
  id: totrans-412
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`australian_politicians |> select(matches("Name"))`'
- en: '`australian_politicians |> select(ends_with("Name"))`'
  id: totrans-413
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`australian_politicians |> select(ends_with("Name"))`'
- en: Under what circumstances, in terms of the names of the columns, would the use
    of `contains()` potentially give different answers to using `ends_with()` in the
    above question?
  id: totrans-414
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在什么情况下，就列名而言，使用`contains()`可能会给出与使用`ends_with()`不同的答案？
- en: Which of the following are not `tidyverse` verbs (pick one)?
  id: totrans-415
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪个不是`tidyverse`动词（选择一个）？
- en: '`select()`'
  id: totrans-416
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`select()`'
- en: '`filter()`'
  id: totrans-417
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`filter()`'
- en: '`arrange()`'
  id: totrans-418
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`arrange()`'
- en: '`mutate()`'
  id: totrans-419
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mutate()`'
- en: '`visualize()`'
  id: totrans-420
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`visualize()`'
- en: Which function would make a new column (pick one)?
  id: totrans-421
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪个函数会创建一个新列（选择一个）？
- en: '`select()`'
  id: totrans-422
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`select()`'
- en: '`filter()`'
  id: totrans-423
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`filter()`'
- en: '`arrange()`'
  id: totrans-424
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`arrange()`'
- en: '`mutate()`'
  id: totrans-425
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mutate()`'
- en: '`visualize()`'
  id: totrans-426
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`visualize()`'
- en: Which function would focus on particular rows (pick one)?
  id: totrans-427
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪个函数会专注于特定的行（选择一个）？
- en: '`select()`'
  id: totrans-428
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`select()`'
- en: '`filter()`'
  id: totrans-429
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`filter()`'
- en: '`arrange()`'
  id: totrans-430
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`arrange()`'
- en: '`mutate()`'
  id: totrans-431
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mutate()`'
- en: '`summarise()`'
  id: totrans-432
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`summarise()`'
- en: Which combination of two could provide a mean of a dataset, by sex (pick two)?
  id: totrans-433
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪两种组合可以提供按性别划分的数据集的平均值（选择两个）？
- en: '`summarise()`'
  id: totrans-434
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`summarise()`'
- en: '`filter()`'
  id: totrans-435
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`filter()`'
- en: '`arrange()`'
  id: totrans-436
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`arrange()`'
- en: '`mutate()`'
  id: totrans-437
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mutate()`'
- en: '`.by`'
  id: totrans-438
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`.by`'
- en: Assume a variable called “age” is an integer. Which line of code would create
    a column that is its exponential (pick one)?
  id: totrans-439
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设有一个名为“age”的变量是整数。以下哪行代码会创建一个表示其指数的列（选择一个）？
- en: '`generate(exp_age = exp(age))`'
  id: totrans-440
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`generate(exp_age = exp(age))`'
- en: '`change(exp_age = exp(age))`'
  id: totrans-441
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`change(exp_age = exp(age))`'
- en: '`make(exp_age = exp(age))`'
  id: totrans-442
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`make(exp_age = exp(age))`'
- en: '`mutate(exp_age = exp(age))`'
  id: totrans-443
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mutate(exp_age = exp(age))`'
- en: Assume a column called “age”. Which line of code could create a column that
    contains the value from five rows above?
  id: totrans-444
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设有一个名为“age”的列。以下哪行代码可以创建一个包含五行以上值的列？
- en: '`mutate(five_before = lag(age))`'
  id: totrans-445
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mutate(five_before = lag(age))`'
- en: '`mutate(five_before = lead(age))`'
  id: totrans-446
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mutate(five_before = lead(age))`'
- en: '`mutate(five_before = lag(age, n = 5))`'
  id: totrans-447
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mutate(five_before = lag(age, n = 5))`'
- en: '`mutate(five_before = lead(age, n = 5))`'
  id: totrans-448
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mutate(five_before = lead(age, n = 5))`'
- en: What would be the output of `class("edward")` (pick one)?
  id: totrans-449
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`class("edward")`的输出会是什么（选择一个）？'
- en: “numeric”
  id: totrans-450
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “数值”
- en: “character”
  id: totrans-451
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “字符”
- en: “data.frame”
  id: totrans-452
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “数据框”
- en: “vector”
  id: totrans-453
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “向量”
- en: Which function would enable us to draw once from three options “blue, white,
    red”, with 10 per cent probability on “blue” and “white”, and the remainder on
    “red”?
  id: totrans-454
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪个函数能让我们从三个选项“blue, white, red”中随机抽取一次，其中“blue”和“white”的概率为10%，其余为“red”？
- en: '`sample(c("blue", "white", "red"), prob = c(0.1, 0.1, 0.8))`'
  id: totrans-455
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`sample(c("blue", "white", "red"), prob = c(0.1, 0.1, 0.8))`'
- en: '`sample(c("blue", "white", "red"), size = 1)`'
  id: totrans-456
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`sample(c("blue", "white", "red"), size = 1)`'
- en: '`sample(c("blue", "white", "red"), size = 1, prob = c(0.8, 0.1, 0.1))`'
  id: totrans-457
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`sample(c("blue", "white", "red"), size = 1, prob = c(0.8, 0.1, 0.1))`'
- en: '`sample(c("blue", "white", "red"), size = 1, prob = c(0.1, 0.1, 0.8))`'
  id: totrans-458
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`sample(c("blue", "white", "red"), size = 1, prob = c(0.1, 0.1, 0.8))`'
- en: Which code simulates 10,000 draws from a normal distribution with a mean of
    27 and a standard deviation of 3 (pick one)?
  id: totrans-459
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪段代码模拟了从均值为27、标准差为3的正态分布中抽取10,000次（选择一个）？
- en: '`rnorm(10000, mean = 27, sd = 3)`'
  id: totrans-460
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`rnorm(10000, mean = 27, sd = 3)`'
- en: '`rnorm(27, mean = 10000, sd = 3)`'
  id: totrans-461
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`rnorm(27, mean = 10000, sd = 3)`'
- en: '`rnorm(3, mean = 10000, sd = 27)`'
  id: totrans-462
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`rnorm(3, mean = 10000, sd = 27)`'
- en: '`rnorm(27, mean = 3, sd = 1000)`'
  id: totrans-463
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`rnorm(27, mean = 3, sd = 1000)`'
- en: What are the three key aspects of the grammar of graphics (select all)?
  id: totrans-464
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 图形语法的三要素是什么（选择所有）？
- en: data
  id: totrans-465
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 数据
- en: aesthetics
  id: totrans-466
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 美学
- en: type
  id: totrans-467
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 类型
- en: '`geom_histogram()`'
  id: totrans-468
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`geom_histogram()`'
- en: Activity
  id: totrans-469
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 活动
- en: I think we should be suspicious when we find ourselves attracted to data—very,
    very thin and weak data—that seem to justify beliefs that have held great currency
    in lots of societies throughout history, in a way that is conducive to the oppression
    of large segments of the population.
  id: totrans-470
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我认为当我们发现自己被数据所吸引——非常、非常薄弱的数据——似乎可以证明历史上许多社会中一直占据重要地位的观点时，我们应该保持怀疑态度。
- en: ''
  id: totrans-471
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Amia Srinivasan ([Cowen 2021](99-references.html#ref-conversationswithamiasrinivasan))
  id: totrans-472
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 阿米亚·斯里尼瓦桑 ([Cowen 2021](99-references.html#ref-conversationswithamiasrinivasan))
- en: Reflect on the quote from Amia Srinivasan, Chichele Professor of Social and
    Political Theory, All Souls College, Oxford, and D’Ignazio and Klein ([2020](99-references.html#ref-datafeminism2020)),
    especially Chapter 6.
  id: totrans-473
  prefs: []
  type: TYPE_NORMAL
  zh: 思考来自阿米亚·斯里尼瓦桑（Amia Srinivasan），牛津大学阿什莫尔学院社会和政治理论切奇利教授，以及迪格纳齐奥和克莱因（D’Ignazio
    and Klein）[2020](99-references.html#ref-datafeminism2020)的引言，特别是第6章。
- en: Please create a GitHub repository with a meaningful name, and appropriate structure,
    and use a reproducible Quarto file to create a PDF of at least two pages (not
    including references) discussing those quotes in relation to a dataset that you
    are familiar with. Submit a link to the PDF file e.g. https://github.com/RohanAlexander/starter_folder/blob/main/outputs/paper/paper.pdf
    and the PDF itself.
  id: totrans-474
  prefs: []
  type: TYPE_NORMAL
  zh: 请创建一个具有有意义名称的GitHub仓库，并使用适当的结构，然后使用可重复的Quarto文件创建至少两页的PDF文件（不包括参考文献），讨论这些引言与您熟悉的数据集之间的关系。提交PDF文件的链接，例如：https://github.com/RohanAlexander/starter_folder/blob/main/outputs/paper/paper.pdf，以及PDF文件本身。
- en: 'Alexander, Rohan, and Paul Hodgetts. 2021\. *AustralianPoliticians: Provides
    Datasets About Australian Politicians*. [https://CRAN.R-project.org/package=AustralianPoliticians](https://CRAN.R-project.org/package=AustralianPoliticians).Bache,
    Stefan Milton, and Hadley Wickham. 2022\. *magrittr: A Forward-Pipe Operator for
    R*. [https://CRAN.R-project.org/package=magrittr](https://CRAN.R-project.org/package=magrittr).Bertrand,
    Marianne, and Sendhil Mullainathan. 2004\. “Are Emily and Greg More Employable
    Than Lakisha and Jamal? A Field Experiment on Labor Market Discrimination.” *American
    Economic Review* 94 (4): 991–1013\. [https://doi.org/10.1257/0002828042002561](https://doi.org/10.1257/0002828042002561).Buja,
    Andreas, Dianne Cook, Heike Hofmann, Michael Lawrence, Eun-Kyung Lee, Deborah
    F. Swayne, and Hadley Wickham. 2009\. “Statistical Inference for Exploratory Data
    Analysis and Model Diagnostics.” *Philosophical Transactions of the Royal Society
    A: Mathematical, Physical and Engineering Sciences* 367 (1906): 4361–83\. [https://doi.org/10.1098/rsta.2009.0120](https://doi.org/10.1098/rsta.2009.0120).Buja,
    Andreas, Dianne Cook, and Deborah Swayne. 1996\. “Interactive High-Dimensional
    Data Visualization.” *Journal of Computational and Graphical Statistics* 5 (1):
    78–99\. [https://doi.org/10.2307/1390754](https://doi.org/10.2307/1390754).Cook,
    Dianne, Andreas Buja, Javier Cabrera, and Catherine Hurley. 1995\. “Grand Tour
    and Projection Pursuit.” *Journal of Computational and Graphical Statistics* 4
    (3): 155–72\. [https://doi.org/10.1080/10618600.1995.10474674](https://doi.org/10.1080/10618600.1995.10474674).Cook,
    Dianne, and Deborah Swayne. 2007\. *Interactive and Dynamic Graphics for Data
    Analysis: With R and GGobi*. 1st ed. Springer.Cowen, Tyler. 2021\. “Episode 132:
    Amia Srinivasan on Utopian Feminism.” *Conversations with Tyler*, September. [https://conversationswithtyler.com/episodes/amia-srinivasan/](https://conversationswithtyler.com/episodes/amia-srinivasan/).D’Ignazio,
    Catherine, and Lauren Klein. 2020\. *Data Feminism*. Massachusetts: The MIT Press.
    [https://data-feminism.mitpress.mit.edu](https://data-feminism.mitpress.mit.edu).Firke,
    Sam. 2023\. *janitor: Simple Tools for Examining and Cleaning Dirty Data*. [https://CRAN.R-project.org/package=janitor](https://CRAN.R-project.org/package=janitor).Grolemund,
    Garrett, and Hadley Wickham. 2011\. “Dates and Times Made Easy with lubridate.”
    *Journal of Statistical Software* 40 (3): 1–25\. [https://doi.org/10.18637/jss.v040.i03](https://doi.org/10.18637/jss.v040.i03).Hangartner,
    Dominik, Daniel Kopp, and Michael Siegenthaler. 2021\. “Monitoring Hiring Discrimination
    Through Online Recruitment Platforms.” *Nature* 589 (7843): 572–76\. [https://doi.org/10.1038/s41586-020-03136-0](https://doi.org/10.1038/s41586-020-03136-0).Healy,
    Kieran. 2020\. “The Kitchen Counter Observatory,” May. [https://kieranhealy.org/blog/archives/2020/05/21/the-kitchen-counter-observatory/](https://kieranhealy.org/blog/archives/2020/05/21/the-kitchen-counter-observatory/).Kleiber,
    Christian, and Achim Zeileis. 2008\. *Applied Econometrics with R*. New York:
    Springer-Verlag. [https://CRAN.R-project.org/package=AER](https://CRAN.R-project.org/package=AER).Larmarange,
    Joseph. 2023\. *labelled: Manipulating Labelled Data*. [https://CRAN.R-project.org/package=labelled](https://CRAN.R-project.org/package=labelled).Müller,
    Kirill, Tobias Schieferdecker, and Patrick Schratz. 2019\. *Visualization, Transformation
    and Reporting with the Tidyverse*. [https://krlmlr.github.io/vistransrep/](https://krlmlr.github.io/vistransrep/).Müller,
    Kirill, and Hadley Wickham. 2022\. *tibble: Simple Data Frames*. [https://CRAN.R-project.org/package=tibble](https://CRAN.R-project.org/package=tibble).OECD.
    2022\. *Quarterly GDP*. [https://data.oecd.org/gdp/quarterly-gdp.htm](https://data.oecd.org/gdp/quarterly-gdp.htm).R
    Core Team. 2024\. *R: A Language and Environment for Statistical Computing*. Vienna,
    Austria: R Foundation for Statistical Computing. [https://www.R-project.org/](https://www.R-project.org/).Thieme,
    Nick. 2018\. “R Generation.” *Significance* 15 (4): 14–19\. [https://doi.org/10.1111/j.1740-9713.2018.01169.x](https://doi.org/10.1111/j.1740-9713.2018.01169.x).Wickham,
    Hadley. 2009\. “Manipulating Data.” In *ggplot2*, 157–75\. Springer New York.
    [https://doi.org/10.1007/978-0-387-98141-3_9](https://doi.org/10.1007/978-0-387-98141-3_9).———.
    2014\. “Tidy Data.” *Journal of Statistical Software* 59 (1): 1–23\. [https://doi.org/10.18637/jss.v059.i10](https://doi.org/10.18637/jss.v059.i10).———.
    2016\. *ggplot2: Elegant Graphics for Data Analysis*. Springer-Verlag New York.
    [https://ggplot2.tidyverse.org](https://ggplot2.tidyverse.org).———. 2019\. *Advanced
    R*. 2nd ed. Chapman; Hall/CRC. [https://adv-r.hadley.nz](https://adv-r.hadley.nz).———.
    2020\. *Tidyverse*. [https://www.tidyverse.org/](https://www.tidyverse.org/).———.
    2022\. *stringr: Simple, Consistent Wrappers for Common String Operations*. [https://CRAN.R-project.org/package=stringr](https://CRAN.R-project.org/package=stringr).———.
    2023\. *forcats: Tools for Working with Categorical Variables (Factors)*. [https://CRAN.R-project.org/package=forcats](https://CRAN.R-project.org/package=forcats).Wickham,
    Hadley, Mara Averick, Jenny Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain
    François, Garrett Grolemund, et al. 2019\. “Welcome to the Tidyverse.” *Journal
    of Open Source Software* 4 (43): 1686\. [https://doi.org/10.21105/joss.01686](https://doi.org/10.21105/joss.01686).Wickham,
    Hadley, Mine Çetinkaya-Rundel, and Garrett Grolemund. (2016) 2023\. *R for Data
    Science*. 2nd ed. O’Reilly Media. [https://r4ds.hadley.nz](https://r4ds.hadley.nz).Wickham,
    Hadley, Romain François, Lionel Henry, and Kirill Müller. 2022\. *dplyr: A Grammar
    of Data Manipulation*. [https://CRAN.R-project.org/package=dplyr](https://CRAN.R-project.org/package=dplyr).Wickham,
    Hadley, Jim Hester, and Jenny Bryan. 2022\. *readr: Read Rectangular Text Data*.
    [https://CRAN.R-project.org/package=readr](https://CRAN.R-project.org/package=readr).Wickham,
    Hadley, Evan Miller, and Danny Smith. 2023\. *haven: Import and Export “SPSS”
    “Stata” and “SAS” Files*. [https://CRAN.R-project.org/package=haven](https://CRAN.R-project.org/package=haven).Wickham,
    Hadley, Davis Vaughan, and Maximilian Girlich. 2023\. *tidyr: Tidy Messy Data*.
    [https://CRAN.R-project.org/package=tidyr](https://CRAN.R-project.org/package=tidyr).*******************'
  id: totrans-475
  prefs: []
  type: TYPE_NORMAL
  zh: 'Alexander, Rohan, and Paul Hodgetts. 2021\. *澳大利亚政治家：提供有关澳大利亚政治家的数据集*. [https://CRAN.R-project.org/package=AustralianPoliticians](https://CRAN.R-project.org/package=AustralianPoliticians).
    Bache, Stefan Milton, and Hadley Wickham. 2022\. *magrittr：R的向前管道操作符*. [https://CRAN.R-project.org/package=magrittr](https://CRAN.R-project.org/package=magrittr).
    Bertrand, Marianne, and Sendhil Mullainathan. 2004\. “Are Emily and Greg More
    Employable Than Lakisha and Jamal? A Field Experiment on Labor Market Discrimination.”
    *美国经济评论* 94 (4): 991–1013\. [https://doi.org/10.1257/0002828042002561](https://doi.org/10.1257/0002828042002561).
    Buja, Andreas, Dianne Cook, Heike Hofmann, Michael Lawrence, Eun-Kyung Lee, Deborah
    F. Swayne, and Hadley Wickham. 2009\. “Statistical Inference for Exploratory Data
    Analysis and Model Diagnostics.” *皇家学会哲学学报A：数学、物理和工程科学* 367 (1906): 4361–83\.
    [https://doi.org/10.1098/rsta.2009.0120](https://doi.org/10.1098/rsta.2009.0120).
    Buja, Andreas, Dianne Cook, and Deborah Swayne. 1996\. “Interactive High-Dimensional
    Data Visualization.” *计算与图形统计杂志* 5 (1): 78–99\. [https://doi.org/10.2307/1390754](https://doi.org/10.2307/1390754).
    Cook, Dianne, Andreas Buja, Javier Cabrera, and Catherine Hurley. 1995\. “Grand
    Tour and Projection Pursuit.” *计算与图形统计杂志* 4 (3): 155–72\. [https://doi.org/10.1080/10618600.1995.10474674](https://doi.org/10.1080/10618600.1995.10474674).
    Cook, Dianne, and Deborah Swayne. 2007\. *交互式和动态图形数据分析：使用R和GGobi*. 第1版. Springer.
    Cowen, Tyler. 2021\. “Episode 132: Amia Srinivasan on Utopian Feminism.” *与Tyler的对话*，九月.
    [https://conversationswithtyler.com/episodes/amia-srinivasan/](https://conversationswithtyler.com/episodes/amia-srinivasan/).
    D’Ignazio, Catherine, and Lauren Klein. 2020\. *数据女性主义*. 马萨诸塞州：麻省理工学院出版社. [https://data-feminism.mitpress.mit.edu](https://data-feminism.mitpress.mit.edu).
    Firke, Sam. 2023\. *janitor：用于检查和清理脏数据的简单工具*. [https://CRAN.R-project.org/package=janitor](https://CRAN.R-project.org/package=janitor).
    Grolemund, Garrett, and Hadley Wickham. 2011\. “Dates and Times Made Easy with
    lubridate.” *统计软件杂志* 40 (3): 1–25\. [https://doi.org/10.18637/jss.v040.i03](https://doi.org/10.18637/jss.v040.i03).
    Hangartner, Dominik, Daniel Kopp, and Michael Siegenthaler. 2021\. “Monitoring
    Hiring Discrimination Through Online Recruitment Platforms.” *自然* 589 (7843):
    572–76\. [https://doi.org/10.1038/s41586-020-03136-0](https://doi.org/10.1038/s41586-020-03136-0).
    Healy, Kieran. 2020\. “The Kitchen Counter Observatory,” 五月. [https://kieranhealy.org/blog/archives/2020/05/21/the-kitchen-counter-observatory/](https://kieranhealy.org/blog/archives/2020/05/21/the-kitchen-counter-observatory/).
    Kleiber, Christian, and Achim Zeileis. 2008\. *使用R进行应用计量经济学*. 纽约：Springer-Verlag.
    [https://CRAN.R-project.org/package=AER](https://CRAN.R-project.org/package=AER).
    Larmarange, Joseph. 2023\. *labelled：操作标记数据*. [https://CRAN.R-project.org/package=labelled](https://CRAN.R-project.org/package=labelled).
    Müller, Kirill, Tobias Schieferdecker, and Patrick Schratz. 2019\. *使用Tidyverse进行可视化、转换和报告*.
    [https://krlmlr.github.io/vistransrep/](https://krlmlr.github.io/vistransrep/).
    Müller, Kirill, and Hadley Wickham. 2022\. *tibble：简单数据框*. [https://CRAN.R-project.org/package=tibble](https://CRAN.R-project.org/package=tibble).
    OECD. 2022\. *季度GDP*. [https://data.oecd.org/gdp/quarterly-gdp.htm](https://data.oecd.org/gdp/quarterly-gdp.htm).
    R Core Team. 2024\. *R：统计计算的语言和环境*. 奥地利维也纳：R统计计算基金会. [https://www.R-project.org/](https://www.R-project.org/).
    Thieme, Nick. 2018\. “R Generation.” *显著性* 15 (4): 14–19\. [https://doi.org/10.1111/j.1740-9713.2018.01169.x](https://doi.org/10.1111/j.1740-9713.2018.01169.x).
    Wickham, Hadley. 2009\. “Manipulating Data.” In *ggplot2*, 157–75\. Springer New
    York. [https://doi.org/10.1007/978-0-387-98141-3_9](https://doi.org/10.1007/978-0-387-98141-3_9).
    ——. 2014\. “Tidy Data.” *统计软件杂志* 59 (1): 1–23\. [https://doi.org/10.18637/jss.v059.i10](https://doi.org/10.18637/jss.v059.i10).
    ——. 2016\. *ggplot2：数据分析中的优雅图形*. Springer-Verlag New York. [https://ggplot2.tidyverse.org](https://ggplot2.tidyverse.org).
    ——. 2019\. *高级R*. 第2版. Chapman; Hall/CRC. [https://adv-r.hadley.nz](https://adv-r.hadley.nz).
    ——. 2020\. *Tidyverse*. [https://www.tidyverse.org/](https://www.tidyverse.org/).
    ——. 2022\. *stringr：常见字符串操作的简单、一致的包装器*. [https://CRAN.R-project.org/package=stringr](https://CRAN.R-project.org/package=stringr).
    ——. 2023\. *forcats：处理分类变量（因子）的工具*. [https://CRAN.R-project.org/package=forcats](https://CRAN.R-project.org/package=forcats).
    Wickham, Hadley, Mara Averick, Jenny Bryan, Winston Chang, Lucy D’Agostino McGowan,
    Romain François, Garrett Grolemund, et al. 2019\. “Welcome to the Tidyverse.”
    *开源软件杂志* 4 (43): 1686\. [https://doi.org/10.21105/joss.01686](https://doi.org/10.21105/joss.01686).
    Wickham, Hadley, Mine Çetinkaya-Rundel, and Garrett Grolemund. (2016) 2023\. *R数据科学*.
    第2版. O’Reilly Media. [https://r4ds.hadley.nz](https://r4ds.hadley.nz). Wickham,
    Hadley, Romain François, Lionel Henry, and Kirill Müller. 2022\. *dplyr：数据操作语法*.
    [https://CRAN.R-project.org/package=dplyr](https://CRAN.R-project.org/package=dplyr).
    Wickham, Hadley, Jim Hester, and Jenny Bryan. 2022\. *readr：读取矩形文本数据*. [https://CRAN.R-project.org/package=readr](https://CRAN.R-project.org/package=readr).
    Wickham, Hadley, Evan Miller, and Danny Smith. 2023\. *haven：导入和导出“SPSS”、“Stata”和“SAS”文件*.
    [https://CRAN.R-project.org/package=haven](https://CRAN.R-project.org/package=haven).
    Wickham, Hadley, Davis Vaughan, and Maximilian Girlich. 2023\. *tidyr：整理混乱的数据*.
    [https://CRAN.R-project.org/package=tidyr](https://CRAN.R-project.org/package=tidyr).'
