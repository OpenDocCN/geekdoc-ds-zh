- en: Online Appendix A — R essentials
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://tellingstorieswithdata.com/20-r_essentials.html](https://tellingstorieswithdata.com/20-r_essentials.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[Appendices](./20-r_essentials.html)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[A  R essentials](./20-r_essentials.html)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Prerequisites**'
  prefs: []
  type: TYPE_NORMAL
- en: Read *R for Data Science*, Chapter 4 “Data transformation”, ([Wickham, Çetinkaya-Rundel,
    and Grolemund [2016] 2023](99-references.html#ref-r4ds))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Provides an overview of manipulating datasets using `dplyr`.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Read *Data Feminism*, Chapter 6 “The Numbers Don’t Speak for Themselves”, ([D’Ignazio
    and Klein 2020](99-references.html#ref-datafeminism2020))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Discusses the need to consider data within the broader context that generated
    them.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Read *R Generation*, ([Thieme 2018](99-references.html#ref-Thieme2018))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Provides background information about `R`.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Key concepts and skills**'
  prefs: []
  type: TYPE_NORMAL
- en: Understanding foundational aspects of `R` and RStudio enables a gradual improvement
    of workflows. For instance, being able to use key `dplyr` verbs and make graphs
    with `ggplot2` makes manipulating and understanding datasets easier.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: But there is an awful lot of functionality in the `tidyverse` including importing
    data, dataset manipulation, string manipulation, and factors. You do not need
    to know it all at once, but you should know that you do not yet know it.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Beyond the `tidyverse` it is also important to know that foundational aspects,
    common to many languages, exist and can be added to data science workflows. For
    instance, class, functions, and data simulation all have an important role to
    play.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Software and packages**'
  prefs: []
  type: TYPE_NORMAL
- en: Base `R`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Core `tidyverse` ([Wickham et al. 2019](99-references.html#ref-tidyverse))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`dplyr` ([Wickham et al. 2022](99-references.html#ref-citedplyr))'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`forcats` ([Wickham 2023](99-references.html#ref-citeforcats))'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`ggplot2` ([Wickham 2016](99-references.html#ref-citeggplot))'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`readr` ([Wickham, Hester, and Bryan 2022](99-references.html#ref-citereadr))'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`stringr` ([Wickham 2022](99-references.html#ref-citestringr))'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`tibble` ([Müller and Wickham 2022](99-references.html#ref-tibble))'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`tidyr` ([Wickham, Vaughan, and Girlich 2023](99-references.html#ref-citetidyr))'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Outer `tidyverse` ([Wickham et al. 2019](99-references.html#ref-tidyverse))
    (these need to be loaded separately e.g. `library("haven")`)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`haven` ([Wickham, Miller, and Smith 2023](99-references.html#ref-citehaven))'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`lubridate` ([Grolemund and Wickham 2011](99-references.html#ref-GrolemundWickham2011))'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`janitor` ([Firke 2023](99-references.html#ref-janitor))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A.1 Introduction
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this chapter we focus on foundational skills needed to use the statistical
    programming language `R` ([R Core Team 2024](99-references.html#ref-citeR)) to
    tell stories with data. Some of it may not make sense at first, but these are
    skills and approaches that we will often use. You should initially go through
    this chapter quickly, noting aspects that you do not understand. Then come back
    to this chapter from time to time as you continue through the rest of the book.
    That way you will see how the various bits fit into context.
  prefs: []
  type: TYPE_NORMAL
- en: '`R` is an open-source language for statistical programming. You can download
    `R` for free from the [Comprehensive R Archive Network](https://cran.r-project.org)
    (CRAN). RStudio is an Integrated Development Environment (IDE) for `R` which makes
    the language easier to use and can be downloaded for free from Posit [here](https://www.rstudio.com/products/rstudio/).'
  prefs: []
  type: TYPE_NORMAL
- en: 'The past ten years or so have been characterized by the increased use of the
    `tidyverse`. This is “…an opinionated collection of `R` packages designed for
    data science. All packages share an underlying design philosophy, grammar, and
    data structures” ([Wickham 2020](99-references.html#ref-tidyversewebsite)). There
    are three distinctions to be clear about: the original `R` language, typically
    referred to as “base”; the `tidyverse` which is a coherent collection of packages
    that build on top of base, and other packages.'
  prefs: []
  type: TYPE_NORMAL
- en: Essentially everything that we can do in the `tidyverse`, we can also do in
    base. But, as the `tidyverse` was built especially for data science it is often
    easier to use, especially when learning. Additionally, most everything that we
    can do in the `tidyverse`, we can also do with other packages. But, as the `tidyverse`
    is a coherent collection of packages, it is often easier to use, again, especially
    when learning. Eventually there are cases where it makes sense to trade-off the
    convenience and coherence of the `tidyverse` for some features of base, other
    packages, or languages. Indeed, we introduce SQL in [Chapter 10](10-store_and_share.html)
    as one source of considerable efficiency gain when working with data. For instance,
    the `tidyverse` can be slow, and so if one needs to import thousands of CSVs then
    it can make sense to switch away from `read_csv()`. The appropriate use of base
    and non-tidyverse packages, or even other languages, rather than dogmatic insistence
    on a particular solution, is a sign of intellectual maturity.
  prefs: []
  type: TYPE_NORMAL
- en: Central to our use of the statistical programming language `R` is data, and
    most of the data that we use will have humans at the heart of it. Sometimes, dealing
    with human-centered data in this way can have a numbing effect, resulting in over-generalization,
    and potentially problematic work. Another sign of intellectual maturity is when
    it has the opposite effect, increasing our awareness of our decision-making processes
    and their consequences.
  prefs: []
  type: TYPE_NORMAL
- en: In practice, I find that far from distancing you from questions of meaning,
    quantitative data forces you to confront them. The numbers draw you in. Working
    with data like this is an unending exercise in humility, a constant compulsion
    to think through what you can and cannot see, and a standing invitation to understand
    what the measures really capture—what they mean, and for whom.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Healy ([2020](99-references.html#ref-kieranskitchen))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: A.2 R, RStudio, and Posit Cloud
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '`R` and RStudio are complementary, but they are not the same thing. Müller,
    Schieferdecker, and Schratz ([2019](99-references.html#ref-vistransrep)) explain
    their relationship by analogy, where `R` is like an engine and RStudio is like
    a car—we can use engines in a lot of different situations, and they are not limited
    to being used in cars, but the combination is especially useful.'
  prefs: []
  type: TYPE_NORMAL
- en: A.2.1 R
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[`R`](https://www.r-project.org/) is an open-source and free programming language
    that is focused on general statistics. Free in this context does not refer to
    a price of zero, but instead to the freedom that the creators give users to largely
    do what they want with it (although it also does have a price of zero). This is
    in contrast with an open-source programming language that is designed for general
    purpose, such as `Python`, or an open-source programming language that is focused
    on probability, such as `Stan`. It was created by Ross Ihaka and Robert Gentleman
    at the University of Auckland in the 1990s, and traces its provenance to `S`,
    which was developed at Bell Labs in the 1970s. It is maintained by the R Core
    Team and changes to this “base” of code occur methodically and with concern given
    to different priorities.'
  prefs: []
  type: TYPE_NORMAL
- en: Many people build on this stable base, to extend the capabilities of `R` to
    better and more quickly suit their needs. They do this by creating packages. Typically,
    although not always, a package is a collection of `R` code, mostly functions,
    and this allows us to more easily do things that we want to do. These packages
    are managed by repositories such as CRAN and Bioconductor.
  prefs: []
  type: TYPE_NORMAL
- en: If you want to use a package, then you first need to install it on your computer,
    and then you need to load it when you want to use it. Dr Di Cook, Professor of
    Business Analytics at Monash University, describes this as analogous to a lightbulb.
    If you want light in your house, first you need to fit a lightbulb, and then you
    need to turn the switch on. Installing a package, say, `install.packages("tidyverse")`,
    is akin to fitting a lightbulb into a socket—you only need to do this once for
    each lightbulb. But then each time you want light you need to turn on the switch
    to the lightbulb, which in the `R` packages case, means drawing on your library,
    say, `library(tidyverse)`.
  prefs: []
  type: TYPE_NORMAL
- en: '*Shoulders of giants* *Dr Di Cook is Distinguished Professor of Statistics
    at Monash University. After earning a PhD in statistics from Rutgers University
    in 1993 where she focused on statistical graphics, she was appointed as an assistant
    professor at Iowa State University, being promoted to full professor in 2005,
    and in 2015 she moved to Monash. One area of her research is data visualization,
    especially interactive and dynamic graphics. Buja, Cook, and Swayne ([1996](99-references.html#ref-buja1996interactive))
    which proposes a taxonomy of interactive data visualization and associated software
    XGobi, which is the focus of Cook and Swayne ([2007](99-references.html#ref-ggobibook)).
    Cook et al. ([1995](99-references.html#ref-Cook1995)) develops and explores the
    use of a dynamic graphical tool for exploratory data analysis and Buja et al.
    ([2009](99-references.html#ref-Buja2009)) develops a framework for evaluating
    visual statistical methods, where plots and human cognition stand in for test
    statistics and statistical tests, respectively. She is a Fellow of the American
    Statistical Association.*  *To install a package on your computer (again, we will
    need to do this only once per computer) we use `install.packages()`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: '*And then when we want to use the package, we use `library()`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: '*Having downloaded it, we can open `R` and use it directly. It is primarily
    designed to be interacted with through the command line. While this is functional,
    it can be useful to have a richer environment than the command line provides.
    In particular, it can be useful to install an Integrated Development Environment
    (IDE), which is an application that brings together various bits and pieces that
    will be used often. One common IDE for `R` is RStudio, although others such as
    Visual Studio are also used.***  ***### A.2.2 RStudio'
  prefs: []
  type: TYPE_NORMAL
- en: RStudio is distinct to `R`, and they are different entities. RStudio builds
    on top of `R` to make it easier to use R. This is in the same way that one could
    use the internet from the command line, but most people use a browser such as
    Chrome, Firefox, or Safari.
  prefs: []
  type: TYPE_NORMAL
- en: RStudio is free in the sense that we do not pay for it. It is also free in the
    sense of being able to take the code, modify it, and distribute that code. But
    the maker of RStudio, Posit, is a company, albeit it a B Corp, and so it is possible
    that the current situation could change. It can be downloaded from Posit [here](https://www.rstudio.com/products/rstudio/).
  prefs: []
  type: TYPE_NORMAL
- en: When we open RStudio it will look like [Figure A.1](#fig-first).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/27948520f36735f6cc69fdfa7e0a63b8.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure A.1: Opening RStudio for the first time'
  prefs: []
  type: TYPE_NORMAL
- en: The left pane is a console in which you can type and execute `R` code line by
    line. Try it with 2+2 by clicking next to the prompt “>”, typing “2+2”, and then
    pressing “return/enter”.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE3]*  *The pane on the top right has information about the environment.
    For instance, when we create variables a list of their names and some properties
    will appear there. Next to the prompt type the following code, replacing Rohan
    with your name, and again press enter.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: '*As mentioned in [Chapter 2](02-drinking_from_a_fire_hose.html) the `<-`, or
    “assignment operator”, allocates `"Rohan"` to an object called “my_name”. You
    should notice a new value in the environment pane with the variable name and its
    value.'
  prefs: []
  type: TYPE_NORMAL
- en: 'The pane in the bottom right is a file manager. At the moment it should just
    have two files: an `R` History file and a `R` Project file. We will get to what
    these are later, but for now we will create and save a file.'
  prefs: []
  type: TYPE_NORMAL
- en: Run the following code, without worrying too much about the details for now.
    You should see a new “.rds” file in your list of files.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]**  ***### A.2.3 Posit Cloud'
  prefs: []
  type: TYPE_NORMAL
- en: While you can and should download RStudio to your own computer, initially we
    recommend using [Posit Cloud](https://posit.cloud). This is an online version
    of RStudio that is provided by Posit. We will use this so that you can focus on
    getting comfortable with `R` and RStudio in an environment that is consistent.
    This way you do not have to worry about what computer you have or installation
    permissions, amongst other things.
  prefs: []
  type: TYPE_NORMAL
- en: The free version of Posit Cloud is free, as in no financial cost. The trade-off
    is that it is not powerful, and it is sometimes slow, but for the purposes of
    getting started it is enough.******  ****## A.3 Getting started
  prefs: []
  type: TYPE_NORMAL
- en: We will now start going through some code. Actively write this all out yourself.
  prefs: []
  type: TYPE_NORMAL
- en: While working line-by-line in the console is fine, it is easier to write out
    a whole script that can then be run. We will do this by making an `R` Script (“File”
    \(\rightarrow\) “New File” \(\rightarrow\) “R Script”). The console pane will
    fall to the bottom left and an `R` Script will open in the top left. We will write
    some code that will get all of the Australian federal politicians and then construct
    a small table about the genders of the prime ministers. Some of this code will
    not make sense at this stage, but just type it all out to get into the habit and
    then run it. To run the whole script, we can click “Run” or we can highlight certain
    lines and then click “Run” to just run those lines.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE7]'
  prefs: []
  type: TYPE_NORMAL
- en: '*[PRE8]*  *We can see that, as at the end of 2021, one female has been prime
    minister (Julia Gillard), while the other 29 prime ministers were male.'
  prefs: []
  type: TYPE_NORMAL
- en: 'One critical operator when programming is the “pipe”: `|>`. We read this as
    “and then”. This takes the output of a line of code and uses it as the first input
    to the next line of code. It makes code easier to read. By way of background,
    for many years `R` users used `%>%` as the pipe, which is from `magrittr` ([Bache
    and Wickham 2022](99-references.html#ref-magrittr)) and part of the `tidyverse`.
    Base `R` added the pipe that we use in this book, `|>`, in 2021, and so if you
    look at older code, you may see the earlier pipe being used. For the most part,
    they are interchangeable.'
  prefs: []
  type: TYPE_NORMAL
- en: The idea of the pipe is that we take a dataset, and then do something to it.
    We used this in the earlier example. Another example follows where we will look
    at the first six lines of a dataset by piping it to `head()`. Notice that `head()`
    does not explicitly take any arguments in this example. It knows which data to
    display because the pipe tells it implicitly.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE10]*  *We can save this `R` Script as “my_first_r_script.R” (“File” \(\rightarrow\)
    “Save As”). At this point, our workspace should look something like [Figure A.2](#fig-third).'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/89a745e9aee901ca8bc0b5d55af90fd7.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure A.2: After running an `R` Script'
  prefs: []
  type: TYPE_NORMAL
- en: One thing to be aware of is that each Posit Cloud workspace is essentially a
    new computer. Because of this, we need to install any package that we want to
    use for each workspace. For instance, before we can use the `tidyverse`, we need
    to install it with `install.packages("tidyverse")`. This contrasts with using
    one’s own computer.
  prefs: []
  type: TYPE_NORMAL
- en: 'A few final notes on Posit Cloud:'
  prefs: []
  type: TYPE_NORMAL
- en: In the Australian politician’s example, we got our data from the website GitHub
    using an `R` package, but we can get data into a workspace from a local computer
    in a variety of ways. One way is to use the “upload” button in the “Files” panel.
    Another is to use `readr` ([Wickham, Hester, and Bryan 2022](99-references.html#ref-citereadr)),
    which is part of the `tidyverse` ([Wickham et al. 2019](99-references.html#ref-tidyverse)).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Posit Cloud allows some degree of collaboration. For instance, you can give
    someone else access to a workspace that you create and even both be in the same
    workspace at the one time. This could be useful for collaboration.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: There are a variety of weaknesses of Posit Cloud, in particular the RAM limits.
    Additionally, like any web application, things break from time to time or go down.***  ***##
    A.4 The `dplyr` verbs
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: One of the key packages that we will use is the `tidyverse` ([Wickham et al.
    2019](99-references.html#ref-tidyverse)). The `tidyverse` is actually a package
    of packages, which means when we install the `tidyverse`, we actually install
    a whole bunch of different packages. The key package in the `tidyverse` in terms
    of manipulating data is `dplyr` ([Wickham et al. 2022](99-references.html#ref-citedplyr)).
  prefs: []
  type: TYPE_NORMAL
- en: There are five `dplyr` functions that are regularly used, and we will now go
    through each of these. These are commonly referred to as the `dplyr` verbs.
  prefs: []
  type: TYPE_NORMAL
- en: '`select()`'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`filter()`'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`arrange()`'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`mutate()`'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`summarise()` or equally `summarize()`'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: We will also cover `.by`, and `count()` here as they are closely related.
  prefs: []
  type: TYPE_NORMAL
- en: As we have already installed the `tidyverse`, we just need to load it.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: '*And we will begin by again using some data about Australian politicians from
    the `AustralianPoliticians` package ([Alexander and Hodgetts 2021](99-references.html#ref-citeaustralianpoliticians)).'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE13]*  *### A.4.1 `select()`'
  prefs: []
  type: TYPE_NORMAL
- en: We use `select()` to pick particular columns of a dataset. For instance, we
    might like to select the “firstName” column.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE15]*  *In R, there are many ways to do things. Sometimes these are different
    ways to do the same thing, and other times they are different ways to do *almost*
    the same thing. For instance, another way to pick a particular column of a dataset
    is to use the “extract” operator `$`. This is from base, as opposed to `select()`
    which is from the `tidyverse`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE17]*  *The two appear similar—both pick the “firstName” column—but they
    differ in the class of what they return, with `select()` returning a tibble and
    `$` returning a vector. For the sake of completeness, if we combine `select()`
    with `pull()` then we get the same class of output, a vector, as if we had used
    the extract operator.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE19]*  *We can also use `select()` to remove columns, by negating the column
    name.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE21]*  *Finally, we can `select()` based on conditions. For instance, we
    can `select()` all of the columns that start with, say, “birth”.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE23]*  *There are a variety of similar “selection helpers” including `starts_with()`,
    `ends_with()`, and `contains()`. More information about these is available in
    the help page for `select()` which can be accessed by running `?select()`.'
  prefs: []
  type: TYPE_NORMAL
- en: At this point, we will use `select()` to reduce the width of our dataset.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE25]*  *One thing that sometimes confuses people who are new to R, is that
    the output is not “saved”, unless you assign it to an object. For instance, here
    the first lines are `australian_politicians <- australian_politicians |>` and
    then `select()` is used, compared with `australian_politicians |>`. This ensures
    that the changes brought about by `select()` are applied to the object, and so
    it is that modified version that would be used at any point later in the code.******  ***###
    A.4.2 `filter()`'
  prefs: []
  type: TYPE_NORMAL
- en: We use `filter()` to pick particular rows of a dataset. For instance, we might
    be only interested in politicians that became prime minister.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE26]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE27]*  *We could also give `filter()` two conditions. For instance, we
    could look at politicians that become prime minister and were named Joseph, using
    the “and” operator `&`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE28]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE29]*  *We get the same result if we use a comma instead of an ampersand.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE30]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE31]*  *Similarly, we could look at politicians who were named, say, Myles
    or Ruth using the “or” operator `|`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE32]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE33]*  *We could also pipe the result. For instance we could pipe from
    `filter()` to `select()`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE34]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE35]*  *If we happen to know the particular row number that is of interest
    then we could `filter()` to only that particular row. For instance, say the row
    853 was of interest.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE36]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE37]*  *There is also a dedicated function to do this, which is `slice()`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE38]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE39]*  *While this may seem somewhat esoteric, it is especially useful
    if we would like to remove a particular row using negation, or duplicate specific
    rows. For instance, we could remove the first row.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE40]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE41]*  *We could also only, say, only keep the first three rows.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE42]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE43]*  *Finally, we could duplicate the first two rows and this takes advantage
    of `n()` which provides the current group size.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE44]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE45]**********  ***### A.4.3 `arrange()`'
  prefs: []
  type: TYPE_NORMAL
- en: We use `arrange()` to change the order of the dataset based on the values of
    particular columns. For instance, we could arrange the politicians by their birthday.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE46]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE47]*  *We could modify `arrange()` with `desc()` to change from ascending
    to descending order.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE48]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE49]*  *This could also be achieved with the minus sign.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE50]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE51]*  *And we could arrange based on more than one column. For instance,
    if two politicians have the same first name, then we could also arrange based
    on their birthday.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE52]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE53]*  *We could achieve the same result by piping between two instances
    of `arrange()`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE54]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE55]*  *When we use `arrange()` we should be clear about precedence. For
    instance, changing to birthday and then first name would give a different arrangement.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE56]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE57]*  *A nice way to arrange by a variety of columns is to use `across()`.
    It enables us to use the “selection helpers” such as `starts_with()` that were
    mentioned in association with `select()`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE58]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE59]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE60]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE61]********  ***### A.4.4 `mutate()`'
  prefs: []
  type: TYPE_NORMAL
- en: We use `mutate()` when we want to make a new column. For instance, perhaps we
    want to make a new column that is 1 if a person was both a member and a senator
    and 0 otherwise. That is to say that our new column would denote politicians that
    served in both the upper and the lower house.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE62]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE63]*  *We could use `mutate()` with math, such as addition and subtraction.
    For instance, we could calculate the age that the politicians are (or would have
    been) in 2022.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE64]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE65]*  *There are a variety of functions that are especially useful when
    constructing new columns. These include `log()` which will compute the natural
    logarithm, `lead()` which will bring values up by one row, `lag()` which will
    push values down by one row, and `cumsum()` which creates a cumulative sum of
    the column.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE66]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE67]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE68]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE69]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE70]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE71]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE72]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE73]****  ***As we have in earlier examples, we can also use `mutate()`
    in combination with `across()`. This includes the potential use of the selection
    helpers. For instance, we could count the number of characters in both the first
    and last names at the same time.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE74]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE75]*  *Finally, we use `case_when()` when we need to make a new column
    on the basis of more than two conditional statements (in contrast to `if_else()`
    from our first `mutate()` example). For instance, we may have some years and want
    to group them into decades.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE76]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE77]*  *We could accomplish this with a series of nested `if_else()` statements,
    but `case_when()` is more clear. The cases are evaluated in order and as soon
    as there is a match `case_when()` does not continue to the remainder of the cases.
    It can be useful to have a catch-all at the end that will signal if there is a
    potential issue that we might like to know about if the code were to ever get
    there.*******  ***### A.4.5 `summarise()`'
  prefs: []
  type: TYPE_NORMAL
- en: We use `summarise()` when we would like to make new, condensed, summary variables.
    For instance, perhaps we would like to know the minimum, average, and maximum
    of some column.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE78]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE79]*  *As an aside, `summarise()` and `summarize()` are equivalent and
    we can use either. In this book we use `summarise()`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE80]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE81]*  *By default, `summarise()` will provide one row of output for a
    whole dataset. For instance, in the earlier example we found the youngest, oldest,
    and average across all politicians. However, we can create more groups in our
    dataset using `.by` within the function. We can use many functions on the basis
    of groups, but the `summarise()` function is particularly powerful in conjunction
    with `.by`. For instance, we could group by gender, and then get age-based summary
    statistics.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE82]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE83]*  *Similarly, we could look at youngest, oldest, and mean age at death
    by gender.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE84]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE85]*  *And so we learn that female members of parliament on average lived
    slightly longer than male members of parliament.'
  prefs: []
  type: TYPE_NORMAL
- en: We can use `.by` on the basis of more than one group. For instance, we could
    look at the average number of days lived by gender and by they were in the House
    of Representatives or the Senate.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE86]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE87]*  *We can use `count()` to create counts by groups. For instance,
    the number of politicians by gender.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE88]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE89]*  *In addition to the `count()`, we could calculate a proportion.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE90]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE91]*  *Using `count()` is essentially the same as using `.by` within `summarise()`
    with `n()`, and we get the same result in that way.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE92]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE93]*  *And there is a comparably helpful function that acts similarly
    to`mutate()`, which is `add_count()`. The difference is that the number will be
    added in a new column.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE94]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE95]***********************  ***## A.5 Base R'
  prefs: []
  type: TYPE_NORMAL
- en: While the `tidyverse` was established relatively recently to help with data
    science, `R` existed long before this. There is a host of functionality that is
    built into `R` especially around the core needs of programming and statisticians.
  prefs: []
  type: TYPE_NORMAL
- en: 'In particular, we will cover:'
  prefs: []
  type: TYPE_NORMAL
- en: '`class()`.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Data simulation.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`function()`, `for()`, and `apply()`.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: There is no need to install or load any additional packages, as this functionality
    comes with R.
  prefs: []
  type: TYPE_NORMAL
- en: A.5.1 `class()`
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: In everyday usage “a, b, c, …” are letters and “1, 2, 3,…” are numbers. And
    we use letters and numbers differently; for instance, we do not add or subtract
    letters. Similarly, `R` needs to have some way of distinguishing different classes
    of content and to define the properties that each class has, “how it behaves,
    and how it relates to other types of objects” ([Wickham 2019](99-references.html#ref-advancedr)).
  prefs: []
  type: TYPE_NORMAL
- en: Classes have a hierarchy. For instance, we are “human”, which is itself “animal”.
    All “humans” are “animals”, but not all “animals” are “humans”. Similarly, all
    integers are numbers, but not all numbers are integers. We can find out the class
    of an object in `R` with `class()`.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE96]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE97]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE98]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE99]**  **The classes that we cover here are “numeric”, “character”, “factor”,
    “date”, and “data.frame”.'
  prefs: []
  type: TYPE_NORMAL
- en: The first thing to know is that, in the same way that a frog can become a prince,
    we can sometimes change the class of an object in R. This is called “casting”.
    For instance, we could start with a “numeric”, change it to a “character” with
    `as.character()`, and then a “factor” with `as.factor()`. But if we tried to make
    it into a “date” with `as.Date()` we would get an error because no all numbers
    have the properties that are needed to be a date.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE100]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE101]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE102]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE103]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE104]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE105]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE106]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE107]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE108]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE109]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE110]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE111]******  ***Compared with “numeric” and “character” classes, the “factor”
    class might be less familiar. A “factor” is used for categorical data that can
    only take certain values ([Wickham 2019](99-references.html#ref-advancedr)). For
    instance, typical usage of a “factor” variable would be a binary, such as “day”
    or “night”. It is also often used for age-groups, such as “18-29”, “30-44”, “45-60”,
    “60+” (as opposed to age, which would often be a “numeric”); and sometimes for
    level of education: “less than high school”, “high school”, “college”, “undergraduate
    degree”, “postgraduate degree”. We can find the allowed levels for a “factor”
    using `levels()`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE112]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE113]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE114]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE115]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE116]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE117]***  ***Dates are an especially tricky class and quickly become complicated.
    Nonetheless, at a foundational level, we can use `as.Date()` to convert a character
    that looks like a “date” into an actual “date”. This enables us to, say, perform
    addition and subtraction, when we would not be able to do that with a “character”.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE118]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE119]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE120]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE121]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE122]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE123]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE124]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE125]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE126]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE127]*****  ***The final class that we discuss here is “data.frame”. This
    looks like a spreadsheet and is commonly used to store the data that we will analyze.
    Formally, “a data frame is a list of equal-length vectors” ([Wickham 2019](99-references.html#ref-advancedr)).
    It will have column and row names which we can see using `colnames()` and `rownames()`,
    although often the names of the rows are just numbers.'
  prefs: []
  type: TYPE_NORMAL
- en: To illustrate this, we use the “ResumeNames” dataset from `AER` ([Kleiber and
    Zeileis 2008](99-references.html#ref-citeaer)). This package can be installed
    in the same way as any other package from CRAN. This dataset comprises cross-sectional
    data about resume content, especially the name used on the resume, and associated
    information about whether the candidate received a call-back for 4,870 fictitious
    resumes. The dataset was created by Bertrand and Mullainathan ([2004](99-references.html#ref-bertrand2004emily))
    who sent fictitious resumes in response to job advertisements in Boston and Chicago
    that differed in whether the resume was assigned a “very African American sounding
    name or a very White sounding name”. They found considerable discrimination whereby
    “White names receive 50 per cent more callbacks for interviews”. Hangartner, Kopp,
    and Siegenthaler ([2021](99-references.html#ref-hangartner2021monitoring)) generalize
    this using an online Swiss platform and find that immigrants and minority ethnic
    groups are contacted less by recruiters, as are women when the profession is men-dominated,
    and vice versa.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE128]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE129]'
  prefs: []
  type: TYPE_NORMAL
- en: '*[PRE130]'
  prefs: []
  type: TYPE_NORMAL
- en: '*[PRE131]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE132]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE133]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE134]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE135]***  ***We can examine the class of the vectors, i.e. the columns,
    that make-up a data frame by specifying the column name.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE136]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE137]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE138]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE139]**  **Sometimes it is helpful to be able to change the classes of
    many columns at once. We can do this by using `mutate()` and `across()`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE140]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE141]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE142]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE143]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE144]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE145]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE146]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE147]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE148]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE149]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE150]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE151]******  ***There are many ways for code to not run but having an issue
    with the class is always among the first things to check. Common issues are variables
    that we think should be “character” or “numeric” actually being “factor”. And
    variables that we think should be “numeric” actually being “character”.'
  prefs: []
  type: TYPE_NORMAL
- en: Finally, it is worth pointing out that the class of a vector is whatever the
    class of the content. In Python and other languages, a similar data structure
    to a vector is a “list”. A “list” is a class of its own, and the objects in a
    “list” have their own classes (for instance, `["a", 1]` is an object of class
    “list” with entries of class “string” and “int”). This may be counter-intuitive
    to see that a vector is not its own class if you are coming to `R` from another
    language.*********************  ***### A.5.2 Simulating data
  prefs: []
  type: TYPE_NORMAL
- en: 'Simulating data is a key skill for telling believable stories with data. In
    order to simulate data, we need to be able to randomly draw from statistical distributions
    and other collections. `R` has a variety of functions to make this easier, including:
    the normal distribution, `rnorm()`; the uniform distribution, `runif()`; the Poisson
    distribution, `rpois()`; the binomial distribution, `rbinom()`; and many others.
    To randomly sample from a collection of items, we can use `sample()`.'
  prefs: []
  type: TYPE_NORMAL
- en: When dealing with randomness, the need for reproducibility makes it important,
    paradoxically, that the randomness is repeatable. That is to say, another person
    needs to be able to draw the random numbers that we draw. We do this by setting
    a seed for our random draws using `set.seed()`.
  prefs: []
  type: TYPE_NORMAL
- en: We could get observations from the standard normal distribution and put the
    those into a data frame.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE152]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE153]*  *We could then add draws from the uniform, Poisson, and binomial
    distributions, using `cbind()` to bring the columns of the original dataset and
    the new one together.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE154]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE155]*  *Finally, we will add a favorite color to each observation with
    `sample()`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE156]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE157]*  *We set the option “replace” to “TRUE” because we are only choosing
    between two items, but each time we choose we want the possibility that either
    are chosen. Depending on the simulation we may need to think about whether “replace”
    should be “TRUE” or “FALSE”. Another useful optional argument in `sample()` is
    to adjust the probability with which each item is drawn. The default is that all
    options are equally likely, but we could specify particular probabilities if we
    wanted to with “prob”. As always with functions, we can find more in the help
    file, for instance `?sample`.***  ***### A.5.3 `function()`, `for()`, and `apply()`'
  prefs: []
  type: TYPE_NORMAL
- en: '`R` “is a functional programming language” ([Wickham 2019](99-references.html#ref-advancedr)).
    This means that we foundationally write, use, and compose functions, which are
    collections of code that accomplish something specific.'
  prefs: []
  type: TYPE_NORMAL
- en: There are a lot of functions in `R` that other people have written, and we can
    use. Almost any common statistical or data science task that we might need to
    accomplish likely already has a function that has been written by someone else
    and made available to us, either as part of the base `R` installation or a package.
    But we will need to write our own functions from time to time, especially for
    more-specific tasks. We define a function using `function()`, and then assign
    a name. We will likely need to include some inputs and outputs for the function.
    Inputs are specified between round brackets. The specific task that the function
    is to accomplish goes between braces.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE158]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE159]*  *We can specify defaults for the inputs in case the person using
    the function does not supply them.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE160]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE161]*  *One common scenario is that we want to apply a function multiple
    times. Like many programming languages, we can use a `for()` loop for this. The
    look of a `for()` loop in `R` is similar to `function()`, in that we define what
    we are iterating over in the round brackets, and the function to apply in braces.'
  prefs: []
  type: TYPE_NORMAL
- en: Because `R` is a programming language that is focused on statistics, we are
    often interested in arrays or matrices. We use `apply()` to apply a function to
    rows (“MARGIN = 1”) or columns (“MARGIN = 2”).
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE162]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE163]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE164]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE165]**********  ***## A.6 Making graphs with `ggplot2`'
  prefs: []
  type: TYPE_NORMAL
- en: If the key package in the `tidyverse` in terms of manipulating data is `dplyr`
    ([Wickham et al. 2022](99-references.html#ref-citedplyr)), then the key package
    in the `tidyverse` in terms of creating graphs is `ggplot2` ([Wickham 2016](99-references.html#ref-citeggplot)).
    We will have more to say about graphing in [Chapter 5](05-graphs_tables_maps.html),
    but here we provide a quick tour of some essentials. `ggplot2` works by defining
    layers which build to form a graph, based around the “grammar of graphics” (hence,
    the “gg”). Instead of the pipe operator (`|>`) `ggplot2` uses the add operator
    `+`. As part of the `tidyverse` collection of packages, `ggplot2` does not need
    to be explicitly installed or loaded if the `tidyverse` has been loaded.
  prefs: []
  type: TYPE_NORMAL
- en: 'There are three key aspects that need to be specified to build a graph with
    `ggplot2`:'
  prefs: []
  type: TYPE_NORMAL
- en: Data;
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Aesthetics / mapping; and
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Type.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To get started we will obtain some GDP data for countries in the Organisation
    for Economic Co-operation and Development (OECD) ([OECD 2022](99-references.html#ref-citeoecdgdp)).
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE166]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE167]'
  prefs: []
  type: TYPE_NORMAL
- en: 'We are interested, firstly, in making a bar chart of GDP change in the third
    quarter of 2021 for ten countries: Australia, Canada, Chile, Indonesia, Germany,
    Great Britain, New Zealand, South Africa, Spain, and the US.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE168]'
  prefs: []
  type: TYPE_PRE
- en: '*We start with `ggplot()` and specify a mapping/aesthetic, which in this case
    means specifying the x-axis and the y-axis. The first argument in `ggplot()` is
    the data we want to visualize, so we can use the pipe operator at this stage as
    usual.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE169]'
  prefs: []
  type: TYPE_PRE
- en: '*![](../Images/3ab5cd9bf2a580f54a50c1e557eadd7e.png)*  *Now we need to specify
    the type of graph that we are interested in. In this case we want a bar chart
    and we do this by adding `geom_bar()` using `+`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE170]'
  prefs: []
  type: TYPE_PRE
- en: '*![](../Images/00fed5ecac75556ba0a2dda969d77c48.png)*  *We can color the bars
    by whether the country is European by adding another aesthetic, “fill”.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE171]'
  prefs: []
  type: TYPE_PRE
- en: '*![](../Images/cdef6788b7eaffd8e73e9a1e957f7e34.png)*  *Finally, we could make
    it look nicer by: adding labels, `labs()`; changing the color, `scale_fill_brewer()`;
    and the background, `theme_classic()`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE172]'
  prefs: []
  type: TYPE_PRE
- en: '*![](../Images/9019b8dfaacb6d58cf10041dd12f08fb.png)*  *Facets enable us to
    that we create subplots that focus on specific aspects of our data. They are invaluable
    because they allow us to add another variable to a graph without having to make
    a 3D graph. We use `facet_wrap()` to add facets and specify the variable that
    we would like to facet by. In this case, we facet by hemisphere.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE173]'
  prefs: []
  type: TYPE_PRE
- en: '*![](../Images/5241ba5abcefaebe0ab617293d7237f8.png)*******  ***## A.7 Exploring
    the `tidyverse`'
  prefs: []
  type: TYPE_NORMAL
- en: 'We have focused on two aspects of the `tidyverse`: `dplyr`, and `ggplot2`.
    However, the `tidyverse` comprises a variety of different packages and functions.
    We will now go through four common aspects:'
  prefs: []
  type: TYPE_NORMAL
- en: Importing data and `tibble()`;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Joining and pivoting datasets;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: String manipulation and `stringr`;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Factor variables and `forcats`.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'However, the first task is to deal with the nomenclature, and in particular
    to be specific about what is “tidy” about the “tidyverse”. The name refers to
    tidy data, and the benefit of that is that while there are a variety of ways for
    data to be messy, tidy data satisfy three rules. This means the structure of the
    datasets is consistent regardless of the specifics, and makes it easier to apply
    functions that expect certain types of input. Tidy data refers to a dataset where
    ([Wickham, Çetinkaya-Rundel, and Grolemund [2016] 2023](99-references.html#ref-r4ds);
    [Wickham 2014, 4](99-references.html#ref-wickham2014tidy)):'
  prefs: []
  type: TYPE_NORMAL
- en: Every variable is in a column of its own.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Every observation is in its own row.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Every value is in its own cell.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Table A.1](#tbl-nottidydata) is not tidy because age and hair share a column.
    [Table A.2](#tbl-tidydata) is its tidy counterpart.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Table A.1: Example of data that are not tidy'
  prefs: []
  type: TYPE_NORMAL
- en: '| Person | Variable | Value |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| Rohan | Age | 35 |'
  prefs: []
  type: TYPE_TB
- en: '| Rohan | Hair | Black |'
  prefs: []
  type: TYPE_TB
- en: '| Monica | Age | 35 |'
  prefs: []
  type: TYPE_TB
- en: '| Monica | Hair | Blonde |'
  prefs: []
  type: TYPE_TB
- en: '| Edward | Age | 3 |'
  prefs: []
  type: TYPE_TB
- en: '| Edward | Hair | Brown |'
  prefs: []
  type: TYPE_TB
- en: '| Hugo | Age | 1 |'
  prefs: []
  type: TYPE_TB
- en: '| Hugo | Hair | Blonde |'
  prefs: []
  type: TYPE_TB
- en: 'Table A.2: Example of tidy data'
  prefs: []
  type: TYPE_NORMAL
- en: '| Person | Age | Hair |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| Rohan | 35 | Black |'
  prefs: []
  type: TYPE_TB
- en: '| Monica | 35 | Blonde |'
  prefs: []
  type: TYPE_TB
- en: '| Edward | 3 | Brown |'
  prefs: []
  type: TYPE_TB
- en: '| Hugo | 1 | Blonde |'
  prefs: []
  type: TYPE_TB
- en: A.7.1 Importing data and `tibble()`
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: There are a variety of ways to get data into `R` so that we can use it. For
    CSV files, there is `read_csv()` from `readr` ([Wickham, Hester, and Bryan 2022](99-references.html#ref-citereadr)),
    and for Stata files, there is `read_dta()` from `haven` ([Wickham, Miller, and
    Smith 2023](99-references.html#ref-citehaven)).
  prefs: []
  type: TYPE_NORMAL
- en: CSVs are a common format and have many advantages including the fact that they
    typically do not modify the data. Each column is separated by a comma, and each
    row is a record. We can provide `read_csv()` with a URL or a local file to read.
    There are a variety of different options that can be passed to `read_csv()` including
    the ability to specify whether the dataset has column names, the types of the
    columns, and how many lines to skip. If we do not specify the types of the columns
    then `read_csv()` will make a guess by looking at the dataset.
  prefs: []
  type: TYPE_NORMAL
- en: We use `read_dta()` to read .dta files, which are commonly produced by the statistical
    program Stata. This means that they are common in fields such as sociology, political
    science, and economics. This format separates the data from its labels and so
    we typically reunite these using `to_factor()` from `labelled` ([Larmarange 2023](99-references.html#ref-citelabelled)).
    `haven` is part of the `tidyverse`, but is not automatically loaded by default,
    in contrast to a package such as `ggplot2`, and so we would need to run `library(haven)`.
  prefs: []
  type: TYPE_NORMAL
- en: Typically a dataset enters `R` as a “data.frame”. While this can be useful,
    another helpful class for a dataset is “tibble”. These can be created using `tibble()`
    from `tibble`, which is part of the `tidyverse`. A tibble is a data frame, with
    some particular changes that make it easier to work with, including not converting
    strings to factors by default, showing the class of columns, and printing nicely.
  prefs: []
  type: TYPE_NORMAL
- en: We can make a tibble manually, if need be, for instance, when we simulate data.
    But we typically import data directly as a tibble, for instance, when we use `read_csv()`.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE174]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE175]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE176]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE177]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE178]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE179]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE180]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE181]****  ***### A.7.2 Dataset manipulation with joins and pivots'
  prefs: []
  type: TYPE_NORMAL
- en: 'There are two dataset manipulations that are often needed: joins and pivots.'
  prefs: []
  type: TYPE_NORMAL
- en: We often have a situation where we have two, or more, datasets and we are interested
    in combining them. We can join datasets together in a variety of ways. A common
    way is to use `left_join()` from `dplyr` ([Wickham et al. 2022](99-references.html#ref-citedplyr)).
    This is most useful where there is one main dataset that we are using and there
    is another dataset with some useful variables that we want to add to that. The
    critical aspect is that we have a column or columns that we can use to link the
    two datasets. Here we will create two tibbles and then join them on the basis
    of names.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE182]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE183]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE184]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE185]'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE186]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE187]***  ***There are a variety of other options to join datasets, including
    `inner_join()`, `right_join()`, and `full_join()`.'
  prefs: []
  type: TYPE_NORMAL
- en: Another common dataset manipulation task is pivoting them. Datasets tend to
    be either long or wide. Long data means that each variable is on a row, and so
    possibly there is repetition, whereas with wide data each variable is a column
    and so there is typically little repetition ([Wickham 2009](99-references.html#ref-Wickham2009)).
    For instance, “anscombe” is wide, and “anscombe_long” is long.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE188]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE189]*  *[PRE190]'
  prefs: []
  type: TYPE_NORMAL
- en: '*[PRE191]*  *Generally, in the `tidyverse`, and certainly for `ggplot2`, we
    need long data. To go from one to the other we use `pivot_longer()` and `pivot_wider()`
    from `tidyr` ([Wickham, Vaughan, and Girlich 2023](99-references.html#ref-citetidyr)).'
  prefs: []
  type: TYPE_NORMAL
- en: We will create some wide data on whether “mark” or “lauren” won a running race
    in each of three years.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE192]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE193]*  *This dataset is in wide format at the moment. To get it into long
    format, we need a column that specifies the person, and another that specifies
    the result. We use `pivot_longer()` to achieve this.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE194]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE195]*  *Occasionally, we need to go from long data to wide data. We use
    `pivot_wider()` to do this.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE196]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE197]********  ***### A.7.3 String manipulation and `stringr`'
  prefs: []
  type: TYPE_NORMAL
- en: In `R` we often create a string with double quotes, although using single quotes
    works too. For instance `c("a", "b")` consists of two strings “a” and “b”, that
    are contained in a character vector. There are a variety of ways to manipulate
    strings in `R` and we focus on `stringr` ([Wickham 2022](99-references.html#ref-citestringr)).
    This is automatically loaded when we load the `tidyverse`.
  prefs: []
  type: TYPE_NORMAL
- en: If we want to look for whether a string contains certain content, then we can
    use `str_detect()`. And if we want to remove or change some particular content
    then we can use `str_remove()` or `str_replace()`.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE198]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE199]*  *There are a variety of other functions that are often especially
    useful in data cleaning. For instance, we can use `str_length()` to find out how
    long a string is, and `str_c()` to bring strings together.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE200]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE201]*  *Finally, `separate()` from `tidyr`, although not part of `stringr`,
    is indispensable for string manipulation. It turns one character column into many.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE202]'
  prefs: []
  type: TYPE_PRE
- en: '*[PRE203]***  ***### A.7.4 Factor variables and `forcats`'
  prefs: []
  type: TYPE_NORMAL
- en: 'A factor is a collection of strings that are categories. Sometimes there will
    be an inherent ordering. For instance, the days of the week have an order – Monday,
    Tuesday, Wednesday, … – which is not alphabetical. But there is no requirement
    for that to be the case, for instance pregnancy status: pregnant or not pregnant.
    Factors feature prominently in base R. They can be useful because they ensure
    that only appropriate strings are allowed. For instance, if “days_of_the_week”
    was a factor variable then “January” would not be allowed. But they can add a
    great deal of complication, and so they have a less prominent role in the `tidyverse`.
    Nonetheless taking advantage of factors is useful in certain circumstances. For
    instance, when plotting the days of the week we probably want them in the usual
    ordering than in the alphabetical ordering that would result if we had them as
    a character variable. While factors are built into base R, one `tidyverse` package
    that is especially useful when using factors is `forcats` ([Wickham 2023](99-references.html#ref-citeforcats)).'
  prefs: []
  type: TYPE_NORMAL
- en: 'Sometimes we have a character vector, and we will want it ordered in a particular
    way. The default is that a character vector is ordered alphabetically, but we
    may not want that. For instance, the days of the week would look strange on a
    graph if they were alphabetically ordered: Friday, Monday, Saturday, Sunday, Thursday,
    Tuesday, and Wednesday!'
  prefs: []
  type: TYPE_NORMAL
- en: The way to change the ordering is to change the variable from a character to
    a factor. We can use `fct_relevel()` from `forcats` ([Wickham 2023](99-references.html#ref-citeforcats))
    to specify an ordering.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE204]'
  prefs: []
  type: TYPE_PRE
- en: '*And we can compare the results by graphing first with the original character
    vector on the x-axis, and then another graph with the factor vector on the x-axis.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE205]'
  prefs: []
  type: TYPE_PRE
- en: '*![](../Images/1f621a0c6950ab80d84b56cb6bba0702.png)'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/5148b26746aa4472e6831204ee97cea1.png)***********  ***## A.8 Exercises'
  prefs: []
  type: TYPE_NORMAL
- en: Practice
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '*(Plan)* Consider the following scenario: *A person is interested in whether
    kings or queens live longer, and for every monarch they gather data about how
    long they lived.* Please sketch what that dataset could look like, and then sketch
    a graph that you could build to show all observations.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '*(Simulate)* Please further consider the scenario described, assume there are
    1,000 monarchs, and decide which of the following could be used to simulate the
    situation (select all that apply)?'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`runif(n = 1000, min = 1, max = 110) |> floor()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`rpois(n = 1000, lambda = 65)`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`rnorm(n = 1000) |> floor()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`sample(x = sunspot.month, size = 1000, replace = TRUE) |> floor()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '*(Acquire)* Please identify one possible source of actual data about how long
    monarchs lived for.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '*(Explore)* Assume that `tidyverse` is loaded and the dataset “monarchs” has
    the column “years”. Which of the following would result only those monarchs that
    lived longer than 35 years (pick one)?'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`monarchs |> arrange(years > 35)`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`monarchs |> select(years > 35)`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`monarchs |> filter(years > 35)`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`monarchs |> mutate(years > 35)`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '*(Communicate)* Please write two paragraphs as if you had gathered data from
    that source, and had built a graph. The exact details contained in the paragraphs
    do not have to be factual (i.e. you do not actually have to get the data nor create
    the graphs).'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Quiz
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: What is `R` (pick one)?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A open-source statistical programming language
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: A programming language created by Guido van Rossum
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: A closed source statistical programming language
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: An integrated development environment (IDE)
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: What are three advantages of R? What are three disadvantages?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: What is RStudio?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: An integrated development environment (IDE).
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: A closed source paid program.
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: A programming language created by Guido van Rossum
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: A statistical programming language.
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: What is the class of the output of `2 + 2` (pick one)?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: character
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: factor
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: numeric
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: date
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Say we had run: `my_name <- "rohan"`. What would be the result of running `print(my_name)`
    (pick one)?'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: “edward”
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: “monica”
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: “hugo”
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: “rohan”
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Say we had a dataset with two columns: “name”, and “age”. Which verb should
    we use to pick just “name” (pick one)?'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`select()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`mutate()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`filter()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`rename()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Say we had loaded `AustralianPoliticians` and `tidyverse` and then run the
    following code: `australian_politicians <- get_auspol("all")`. How could we select
    all of the columns that end with “Name” (pick one)?'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`australian_politicians |> select(contains("Name"))`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`australian_politicians |> select(starts_with("Name"))`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`australian_politicians |> select(matches("Name"))`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`australian_politicians |> select(ends_with("Name"))`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Under what circumstances, in terms of the names of the columns, would the use
    of `contains()` potentially give different answers to using `ends_with()` in the
    above question?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Which of the following are not `tidyverse` verbs (pick one)?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`select()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`filter()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`arrange()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`mutate()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`visualize()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Which function would make a new column (pick one)?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`select()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`filter()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`arrange()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`mutate()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`visualize()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Which function would focus on particular rows (pick one)?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`select()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`filter()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`arrange()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`mutate()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`summarise()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Which combination of two could provide a mean of a dataset, by sex (pick two)?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`summarise()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`filter()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`arrange()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`mutate()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`.by`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Assume a variable called “age” is an integer. Which line of code would create
    a column that is its exponential (pick one)?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`generate(exp_age = exp(age))`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`change(exp_age = exp(age))`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`make(exp_age = exp(age))`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`mutate(exp_age = exp(age))`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Assume a column called “age”. Which line of code could create a column that
    contains the value from five rows above?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`mutate(five_before = lag(age))`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`mutate(five_before = lead(age))`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`mutate(five_before = lag(age, n = 5))`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`mutate(five_before = lead(age, n = 5))`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: What would be the output of `class("edward")` (pick one)?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: “numeric”
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: “character”
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: “data.frame”
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: “vector”
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Which function would enable us to draw once from three options “blue, white,
    red”, with 10 per cent probability on “blue” and “white”, and the remainder on
    “red”?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`sample(c("blue", "white", "red"), prob = c(0.1, 0.1, 0.8))`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`sample(c("blue", "white", "red"), size = 1)`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`sample(c("blue", "white", "red"), size = 1, prob = c(0.8, 0.1, 0.1))`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`sample(c("blue", "white", "red"), size = 1, prob = c(0.1, 0.1, 0.8))`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Which code simulates 10,000 draws from a normal distribution with a mean of
    27 and a standard deviation of 3 (pick one)?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`rnorm(10000, mean = 27, sd = 3)`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`rnorm(27, mean = 10000, sd = 3)`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`rnorm(3, mean = 10000, sd = 27)`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`rnorm(27, mean = 3, sd = 1000)`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: What are the three key aspects of the grammar of graphics (select all)?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: data
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: aesthetics
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: type
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '`geom_histogram()`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Activity
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: I think we should be suspicious when we find ourselves attracted to data—very,
    very thin and weak data—that seem to justify beliefs that have held great currency
    in lots of societies throughout history, in a way that is conducive to the oppression
    of large segments of the population.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Amia Srinivasan ([Cowen 2021](99-references.html#ref-conversationswithamiasrinivasan))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Reflect on the quote from Amia Srinivasan, Chichele Professor of Social and
    Political Theory, All Souls College, Oxford, and D’Ignazio and Klein ([2020](99-references.html#ref-datafeminism2020)),
    especially Chapter 6.
  prefs: []
  type: TYPE_NORMAL
- en: Please create a GitHub repository with a meaningful name, and appropriate structure,
    and use a reproducible Quarto file to create a PDF of at least two pages (not
    including references) discussing those quotes in relation to a dataset that you
    are familiar with. Submit a link to the PDF file e.g. https://github.com/RohanAlexander/starter_folder/blob/main/outputs/paper/paper.pdf
    and the PDF itself.
  prefs: []
  type: TYPE_NORMAL
- en: 'Alexander, Rohan, and Paul Hodgetts. 2021\. *AustralianPoliticians: Provides
    Datasets About Australian Politicians*. [https://CRAN.R-project.org/package=AustralianPoliticians](https://CRAN.R-project.org/package=AustralianPoliticians).Bache,
    Stefan Milton, and Hadley Wickham. 2022\. *magrittr: A Forward-Pipe Operator for
    R*. [https://CRAN.R-project.org/package=magrittr](https://CRAN.R-project.org/package=magrittr).Bertrand,
    Marianne, and Sendhil Mullainathan. 2004\. “Are Emily and Greg More Employable
    Than Lakisha and Jamal? A Field Experiment on Labor Market Discrimination.” *American
    Economic Review* 94 (4): 991–1013\. [https://doi.org/10.1257/0002828042002561](https://doi.org/10.1257/0002828042002561).Buja,
    Andreas, Dianne Cook, Heike Hofmann, Michael Lawrence, Eun-Kyung Lee, Deborah
    F. Swayne, and Hadley Wickham. 2009\. “Statistical Inference for Exploratory Data
    Analysis and Model Diagnostics.” *Philosophical Transactions of the Royal Society
    A: Mathematical, Physical and Engineering Sciences* 367 (1906): 4361–83\. [https://doi.org/10.1098/rsta.2009.0120](https://doi.org/10.1098/rsta.2009.0120).Buja,
    Andreas, Dianne Cook, and Deborah Swayne. 1996\. “Interactive High-Dimensional
    Data Visualization.” *Journal of Computational and Graphical Statistics* 5 (1):
    78–99\. [https://doi.org/10.2307/1390754](https://doi.org/10.2307/1390754).Cook,
    Dianne, Andreas Buja, Javier Cabrera, and Catherine Hurley. 1995\. “Grand Tour
    and Projection Pursuit.” *Journal of Computational and Graphical Statistics* 4
    (3): 155–72\. [https://doi.org/10.1080/10618600.1995.10474674](https://doi.org/10.1080/10618600.1995.10474674).Cook,
    Dianne, and Deborah Swayne. 2007\. *Interactive and Dynamic Graphics for Data
    Analysis: With R and GGobi*. 1st ed. Springer.Cowen, Tyler. 2021\. “Episode 132:
    Amia Srinivasan on Utopian Feminism.” *Conversations with Tyler*, September. [https://conversationswithtyler.com/episodes/amia-srinivasan/](https://conversationswithtyler.com/episodes/amia-srinivasan/).D’Ignazio,
    Catherine, and Lauren Klein. 2020\. *Data Feminism*. Massachusetts: The MIT Press.
    [https://data-feminism.mitpress.mit.edu](https://data-feminism.mitpress.mit.edu).Firke,
    Sam. 2023\. *janitor: Simple Tools for Examining and Cleaning Dirty Data*. [https://CRAN.R-project.org/package=janitor](https://CRAN.R-project.org/package=janitor).Grolemund,
    Garrett, and Hadley Wickham. 2011\. “Dates and Times Made Easy with lubridate.”
    *Journal of Statistical Software* 40 (3): 1–25\. [https://doi.org/10.18637/jss.v040.i03](https://doi.org/10.18637/jss.v040.i03).Hangartner,
    Dominik, Daniel Kopp, and Michael Siegenthaler. 2021\. “Monitoring Hiring Discrimination
    Through Online Recruitment Platforms.” *Nature* 589 (7843): 572–76\. [https://doi.org/10.1038/s41586-020-03136-0](https://doi.org/10.1038/s41586-020-03136-0).Healy,
    Kieran. 2020\. “The Kitchen Counter Observatory,” May. [https://kieranhealy.org/blog/archives/2020/05/21/the-kitchen-counter-observatory/](https://kieranhealy.org/blog/archives/2020/05/21/the-kitchen-counter-observatory/).Kleiber,
    Christian, and Achim Zeileis. 2008\. *Applied Econometrics with R*. New York:
    Springer-Verlag. [https://CRAN.R-project.org/package=AER](https://CRAN.R-project.org/package=AER).Larmarange,
    Joseph. 2023\. *labelled: Manipulating Labelled Data*. [https://CRAN.R-project.org/package=labelled](https://CRAN.R-project.org/package=labelled).Müller,
    Kirill, Tobias Schieferdecker, and Patrick Schratz. 2019\. *Visualization, Transformation
    and Reporting with the Tidyverse*. [https://krlmlr.github.io/vistransrep/](https://krlmlr.github.io/vistransrep/).Müller,
    Kirill, and Hadley Wickham. 2022\. *tibble: Simple Data Frames*. [https://CRAN.R-project.org/package=tibble](https://CRAN.R-project.org/package=tibble).OECD.
    2022\. *Quarterly GDP*. [https://data.oecd.org/gdp/quarterly-gdp.htm](https://data.oecd.org/gdp/quarterly-gdp.htm).R
    Core Team. 2024\. *R: A Language and Environment for Statistical Computing*. Vienna,
    Austria: R Foundation for Statistical Computing. [https://www.R-project.org/](https://www.R-project.org/).Thieme,
    Nick. 2018\. “R Generation.” *Significance* 15 (4): 14–19\. [https://doi.org/10.1111/j.1740-9713.2018.01169.x](https://doi.org/10.1111/j.1740-9713.2018.01169.x).Wickham,
    Hadley. 2009\. “Manipulating Data.” In *ggplot2*, 157–75\. Springer New York.
    [https://doi.org/10.1007/978-0-387-98141-3_9](https://doi.org/10.1007/978-0-387-98141-3_9).———.
    2014\. “Tidy Data.” *Journal of Statistical Software* 59 (1): 1–23\. [https://doi.org/10.18637/jss.v059.i10](https://doi.org/10.18637/jss.v059.i10).———.
    2016\. *ggplot2: Elegant Graphics for Data Analysis*. Springer-Verlag New York.
    [https://ggplot2.tidyverse.org](https://ggplot2.tidyverse.org).———. 2019\. *Advanced
    R*. 2nd ed. Chapman; Hall/CRC. [https://adv-r.hadley.nz](https://adv-r.hadley.nz).———.
    2020\. *Tidyverse*. [https://www.tidyverse.org/](https://www.tidyverse.org/).———.
    2022\. *stringr: Simple, Consistent Wrappers for Common String Operations*. [https://CRAN.R-project.org/package=stringr](https://CRAN.R-project.org/package=stringr).———.
    2023\. *forcats: Tools for Working with Categorical Variables (Factors)*. [https://CRAN.R-project.org/package=forcats](https://CRAN.R-project.org/package=forcats).Wickham,
    Hadley, Mara Averick, Jenny Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain
    François, Garrett Grolemund, et al. 2019\. “Welcome to the Tidyverse.” *Journal
    of Open Source Software* 4 (43): 1686\. [https://doi.org/10.21105/joss.01686](https://doi.org/10.21105/joss.01686).Wickham,
    Hadley, Mine Çetinkaya-Rundel, and Garrett Grolemund. (2016) 2023\. *R for Data
    Science*. 2nd ed. O’Reilly Media. [https://r4ds.hadley.nz](https://r4ds.hadley.nz).Wickham,
    Hadley, Romain François, Lionel Henry, and Kirill Müller. 2022\. *dplyr: A Grammar
    of Data Manipulation*. [https://CRAN.R-project.org/package=dplyr](https://CRAN.R-project.org/package=dplyr).Wickham,
    Hadley, Jim Hester, and Jenny Bryan. 2022\. *readr: Read Rectangular Text Data*.
    [https://CRAN.R-project.org/package=readr](https://CRAN.R-project.org/package=readr).Wickham,
    Hadley, Evan Miller, and Danny Smith. 2023\. *haven: Import and Export “SPSS”
    “Stata” and “SAS” Files*. [https://CRAN.R-project.org/package=haven](https://CRAN.R-project.org/package=haven).Wickham,
    Hadley, Davis Vaughan, and Maximilian Girlich. 2023\. *tidyr: Tidy Messy Data*.
    [https://CRAN.R-project.org/package=tidyr](https://CRAN.R-project.org/package=tidyr).*******************'
  prefs: []
  type: TYPE_NORMAL
